{"original_content": "**Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto-scaling 12-24 **Resource Allocation**: 4 vCPU, 8GB RAM per pod **Key Responsibilities**: - Parse and validate workflow definitions (JSON-based DSL) - Execute workflow steps with state machine pattern - Handle retries with exponential backoff (max 3 retries, backoff: 2^n seconds) - Coordinate parallel and sequential task execution - Manage workflow state persistence and recovery - Support for conditional branching and loops - Sub-workflow invocation and composition **Workflow Execution Model**: ``` Workflow Submitted \u2192 Validation \u2192 Queue in Kafka \u2502 \u25bc Workflow Engine picks up \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u25bc \u25bc \u25bc [Task 1 Exec] [Task 2 Exec] [Task 3 Exec] \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u25bc State Update \u2192 PostgreSQL \u2502 \u25bc Publish Event \u2192 Kafka ``` **Workflow DSL Example**: ```json { \"workflow_id\": \"customer-onboarding-v2\", \"version\": \"2.1.0\", \"steps\": [ { \"id\": \"validate-customer\", \"type\": \"http_request\", \"config\": { \"url\": \"https://validation.internal/verify\", \"method\": \"POST\", \"timeout\": 5000, \"retry\": {\"max_attempts\": 3, \"backoff\": \"exponential\"} } }, { \"id\": \"create-account\", \"type\": \"database_operation\", \"depends_on\": [\"validate-customer\"] } ] } ``` **State Management**: - Workflow states: PENDING, RUNNING, COMPLETED, FAILED, CANCELLED - Step states: QUEUED, EXECUTING, SUCCESS, FAILED, SKIPPED - State transitions stored in PostgreSQL with event sourcing pattern - Checkpointing every 10 steps for long-running workflows **Performance Targets**: - Simple workflow (3-5 steps): < 2 seconds (P99) - Complex workflow (20+ steps): < 5 seconds (P99) - Throughput: 500 concurrent workflow executions per pod --- ### Scheduler Service **Purpose**: Time-based workflow triggering system supporting cron-like schedules and one-time delayed executions.", "enhanced_content": "Resource Allocation, Key Responsibilities, Performance Targets, Scheduler Service, State Management, Execution Model, JSON-based DSL | TypeScript, Bull, PostgreSQL\n\n**Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto-scaling 12-24 **Resource Allocation**: 4 vCPU, 8GB RAM per pod **Key Responsibilities**: - Parse and validate workflow definitions (JSON-based DSL) - Execute workflow steps with state machine pattern - Handle retries with exponential backoff (max 3 retries, backoff: 2^n seconds) - Coordinate parallel and sequential task execution - Manage workflow state persistence and recovery - Support for conditional branching and loops - Sub-workflow invocation and composition **Workflow Execution Model**: ``` Workflow Submitted \u2192 Validation \u2192 Queue in Kafka \u2502 \u25bc Workflow Engine picks up \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u25bc \u25bc \u25bc [Task 1 Exec] [Task 2 Exec] [Task 3 Exec] \u2502 \u2502 \u2502 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502 \u25bc State Update \u2192 PostgreSQL \u2502 \u25bc Publish Event \u2192 Kafka ``` **Workflow DSL Example**: ```json { \"workflow_id\": \"customer-onboarding-v2\", \"version\": \"2.1.0\", \"steps\": [ { \"id\": \"validate-customer\", \"type\": \"http_request\", \"config\": { \"url\": \"https://validation.internal/verify\", \"method\": \"POST\", \"timeout\": 5000, \"retry\": {\"max_attempts\": 3, \"backoff\": \"exponential\"} } }, { \"id\": \"create-account\", \"type\": \"database_operation\", \"depends_on\": [\"validate-customer\"] } ] } ``` **State Management**: - Workflow states: PENDING, RUNNING, COMPLETED, FAILED, CANCELLED - Step states: QUEUED, EXECUTING, SUCCESS, FAILED, SKIPPED - State transitions stored in PostgreSQL with event sourcing pattern - Checkpointing every 10 steps for long-running workflows **Performance Targets**: - Simple workflow (3-5 steps): < 2 seconds (P99) - Complex workflow (20+ steps): < 5 seconds (P99) - Throughput: 500 concurrent workflow executions per pod --- ### Scheduler Service **Purpose**: Time-based workflow triggering system supporting cron-like schedules and one-time delayed executions.", "enrichment_type": "fast", "metadata": {"code_ratio": 0.35, "processing_time_ms": 45.89, "keyword_count": 10, "entity_count": 6}, "keywords": ["Resource Allocation", "Key Responsibilities", "Performance Targets", "Scheduler Service", "State Management", "Execution Model", "JSON-based DSL", "Execute workflow", "Manage workflow", "Simple workflow"], "questions": [], "summary": "", "entities": {"ORG": ["TypeScript", "Bull", "DSL", "RUNNING", "COMPLETED"], "GPE": ["PostgreSQL"]}, "contextual_prefix": ""}