{"original_content": "in\" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | \\ grep \"exec_7h3j6k9m2n\" ``` #### Rate Limiting ```bash # Find rate limit events kubectl logs -n cloudflow deployment/cloudflow-api | \\ grep -E \"429|rate.*limit|throttle\" # Count rate limit errors by hour kubectl logs -n cloudflow deployment/cloudflow-api --since=24h | \\ grep \"rate_limit_exceeded\" | \\ awk '{print $1}' | \\ cut -d'T' -f1-2 | \\ sort | uniq -c ``` ### Advanced Log Analysis #### Using jq for JSON Logs ```bash # Parse JSON logs and filter by level kubectl logs -n cloudflow deployment/cloudflow-api | \\ jq 'select(.level == \"ERROR\")' # Extract specific fields kubectl logs -n cloudflow deployment/cloudflow-api | \\ jq '{timestamp: .timestamp, level: .level, message: .message, execution_id: .context.execution_id}' # Filter by workflow ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | \\ jq 'select(.workflow_id == \"wf_9k2n4m8p1q\")' # Count errors by type kubectl logs -n cloudflow deployment/cloudflow-api --since=1h | \\ jq -r 'select(.level == \"ERROR\") | .error_type' | \\ sort | uniq -c | sort -rn ``` #### Correlation IDs CloudFlow uses correlation IDs to trace requests across services. ```bash # Extract correlation ID from error CORRELATION_ID=\"corr_8h4j9k2m5n\" # Trace request across all services for pod in $(kubectl get pods -n cloudflow -l tier=backend -o name); do echo \"=== $pod ===\" kubectl logs -n cloudflow $pod | grep $CORRELATION_ID done # Export full trace to file cloudflow debug trace $CORRELATION_ID --output trace-$CORRELATION_ID.json ``` ### Debugging Commands #### Enable Debug Mode for Workflow Execution ```bash # Execute workflow with debug logging cloudflow workflows execute wf_9k2n4m8p1q \\ --debug \\ --log-level TRACE \\ --output-logs /tmp/workflow-debug.log # Enable step-by-step execution cloudflow workflows execute wf_9k2n4m8p1q \\ --step-mode interactive \\ --breakpoint-on-error # Capture full execution context cloudflow workflows execute wf_9k2n4m8p1q \\ --capture-context \\ --context-output /tmp/execution-context.json ``` #### Database Query Debugging ```bash # Enable query logging cloudflow db config set log_statement all cloudflow db config set log_duration on cloudflow db config set log_min_duration_statement 1000 # Log queries > 1s # Capture query plan for slow endpoint cloudflow debug capture-queries \\ --endpoint \"/api/v1/workflows/list\" \\ --duration 60 \\ --output query-analysis.txt # Analyze query performance cloudflow db analyze-performance --last 1h ``` #### Network Debugging ```bash # Test connectivity from CloudFlow pod kubectl run -n cloudflow netdebug --rm -i --tty \\ --image=nicolaka/netshoot -- /bin/bash # Inside pod: # Check DNS resolution nslookup api.cloudflow.io # Check connectivity to", "enhanced_content": "cloudflow deployment, kubectl logs, Parse JSON, JSON Logs, Find rate, Count rate, rate limit | Find, Parse JSON, CloudFlow, TRACE\n\nin\" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | \\ grep \"exec_7h3j6k9m2n\" ``` #### Rate Limiting ```bash # Find rate limit events kubectl logs -n cloudflow deployment/cloudflow-api | \\ grep -E \"429|rate.*limit|throttle\" # Count rate limit errors by hour kubectl logs -n cloudflow deployment/cloudflow-api --since=24h | \\ grep \"rate_limit_exceeded\" | \\ awk '{print $1}' | \\ cut -d'T' -f1-2 | \\ sort | uniq -c ``` ### Advanced Log Analysis #### Using jq for JSON Logs ```bash # Parse JSON logs and filter by level kubectl logs -n cloudflow deployment/cloudflow-api | \\ jq 'select(.level == \"ERROR\")' # Extract specific fields kubectl logs -n cloudflow deployment/cloudflow-api | \\ jq '{timestamp: .timestamp, level: .level, message: .message, execution_id: .context.execution_id}' # Filter by workflow ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | \\ jq 'select(.workflow_id == \"wf_9k2n4m8p1q\")' # Count errors by type kubectl logs -n cloudflow deployment/cloudflow-api --since=1h | \\ jq -r 'select(.level == \"ERROR\") | .error_type' | \\ sort | uniq -c | sort -rn ``` #### Correlation IDs CloudFlow uses correlation IDs to trace requests across services. ```bash # Extract correlation ID from error CORRELATION_ID=\"corr_8h4j9k2m5n\" # Trace request across all services for pod in $(kubectl get pods -n cloudflow -l tier=backend -o name); do echo \"=== $pod ===\" kubectl logs -n cloudflow $pod | grep $CORRELATION_ID done # Export full trace to file cloudflow debug trace $CORRELATION_ID --output trace-$CORRELATION_ID.json ``` ### Debugging Commands #### Enable Debug Mode for Workflow Execution ```bash # Execute workflow with debug logging cloudflow workflows execute wf_9k2n4m8p1q \\ --debug \\ --log-level TRACE \\ --output-logs /tmp/workflow-debug.log # Enable step-by-step execution cloudflow workflows execute wf_9k2n4m8p1q \\ --step-mode interactive \\ --breakpoint-on-error # Capture full execution context cloudflow workflows execute wf_9k2n4m8p1q \\ --capture-context \\ --context-output /tmp/execution-context.json ``` #### Database Query Debugging ```bash # Enable query logging cloudflow db config set log_statement all cloudflow db config set log_duration on cloudflow db config set log_min_duration_statement 1000 # Log queries > 1s # Capture query plan for slow endpoint cloudflow debug capture-queries \\ --endpoint \"/api/v1/workflows/list\" \\ --duration 60 \\ --output query-analysis.txt # Analyze query performance cloudflow db analyze-performance --last 1h ``` #### Network Debugging ```bash # Test connectivity from CloudFlow pod kubectl run -n cloudflow netdebug --rm -i --tty \\ --image=nicolaka/netshoot -- /bin/bash # Inside pod: # Check DNS resolution nslookup api.cloudflow.io # Check connectivity to", "enrichment_type": "fast", "metadata": {"code_ratio": 0.12, "processing_time_ms": 76.93, "keyword_count": 10, "entity_count": 8}, "keywords": ["cloudflow deployment", "kubectl logs", "Parse JSON", "JSON Logs", "Find rate", "Count rate", "rate limit", "Rate Limiting", "cloudflow", "Count errors"], "questions": [], "summary": "", "entities": {"PERSON": ["Find", "Parse JSON", "Filter", "Trace", "CORRELATION_ID"], "ORG": ["CloudFlow", "TRACE", "DNS"]}, "contextual_prefix": ""}