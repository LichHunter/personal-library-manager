{"original_content": "- secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path: /health initialDelaySeconds: 30 periodSeconds: 10 timeoutSeconds: 5 failureThreshold: 3 readinessProbe: path: /ready initialDelaySeconds: 10 periodSeconds: 5 timeoutSeconds: 3 failureThreshold: 3 env: - name: NODE_ENV value: \"production\" - name: LOG_LEVEL value: \"info\" - name: API_PORT value: \"3000\" - name: WORKER_CONCURRENCY value: \"10\" - name: AWS_REGION value: \"us-east-1\" - name: METRICS_ENABLED value: \"true\" envFrom: - secretRef: name: cloudflow-secrets podAnnotations: prometheus.io/scrape: \"true\" prometheus.io/port: \"9090\" prometheus.io/path: \"/metrics\" podSecurityContext: runAsNonRoot: true runAsUser: 1000 fsGroup: 1000 securityContext: allowPrivilegeEscalation: false capabilities: drop: - ALL readOnlyRootFilesystem: true persistence: enabled: true storageClass: gp3 accessMode: ReadWriteOnce size: 50Gi redis: enabled: true architecture: replication auth: enabled: true master: persistence: size: 20Gi replica: replicaCount: 2 persistence: size: 20Gi ``` Deploy CloudFlow using Helm: ```bash helm install cloudflow cloudflow/cloudflow \\ --namespace cloudflow-prod \\ --values values-production.yaml \\ --wait \\ --timeout 10m ``` ### Deployment Verification Verify the deployment status: ```bash # Check pod status kubectl get pods -n cloudflow-prod # Expected output: # NAME READY STATUS RESTARTS AGE # cloudflow-api-7d8f9c5b6d-4xk2p 1/1 Running 0 2m # cloudflow-api-7d8f9c5b6d-9hj5m 1/1 Running 0 2m # cloudflow-api-7d8f9c5b6d-tn8wq 1/1 Running 0 2m # Check service endpoints kubectl get svc -n cloudflow-prod # Check ingress kubectl get ingress -n cloudflow-prod ``` Test health endpoints: ```bash # Port forward for testing kubectl port-forward -n cloudflow-prod svc/cloudflow-api 8080:80 # Test health endpoint curl http://localhost:8080/health # Expected: {\"status\":\"healthy\",\"timestamp\":\"2026-01-24T10:30:00Z\"} # Test readiness endpoint curl http://localhost:8080/ready # Expected: {\"status\":\"ready\",\"dependencies\":{\"database\":\"connected\",\"redis\":\"connected\"}} ``` --- ## Database Configuration ### PostgreSQL Setup CloudFlow uses PostgreSQL 14 as its primary data store.", "enhanced_content": "Test health, RESTARTS AGE, curl http, Database Configuration, Verification Verify, Expected output, Test readiness | Helm, NAME, 1/1 Running, CloudFlow\n\n- secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path: /health initialDelaySeconds: 30 periodSeconds: 10 timeoutSeconds: 5 failureThreshold: 3 readinessProbe: path: /ready initialDelaySeconds: 10 periodSeconds: 5 timeoutSeconds: 3 failureThreshold: 3 env: - name: NODE_ENV value: \"production\" - name: LOG_LEVEL value: \"info\" - name: API_PORT value: \"3000\" - name: WORKER_CONCURRENCY value: \"10\" - name: AWS_REGION value: \"us-east-1\" - name: METRICS_ENABLED value: \"true\" envFrom: - secretRef: name: cloudflow-secrets podAnnotations: prometheus.io/scrape: \"true\" prometheus.io/port: \"9090\" prometheus.io/path: \"/metrics\" podSecurityContext: runAsNonRoot: true runAsUser: 1000 fsGroup: 1000 securityContext: allowPrivilegeEscalation: false capabilities: drop: - ALL readOnlyRootFilesystem: true persistence: enabled: true storageClass: gp3 accessMode: ReadWriteOnce size: 50Gi redis: enabled: true architecture: replication auth: enabled: true master: persistence: size: 20Gi replica: replicaCount: 2 persistence: size: 20Gi ``` Deploy CloudFlow using Helm: ```bash helm install cloudflow cloudflow/cloudflow \\ --namespace cloudflow-prod \\ --values values-production.yaml \\ --wait \\ --timeout 10m ``` ### Deployment Verification Verify the deployment status: ```bash # Check pod status kubectl get pods -n cloudflow-prod # Expected output: # NAME READY STATUS RESTARTS AGE # cloudflow-api-7d8f9c5b6d-4xk2p 1/1 Running 0 2m # cloudflow-api-7d8f9c5b6d-9hj5m 1/1 Running 0 2m # cloudflow-api-7d8f9c5b6d-tn8wq 1/1 Running 0 2m # Check service endpoints kubectl get svc -n cloudflow-prod # Check ingress kubectl get ingress -n cloudflow-prod ``` Test health endpoints: ```bash # Port forward for testing kubectl port-forward -n cloudflow-prod svc/cloudflow-api 8080:80 # Test health endpoint curl http://localhost:8080/health # Expected: {\"status\":\"healthy\",\"timestamp\":\"2026-01-24T10:30:00Z\"} # Test readiness endpoint curl http://localhost:8080/ready # Expected: {\"status\":\"ready\",\"dependencies\":{\"database\":\"connected\",\"redis\":\"connected\"}} ``` --- ## Database Configuration ### PostgreSQL Setup CloudFlow uses PostgreSQL 14 as its primary data store.", "enrichment_type": "fast", "metadata": {"code_ratio": 0.06, "processing_time_ms": 62.58, "keyword_count": 10, "entity_count": 5}, "keywords": ["Test health", "RESTARTS AGE", "curl http", "Database Configuration", "Verification Verify", "Expected output", "Test readiness", "Deployment Verification", "endpoint curl", "Check service"], "questions": [], "summary": "", "entities": {"NORP": ["Helm"], "PERSON": ["NAME", "1/1 Running", "Port"], "ORG": ["CloudFlow"]}, "contextual_prefix": ""}