{"original_content": "**Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q pool.ntp.org # Check JWT issued time vs current time jwt_iat=$(echo $CF_ACCESS_TOKEN | cut -d'.' -f2 | base64 -d | jq '.iat') current_time=$(date +%s) skew=$((current_time - jwt_iat)) echo \"Clock skew: $skew seconds\" ``` **Resolution:** ```bash # Sync with NTP server sudo ntpdate -s pool.ntp.org # Enable automatic time sync sudo timedatectl set-ntp true # Restart CloudFlow client cloudflow restart ``` **4. Insufficient Permissions** Error: `User does not have required permissions for this operation` **Check user roles:** ```bash cloudflow auth whoami --verbose # Expected output: # User: john.doe@company.com # Roles: developer, workflow-admin # Scopes: workflow:*, data:read, metrics:read ``` **Request permission elevation:** ```bash # Submit access request cloudflow auth request-access \\ --resource \"workflow:production:deploy\" \\ --justification \"Deploy critical hotfix for TICKET-1234\" # Check pending approvals cloudflow auth list-requests --status pending ``` ### 403 Forbidden Errors #### RBAC Policy Violations CloudFlow uses role-based access control (RBAC) with the following hierarchy: - `viewer` - Read-only access - `developer` - Create and modify workflows (non-production) - `operator` - Execute workflows, view logs - `admin` - Full access to workspace - `platform-admin` - Cross-workspace administration **Verify resource permissions:** ```bash # Check effective permissions cloudflow rbac check \\ --user john.doe@company.com \\ --resource workflow:prod-pipeline \\ --action execute # List all policies affecting user cloudflow rbac policies --user john.doe@company.com --verbose ``` --- ## Performance Problems ### Slow Query Performance #### Symptoms - API response times > 5000ms - Database query latency warnings in logs - CloudFlow UI becomes unresponsive - Timeout errors: `Request exceeded maximum duration of 30000ms` #### Diagnosis Steps **1. Identify Slow Queries** ```bash # Query CloudFlow metrics cloudflow metrics query --metric api_request_duration_ms \\ --filter \"p95 > 5000\" \\ --last 1h # Check database slow query log kubectl logs -n cloudflow deploy/cloudflow-db-primary | \\ grep \"slow query\" | \\ tail -n 50 # Analyze query patterns cloudflow db analyze-queries --min-duration 5000 --limit 20 ``` **2.", "enhanced_content": "Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries\n\n**Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q pool.ntp.org # Check JWT issued time vs current time jwt_iat=$(echo $CF_ACCESS_TOKEN | cut -d'.' -f2 | base64 -d | jq '.iat') current_time=$(date +%s) skew=$((current_time - jwt_iat)) echo \"Clock skew: $skew seconds\" ``` **Resolution:** ```bash # Sync with NTP server sudo ntpdate -s pool.ntp.org # Enable automatic time sync sudo timedatectl set-ntp true # Restart CloudFlow client cloudflow restart ``` **4. Insufficient Permissions** Error: `User does not have required permissions for this operation` **Check user roles:** ```bash cloudflow auth whoami --verbose # Expected output: # User: john.doe@company.com # Roles: developer, workflow-admin # Scopes: workflow:*, data:read, metrics:read ``` **Request permission elevation:** ```bash # Submit access request cloudflow auth request-access \\ --resource \"workflow:production:deploy\" \\ --justification \"Deploy critical hotfix for TICKET-1234\" # Check pending approvals cloudflow auth list-requests --status pending ``` ### 403 Forbidden Errors #### RBAC Policy Violations CloudFlow uses role-based access control (RBAC) with the following hierarchy: - `viewer` - Read-only access - `developer` - Create and modify workflows (non-production) - `operator` - Execute workflows, view logs - `admin` - Full access to workspace - `platform-admin` - Cross-workspace administration **Verify resource permissions:** ```bash # Check effective permissions cloudflow rbac check \\ --user john.doe@company.com \\ --resource workflow:prod-pipeline \\ --action execute # List all policies affecting user cloudflow rbac policies --user john.doe@company.com --verbose ``` --- ## Performance Problems ### Slow Query Performance #### Symptoms - API response times > 5000ms - Database query latency warnings in logs - CloudFlow UI becomes unresponsive - Timeout errors: `Request exceeded maximum duration of 30000ms` #### Diagnosis Steps **1. Identify Slow Queries** ```bash # Query CloudFlow metrics cloudflow metrics query --metric api_request_duration_ms \\ --filter \"p95 > 5000\" \\ --last 1h # Check database slow query log kubectl logs -n cloudflow deploy/cloudflow-db-primary | \\ grep \"slow query\" | \\ tail -n 50 # Analyze query patterns cloudflow db analyze-queries --min-duration 5000 --limit 20 ``` **2.", "enrichment_type": "fast", "metadata": {"code_ratio": 0.69, "processing_time_ms": 31.73, "keyword_count": 10, "entity_count": 3}, "keywords": ["Diagnosis Steps", "Resolution", "Forbidden Errors", "Timeout errors", "RBAC Policy", "Performance Problems", "Diagnosis", "Policy Violations", "Database query", "Execute workflows"], "questions": [], "summary": "", "entities": {"ORG": ["RBAC", "UI"], "PERSON": ["Identify Slow Queries"]}, "contextual_prefix": ""}