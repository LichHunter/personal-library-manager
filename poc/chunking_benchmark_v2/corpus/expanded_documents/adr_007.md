# ADR-007: Implement Rate Limiting at API Gateway

**Status:** Accepted
**Date:** 2024-09-03

## Context

We need to protect our services from abuse and ensure fair resource usage across customers.

## Options Considered

### Option 1: Sliding window at gateway

Rate limit at API gateway level.

**Pros:**
- Centralized enforcement
- Low latency
- Easy configuration

**Cons:**
- Gateway becomes bottleneck
- Coarse granularity
- Redis dependency

### Option 2: Per-service limiting

Each service implements its own limits.

**Pros:**
- Fine-grained control
- Service autonomy
- No single point of failure

**Cons:**
- Inconsistent implementation
- Higher complexity
- Distributed state

### Option 3: Token bucket

Token-based rate limiting.

**Pros:**
- Allows bursts
- Smooth rate limiting
- Well understood

**Cons:**
- More complex
- Harder to explain to users
- State management

## Decision

We will implement sliding window rate limiting at the Kong API Gateway using Redis.

## Consequences

- Default limit: 100 requests per minute
- Implement per-plan limits
- Return rate limit headers
- Add retry-after on 429