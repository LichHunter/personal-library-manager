================================================================================
Benchmark Log - 2026-01-25 15:07:47
================================================================================

[15:07:47] INFO  | Loading config from /home/fujin/Code/personal-library-manager/poc/chunking_benchmark_v2/config_phase2_llm.yaml

================================================================================
[15:07:47] INFO  | COMPREHENSIVE RETRIEVAL BENCHMARK
================================================================================
[15:07:47] DEBUG | Timer 'total_benchmark' started

================================================================================
[15:07:47] INFO  | BENCHMARK CONFIGURATION
================================================================================
[15:07:47] METRIC | device=cuda
[15:07:47] METRIC | ollama_available=False
[15:07:47] METRIC | claude_available=True
[15:07:47] METRIC | llm_available=True
[15:07:47] INFO  | Device: cuda
[15:07:47] INFO  | Ollama available: False
[15:07:47] INFO  | Claude available: True
[15:07:47] INFO  | LLM available: True
[15:07:47] INFO  | Loading corpus...
[15:07:47] METRIC | documents=5
[15:07:47] METRIC | queries=20
[15:07:47] METRIC | total_facts=53
[15:07:47] METRIC | has_human_queries=True
[15:07:47] INFO  | Loaded 5 documents
[15:07:47] INFO  | Loaded 20 queries
[15:07:47] INFO  | Total key facts: 53
[15:07:47] INFO  | Human query variations: True
[15:07:47] INFO  | Enabled embedders: 1
[15:07:47] INFO  | Enabled rerankers: 0
[15:07:47] INFO  | Enabled LLMs: 1
[15:07:47] INFO  | Enabled chunking strategies: 1
[15:07:47] INFO  | Enabled retrieval strategies: 2
[15:07:47] METRIC | total_combinations=2
[15:07:47] METRIC | total_evaluations=2
[15:07:47] INFO  | Total strategy combinations: 2
[15:07:47] INFO  | Total evaluations (with k and metrics): 2

================================================================================
[15:07:47] INFO  | RETRIEVAL STRATEGY: hybrid
================================================================================
[15:07:47] INFO  | Loading embedder: BAAI/bge-base-en-v1.5
[15:07:49] PROG  | [  1/  2] ██████████░░░░░░░░░░  50.0% | hybrid_bge-base-en-v1.5_fixed_512_0pct
[15:07:49] DEBUG | Chunking document 'api_reference': 1792 words, 16663 chars
[15:07:49] DEBUG |   Chunk 0: chars [0-3160] words=376 tokens≈500 preview='# CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...'
[15:07:49] DEBUG |   Chunk 1: chars [3161-6111] words=379 tokens≈504 preview='## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...'
[15:07:49] DEBUG |   Chunk 2: chars [6112-8827] words=296 tokens≈393 preview='**Endpoint:** `POST /workflows` **Request Body:** ```json { "name": "Email Campaign Automation", "de...'
[15:07:49] DEBUG |   Chunk 3: chars [8828-11402] words=269 tokens≈357 preview='**Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...'
[15:07:49] DEBUG |   Chunk 4: chars [11403-14151] words=365 tokens≈485 preview='### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...'
[15:07:49] DEBUG |   Chunk 5: chars [14152-15213] words=107 tokens≈142 preview='**Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...'
[15:07:49] DEBUG | Created 6 chunks for document 'api_reference'
[15:07:49] DEBUG | Chunking document 'architecture_overview': 4607 words, 36722 chars
[15:07:49] DEBUG |   Chunk 0: chars [0-3230] words=370 tokens≈492 preview='# CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...'
[15:07:49] DEBUG |   Chunk 1: chars [3231-5982] words=380 tokens≈505 preview='**Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...'
[15:07:49] DEBUG |   Chunk 2: chars [5983-7875] words=248 tokens≈329 preview='**Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...'
[15:07:49] DEBUG |   Chunk 3: chars [7876-9478] words=219 tokens≈291 preview='**Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...'
[15:07:49] DEBUG |   Chunk 4: chars [9479-11878] words=354 tokens≈470 preview='**Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...'
[15:07:49] DEBUG |   Chunk 5: chars [11879-14634] words=368 tokens≈489 preview='Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...'
[15:07:49] DEBUG |   Chunk 6: chars [14635-17394] words=384 tokens≈510 preview='**Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...'
[15:07:49] DEBUG |   Chunk 7: chars [17395-20141] words=381 tokens≈506 preview='records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...'
[15:07:49] DEBUG |   Chunk 8: chars [20142-22843] words=384 tokens≈510 preview='### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...'
[15:07:49] DEBUG |   Chunk 9: chars [22844-25362] words=384 tokens≈510 preview='per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...'
[15:07:49] DEBUG |   Chunk 10: chars [25363-27842] words=384 tokens≈510 preview='- Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...'
[15:07:49] DEBUG |   Chunk 11: chars [27843-30286] words=375 tokens≈498 preview='Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...'
[15:07:49] DEBUG |   Chunk 12: chars [30287-32834] words=376 tokens≈500 preview='Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...'
[15:07:49] DEBUG | Created 13 chunks for document 'architecture_overview'
[15:07:49] DEBUG | Chunking document 'deployment_guide': 2777 words, 25837 chars
[15:07:49] DEBUG |   Chunk 0: chars [0-3165] words=384 tokens≈510 preview='# CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...'
[15:07:49] DEBUG |   Chunk 1: chars [3166-6560] words=384 tokens≈510 preview='create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...'
[15:07:49] DEBUG |   Chunk 2: chars [6561-8755] words=251 tokens≈333 preview='- secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...'
[15:07:49] DEBUG |   Chunk 3: chars [8756-12138] words=384 tokens≈510 preview='Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...'
[15:07:49] DEBUG |   Chunk 4: chars [12139-14139] words=204 tokens≈271 preview='--set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...'
[15:07:49] DEBUG |   Chunk 5: chars [14140-17194] words=372 tokens≈494 preview='Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...'
[15:07:49] DEBUG |   Chunk 6: chars [17195-20069] words=384 tokens≈510 preview='**Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...'
[15:07:49] DEBUG |   Chunk 7: chars [20070-23221] words=384 tokens≈510 preview='podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...'
[15:07:49] DEBUG |   Chunk 8: chars [23222-23448] words=30 tokens≈39 preview='UTC - **Secondary**: Wednesday 10:00-12:00 UTC All deployments should target these windows to minimi...'
[15:07:49] DEBUG | Created 9 chunks for document 'deployment_guide'
[15:07:49] DEBUG | Chunking document 'troubleshooting_guide': 4032 words, 32183 chars
[15:07:49] DEBUG |   Chunk 0: chars [0-2666] words=320 tokens≈425 preview='# CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...'
[15:07:49] DEBUG |   Chunk 1: chars [2667-5007] words=321 tokens≈426 preview='**Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...'
[15:07:49] DEBUG |   Chunk 2: chars [5008-8037] words=376 tokens≈500 preview='Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...'
[15:07:49] DEBUG |   Chunk 3: chars [8038-10862] words=356 tokens≈473 preview='Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...'
[15:07:49] DEBUG |   Chunk 4: chars [10863-13827] words=384 tokens≈510 preview='**Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...'
[15:07:49] DEBUG |   Chunk 5: chars [13828-16401] words=334 tokens≈444 preview='exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...'
[15:07:49] DEBUG |   Chunk 6: chars [16402-19022] words=329 tokens≈437 preview='Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...'
[15:07:49] DEBUG |   Chunk 7: chars [19023-20595] words=194 tokens≈258 preview='Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...'
[15:07:49] DEBUG |   Chunk 8: chars [20596-23454] words=384 tokens≈510 preview='Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...'
[15:07:49] DEBUG |   Chunk 9: chars [23455-26239] words=384 tokens≈510 preview='in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...'
[15:07:49] DEBUG |   Chunk 10: chars [26240-29039] words=384 tokens≈510 preview='database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...'
[15:07:49] DEBUG |   Chunk 11: chars [29040-31206] words=266 tokens≈353 preview='outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...'
[15:07:49] DEBUG | Created 12 chunks for document 'troubleshooting_guide'
[15:07:49] DEBUG | Chunking document 'user_guide': 3735 words, 31582 chars
[15:07:49] DEBUG |   Chunk 0: chars [0-2617] words=375 tokens≈498 preview='# CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...'
[15:07:49] DEBUG |   Chunk 1: chars [2618-5224] words=348 tokens≈462 preview='Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...'
[15:07:49] DEBUG |   Chunk 2: chars [5225-8372] words=381 tokens≈506 preview='### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...'
[15:07:49] DEBUG |   Chunk 3: chars [8373-11268] words=336 tokens≈446 preview='``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...'
[15:07:49] DEBUG |   Chunk 4: chars [11269-13371] words=375 tokens≈498 preview='### Cron Syntax Use standard cron expressions to define schedules: ``` * * * * * ┬ ┬ ┬ ┬ ┬ │ │ │ │ │...'
[15:07:49] DEBUG |   Chunk 5: chars [13372-16105] words=383 tokens≈509 preview='Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...'
[15:07:49] DEBUG |   Chunk 6: chars [16106-18686] words=363 tokens≈482 preview='Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...'
[15:07:49] DEBUG |   Chunk 7: chars [18687-21448] words=364 tokens≈484 preview='Handle Errors Gracefully Always implement error handling for external API calls and database operati...'
[15:07:49] DEBUG |   Chunk 8: chars [21449-24677] words=384 tokens≈510 preview='Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...'
[15:07:49] DEBUG |   Chunk 9: chars [24678-27975] words=371 tokens≈493 preview='Requester: {{trigger.body.requester}} Description: {{trigger.body.description}} Approve: https://app...'
[15:07:49] DEBUG |   Chunk 10: chars [27976-28481] words=55 tokens≈73 preview='- **Documentation**: https://docs.cloudflow.io - **Community Forum**: https://community.cloudflow.io...'
[15:07:49] DEBUG | Created 11 chunks for document 'user_guide'
[15:07:49] INFO  |   Created 51 chunks
[15:07:51] INFO  |   Indexed in 1.14s
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: What is the API rate limit per minute?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 2/2
[15:07:51] TRACE |   FOUND[1] 100 requests per minute per authenticated user
[15:07:51] TRACE |   FOUND[2] 20 requests per minute for unauthenticated requests
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: How many requests can I make per minute to the API?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 2/2
[15:07:51] TRACE |   FOUND[1] 100 requests per minute per authenticated user
[15:07:51] TRACE |   FOUND[2] 20 requests per minute for unauthenticated requests
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: My API calls are getting blocked, what's the limit?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 2/2
[15:07:51] TRACE |   FOUND[1] 100 requests per minute per authenticated user
[15:07:51] TRACE |   FOUND[2] 20 requests per minute for unauthenticated requests
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: api rate limit
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 2/2
[15:07:51] TRACE |   FOUND[1] 100 requests per minute per authenticated user
[15:07:51] TRACE |   FOUND[2] 20 requests per minute for unauthenticated requests
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: I'm building a batch job that calls CloudFlow API repeatedly, what rate limit should I expect?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 2/2
[15:07:51] TRACE |   FOUND[1] 100 requests per minute per authenticated user
[15:07:51] TRACE |   FOUND[2] 20 requests per minute for unauthenticated requests
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Why is the API rejecting my requests after 100 calls?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 2/2
[15:07:51] TRACE |   FOUND[1] 100 requests per minute per authenticated user
[15:07:51] TRACE |   FOUND[2] 20 requests per minute for unauthenticated requests
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: How do I fix 429 Too Many Requests errors?
[15:07:51] TRACE | Total key facts: 5
[15:07:51] TRACE | Found facts: 4/5
[15:07:51] TRACE |   FOUND[1] 429 Too Many Requests
[15:07:51] TRACE |   FOUND[2] X-RateLimit-Remaining
[15:07:51] TRACE |   FOUND[3] Retry-After
[15:07:51] TRACE |   FOUND[4] Implement exponential backoff when receiving 429 responses
[15:07:51] TRACE | Missed facts: 1/5
[15:07:51] TRACE |   MISSED[1] Monitor X-RateLimit-Remaining header values
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: What should I do when I get rate limited?
[15:07:51] TRACE | Total key facts: 5
[15:07:51] TRACE | Found facts: 3/5
[15:07:51] TRACE |   FOUND[1] 429 Too Many Requests
[15:07:51] TRACE |   FOUND[2] X-RateLimit-Remaining
[15:07:51] TRACE |   FOUND[3] Implement exponential backoff when receiving 429 responses
[15:07:51] TRACE | Missed facts: 2/5
[15:07:51] TRACE |   MISSED[1] Retry-After
[15:07:51] TRACE |     -> Found in chunk_id=troubleshooting_guide_fix_6 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] Monitor X-RateLimit-Remaining header values
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: My requests keep failing with 429 status code
[15:07:51] TRACE | Total key facts: 5
[15:07:51] TRACE | Found facts: 3/5
[15:07:51] TRACE |   FOUND[1] 429 Too Many Requests
[15:07:51] TRACE |   FOUND[2] X-RateLimit-Remaining
[15:07:51] TRACE |   FOUND[3] Retry-After
[15:07:51] TRACE | Missed facts: 2/5
[15:07:51] TRACE |   MISSED[1] Monitor X-RateLimit-Remaining header values
[15:07:51] TRACE |   MISSED[2] Implement exponential backoff when receiving 429 responses
[15:07:51] TRACE |     -> Found in chunk_id=api_reference_fix_1 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: 429 error fix
[15:07:51] TRACE | Total key facts: 5
[15:07:51] TRACE | Found facts: 3/5
[15:07:51] TRACE |   FOUND[1] 429 Too Many Requests
[15:07:51] TRACE |   FOUND[2] X-RateLimit-Remaining
[15:07:51] TRACE |   FOUND[3] Retry-After
[15:07:51] TRACE | Missed facts: 2/5
[15:07:51] TRACE |   MISSED[1] Monitor X-RateLimit-Remaining header values
[15:07:51] TRACE |   MISSED[2] Implement exponential backoff when receiving 429 responses
[15:07:51] TRACE |     -> Found in chunk_id=api_reference_fix_1 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: I'm getting throttled by CloudFlow API, how can I handle this in my application?
[15:07:51] TRACE | Total key facts: 5
[15:07:51] TRACE | Found facts: 0/5
[15:07:51] TRACE | Missed facts: 5/5
[15:07:51] TRACE |   MISSED[1] 429 Too Many Requests
[15:07:51] TRACE |     -> Found in chunk_id=api_reference_fix_1 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] X-RateLimit-Remaining
[15:07:51] TRACE |     -> Found in chunk_id=api_reference_fix_1 (rank not in top-5)
[15:07:51] TRACE |   MISSED[3] Retry-After
[15:07:51] TRACE |     -> Found in chunk_id=troubleshooting_guide_fix_6 (rank not in top-5)
[15:07:51] TRACE |   MISSED[4] Monitor X-RateLimit-Remaining header values
[15:07:51] TRACE |   MISSED[5] Implement exponential backoff when receiving 429 responses
[15:07:51] TRACE |     -> Found in chunk_id=api_reference_fix_1 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Why am I being blocked with rate limit errors?
[15:07:51] TRACE | Total key facts: 5
[15:07:51] TRACE | Found facts: 4/5
[15:07:51] TRACE |   FOUND[1] 429 Too Many Requests
[15:07:51] TRACE |   FOUND[2] X-RateLimit-Remaining
[15:07:51] TRACE |   FOUND[3] Retry-After
[15:07:51] TRACE |   FOUND[4] Implement exponential backoff when receiving 429 responses
[15:07:51] TRACE | Missed facts: 1/5
[15:07:51] TRACE |   MISSED[1] Monitor X-RateLimit-Remaining header values
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: What is the JWT token expiration time?
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 1/3
[15:07:51] TRACE |   FOUND[1] 3600 seconds
[15:07:51] TRACE | Missed facts: 2/3
[15:07:51] TRACE |   MISSED[1] max 3600 seconds from iat
[15:07:51] TRACE |   MISSED[2] All tokens expire after 3600 seconds
[15:07:51] TRACE |     -> Found in chunk_id=api_reference_fix_0 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: How long do access tokens last?
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 1/3
[15:07:51] TRACE |   FOUND[1] 3600 seconds
[15:07:51] TRACE | Missed facts: 2/3
[15:07:51] TRACE |   MISSED[1] max 3600 seconds from iat
[15:07:51] TRACE |   MISSED[2] All tokens expire after 3600 seconds
[15:07:51] TRACE |     -> Found in chunk_id=api_reference_fix_0 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: My authentication keeps expiring after an hour
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 1/3
[15:07:51] TRACE |   FOUND[1] 3600 seconds
[15:07:51] TRACE | Missed facts: 2/3
[15:07:51] TRACE |   MISSED[1] max 3600 seconds from iat
[15:07:51] TRACE |   MISSED[2] All tokens expire after 3600 seconds
[15:07:51] TRACE |     -> Found in chunk_id=api_reference_fix_0 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: token expiry time
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 1/3
[15:07:51] TRACE |   FOUND[1] 3600 seconds
[15:07:51] TRACE | Missed facts: 2/3
[15:07:51] TRACE |   MISSED[1] max 3600 seconds from iat
[15:07:51] TRACE |   MISSED[2] All tokens expire after 3600 seconds
[15:07:51] TRACE |     -> Found in chunk_id=api_reference_fix_0 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: I need to implement token refresh logic, when do JWT tokens expire?
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 1/3
[15:07:51] TRACE |   FOUND[1] 3600 seconds
[15:07:51] TRACE | Missed facts: 2/3
[15:07:51] TRACE |   MISSED[1] max 3600 seconds from iat
[15:07:51] TRACE |   MISSED[2] All tokens expire after 3600 seconds
[15:07:51] TRACE |     -> Found in chunk_id=api_reference_fix_0 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Why does my token stop working after 3600 seconds?
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 1/3
[15:07:51] TRACE |   FOUND[1] 3600 seconds
[15:07:51] TRACE | Missed facts: 2/3
[15:07:51] TRACE |   MISSED[1] max 3600 seconds from iat
[15:07:51] TRACE |   MISSED[2] All tokens expire after 3600 seconds
[15:07:51] TRACE |     -> Found in chunk_id=api_reference_fix_0 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: What database technology does CloudFlow use?
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 3/3
[15:07:51] TRACE |   FOUND[1] PostgreSQL 15.4
[15:07:51] TRACE |   FOUND[2] Redis 7.2
[15:07:51] TRACE |   FOUND[3] Apache Kafka 3.6
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Which database system powers CloudFlow?
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 3/3
[15:07:51] TRACE |   FOUND[1] PostgreSQL 15.4
[15:07:51] TRACE |   FOUND[2] Redis 7.2
[15:07:51] TRACE |   FOUND[3] Apache Kafka 3.6
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: I need to understand the data storage architecture
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 3/3
[15:07:51] TRACE |   FOUND[1] PostgreSQL 15.4
[15:07:51] TRACE |   FOUND[2] Redis 7.2
[15:07:51] TRACE |   FOUND[3] Apache Kafka 3.6
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: database stack
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 0/3
[15:07:51] TRACE | Missed facts: 3/3
[15:07:51] TRACE |   MISSED[1] PostgreSQL 15.4
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] Redis 7.2
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:07:51] TRACE |   MISSED[3] Apache Kafka 3.6
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: For capacity planning, what databases does CloudFlow rely on?
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 3/3
[15:07:51] TRACE |   FOUND[1] PostgreSQL 15.4
[15:07:51] TRACE |   FOUND[2] Redis 7.2
[15:07:51] TRACE |   FOUND[3] Apache Kafka 3.6
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Is CloudFlow using MySQL or something else?
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 0/3
[15:07:51] TRACE | Missed facts: 3/3
[15:07:51] TRACE |   MISSED[1] PostgreSQL 15.4
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] Redis 7.2
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:07:51] TRACE |   MISSED[3] Apache Kafka 3.6
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: What is the Kubernetes namespace for production deployment?
[15:07:51] TRACE | Total key facts: 1
[15:07:51] TRACE | Found facts: 1/1
[15:07:51] TRACE |   FOUND[1] cloudflow-prod
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Which namespace is used for CloudFlow production?
[15:07:51] TRACE | Total key facts: 1
[15:07:51] TRACE | Found facts: 1/1
[15:07:51] TRACE |   FOUND[1] cloudflow-prod
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: I can't find the production pods
[15:07:51] TRACE | Total key facts: 1
[15:07:51] TRACE | Found facts: 1/1
[15:07:51] TRACE |   FOUND[1] cloudflow-prod
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: prod namespace
[15:07:51] TRACE | Total key facts: 1
[15:07:51] TRACE | Found facts: 1/1
[15:07:51] TRACE |   FOUND[1] cloudflow-prod
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: I need to deploy to production, what namespace should I use?
[15:07:51] TRACE | Total key facts: 1
[15:07:51] TRACE | Found facts: 1/1
[15:07:51] TRACE |   FOUND[1] cloudflow-prod
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Why can't I see resources in the default namespace?
[15:07:51] TRACE | Total key facts: 1
[15:07:51] TRACE | Found facts: 1/1
[15:07:51] TRACE |   FOUND[1] cloudflow-prod
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: What are the resource requirements for the API Gateway?
[15:07:51] TRACE | Total key facts: 1
[15:07:51] TRACE | Found facts: 0/1
[15:07:51] TRACE | Missed facts: 1/1
[15:07:51] TRACE |   MISSED[1] 2 vCPU, 4GB RAM per pod
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_1 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: How much CPU and memory does the API Gateway need?
[15:07:51] TRACE | Total key facts: 1
[15:07:51] TRACE | Found facts: 1/1
[15:07:51] TRACE |   FOUND[1] 2 vCPU, 4GB RAM per pod
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: The API Gateway pods keep getting OOMKilled
[15:07:51] TRACE | Total key facts: 1
[15:07:51] TRACE | Found facts: 1/1
[15:07:51] TRACE |   FOUND[1] 2 vCPU, 4GB RAM per pod
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: api gateway resources
[15:07:51] TRACE | Total key facts: 1
[15:07:51] TRACE | Found facts: 1/1
[15:07:51] TRACE |   FOUND[1] 2 vCPU, 4GB RAM per pod
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: I'm provisioning infrastructure, what are the compute specs for API Gateway?
[15:07:51] TRACE | Total key facts: 1
[15:07:51] TRACE | Found facts: 1/1
[15:07:51] TRACE |   FOUND[1] 2 vCPU, 4GB RAM per pod
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Why is 1GB RAM not enough for API Gateway?
[15:07:51] TRACE | Total key facts: 1
[15:07:51] TRACE | Found facts: 1/1
[15:07:51] TRACE |   FOUND[1] 2 vCPU, 4GB RAM per pod
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: What are the health check endpoints?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 2/2
[15:07:51] TRACE |   FOUND[1] /health
[15:07:51] TRACE |   FOUND[2] /ready
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Which URLs should I use for health monitoring?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 2/2
[15:07:51] TRACE |   FOUND[1] /health
[15:07:51] TRACE |   FOUND[2] /ready
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: My load balancer health checks are failing
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 1/2
[15:07:51] TRACE |   FOUND[1] /health
[15:07:51] TRACE | Missed facts: 1/2
[15:07:51] TRACE |   MISSED[1] /ready
[15:07:51] TRACE |     -> Found in chunk_id=deployment_guide_fix_2 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: health endpoints
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 2/2
[15:07:51] TRACE |   FOUND[1] /health
[15:07:51] TRACE |   FOUND[2] /ready
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Setting up monitoring, what endpoints indicate service health?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 2/2
[15:07:51] TRACE |   FOUND[1] /health
[15:07:51] TRACE |   FOUND[2] /ready
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Why doesn't /status return health information?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 2/2
[15:07:51] TRACE |   FOUND[1] /health
[15:07:51] TRACE |   FOUND[2] /ready
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: What are the HPA scaling parameters?
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 2/3
[15:07:51] TRACE |   FOUND[1] minReplicas: 3
[15:07:51] TRACE |   FOUND[2] maxReplicas: 10
[15:07:51] TRACE | Missed facts: 1/3
[15:07:51] TRACE |   MISSED[1] targetCPUUtilizationPercentage: 70
[15:07:51] TRACE |     -> Found in chunk_id=deployment_guide_fix_1 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: How does horizontal pod autoscaling work?
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 2/3
[15:07:51] TRACE |   FOUND[1] minReplicas: 3
[15:07:51] TRACE |   FOUND[2] maxReplicas: 10
[15:07:51] TRACE | Missed facts: 1/3
[15:07:51] TRACE |   MISSED[1] targetCPUUtilizationPercentage: 70
[15:07:51] TRACE |     -> Found in chunk_id=deployment_guide_fix_1 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Pods aren't scaling up during traffic spikes
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 2/3
[15:07:51] TRACE |   FOUND[1] minReplicas: 3
[15:07:51] TRACE |   FOUND[2] maxReplicas: 10
[15:07:51] TRACE | Missed facts: 1/3
[15:07:51] TRACE |   MISSED[1] targetCPUUtilizationPercentage: 70
[15:07:51] TRACE |     -> Found in chunk_id=deployment_guide_fix_1 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: autoscaling config
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 3/3
[15:07:51] TRACE |   FOUND[1] minReplicas: 3
[15:07:51] TRACE |   FOUND[2] maxReplicas: 10
[15:07:51] TRACE |   FOUND[3] targetCPUUtilizationPercentage: 70
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: I need to configure autoscaling, what are the min/max replicas and thresholds?
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 0/3
[15:07:51] TRACE | Missed facts: 3/3
[15:07:51] TRACE |   MISSED[1] minReplicas: 3
[15:07:51] TRACE |     -> Found in chunk_id=deployment_guide_fix_1 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] maxReplicas: 10
[15:07:51] TRACE |     -> Found in chunk_id=deployment_guide_fix_1 (rank not in top-5)
[15:07:51] TRACE |   MISSED[3] targetCPUUtilizationPercentage: 70
[15:07:51] TRACE |     -> Found in chunk_id=deployment_guide_fix_1 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Why do we have 3 replicas even with low traffic?
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 0/3
[15:07:51] TRACE | Missed facts: 3/3
[15:07:51] TRACE |   MISSED[1] minReplicas: 3
[15:07:51] TRACE |     -> Found in chunk_id=deployment_guide_fix_1 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] maxReplicas: 10
[15:07:51] TRACE |     -> Found in chunk_id=deployment_guide_fix_1 (rank not in top-5)
[15:07:51] TRACE |   MISSED[3] targetCPUUtilizationPercentage: 70
[15:07:51] TRACE |     -> Found in chunk_id=deployment_guide_fix_1 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: What is the P99 latency target for API operations?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 1/2
[15:07:51] TRACE |   FOUND[1] average P99 latency of 180ms for API operations
[15:07:51] TRACE | Missed facts: 1/2
[15:07:51] TRACE |   MISSED[1] P99 latency: < 200ms
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_1 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: What's the 99th percentile response time target?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 0/2
[15:07:51] TRACE | Missed facts: 2/2
[15:07:51] TRACE |   MISSED[1] P99 latency: < 200ms
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_1 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] average P99 latency of 180ms for API operations
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Our API latency is 500ms, is that acceptable?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 1/2
[15:07:51] TRACE |   FOUND[1] average P99 latency of 180ms for API operations
[15:07:51] TRACE | Missed facts: 1/2
[15:07:51] TRACE |   MISSED[1] P99 latency: < 200ms
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_1 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: api latency target
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 0/2
[15:07:51] TRACE | Missed facts: 2/2
[15:07:51] TRACE |   MISSED[1] P99 latency: < 200ms
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_1 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] average P99 latency of 180ms for API operations
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Setting SLOs for our service, what P99 latency does CloudFlow guarantee?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 1/2
[15:07:51] TRACE |   FOUND[1] average P99 latency of 180ms for API operations
[15:07:51] TRACE | Missed facts: 1/2
[15:07:51] TRACE |   MISSED[1] P99 latency: < 200ms
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_1 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Why are we getting alerts at 200ms latency?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 0/2
[15:07:51] TRACE | Missed facts: 2/2
[15:07:51] TRACE |   MISSED[1] P99 latency: < 200ms
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_1 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] average P99 latency of 180ms for API operations
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: What are the disaster recovery RPO and RTO values?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 0/2
[15:07:51] TRACE | Missed facts: 2/2
[15:07:51] TRACE |   MISSED[1] RPO (Recovery Point Objective): 1 hour
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_10 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] RTO (Recovery Time Objective): 4 hours
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_10 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: What's the maximum data loss and recovery time?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 2/2
[15:07:51] TRACE |   FOUND[1] RPO (Recovery Point Objective): 1 hour
[15:07:51] TRACE |   FOUND[2] RTO (Recovery Time Objective): 4 hours
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: How long will it take to recover from a disaster?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 0/2
[15:07:51] TRACE | Missed facts: 2/2
[15:07:51] TRACE |   MISSED[1] RPO (Recovery Point Objective): 1 hour
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_10 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] RTO (Recovery Time Objective): 4 hours
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_10 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: RPO RTO
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 0/2
[15:07:51] TRACE | Missed facts: 2/2
[15:07:51] TRACE |   MISSED[1] RPO (Recovery Point Objective): 1 hour
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_10 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] RTO (Recovery Time Objective): 4 hours
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_10 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: For our business continuity plan, what are CloudFlow's recovery objectives?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 0/2
[15:07:51] TRACE | Missed facts: 2/2
[15:07:51] TRACE |   MISSED[1] RPO (Recovery Point Objective): 1 hour
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_10 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] RTO (Recovery Time Objective): 4 hours
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_10 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Why can't we guarantee zero data loss?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 0/2
[15:07:51] TRACE | Missed facts: 2/2
[15:07:51] TRACE |   MISSED[1] RPO (Recovery Point Objective): 1 hour
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_10 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] RTO (Recovery Time Objective): 4 hours
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_10 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: What is the maximum workflow execution timeout?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 1/2
[15:07:51] TRACE |   FOUND[1] 3600 seconds
[15:07:51] TRACE | Missed facts: 1/2
[15:07:51] TRACE |   MISSED[1] exceeded maximum execution time of 3600 seconds
[15:07:51] TRACE |     -> Found in chunk_id=troubleshooting_guide_fix_4 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: How long can a workflow run before timing out?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 1/2
[15:07:51] TRACE |   FOUND[1] 3600 seconds
[15:07:51] TRACE | Missed facts: 1/2
[15:07:51] TRACE |   MISSED[1] exceeded maximum execution time of 3600 seconds
[15:07:51] TRACE |     -> Found in chunk_id=troubleshooting_guide_fix_4 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: My workflow is being killed after an hour
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 1/2
[15:07:51] TRACE |   FOUND[1] 3600 seconds
[15:07:51] TRACE | Missed facts: 1/2
[15:07:51] TRACE |   MISSED[1] exceeded maximum execution time of 3600 seconds
[15:07:51] TRACE |     -> Found in chunk_id=troubleshooting_guide_fix_4 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: workflow timeout
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 1/2
[15:07:51] TRACE |   FOUND[1] 3600 seconds
[15:07:51] TRACE | Missed facts: 1/2
[15:07:51] TRACE |   MISSED[1] exceeded maximum execution time of 3600 seconds
[15:07:51] TRACE |     -> Found in chunk_id=troubleshooting_guide_fix_4 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: I have a long-running data processing workflow, what's the time limit?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 0/2
[15:07:51] TRACE | Missed facts: 2/2
[15:07:51] TRACE |   MISSED[1] 3600 seconds
[15:07:51] TRACE |     -> Found in chunk_id=api_reference_fix_0 (rank not in top-5)
[15:07:51] TRACE |   MISSED[2] exceeded maximum execution time of 3600 seconds
[15:07:51] TRACE |     -> Found in chunk_id=troubleshooting_guide_fix_4 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Why did my workflow fail after 3600 seconds?
[15:07:51] TRACE | Total key facts: 2
[15:07:51] TRACE | Found facts: 1/2
[15:07:51] TRACE |   FOUND[1] 3600 seconds
[15:07:51] TRACE | Missed facts: 1/2
[15:07:51] TRACE |   MISSED[1] exceeded maximum execution time of 3600 seconds
[15:07:51] TRACE |     -> Found in chunk_id=troubleshooting_guide_fix_4 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: What JWT algorithm is used for token signing?
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 3/3
[15:07:51] TRACE |   FOUND[1] RS256
[15:07:51] TRACE |   FOUND[2] RS256 algorithm
[15:07:51] TRACE |   FOUND[3] RS256 signing algorithm
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: Which signing algorithm does CloudFlow use for JWTs?
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 2/3
[15:07:51] TRACE |   FOUND[1] RS256
[15:07:51] TRACE |   FOUND[2] RS256 signing algorithm
[15:07:51] TRACE | Missed facts: 1/3
[15:07:51] TRACE |   MISSED[1] RS256 algorithm
[15:07:51] TRACE |     -> Found in chunk_id=architecture_overview_fix_1 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: My JWT validation is failing with algorithm mismatch
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 2/3
[15:07:51] TRACE |   FOUND[1] RS256
[15:07:51] TRACE |   FOUND[2] RS256 algorithm
[15:07:51] TRACE | Missed facts: 1/3
[15:07:51] TRACE |   MISSED[1] RS256 signing algorithm
[15:07:51] TRACE |     -> Found in chunk_id=api_reference_fix_0 (rank not in top-5)
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:51] TRACE | Query: jwt algorithm
[15:07:51] TRACE | Total key facts: 3
[15:07:51] TRACE | Found facts: 3/3
[15:07:51] TRACE |   FOUND[1] RS256
[15:07:51] TRACE |   FOUND[2] RS256 algorithm
[15:07:51] TRACE |   FOUND[3] RS256 signing algorithm
[15:07:51] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: I'm implementing JWT verification, what algorithm should I expect?
[15:07:52] TRACE | Total key facts: 3
[15:07:52] TRACE | Found facts: 3/3
[15:07:52] TRACE |   FOUND[1] RS256
[15:07:52] TRACE |   FOUND[2] RS256 algorithm
[15:07:52] TRACE |   FOUND[3] RS256 signing algorithm
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Why doesn't HS256 work for token validation?
[15:07:52] TRACE | Total key facts: 3
[15:07:52] TRACE | Found facts: 2/3
[15:07:52] TRACE |   FOUND[1] RS256
[15:07:52] TRACE |   FOUND[2] RS256 algorithm
[15:07:52] TRACE | Missed facts: 1/3
[15:07:52] TRACE |   MISSED[1] RS256 signing algorithm
[15:07:52] TRACE |     -> Found in chunk_id=api_reference_fix_0 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: What is the Redis cache TTL for workflow definitions?
[15:07:52] TRACE | Total key facts: 2
[15:07:52] TRACE | Found facts: 1/2
[15:07:52] TRACE |   FOUND[1] TTL: 1 hour
[15:07:52] TRACE | Missed facts: 1/2
[15:07:52] TRACE |   MISSED[1] Workflow Definitions: TTL: 1 hour
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: How long are workflow definitions cached?
[15:07:52] TRACE | Total key facts: 2
[15:07:52] TRACE | Found facts: 0/2
[15:07:52] TRACE | Missed facts: 2/2
[15:07:52] TRACE |   MISSED[1] TTL: 1 hour
[15:07:52] TRACE |     -> Found in chunk_id=architecture_overview_fix_6 (rank not in top-5)
[15:07:52] TRACE |   MISSED[2] Workflow Definitions: TTL: 1 hour
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: My workflow updates aren't reflecting immediately
[15:07:52] TRACE | Total key facts: 2
[15:07:52] TRACE | Found facts: 0/2
[15:07:52] TRACE | Missed facts: 2/2
[15:07:52] TRACE |   MISSED[1] TTL: 1 hour
[15:07:52] TRACE |     -> Found in chunk_id=architecture_overview_fix_6 (rank not in top-5)
[15:07:52] TRACE |   MISSED[2] Workflow Definitions: TTL: 1 hour
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: cache ttl workflows
[15:07:52] TRACE | Total key facts: 2
[15:07:52] TRACE | Found facts: 0/2
[15:07:52] TRACE | Missed facts: 2/2
[15:07:52] TRACE |   MISSED[1] TTL: 1 hour
[15:07:52] TRACE |     -> Found in chunk_id=architecture_overview_fix_6 (rank not in top-5)
[15:07:52] TRACE |   MISSED[2] Workflow Definitions: TTL: 1 hour
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: After updating a workflow, how long until the cache expires?
[15:07:52] TRACE | Total key facts: 2
[15:07:52] TRACE | Found facts: 0/2
[15:07:52] TRACE | Missed facts: 2/2
[15:07:52] TRACE |   MISSED[1] TTL: 1 hour
[15:07:52] TRACE |     -> Found in chunk_id=architecture_overview_fix_6 (rank not in top-5)
[15:07:52] TRACE |   MISSED[2] Workflow Definitions: TTL: 1 hour
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Why are changes taking an hour to appear?
[15:07:52] TRACE | Total key facts: 2
[15:07:52] TRACE | Found facts: 0/2
[15:07:52] TRACE | Missed facts: 2/2
[15:07:52] TRACE |   MISSED[1] TTL: 1 hour
[15:07:52] TRACE |     -> Found in chunk_id=architecture_overview_fix_6 (rank not in top-5)
[15:07:52] TRACE |   MISSED[2] Workflow Definitions: TTL: 1 hour
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: What monitoring tools does CloudFlow use?
[15:07:52] TRACE | Total key facts: 3
[15:07:52] TRACE | Found facts: 2/3
[15:07:52] TRACE |   FOUND[1] Prometheus
[15:07:52] TRACE |   FOUND[2] Grafana
[15:07:52] TRACE | Missed facts: 1/3
[15:07:52] TRACE |   MISSED[1] Jaeger for distributed tracing
[15:07:52] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Which observability platform is integrated?
[15:07:52] TRACE | Total key facts: 3
[15:07:52] TRACE | Found facts: 3/3
[15:07:52] TRACE |   FOUND[1] Prometheus
[15:07:52] TRACE |   FOUND[2] Grafana
[15:07:52] TRACE |   FOUND[3] Jaeger for distributed tracing
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Where can I view CloudFlow metrics and logs?
[15:07:52] TRACE | Total key facts: 3
[15:07:52] TRACE | Found facts: 2/3
[15:07:52] TRACE |   FOUND[1] Prometheus
[15:07:52] TRACE |   FOUND[2] Grafana
[15:07:52] TRACE | Missed facts: 1/3
[15:07:52] TRACE |   MISSED[1] Jaeger for distributed tracing
[15:07:52] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: monitoring stack
[15:07:52] TRACE | Total key facts: 3
[15:07:52] TRACE | Found facts: 2/3
[15:07:52] TRACE |   FOUND[1] Prometheus
[15:07:52] TRACE |   FOUND[2] Grafana
[15:07:52] TRACE | Missed facts: 1/3
[15:07:52] TRACE |   MISSED[1] Jaeger for distributed tracing
[15:07:52] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: I need to set up dashboards, what monitoring systems are available?
[15:07:52] TRACE | Total key facts: 3
[15:07:52] TRACE | Found facts: 2/3
[15:07:52] TRACE |   FOUND[1] Prometheus
[15:07:52] TRACE |   FOUND[2] Grafana
[15:07:52] TRACE | Missed facts: 1/3
[15:07:52] TRACE |   MISSED[1] Jaeger for distributed tracing
[15:07:52] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Why can't I see metrics in Datadog?
[15:07:52] TRACE | Total key facts: 3
[15:07:52] TRACE | Found facts: 2/3
[15:07:52] TRACE |   FOUND[1] Prometheus
[15:07:52] TRACE |   FOUND[2] Grafana
[15:07:52] TRACE | Missed facts: 1/3
[15:07:52] TRACE |   MISSED[1] Jaeger for distributed tracing
[15:07:52] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: How do I diagnose database connection pool exhaustion?
[15:07:52] TRACE | Total key facts: 4
[15:07:52] TRACE | Found facts: 3/4
[15:07:52] TRACE |   FOUND[1] could not obtain connection from pool within 5000ms
[15:07:52] TRACE |   FOUND[2] connection pool exhausted (100/100 connections in use)
[15:07:52] TRACE |   FOUND[3] PgBouncer
[15:07:52] TRACE | Missed facts: 1/4
[15:07:52] TRACE |   MISSED[1] max_db_connections = 100
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: What should I check when I run out of database connections?
[15:07:52] TRACE | Total key facts: 4
[15:07:52] TRACE | Found facts: 3/4
[15:07:52] TRACE |   FOUND[1] could not obtain connection from pool within 5000ms
[15:07:52] TRACE |   FOUND[2] connection pool exhausted (100/100 connections in use)
[15:07:52] TRACE |   FOUND[3] PgBouncer
[15:07:52] TRACE | Missed facts: 1/4
[15:07:52] TRACE |   MISSED[1] max_db_connections = 100
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Getting 'could not obtain connection from pool' errors
[15:07:52] TRACE | Total key facts: 4
[15:07:52] TRACE | Found facts: 3/4
[15:07:52] TRACE |   FOUND[1] could not obtain connection from pool within 5000ms
[15:07:52] TRACE |   FOUND[2] connection pool exhausted (100/100 connections in use)
[15:07:52] TRACE |   FOUND[3] PgBouncer
[15:07:52] TRACE | Missed facts: 1/4
[15:07:52] TRACE |   MISSED[1] max_db_connections = 100
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: connection pool full
[15:07:52] TRACE | Total key facts: 4
[15:07:52] TRACE | Found facts: 3/4
[15:07:52] TRACE |   FOUND[1] could not obtain connection from pool within 5000ms
[15:07:52] TRACE |   FOUND[2] connection pool exhausted (100/100 connections in use)
[15:07:52] TRACE |   FOUND[3] PgBouncer
[15:07:52] TRACE | Missed facts: 1/4
[15:07:52] TRACE |   MISSED[1] max_db_connections = 100
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: My app is failing with connection pool errors, how do I troubleshoot?
[15:07:52] TRACE | Total key facts: 4
[15:07:52] TRACE | Found facts: 3/4
[15:07:52] TRACE |   FOUND[1] could not obtain connection from pool within 5000ms
[15:07:52] TRACE |   FOUND[2] connection pool exhausted (100/100 connections in use)
[15:07:52] TRACE |   FOUND[3] PgBouncer
[15:07:52] TRACE | Missed facts: 1/4
[15:07:52] TRACE |   MISSED[1] max_db_connections = 100
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Why can't I get a database connection even though CPU is low?
[15:07:52] TRACE | Total key facts: 4
[15:07:52] TRACE | Found facts: 3/4
[15:07:52] TRACE |   FOUND[1] could not obtain connection from pool within 5000ms
[15:07:52] TRACE |   FOUND[2] connection pool exhausted (100/100 connections in use)
[15:07:52] TRACE |   FOUND[3] PgBouncer
[15:07:52] TRACE | Missed facts: 1/4
[15:07:52] TRACE |   MISSED[1] max_db_connections = 100
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: How do I handle API authentication?
[15:07:52] TRACE | Total key facts: 3
[15:07:52] TRACE | Found facts: 3/3
[15:07:52] TRACE |   FOUND[1] OAuth 2.0
[15:07:52] TRACE |   FOUND[2] API keys
[15:07:52] TRACE |   FOUND[3] JWT tokens
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: What authentication methods are supported?
[15:07:52] TRACE | Total key facts: 3
[15:07:52] TRACE | Found facts: 3/3
[15:07:52] TRACE |   FOUND[1] OAuth 2.0
[15:07:52] TRACE |   FOUND[2] API keys
[15:07:52] TRACE |   FOUND[3] JWT tokens
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: My API requests are getting 401 errors
[15:07:52] TRACE | Total key facts: 3
[15:07:52] TRACE | Found facts: 2/3
[15:07:52] TRACE |   FOUND[1] OAuth 2.0
[15:07:52] TRACE |   FOUND[2] API keys
[15:07:52] TRACE | Missed facts: 1/3
[15:07:52] TRACE |   MISSED[1] JWT tokens
[15:07:52] TRACE |     -> Found in chunk_id=api_reference_fix_0 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: auth methods
[15:07:52] TRACE | Total key facts: 3
[15:07:52] TRACE | Found facts: 3/3
[15:07:52] TRACE |   FOUND[1] OAuth 2.0
[15:07:52] TRACE |   FOUND[2] API keys
[15:07:52] TRACE |   FOUND[3] JWT tokens
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: I'm integrating with CloudFlow API, what authentication options do I have?
[15:07:52] TRACE | Total key facts: 3
[15:07:52] TRACE | Found facts: 3/3
[15:07:52] TRACE |   FOUND[1] OAuth 2.0
[15:07:52] TRACE |   FOUND[2] API keys
[15:07:52] TRACE |   FOUND[3] JWT tokens
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Why isn't basic auth working?
[15:07:52] TRACE | Total key facts: 3
[15:07:52] TRACE | Found facts: 1/3
[15:07:52] TRACE |   FOUND[1] OAuth 2.0
[15:07:52] TRACE | Missed facts: 2/3
[15:07:52] TRACE |   MISSED[1] API keys
[15:07:52] TRACE |     -> Found in chunk_id=api_reference_fix_0 (rank not in top-5)
[15:07:52] TRACE |   MISSED[2] JWT tokens
[15:07:52] TRACE |     -> Found in chunk_id=api_reference_fix_0 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: What is PgBouncer and why is it used in CloudFlow?
[15:07:52] TRACE | Total key facts: 5
[15:07:52] TRACE | Found facts: 5/5
[15:07:52] TRACE |   FOUND[1] PgBouncer
[15:07:52] TRACE |   FOUND[2] connection pooling
[15:07:52] TRACE |   FOUND[3] max_db_connections = 100
[15:07:52] TRACE |   FOUND[4] default_pool_size = 25
[15:07:52] TRACE |   FOUND[5] pool_mode = transaction
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: What's the purpose of the connection pooler?
[15:07:52] TRACE | Total key facts: 5
[15:07:52] TRACE | Found facts: 2/5
[15:07:52] TRACE |   FOUND[1] PgBouncer
[15:07:52] TRACE |   FOUND[2] connection pooling
[15:07:52] TRACE | Missed facts: 3/5
[15:07:52] TRACE |   MISSED[1] max_db_connections = 100
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE |   MISSED[2] default_pool_size = 25
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE |   MISSED[3] pool_mode = transaction
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Should I connect directly to PostgreSQL or through PgBouncer?
[15:07:52] TRACE | Total key facts: 5
[15:07:52] TRACE | Found facts: 2/5
[15:07:52] TRACE |   FOUND[1] PgBouncer
[15:07:52] TRACE |   FOUND[2] connection pooling
[15:07:52] TRACE | Missed facts: 3/5
[15:07:52] TRACE |   MISSED[1] max_db_connections = 100
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE |   MISSED[2] default_pool_size = 25
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE |   MISSED[3] pool_mode = transaction
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: pgbouncer purpose
[15:07:52] TRACE | Total key facts: 5
[15:07:52] TRACE | Found facts: 5/5
[15:07:52] TRACE |   FOUND[1] PgBouncer
[15:07:52] TRACE |   FOUND[2] connection pooling
[15:07:52] TRACE |   FOUND[3] max_db_connections = 100
[15:07:52] TRACE |   FOUND[4] default_pool_size = 25
[15:07:52] TRACE |   FOUND[5] pool_mode = transaction
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Optimizing database connections, what role does PgBouncer play?
[15:07:52] TRACE | Total key facts: 5
[15:07:52] TRACE | Found facts: 5/5
[15:07:52] TRACE |   FOUND[1] PgBouncer
[15:07:52] TRACE |   FOUND[2] connection pooling
[15:07:52] TRACE |   FOUND[3] max_db_connections = 100
[15:07:52] TRACE |   FOUND[4] default_pool_size = 25
[15:07:52] TRACE |   FOUND[5] pool_mode = transaction
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Why can't I connect directly to the database?
[15:07:52] TRACE | Total key facts: 5
[15:07:52] TRACE | Found facts: 2/5
[15:07:52] TRACE |   FOUND[1] PgBouncer
[15:07:52] TRACE |   FOUND[2] connection pooling
[15:07:52] TRACE | Missed facts: 3/5
[15:07:52] TRACE |   MISSED[1] max_db_connections = 100
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE |   MISSED[2] default_pool_size = 25
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE |   MISSED[3] pool_mode = transaction
[15:07:52] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: How do I implement retry logic for failed workflow steps?
[15:07:52] TRACE | Total key facts: 4
[15:07:52] TRACE | Found facts: 4/4
[15:07:52] TRACE |   FOUND[1] max_attempts: 3
[15:07:52] TRACE |   FOUND[2] backoff_type: exponential
[15:07:52] TRACE |   FOUND[3] initial_interval: 1000
[15:07:52] TRACE |   FOUND[4] max retries: 3
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: What's the retry strategy for transient failures?
[15:07:52] TRACE | Total key facts: 4
[15:07:52] TRACE | Found facts: 4/4
[15:07:52] TRACE |   FOUND[1] max_attempts: 3
[15:07:52] TRACE |   FOUND[2] backoff_type: exponential
[15:07:52] TRACE |   FOUND[3] initial_interval: 1000
[15:07:52] TRACE |   FOUND[4] max retries: 3
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: My workflow fails on temporary network errors
[15:07:52] TRACE | Total key facts: 4
[15:07:52] TRACE | Found facts: 0/4
[15:07:52] TRACE | Missed facts: 4/4
[15:07:52] TRACE |   MISSED[1] max_attempts: 3
[15:07:52] TRACE |     -> Found in chunk_id=user_guide_fix_5 (rank not in top-5)
[15:07:52] TRACE |   MISSED[2] backoff_type: exponential
[15:07:52] TRACE |     -> Found in chunk_id=user_guide_fix_7 (rank not in top-5)
[15:07:52] TRACE |   MISSED[3] initial_interval: 1000
[15:07:52] TRACE |     -> Found in chunk_id=user_guide_fix_5 (rank not in top-5)
[15:07:52] TRACE |   MISSED[4] max retries: 3
[15:07:52] TRACE |     -> Found in chunk_id=troubleshooting_guide_fix_5 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: retry config
[15:07:52] TRACE | Total key facts: 4
[15:07:52] TRACE | Found facts: 3/4
[15:07:52] TRACE |   FOUND[1] max_attempts: 3
[15:07:52] TRACE |   FOUND[2] initial_interval: 1000
[15:07:52] TRACE |   FOUND[3] max retries: 3
[15:07:52] TRACE | Missed facts: 1/4
[15:07:52] TRACE |   MISSED[1] backoff_type: exponential
[15:07:52] TRACE |     -> Found in chunk_id=user_guide_fix_7 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: I want workflows to automatically retry on errors, what are the options?
[15:07:52] TRACE | Total key facts: 4
[15:07:52] TRACE | Found facts: 3/4
[15:07:52] TRACE |   FOUND[1] max_attempts: 3
[15:07:52] TRACE |   FOUND[2] initial_interval: 1000
[15:07:52] TRACE |   FOUND[3] max retries: 3
[15:07:52] TRACE | Missed facts: 1/4
[15:07:52] TRACE |   MISSED[1] backoff_type: exponential
[15:07:52] TRACE |     -> Found in chunk_id=user_guide_fix_7 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Why doesn't my workflow retry after failing?
[15:07:52] TRACE | Total key facts: 4
[15:07:52] TRACE | Found facts: 3/4
[15:07:52] TRACE |   FOUND[1] max_attempts: 3
[15:07:52] TRACE |   FOUND[2] initial_interval: 1000
[15:07:52] TRACE |   FOUND[3] max retries: 3
[15:07:52] TRACE | Missed facts: 1/4
[15:07:52] TRACE |   MISSED[1] backoff_type: exponential
[15:07:52] TRACE |     -> Found in chunk_id=user_guide_fix_7 (rank not in top-5)
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: What Helm chart repository should I use for deployment?
[15:07:52] TRACE | Total key facts: 1
[15:07:52] TRACE | Found facts: 1/1
[15:07:52] TRACE |   FOUND[1] helm repo add cloudflow https://charts.cloudflow.io
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Where is the CloudFlow Helm chart hosted?
[15:07:52] TRACE | Total key facts: 1
[15:07:52] TRACE | Found facts: 1/1
[15:07:52] TRACE |   FOUND[1] helm repo add cloudflow https://charts.cloudflow.io
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: helm repo add is failing, what's the correct URL?
[15:07:52] TRACE | Total key facts: 1
[15:07:52] TRACE | Found facts: 1/1
[15:07:52] TRACE |   FOUND[1] helm repo add cloudflow https://charts.cloudflow.io
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: helm repo
[15:07:52] TRACE | Total key facts: 1
[15:07:52] TRACE | Found facts: 1/1
[15:07:52] TRACE |   FOUND[1] helm repo add cloudflow https://charts.cloudflow.io
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Setting up deployment pipeline, which Helm repository has CloudFlow charts?
[15:07:52] TRACE | Total key facts: 1
[15:07:52] TRACE | Found facts: 1/1
[15:07:52] TRACE |   FOUND[1] helm repo add cloudflow https://charts.cloudflow.io
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Why can't I find CloudFlow in the official Helm hub?
[15:07:52] TRACE | Total key facts: 1
[15:07:52] TRACE | Found facts: 1/1
[15:07:52] TRACE |   FOUND[1] helm repo add cloudflow https://charts.cloudflow.io
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: What is the minimum scheduling interval for workflows?
[15:07:52] TRACE | Total key facts: 2
[15:07:52] TRACE | Found facts: 1/2
[15:07:52] TRACE |   FOUND[1] The minimum scheduling interval is **1 minute**
[15:07:52] TRACE | Missed facts: 1/2
[15:07:52] TRACE |   MISSED[1] minimum scheduling interval is 1 minute
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: How frequently can I schedule a workflow?
[15:07:52] TRACE | Total key facts: 2
[15:07:52] TRACE | Found facts: 1/2
[15:07:52] TRACE |   FOUND[1] The minimum scheduling interval is **1 minute**
[15:07:52] TRACE | Missed facts: 1/2
[15:07:52] TRACE |   MISSED[1] minimum scheduling interval is 1 minute
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: My every-30-seconds schedule is being rejected
[15:07:52] TRACE | Total key facts: 2
[15:07:52] TRACE | Found facts: 1/2
[15:07:52] TRACE |   FOUND[1] The minimum scheduling interval is **1 minute**
[15:07:52] TRACE | Missed facts: 1/2
[15:07:52] TRACE |   MISSED[1] minimum scheduling interval is 1 minute
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: min schedule interval
[15:07:52] TRACE | Total key facts: 2
[15:07:52] TRACE | Found facts: 1/2
[15:07:52] TRACE |   FOUND[1] The minimum scheduling interval is **1 minute**
[15:07:52] TRACE | Missed facts: 1/2
[15:07:52] TRACE |   MISSED[1] minimum scheduling interval is 1 minute
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: I need near real-time execution, what's the fastest schedule I can set?
[15:07:52] TRACE | Total key facts: 2
[15:07:52] TRACE | Found facts: 1/2
[15:07:52] TRACE |   FOUND[1] The minimum scheduling interval is **1 minute**
[15:07:52] TRACE | Missed facts: 1/2
[15:07:52] TRACE |   MISSED[1] minimum scheduling interval is 1 minute
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:52] TRACE | Query: Why can't I schedule workflows every 30 seconds?
[15:07:52] TRACE | Total key facts: 2
[15:07:52] TRACE | Found facts: 1/2
[15:07:52] TRACE |   FOUND[1] The minimum scheduling interval is **1 minute**
[15:07:52] TRACE | Missed facts: 1/2
[15:07:52] TRACE |   MISSED[1] minimum scheduling interval is 1 minute
[15:07:52] TRACE | === END FACT COVERAGE ===
[15:07:52] INFO  |   k=5 exact_match: 75.5% (40/53)
[15:07:52] INFO  |     synonym: 69.8%
[15:07:52] INFO  |     problem: 54.7%
[15:07:52] INFO  |     casual: 66.0%
[15:07:52] INFO  |     contextual: 60.4%
[15:07:52] INFO  |     negation: 50.9%

================================================================================
[15:07:52] INFO  | RETRIEVAL STRATEGY: enriched_hybrid_llm
================================================================================
[15:07:52] INFO  | Loading embedder: BAAI/bge-base-en-v1.5
[15:07:54] PROG  | [  2/  2] ████████████████████ 100.0% | enriched_hybrid_llm_bge-base-en-v1.5_fast_fixed_512_0pct
[15:07:54] DEBUG | Chunking document 'api_reference': 1792 words, 16663 chars
[15:07:54] DEBUG |   Chunk 0: chars [0-3160] words=376 tokens≈500 preview='# CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...'
[15:07:54] DEBUG |   Chunk 1: chars [3161-6111] words=379 tokens≈504 preview='## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...'
[15:07:54] DEBUG |   Chunk 2: chars [6112-8827] words=296 tokens≈393 preview='**Endpoint:** `POST /workflows` **Request Body:** ```json { "name": "Email Campaign Automation", "de...'
[15:07:54] DEBUG |   Chunk 3: chars [8828-11402] words=269 tokens≈357 preview='**Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...'
[15:07:54] DEBUG |   Chunk 4: chars [11403-14151] words=365 tokens≈485 preview='### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...'
[15:07:54] DEBUG |   Chunk 5: chars [14152-15213] words=107 tokens≈142 preview='**Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...'
[15:07:54] DEBUG | Created 6 chunks for document 'api_reference'
[15:07:54] DEBUG | Chunking document 'architecture_overview': 4607 words, 36722 chars
[15:07:54] DEBUG |   Chunk 0: chars [0-3230] words=370 tokens≈492 preview='# CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...'
[15:07:54] DEBUG |   Chunk 1: chars [3231-5982] words=380 tokens≈505 preview='**Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...'
[15:07:54] DEBUG |   Chunk 2: chars [5983-7875] words=248 tokens≈329 preview='**Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...'
[15:07:54] DEBUG |   Chunk 3: chars [7876-9478] words=219 tokens≈291 preview='**Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...'
[15:07:54] DEBUG |   Chunk 4: chars [9479-11878] words=354 tokens≈470 preview='**Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...'
[15:07:54] DEBUG |   Chunk 5: chars [11879-14634] words=368 tokens≈489 preview='Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...'
[15:07:54] DEBUG |   Chunk 6: chars [14635-17394] words=384 tokens≈510 preview='**Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...'
[15:07:54] DEBUG |   Chunk 7: chars [17395-20141] words=381 tokens≈506 preview='records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...'
[15:07:54] DEBUG |   Chunk 8: chars [20142-22843] words=384 tokens≈510 preview='### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...'
[15:07:54] DEBUG |   Chunk 9: chars [22844-25362] words=384 tokens≈510 preview='per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...'
[15:07:54] DEBUG |   Chunk 10: chars [25363-27842] words=384 tokens≈510 preview='- Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...'
[15:07:54] DEBUG |   Chunk 11: chars [27843-30286] words=375 tokens≈498 preview='Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...'
[15:07:54] DEBUG |   Chunk 12: chars [30287-32834] words=376 tokens≈500 preview='Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...'
[15:07:54] DEBUG | Created 13 chunks for document 'architecture_overview'
[15:07:54] DEBUG | Chunking document 'deployment_guide': 2777 words, 25837 chars
[15:07:54] DEBUG |   Chunk 0: chars [0-3165] words=384 tokens≈510 preview='# CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...'
[15:07:54] DEBUG |   Chunk 1: chars [3166-6560] words=384 tokens≈510 preview='create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...'
[15:07:54] DEBUG |   Chunk 2: chars [6561-8755] words=251 tokens≈333 preview='- secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...'
[15:07:54] DEBUG |   Chunk 3: chars [8756-12138] words=384 tokens≈510 preview='Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...'
[15:07:54] DEBUG |   Chunk 4: chars [12139-14139] words=204 tokens≈271 preview='--set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...'
[15:07:54] DEBUG |   Chunk 5: chars [14140-17194] words=372 tokens≈494 preview='Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...'
[15:07:54] DEBUG |   Chunk 6: chars [17195-20069] words=384 tokens≈510 preview='**Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...'
[15:07:54] DEBUG |   Chunk 7: chars [20070-23221] words=384 tokens≈510 preview='podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...'
[15:07:54] DEBUG |   Chunk 8: chars [23222-23448] words=30 tokens≈39 preview='UTC - **Secondary**: Wednesday 10:00-12:00 UTC All deployments should target these windows to minimi...'
[15:07:54] DEBUG | Created 9 chunks for document 'deployment_guide'
[15:07:54] DEBUG | Chunking document 'troubleshooting_guide': 4032 words, 32183 chars
[15:07:54] DEBUG |   Chunk 0: chars [0-2666] words=320 tokens≈425 preview='# CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...'
[15:07:54] DEBUG |   Chunk 1: chars [2667-5007] words=321 tokens≈426 preview='**Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...'
[15:07:54] DEBUG |   Chunk 2: chars [5008-8037] words=376 tokens≈500 preview='Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...'
[15:07:54] DEBUG |   Chunk 3: chars [8038-10862] words=356 tokens≈473 preview='Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...'
[15:07:54] DEBUG |   Chunk 4: chars [10863-13827] words=384 tokens≈510 preview='**Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...'
[15:07:54] DEBUG |   Chunk 5: chars [13828-16401] words=334 tokens≈444 preview='exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...'
[15:07:54] DEBUG |   Chunk 6: chars [16402-19022] words=329 tokens≈437 preview='Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...'
[15:07:54] DEBUG |   Chunk 7: chars [19023-20595] words=194 tokens≈258 preview='Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...'
[15:07:54] DEBUG |   Chunk 8: chars [20596-23454] words=384 tokens≈510 preview='Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...'
[15:07:54] DEBUG |   Chunk 9: chars [23455-26239] words=384 tokens≈510 preview='in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...'
[15:07:54] DEBUG |   Chunk 10: chars [26240-29039] words=384 tokens≈510 preview='database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...'
[15:07:54] DEBUG |   Chunk 11: chars [29040-31206] words=266 tokens≈353 preview='outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...'
[15:07:54] DEBUG | Created 12 chunks for document 'troubleshooting_guide'
[15:07:54] DEBUG | Chunking document 'user_guide': 3735 words, 31582 chars
[15:07:54] DEBUG |   Chunk 0: chars [0-2617] words=375 tokens≈498 preview='# CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...'
[15:07:54] DEBUG |   Chunk 1: chars [2618-5224] words=348 tokens≈462 preview='Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...'
[15:07:54] DEBUG |   Chunk 2: chars [5225-8372] words=381 tokens≈506 preview='### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...'
[15:07:54] DEBUG |   Chunk 3: chars [8373-11268] words=336 tokens≈446 preview='``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...'
[15:07:54] DEBUG |   Chunk 4: chars [11269-13371] words=375 tokens≈498 preview='### Cron Syntax Use standard cron expressions to define schedules: ``` * * * * * ┬ ┬ ┬ ┬ ┬ │ │ │ │ │...'
[15:07:54] DEBUG |   Chunk 5: chars [13372-16105] words=383 tokens≈509 preview='Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...'
[15:07:54] DEBUG |   Chunk 6: chars [16106-18686] words=363 tokens≈482 preview='Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...'
[15:07:54] DEBUG |   Chunk 7: chars [18687-21448] words=364 tokens≈484 preview='Handle Errors Gracefully Always implement error handling for external API calls and database operati...'
[15:07:54] DEBUG |   Chunk 8: chars [21449-24677] words=384 tokens≈510 preview='Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...'
[15:07:54] DEBUG |   Chunk 9: chars [24678-27975] words=371 tokens≈493 preview='Requester: {{trigger.body.requester}} Description: {{trigger.body.description}} Approve: https://app...'
[15:07:54] DEBUG |   Chunk 10: chars [27976-28481] words=55 tokens≈73 preview='- **Documentation**: https://docs.cloudflow.io - **Community Forum**: https://community.cloudflow.io...'
[15:07:54] DEBUG | Created 11 chunks for document 'user_guide'
[15:07:54] INFO  |   Created 51 chunks
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 1 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 2 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 3 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 4 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 5 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 6 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 7 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 8 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 9 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 10 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 11 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 12 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 13 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 14 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 15 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 16 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 17 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 18 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 19 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 20 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 21 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 22 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 23 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 24 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 25 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 26 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 27 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 28 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 29 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 30 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 31 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 32 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 33 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 34 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 35 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 36 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 37 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 38 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 39 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 40 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 41 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 42 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 43 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 44 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 45 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 46 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 47 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 48 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 49 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 50 hits so far
[15:07:54] TRACE | [enriched-hybrid-llm] CACHE HIT: 51 hits so far
[15:07:55] INFO  |   Indexed in 0.98s
[15:07:55] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:07:55] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What is the API rate limit per minute?
[15:07:55] DEBUG | [query-rewrite] Rewriting query: What is the API rate limit per minute?
[15:07:55] DEBUG | [provider] Creating anthropic provider for model=claude-haiku
[15:07:55] DEBUG | [anthropic] Loading auth from /home/fujin/.local/share/opencode/auth.json
[15:07:55] DEBUG | [anthropic] Auth loaded, token expires in 182.1 minutes
[15:07:55] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:07:55] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=837 timeout=5s
[15:07:55] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:07:55] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:07:55] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:07:56] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.85s
[15:07:56] DEBUG | [anthropic] USAGE: input_tokens=195 output_tokens=12
[15:07:56] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=62
[15:07:56] DEBUG | [anthropic] RESPONSE: API rate limit per minute maximum requests frequency threshold
[15:07:56] DEBUG | [query-rewrite] SUCCESS in 0.849s: What is the API rate limit per minute? → API rate limit per minute maximum requests frequency threshold
[15:07:56] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: API rate limit per minute maximum requests frequency threshold (took 0.849s)
[15:07:56] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:07:56] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:07:56] TRACE | [enriched-hybrid-llm]   SEM[0] idx=1 chunk_id=api_reference_fix_1 score=0.7698 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:07:56] TRACE | [enriched-hybrid-llm]   SEM[1] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6634 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:07:56] TRACE | [enriched-hybrid-llm]   SEM[2] idx=4 chunk_id=api_reference_fix_4 score=0.6630 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:07:56] TRACE | [enriched-hybrid-llm]   SEM[3] idx=7 chunk_id=architecture_overview_fix_1 score=0.6330 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:07:56] TRACE | [enriched-hybrid-llm]   SEM[4] idx=16 chunk_id=architecture_overview_fix_10 score=0.6277 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:07:56] TRACE | [enriched-hybrid-llm]   SEM[5] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6164 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:07:56] TRACE | [enriched-hybrid-llm]   SEM[6] idx=3 chunk_id=api_reference_fix_3 score=0.6116 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:07:56] TRACE | [enriched-hybrid-llm]   SEM[7] idx=18 chunk_id=architecture_overview_fix_12 score=0.5729 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:07:56] TRACE | [enriched-hybrid-llm]   SEM[8] idx=46 chunk_id=user_guide_fix_6 score=0.5725 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:07:56] TRACE | [enriched-hybrid-llm]   SEM[9] idx=0 chunk_id=api_reference_fix_0 score=0.5692 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:07:56] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:07:56] TRACE | [enriched-hybrid-llm]   BM25[0] idx=1 chunk_id=api_reference_fix_1 score=11.3636 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:07:56] TRACE | [enriched-hybrid-llm]   BM25[1] idx=34 chunk_id=troubleshooting_guide_fix_6 score=8.0297 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:07:56] TRACE | [enriched-hybrid-llm]   BM25[2] idx=16 chunk_id=architecture_overview_fix_10 score=7.9728 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:07:56] TRACE | [enriched-hybrid-llm]   BM25[3] idx=15 chunk_id=architecture_overview_fix_9 score=6.8261 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:07:56] TRACE | [enriched-hybrid-llm]   BM25[4] idx=35 chunk_id=troubleshooting_guide_fix_7 score=6.7939 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:07:56] TRACE | [enriched-hybrid-llm]   BM25[5] idx=7 chunk_id=architecture_overview_fix_1 score=6.7184 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:07:56] TRACE | [enriched-hybrid-llm]   BM25[6] idx=4 chunk_id=api_reference_fix_4 score=5.5324 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:07:56] TRACE | [enriched-hybrid-llm]   BM25[7] idx=42 chunk_id=user_guide_fix_2 score=5.3551 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:07:56] TRACE | [enriched-hybrid-llm]   BM25[8] idx=10 chunk_id=architecture_overview_fix_4 score=5.1295 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:07:56] TRACE | [enriched-hybrid-llm]   BM25[9] idx=31 chunk_id=troubleshooting_guide_fix_3 score=4.6253 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:07:56] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:07:56] TRACE | [enriched-hybrid-llm]   RRF[0] idx=1 total=0.0333 (sem_rank=0 comp=0.0167 + bm25_rank=0 comp=0.0167)
[15:07:56] TRACE | [enriched-hybrid-llm]   RRF[1] idx=35 total=0.0320 (sem_rank=1 comp=0.0164 + bm25_rank=4 comp=0.0156)
[15:07:56] TRACE | [enriched-hybrid-llm]   RRF[2] idx=34 total=0.0318 (sem_rank=5 comp=0.0154 + bm25_rank=1 comp=0.0164)
[15:07:56] TRACE | [enriched-hybrid-llm]   RRF[3] idx=16 total=0.0318 (sem_rank=4 comp=0.0156 + bm25_rank=2 comp=0.0161)
[15:07:56] TRACE | [enriched-hybrid-llm]   RRF[4] idx=4 total=0.0313 (sem_rank=2 comp=0.0161 + bm25_rank=6 comp=0.0152)
[15:07:56] TRACE | [enriched-hybrid-llm]   RRF[5] idx=7 total=0.0313 (sem_rank=3 comp=0.0159 + bm25_rank=5 comp=0.0154)
[15:07:56] TRACE | [enriched-hybrid-llm]   RRF[6] idx=15 total=0.0294 (sem_rank=14 comp=0.0135 + bm25_rank=3 comp=0.0159)
[15:07:56] TRACE | [enriched-hybrid-llm]   RRF[7] idx=18 total=0.0281 (sem_rank=7 comp=0.0149 + bm25_rank=16 comp=0.0132)
[15:07:56] TRACE | [enriched-hybrid-llm]   RRF[8] idx=42 total=0.0281 (sem_rank=16 comp=0.0132 + bm25_rank=7 comp=0.0149)
[15:07:56] TRACE | [enriched-hybrid-llm]   RRF[9] idx=37 total=0.0280 (sem_rank=13 comp=0.0137 + bm25_rank=10 comp=0.0143)
[15:07:56] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:07:56] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0333 sem_rank=0 bm25_rank=0 dominant=balanced | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:07:56] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_7 doc_id=troubleshooting_guide rrf_score=0.0320 sem_rank=1 bm25_rank=4 dominant=semantic | enriched: Optimization Strategies, awk print, rate limit, raise Exception, Max retries, rate limiting, Warning | time.sleep(retry_after, Batch, API  Waiting {retry_after} seconds...") time.sleep(retry_after) co...
[15:07:56] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0318 sem_rank=5 bm25_rank=1 dominant=bm25 | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:07:56] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0318 sem_rank=4 bm25_rank=2 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:07:56] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=api_reference_fix_4 doc_id=api_reference rrf_score=0.0313 sem_rank=2 bm25_rank=6 dominant=semantic | enriched: malformed JSON, requested resource, Bad Gateway, Error Codes, HTTP Status, Response Format, Server Error | Status Codes, Invalid, Description, Common Causes, Forbidden  ### Error Response Format ```js...
[15:07:56] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:07:56] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:56] TRACE | Query: What is the API rate limit per minute?
[15:07:56] TRACE | Total key facts: 2
[15:07:56] TRACE | Found facts: 2/2
[15:07:56] TRACE |   FOUND[1] 100 requests per minute per authenticated user
[15:07:56] TRACE |   FOUND[2] 20 requests per minute for unauthenticated requests
[15:07:56] TRACE | === END FACT COVERAGE ===
[15:07:56] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:07:56] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: How many requests can I make per minute to the API?
[15:07:56] DEBUG | [query-rewrite] Rewriting query: How many requests can I make per minute to the API?
[15:07:56] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:07:56] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=850 timeout=5s
[15:07:56] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:07:56] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:07:56] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:07:57] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.00s
[15:07:57] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=12
[15:07:57] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=55
[15:07:57] DEBUG | [anthropic] RESPONSE: api rate limiting request per minute maximum throughput
[15:07:57] DEBUG | [query-rewrite] SUCCESS in 1.005s: How many requests can I make per minute to the API? → api rate limiting request per minute maximum throughput
[15:07:57] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: api rate limiting request per minute maximum throughput (took 1.005s)
[15:07:57] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:07:57] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:07:57] TRACE | [enriched-hybrid-llm]   SEM[0] idx=1 chunk_id=api_reference_fix_1 score=0.7551 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:07:57] TRACE | [enriched-hybrid-llm]   SEM[1] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6575 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:07:57] TRACE | [enriched-hybrid-llm]   SEM[2] idx=4 chunk_id=api_reference_fix_4 score=0.6473 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:07:57] TRACE | [enriched-hybrid-llm]   SEM[3] idx=7 chunk_id=architecture_overview_fix_1 score=0.6392 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:07:57] TRACE | [enriched-hybrid-llm]   SEM[4] idx=16 chunk_id=architecture_overview_fix_10 score=0.6276 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:07:57] TRACE | [enriched-hybrid-llm]   SEM[5] idx=3 chunk_id=api_reference_fix_3 score=0.5992 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:07:57] TRACE | [enriched-hybrid-llm]   SEM[6] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.5953 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:07:57] TRACE | [enriched-hybrid-llm]   SEM[7] idx=25 chunk_id=deployment_guide_fix_6 score=0.5813 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:07:57] TRACE | [enriched-hybrid-llm]   SEM[8] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5751 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:07:57] TRACE | [enriched-hybrid-llm]   SEM[9] idx=15 chunk_id=architecture_overview_fix_9 score=0.5705 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:07:57] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:07:57] TRACE | [enriched-hybrid-llm]   BM25[0] idx=15 chunk_id=architecture_overview_fix_9 score=9.6410 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:07:57] TRACE | [enriched-hybrid-llm]   BM25[1] idx=1 chunk_id=api_reference_fix_1 score=9.2046 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:07:57] TRACE | [enriched-hybrid-llm]   BM25[2] idx=16 chunk_id=architecture_overview_fix_10 score=8.4507 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:07:57] TRACE | [enriched-hybrid-llm]   BM25[3] idx=7 chunk_id=architecture_overview_fix_1 score=8.1736 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:07:57] TRACE | [enriched-hybrid-llm]   BM25[4] idx=34 chunk_id=troubleshooting_guide_fix_6 score=7.2754 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:07:57] TRACE | [enriched-hybrid-llm]   BM25[5] idx=10 chunk_id=architecture_overview_fix_4 score=5.0490 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:07:57] TRACE | [enriched-hybrid-llm]   BM25[6] idx=4 chunk_id=api_reference_fix_4 score=4.9485 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:07:57] TRACE | [enriched-hybrid-llm]   BM25[7] idx=35 chunk_id=troubleshooting_guide_fix_7 score=4.4042 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:07:57] TRACE | [enriched-hybrid-llm]   BM25[8] idx=38 chunk_id=troubleshooting_guide_fix_10 score=4.3660 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:07:57] TRACE | [enriched-hybrid-llm]   BM25[9] idx=37 chunk_id=troubleshooting_guide_fix_9 score=3.8600 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:07:57] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:07:57] TRACE | [enriched-hybrid-llm]   RRF[0] idx=1 total=0.0331 (sem_rank=0 comp=0.0167 + bm25_rank=1 comp=0.0164)
[15:07:57] TRACE | [enriched-hybrid-llm]   RRF[1] idx=16 total=0.0318 (sem_rank=4 comp=0.0156 + bm25_rank=2 comp=0.0161)
[15:07:57] TRACE | [enriched-hybrid-llm]   RRF[2] idx=7 total=0.0317 (sem_rank=3 comp=0.0159 + bm25_rank=3 comp=0.0159)
[15:07:57] TRACE | [enriched-hybrid-llm]   RRF[3] idx=35 total=0.0313 (sem_rank=1 comp=0.0164 + bm25_rank=7 comp=0.0149)
[15:07:57] TRACE | [enriched-hybrid-llm]   RRF[4] idx=4 total=0.0313 (sem_rank=2 comp=0.0161 + bm25_rank=6 comp=0.0152)
[15:07:57] TRACE | [enriched-hybrid-llm]   RRF[5] idx=15 total=0.0312 (sem_rank=9 comp=0.0145 + bm25_rank=0 comp=0.0167)
[15:07:57] TRACE | [enriched-hybrid-llm]   RRF[6] idx=34 total=0.0308 (sem_rank=6 comp=0.0152 + bm25_rank=4 comp=0.0156)
[15:07:57] TRACE | [enriched-hybrid-llm]   RRF[7] idx=25 total=0.0292 (sem_rank=7 comp=0.0149 + bm25_rank=10 comp=0.0143)
[15:07:57] TRACE | [enriched-hybrid-llm]   RRF[8] idx=29 total=0.0286 (sem_rank=8 comp=0.0147 + bm25_rank=12 comp=0.0139)
[15:07:57] TRACE | [enriched-hybrid-llm]   RRF[9] idx=23 total=0.0284 (sem_rank=10 comp=0.0143 + bm25_rank=11 comp=0.0141)
[15:07:57] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:07:57] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0331 sem_rank=0 bm25_rank=1 dominant=semantic | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:07:57] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0318 sem_rank=4 bm25_rank=2 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:07:57] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.0317 sem_rank=3 bm25_rank=3 dominant=balanced | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:07:57] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_7 doc_id=troubleshooting_guide rrf_score=0.0313 sem_rank=1 bm25_rank=7 dominant=semantic | enriched: Optimization Strategies, awk print, rate limit, raise Exception, Max retries, rate limiting, Warning | time.sleep(retry_after, Batch, API  Waiting {retry_after} seconds...") time.sleep(retry_after) co...
[15:07:57] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=api_reference_fix_4 doc_id=api_reference rrf_score=0.0313 sem_rank=2 bm25_rank=6 dominant=semantic | enriched: malformed JSON, requested resource, Bad Gateway, Error Codes, HTTP Status, Response Format, Server Error | Status Codes, Invalid, Description, Common Causes, Forbidden  ### Error Response Format ```js...
[15:07:57] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:07:57] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:57] TRACE | Query: How many requests can I make per minute to the API?
[15:07:57] TRACE | Total key facts: 2
[15:07:57] TRACE | Found facts: 2/2
[15:07:57] TRACE |   FOUND[1] 100 requests per minute per authenticated user
[15:07:57] TRACE |   FOUND[2] 20 requests per minute for unauthenticated requests
[15:07:57] TRACE | === END FACT COVERAGE ===
[15:07:57] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:07:57] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: My API calls are getting blocked, what's the limit?
[15:07:57] DEBUG | [query-rewrite] Rewriting query: My API calls are getting blocked, what's the limit?
[15:07:57] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:07:57] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=850 timeout=5s
[15:07:57] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:07:57] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:07:57] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:07:58] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.92s
[15:07:58] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=11
[15:07:58] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=52
[15:07:58] DEBUG | [anthropic] RESPONSE: api rate limit request throttling quota restrictions
[15:07:58] DEBUG | [query-rewrite] SUCCESS in 0.916s: My API calls are getting blocked, what's the limit? → api rate limit request throttling quota restrictions
[15:07:58] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: api rate limit request throttling quota restrictions (took 0.916s)
[15:07:58] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:07:58] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:07:58] TRACE | [enriched-hybrid-llm]   SEM[0] idx=1 chunk_id=api_reference_fix_1 score=0.7379 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:07:58] TRACE | [enriched-hybrid-llm]   SEM[1] idx=4 chunk_id=api_reference_fix_4 score=0.6484 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:07:58] TRACE | [enriched-hybrid-llm]   SEM[2] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6454 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:07:58] TRACE | [enriched-hybrid-llm]   SEM[3] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6193 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:07:58] TRACE | [enriched-hybrid-llm]   SEM[4] idx=7 chunk_id=architecture_overview_fix_1 score=0.6176 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:07:58] TRACE | [enriched-hybrid-llm]   SEM[5] idx=3 chunk_id=api_reference_fix_3 score=0.5873 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:07:58] TRACE | [enriched-hybrid-llm]   SEM[6] idx=16 chunk_id=architecture_overview_fix_10 score=0.5757 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:07:58] TRACE | [enriched-hybrid-llm]   SEM[7] idx=15 chunk_id=architecture_overview_fix_9 score=0.5592 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:07:58] TRACE | [enriched-hybrid-llm]   SEM[8] idx=10 chunk_id=architecture_overview_fix_4 score=0.5574 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:07:58] TRACE | [enriched-hybrid-llm]   SEM[9] idx=0 chunk_id=api_reference_fix_0 score=0.5558 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:07:58] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:07:58] TRACE | [enriched-hybrid-llm]   BM25[0] idx=34 chunk_id=troubleshooting_guide_fix_6 score=10.4398 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:07:58] TRACE | [enriched-hybrid-llm]   BM25[1] idx=4 chunk_id=api_reference_fix_4 score=8.9873 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:07:58] TRACE | [enriched-hybrid-llm]   BM25[2] idx=35 chunk_id=troubleshooting_guide_fix_7 score=6.6579 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:07:58] TRACE | [enriched-hybrid-llm]   BM25[3] idx=1 chunk_id=api_reference_fix_1 score=6.1341 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:07:58] TRACE | [enriched-hybrid-llm]   BM25[4] idx=14 chunk_id=architecture_overview_fix_8 score=4.5421 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:07:58] TRACE | [enriched-hybrid-llm]   BM25[5] idx=37 chunk_id=troubleshooting_guide_fix_9 score=4.5380 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:07:58] TRACE | [enriched-hybrid-llm]   BM25[6] idx=16 chunk_id=architecture_overview_fix_10 score=4.1384 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:07:58] TRACE | [enriched-hybrid-llm]   BM25[7] idx=7 chunk_id=architecture_overview_fix_1 score=3.4602 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:07:58] TRACE | [enriched-hybrid-llm]   BM25[8] idx=15 chunk_id=architecture_overview_fix_9 score=3.0322 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:07:58] TRACE | [enriched-hybrid-llm]   BM25[9] idx=6 chunk_id=architecture_overview_fix_0 score=2.9924 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:07:58] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:07:58] TRACE | [enriched-hybrid-llm]   RRF[0] idx=4 total=0.0328 (sem_rank=1 comp=0.0164 + bm25_rank=1 comp=0.0164)
[15:07:58] TRACE | [enriched-hybrid-llm]   RRF[1] idx=1 total=0.0325 (sem_rank=0 comp=0.0167 + bm25_rank=3 comp=0.0159)
[15:07:58] TRACE | [enriched-hybrid-llm]   RRF[2] idx=34 total=0.0325 (sem_rank=3 comp=0.0159 + bm25_rank=0 comp=0.0167)
[15:07:58] TRACE | [enriched-hybrid-llm]   RRF[3] idx=35 total=0.0323 (sem_rank=2 comp=0.0161 + bm25_rank=2 comp=0.0161)
[15:07:58] TRACE | [enriched-hybrid-llm]   RRF[4] idx=7 total=0.0306 (sem_rank=4 comp=0.0156 + bm25_rank=7 comp=0.0149)
[15:07:58] TRACE | [enriched-hybrid-llm]   RRF[5] idx=16 total=0.0303 (sem_rank=6 comp=0.0152 + bm25_rank=6 comp=0.0152)
[15:07:58] TRACE | [enriched-hybrid-llm]   RRF[6] idx=15 total=0.0296 (sem_rank=7 comp=0.0149 + bm25_rank=8 comp=0.0147)
[15:07:58] TRACE | [enriched-hybrid-llm]   RRF[7] idx=0 total=0.0282 (sem_rank=9 comp=0.0145 + bm25_rank=13 comp=0.0137)
[15:07:58] TRACE | [enriched-hybrid-llm]   RRF[8] idx=37 total=0.0280 (sem_rank=19 comp=0.0127 + bm25_rank=5 comp=0.0154)
[15:07:58] TRACE | [enriched-hybrid-llm]   RRF[9] idx=10 total=0.0280 (sem_rank=8 comp=0.0147 + bm25_rank=15 comp=0.0133)
[15:07:58] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:07:58] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_4 doc_id=api_reference rrf_score=0.0328 sem_rank=1 bm25_rank=1 dominant=balanced | enriched: malformed JSON, requested resource, Bad Gateway, Error Codes, HTTP Status, Response Format, Server Error | Status Codes, Invalid, Description, Common Causes, Forbidden  ### Error Response Format ```js...
[15:07:58] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0325 sem_rank=0 bm25_rank=3 dominant=semantic | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:07:58] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0325 sem_rank=3 bm25_rank=0 dominant=bm25 | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:07:58] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_7 doc_id=troubleshooting_guide rrf_score=0.0323 sem_rank=2 bm25_rank=2 dominant=balanced | enriched: Optimization Strategies, awk print, rate limit, raise Exception, Max retries, rate limiting, Warning | time.sleep(retry_after, Batch, API  Waiting {retry_after} seconds...") time.sleep(retry_after) co...
[15:07:58] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.0306 sem_rank=4 bm25_rank=7 dominant=semantic | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:07:58] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:07:58] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:58] TRACE | Query: My API calls are getting blocked, what's the limit?
[15:07:58] TRACE | Total key facts: 2
[15:07:58] TRACE | Found facts: 2/2
[15:07:58] TRACE |   FOUND[1] 100 requests per minute per authenticated user
[15:07:58] TRACE |   FOUND[2] 20 requests per minute for unauthenticated requests
[15:07:58] TRACE | === END FACT COVERAGE ===
[15:07:58] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:07:58] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: api rate limit
[15:07:58] DEBUG | [query-rewrite] Rewriting query: api rate limit
[15:07:58] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:07:58] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=813 timeout=5s
[15:07:58] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:07:58] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:07:58] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:07:59] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.92s
[15:07:59] DEBUG | [anthropic] USAGE: input_tokens=189 output_tokens=10
[15:07:59] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=54
[15:07:59] DEBUG | [anthropic] RESPONSE: API rate limit configuration maximum request threshold
[15:07:59] DEBUG | [query-rewrite] SUCCESS in 0.916s: api rate limit → API rate limit configuration maximum request threshold
[15:07:59] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: API rate limit configuration maximum request threshold (took 0.916s)
[15:07:59] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:07:59] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:07:59] TRACE | [enriched-hybrid-llm]   SEM[0] idx=1 chunk_id=api_reference_fix_1 score=0.7606 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:07:59] TRACE | [enriched-hybrid-llm]   SEM[1] idx=4 chunk_id=api_reference_fix_4 score=0.6734 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:07:59] TRACE | [enriched-hybrid-llm]   SEM[2] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6664 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:07:59] TRACE | [enriched-hybrid-llm]   SEM[3] idx=7 chunk_id=architecture_overview_fix_1 score=0.6421 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:07:59] TRACE | [enriched-hybrid-llm]   SEM[4] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6296 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:07:59] TRACE | [enriched-hybrid-llm]   SEM[5] idx=16 chunk_id=architecture_overview_fix_10 score=0.6119 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:07:59] TRACE | [enriched-hybrid-llm]   SEM[6] idx=3 chunk_id=api_reference_fix_3 score=0.6067 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:07:59] TRACE | [enriched-hybrid-llm]   SEM[7] idx=18 chunk_id=architecture_overview_fix_12 score=0.5842 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:07:59] TRACE | [enriched-hybrid-llm]   SEM[8] idx=47 chunk_id=user_guide_fix_7 score=0.5833 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:07:59] TRACE | [enriched-hybrid-llm]   SEM[9] idx=15 chunk_id=architecture_overview_fix_9 score=0.5788 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:07:59] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:07:59] TRACE | [enriched-hybrid-llm]   BM25[0] idx=34 chunk_id=troubleshooting_guide_fix_6 score=6.9270 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:07:59] TRACE | [enriched-hybrid-llm]   BM25[1] idx=16 chunk_id=architecture_overview_fix_10 score=6.7880 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:07:59] TRACE | [enriched-hybrid-llm]   BM25[2] idx=35 chunk_id=troubleshooting_guide_fix_7 score=6.6579 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:07:59] TRACE | [enriched-hybrid-llm]   BM25[3] idx=1 chunk_id=api_reference_fix_1 score=6.1341 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:07:59] TRACE | [enriched-hybrid-llm]   BM25[4] idx=4 chunk_id=api_reference_fix_4 score=5.6207 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:07:59] TRACE | [enriched-hybrid-llm]   BM25[5] idx=32 chunk_id=troubleshooting_guide_fix_4 score=4.5487 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:07:59] TRACE | [enriched-hybrid-llm]   BM25[6] idx=42 chunk_id=user_guide_fix_2 score=4.5438 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:07:59] TRACE | [enriched-hybrid-llm]   BM25[7] idx=14 chunk_id=architecture_overview_fix_8 score=4.5421 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:07:59] TRACE | [enriched-hybrid-llm]   BM25[8] idx=37 chunk_id=troubleshooting_guide_fix_9 score=4.5380 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:07:59] TRACE | [enriched-hybrid-llm]   BM25[9] idx=31 chunk_id=troubleshooting_guide_fix_3 score=4.0433 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:07:59] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:07:59] TRACE | [enriched-hybrid-llm]   RRF[0] idx=1 total=0.0325 (sem_rank=0 comp=0.0167 + bm25_rank=3 comp=0.0159)
[15:07:59] TRACE | [enriched-hybrid-llm]   RRF[1] idx=34 total=0.0323 (sem_rank=4 comp=0.0156 + bm25_rank=0 comp=0.0167)
[15:07:59] TRACE | [enriched-hybrid-llm]   RRF[2] idx=35 total=0.0323 (sem_rank=2 comp=0.0161 + bm25_rank=2 comp=0.0161)
[15:07:59] TRACE | [enriched-hybrid-llm]   RRF[3] idx=4 total=0.0320 (sem_rank=1 comp=0.0164 + bm25_rank=4 comp=0.0156)
[15:07:59] TRACE | [enriched-hybrid-llm]   RRF[4] idx=16 total=0.0318 (sem_rank=5 comp=0.0154 + bm25_rank=1 comp=0.0164)
[15:07:59] TRACE | [enriched-hybrid-llm]   RRF[5] idx=7 total=0.0300 (sem_rank=3 comp=0.0159 + bm25_rank=11 comp=0.0141)
[15:07:59] TRACE | [enriched-hybrid-llm]   RRF[6] idx=42 total=0.0290 (sem_rank=12 comp=0.0139 + bm25_rank=6 comp=0.0152)
[15:07:59] TRACE | [enriched-hybrid-llm]   RRF[7] idx=31 total=0.0286 (sem_rank=11 comp=0.0141 + bm25_rank=9 comp=0.0145)
[15:07:59] TRACE | [enriched-hybrid-llm]   RRF[8] idx=37 total=0.0284 (sem_rank=13 comp=0.0137 + bm25_rank=8 comp=0.0147)
[15:07:59] TRACE | [enriched-hybrid-llm]   RRF[9] idx=32 total=0.0280 (sem_rank=19 comp=0.0127 + bm25_rank=5 comp=0.0154)
[15:07:59] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:07:59] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0325 sem_rank=0 bm25_rank=3 dominant=semantic | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:07:59] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0323 sem_rank=4 bm25_rank=0 dominant=bm25 | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:07:59] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_7 doc_id=troubleshooting_guide rrf_score=0.0323 sem_rank=2 bm25_rank=2 dominant=balanced | enriched: Optimization Strategies, awk print, rate limit, raise Exception, Max retries, rate limiting, Warning | time.sleep(retry_after, Batch, API  Waiting {retry_after} seconds...") time.sleep(retry_after) co...
[15:07:59] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=api_reference_fix_4 doc_id=api_reference rrf_score=0.0320 sem_rank=1 bm25_rank=4 dominant=semantic | enriched: malformed JSON, requested resource, Bad Gateway, Error Codes, HTTP Status, Response Format, Server Error | Status Codes, Invalid, Description, Common Causes, Forbidden  ### Error Response Format ```js...
[15:07:59] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0318 sem_rank=5 bm25_rank=1 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:07:59] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:07:59] TRACE | === FACT COVERAGE ANALYSIS ===
[15:07:59] TRACE | Query: api rate limit
[15:07:59] TRACE | Total key facts: 2
[15:07:59] TRACE | Found facts: 2/2
[15:07:59] TRACE |   FOUND[1] 100 requests per minute per authenticated user
[15:07:59] TRACE |   FOUND[2] 20 requests per minute for unauthenticated requests
[15:07:59] TRACE | === END FACT COVERAGE ===
[15:07:59] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:07:59] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: I'm building a batch job that calls CloudFlow API repeatedly, what rate limit should I expect?
[15:07:59] DEBUG | [query-rewrite] Rewriting query: I'm building a batch job that calls CloudFlow API repeatedly, what rate limit should I expect?
[15:07:59] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:07:59] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=893 timeout=5s
[15:07:59] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:07:59] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:07:59] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:00] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.87s
[15:08:00] DEBUG | [anthropic] USAGE: input_tokens=206 output_tokens=13
[15:08:00] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=64
[15:08:00] DEBUG | [anthropic] RESPONSE: cloudflow api batch job rate limit request frequency constraints
[15:08:00] DEBUG | [query-rewrite] SUCCESS in 0.870s: I'm building a batch job that calls CloudFlow API repeatedly, what rate limit should I expect? → cloudflow api batch job rate limit request frequency constraints
[15:08:00] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: cloudflow api batch job rate limit request frequency constraints (took 0.870s)
[15:08:00] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:00] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:00] TRACE | [enriched-hybrid-llm]   SEM[0] idx=1 chunk_id=api_reference_fix_1 score=0.8050 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:00] TRACE | [enriched-hybrid-llm]   SEM[1] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.7038 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:00] TRACE | [enriched-hybrid-llm]   SEM[2] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.7007 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:00] TRACE | [enriched-hybrid-llm]   SEM[3] idx=0 chunk_id=api_reference_fix_0 score=0.6904 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:00] TRACE | [enriched-hybrid-llm]   SEM[4] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6824 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:00] TRACE | [enriched-hybrid-llm]   SEM[5] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6799 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:00] TRACE | [enriched-hybrid-llm]   SEM[6] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6781 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:00] TRACE | [enriched-hybrid-llm]   SEM[7] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6669 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:00] TRACE | [enriched-hybrid-llm]   SEM[8] idx=25 chunk_id=deployment_guide_fix_6 score=0.6659 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:00] TRACE | [enriched-hybrid-llm]   SEM[9] idx=45 chunk_id=user_guide_fix_5 score=0.6597 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:00] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:00] TRACE | [enriched-hybrid-llm]   BM25[0] idx=35 chunk_id=troubleshooting_guide_fix_7 score=11.4594 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:00] TRACE | [enriched-hybrid-llm]   BM25[1] idx=34 chunk_id=troubleshooting_guide_fix_6 score=8.5363 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:00] TRACE | [enriched-hybrid-llm]   BM25[2] idx=23 chunk_id=deployment_guide_fix_4 score=7.8792 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:00] TRACE | [enriched-hybrid-llm]   BM25[3] idx=1 chunk_id=api_reference_fix_1 score=7.2388 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:00] TRACE | [enriched-hybrid-llm]   BM25[4] idx=4 chunk_id=api_reference_fix_4 score=6.7351 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:00] TRACE | [enriched-hybrid-llm]   BM25[5] idx=14 chunk_id=architecture_overview_fix_8 score=6.5394 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:00] TRACE | [enriched-hybrid-llm]   BM25[6] idx=37 chunk_id=troubleshooting_guide_fix_9 score=6.4087 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:00] TRACE | [enriched-hybrid-llm]   BM25[7] idx=15 chunk_id=architecture_overview_fix_9 score=5.4918 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:00] TRACE | [enriched-hybrid-llm]   BM25[8] idx=19 chunk_id=deployment_guide_fix_0 score=4.5892 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:00] TRACE | [enriched-hybrid-llm]   BM25[9] idx=38 chunk_id=troubleshooting_guide_fix_10 score=4.5054 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:00] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:00] TRACE | [enriched-hybrid-llm]   RRF[0] idx=35 total=0.0328 (sem_rank=2 comp=0.0161 + bm25_rank=0 comp=0.0167)
[15:08:00] TRACE | [enriched-hybrid-llm]   RRF[1] idx=1 total=0.0325 (sem_rank=0 comp=0.0167 + bm25_rank=3 comp=0.0159)
[15:08:00] TRACE | [enriched-hybrid-llm]   RRF[2] idx=34 total=0.0318 (sem_rank=5 comp=0.0154 + bm25_rank=1 comp=0.0164)
[15:08:00] TRACE | [enriched-hybrid-llm]   RRF[3] idx=37 total=0.0315 (sem_rank=1 comp=0.0164 + bm25_rank=6 comp=0.0152)
[15:08:00] TRACE | [enriched-hybrid-llm]   RRF[4] idx=23 total=0.0304 (sem_rank=10 comp=0.0143 + bm25_rank=2 comp=0.0161)
[15:08:00] TRACE | [enriched-hybrid-llm]   RRF[5] idx=0 total=0.0294 (sem_rank=3 comp=0.0159 + bm25_rank=14 comp=0.0135)
[15:08:00] TRACE | [enriched-hybrid-llm]   RRF[6] idx=30 total=0.0284 (sem_rank=4 comp=0.0156 + bm25_rank=18 comp=0.0128)
[15:08:00] TRACE | [enriched-hybrid-llm]   RRF[7] idx=32 total=0.0281 (sem_rank=7 comp=0.0149 + bm25_rank=16 comp=0.0132)
[15:08:00] TRACE | [enriched-hybrid-llm]   RRF[8] idx=4 total=0.0275 (sem_rank=24 comp=0.0119 + bm25_rank=4 comp=0.0156)
[15:08:00] TRACE | [enriched-hybrid-llm]   RRF[9] idx=6 total=0.0274 (sem_rank=16 comp=0.0132 + bm25_rank=10 comp=0.0143)
[15:08:00] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:00] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_7 doc_id=troubleshooting_guide rrf_score=0.0328 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: Optimization Strategies, awk print, rate limit, raise Exception, Max retries, rate limiting, Warning | time.sleep(retry_after, Batch, API  Waiting {retry_after} seconds...") time.sleep(retry_after) co...
[15:08:00] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0325 sem_rank=0 bm25_rank=3 dominant=semantic | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:08:00] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0318 sem_rank=5 bm25_rank=1 dominant=bm25 | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:08:00] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_9 doc_id=troubleshooting_guide rrf_score=0.0315 sem_rank=1 bm25_rank=6 dominant=semantic | enriched: cloudflow deployment, kubectl logs, Parse JSON, JSON Logs, Find rate, Count rate, rate limit | Find, Parse JSON, CloudFlow, TRACE  in" # Find workflow failures by ID kubectl logs -n cloudflow deployme...
[15:08:00] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.0304 sem_rank=10 bm25_rank=2 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:08:00] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:00] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:00] TRACE | Query: I'm building a batch job that calls CloudFlow API repeatedly, what rate limit should I expect?
[15:08:00] TRACE | Total key facts: 2
[15:08:00] TRACE | Found facts: 2/2
[15:08:00] TRACE |   FOUND[1] 100 requests per minute per authenticated user
[15:08:00] TRACE |   FOUND[2] 20 requests per minute for unauthenticated requests
[15:08:00] TRACE | === END FACT COVERAGE ===
[15:08:00] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:00] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why is the API rejecting my requests after 100 calls?
[15:08:00] DEBUG | [query-rewrite] Rewriting query: Why is the API rejecting my requests after 100 calls?
[15:08:00] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:00] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=852 timeout=5s
[15:08:00] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:00] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:00] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:01] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.92s
[15:08:01] DEBUG | [anthropic] USAGE: input_tokens=200 output_tokens=12
[15:08:01] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=58
[15:08:01] DEBUG | [anthropic] RESPONSE: api rate limiting request throttling quota exceeded policy
[15:08:01] DEBUG | [query-rewrite] SUCCESS in 0.925s: Why is the API rejecting my requests after 100 calls? → api rate limiting request throttling quota exceeded policy
[15:08:01] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: api rate limiting request throttling quota exceeded policy (took 0.925s)
[15:08:01] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:01] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:01] TRACE | [enriched-hybrid-llm]   SEM[0] idx=1 chunk_id=api_reference_fix_1 score=0.7008 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:01] TRACE | [enriched-hybrid-llm]   SEM[1] idx=4 chunk_id=api_reference_fix_4 score=0.6515 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:01] TRACE | [enriched-hybrid-llm]   SEM[2] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6338 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:01] TRACE | [enriched-hybrid-llm]   SEM[3] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.5910 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:01] TRACE | [enriched-hybrid-llm]   SEM[4] idx=7 chunk_id=architecture_overview_fix_1 score=0.5857 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:01] TRACE | [enriched-hybrid-llm]   SEM[5] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5531 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:01] TRACE | [enriched-hybrid-llm]   SEM[6] idx=3 chunk_id=api_reference_fix_3 score=0.5499 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:01] TRACE | [enriched-hybrid-llm]   SEM[7] idx=16 chunk_id=architecture_overview_fix_10 score=0.5418 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:01] TRACE | [enriched-hybrid-llm]   SEM[8] idx=45 chunk_id=user_guide_fix_5 score=0.5320 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:01] TRACE | [enriched-hybrid-llm]   SEM[9] idx=46 chunk_id=user_guide_fix_6 score=0.5260 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:01] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:01] TRACE | [enriched-hybrid-llm]   BM25[0] idx=4 chunk_id=api_reference_fix_4 score=10.5713 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:01] TRACE | [enriched-hybrid-llm]   BM25[1] idx=34 chunk_id=troubleshooting_guide_fix_6 score=10.0227 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:01] TRACE | [enriched-hybrid-llm]   BM25[2] idx=35 chunk_id=troubleshooting_guide_fix_7 score=7.2795 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:01] TRACE | [enriched-hybrid-llm]   BM25[3] idx=29 chunk_id=troubleshooting_guide_fix_1 score=6.7719 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:01] TRACE | [enriched-hybrid-llm]   BM25[4] idx=1 chunk_id=api_reference_fix_1 score=5.0924 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:01] TRACE | [enriched-hybrid-llm]   BM25[5] idx=7 chunk_id=architecture_overview_fix_1 score=4.9933 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:01] TRACE | [enriched-hybrid-llm]   BM25[6] idx=38 chunk_id=troubleshooting_guide_fix_10 score=4.3660 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:01] TRACE | [enriched-hybrid-llm]   BM25[7] idx=16 chunk_id=architecture_overview_fix_10 score=4.1384 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:01] TRACE | [enriched-hybrid-llm]   BM25[8] idx=37 chunk_id=troubleshooting_guide_fix_9 score=3.8600 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:01] TRACE | [enriched-hybrid-llm]   BM25[9] idx=9 chunk_id=architecture_overview_fix_3 score=3.4852 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:01] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:01] TRACE | [enriched-hybrid-llm]   RRF[0] idx=4 total=0.0331 (sem_rank=1 comp=0.0164 + bm25_rank=0 comp=0.0167)
[15:08:01] TRACE | [enriched-hybrid-llm]   RRF[1] idx=1 total=0.0323 (sem_rank=0 comp=0.0167 + bm25_rank=4 comp=0.0156)
[15:08:01] TRACE | [enriched-hybrid-llm]   RRF[2] idx=34 total=0.0323 (sem_rank=3 comp=0.0159 + bm25_rank=1 comp=0.0164)
[15:08:01] TRACE | [enriched-hybrid-llm]   RRF[3] idx=35 total=0.0323 (sem_rank=2 comp=0.0161 + bm25_rank=2 comp=0.0161)
[15:08:01] TRACE | [enriched-hybrid-llm]   RRF[4] idx=29 total=0.0313 (sem_rank=5 comp=0.0154 + bm25_rank=3 comp=0.0159)
[15:08:01] TRACE | [enriched-hybrid-llm]   RRF[5] idx=7 total=0.0310 (sem_rank=4 comp=0.0156 + bm25_rank=5 comp=0.0154)
[15:08:01] TRACE | [enriched-hybrid-llm]   RRF[6] idx=16 total=0.0299 (sem_rank=7 comp=0.0149 + bm25_rank=7 comp=0.0149)
[15:08:01] TRACE | [enriched-hybrid-llm]   RRF[7] idx=37 total=0.0279 (sem_rank=16 comp=0.0132 + bm25_rank=8 comp=0.0147)
[15:08:01] TRACE | [enriched-hybrid-llm]   RRF[8] idx=38 total=0.0277 (sem_rank=20 comp=0.0125 + bm25_rank=6 comp=0.0152)
[15:08:01] TRACE | [enriched-hybrid-llm]   RRF[9] idx=0 total=0.0274 (sem_rank=11 comp=0.0141 + bm25_rank=15 comp=0.0133)
[15:08:01] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:01] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_4 doc_id=api_reference rrf_score=0.0331 sem_rank=1 bm25_rank=0 dominant=bm25 | enriched: malformed JSON, requested resource, Bad Gateway, Error Codes, HTTP Status, Response Format, Server Error | Status Codes, Invalid, Description, Common Causes, Forbidden  ### Error Response Format ```js...
[15:08:01] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0323 sem_rank=0 bm25_rank=4 dominant=semantic | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:08:01] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0323 sem_rank=3 bm25_rank=1 dominant=bm25 | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:08:01] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_7 doc_id=troubleshooting_guide rrf_score=0.0323 sem_rank=2 bm25_rank=2 dominant=balanced | enriched: Optimization Strategies, awk print, rate limit, raise Exception, Max retries, rate limiting, Warning | time.sleep(retry_after, Batch, API  Waiting {retry_after} seconds...") time.sleep(retry_after) co...
[15:08:01] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.0313 sem_rank=5 bm25_rank=3 dominant=bm25 | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:08:01] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:01] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:01] TRACE | Query: Why is the API rejecting my requests after 100 calls?
[15:08:01] TRACE | Total key facts: 2
[15:08:01] TRACE | Found facts: 2/2
[15:08:01] TRACE |   FOUND[1] 100 requests per minute per authenticated user
[15:08:01] TRACE |   FOUND[2] 20 requests per minute for unauthenticated requests
[15:08:01] TRACE | === END FACT COVERAGE ===
[15:08:01] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:01] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: How do I fix 429 Too Many Requests errors?
[15:08:01] DEBUG | [query-rewrite] Rewriting query: How do I fix 429 Too Many Requests errors?
[15:08:01] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:01] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=841 timeout=5s
[15:08:01] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:01] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:01] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:02] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.02s
[15:08:02] DEBUG | [anthropic] USAGE: input_tokens=199 output_tokens=16
[15:08:02] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=70
[15:08:02] DEBUG | [anthropic] RESPONSE: rate limit handling request throttling 429 error mitigation strategies
[15:08:02] DEBUG | [query-rewrite] SUCCESS in 1.020s: How do I fix 429 Too Many Requests errors? → rate limit handling request throttling 429 error mitigation strategies
[15:08:02] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: rate limit handling request throttling 429 error mitigation strategies (took 1.020s)
[15:08:02] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:02] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:02] TRACE | [enriched-hybrid-llm]   SEM[0] idx=1 chunk_id=api_reference_fix_1 score=0.6354 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:02] TRACE | [enriched-hybrid-llm]   SEM[1] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6283 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:02] TRACE | [enriched-hybrid-llm]   SEM[2] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6156 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:02] TRACE | [enriched-hybrid-llm]   SEM[3] idx=45 chunk_id=user_guide_fix_5 score=0.5812 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:02] TRACE | [enriched-hybrid-llm]   SEM[4] idx=4 chunk_id=api_reference_fix_4 score=0.5779 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:02] TRACE | [enriched-hybrid-llm]   SEM[5] idx=7 chunk_id=architecture_overview_fix_1 score=0.5554 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:02] TRACE | [enriched-hybrid-llm]   SEM[6] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5517 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:02] TRACE | [enriched-hybrid-llm]   SEM[7] idx=46 chunk_id=user_guide_fix_6 score=0.5403 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:02] TRACE | [enriched-hybrid-llm]   SEM[8] idx=47 chunk_id=user_guide_fix_7 score=0.5388 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:08:02] TRACE | [enriched-hybrid-llm]   SEM[9] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.5336 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:02] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:02] TRACE | [enriched-hybrid-llm]   BM25[0] idx=34 chunk_id=troubleshooting_guide_fix_6 score=14.4993 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:02] TRACE | [enriched-hybrid-llm]   BM25[1] idx=4 chunk_id=api_reference_fix_4 score=9.5942 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:02] TRACE | [enriched-hybrid-llm]   BM25[2] idx=35 chunk_id=troubleshooting_guide_fix_7 score=8.8097 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:02] TRACE | [enriched-hybrid-llm]   BM25[3] idx=1 chunk_id=api_reference_fix_1 score=6.9367 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:02] TRACE | [enriched-hybrid-llm]   BM25[4] idx=14 chunk_id=architecture_overview_fix_8 score=6.2396 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:02] TRACE | [enriched-hybrid-llm]   BM25[5] idx=37 chunk_id=troubleshooting_guide_fix_9 score=4.9409 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:02] TRACE | [enriched-hybrid-llm]   BM25[6] idx=7 chunk_id=architecture_overview_fix_1 score=4.3944 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:02] TRACE | [enriched-hybrid-llm]   BM25[7] idx=45 chunk_id=user_guide_fix_5 score=4.0295 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:02] TRACE | [enriched-hybrid-llm]   BM25[8] idx=46 chunk_id=user_guide_fix_6 score=3.6973 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:02] TRACE | [enriched-hybrid-llm]   BM25[9] idx=23 chunk_id=deployment_guide_fix_4 score=3.5471 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:02] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:02] TRACE | [enriched-hybrid-llm]   RRF[0] idx=34 total=0.0328 (sem_rank=2 comp=0.0161 + bm25_rank=0 comp=0.0167)
[15:08:02] TRACE | [enriched-hybrid-llm]   RRF[1] idx=1 total=0.0325 (sem_rank=0 comp=0.0167 + bm25_rank=3 comp=0.0159)
[15:08:02] TRACE | [enriched-hybrid-llm]   RRF[2] idx=35 total=0.0325 (sem_rank=1 comp=0.0164 + bm25_rank=2 comp=0.0161)
[15:08:02] TRACE | [enriched-hybrid-llm]   RRF[3] idx=4 total=0.0320 (sem_rank=4 comp=0.0156 + bm25_rank=1 comp=0.0164)
[15:08:02] TRACE | [enriched-hybrid-llm]   RRF[4] idx=45 total=0.0308 (sem_rank=3 comp=0.0159 + bm25_rank=7 comp=0.0149)
[15:08:02] TRACE | [enriched-hybrid-llm]   RRF[5] idx=7 total=0.0305 (sem_rank=5 comp=0.0154 + bm25_rank=6 comp=0.0152)
[15:08:02] TRACE | [enriched-hybrid-llm]   RRF[6] idx=46 total=0.0296 (sem_rank=7 comp=0.0149 + bm25_rank=8 comp=0.0147)
[15:08:02] TRACE | [enriched-hybrid-llm]   RRF[7] idx=14 total=0.0290 (sem_rank=15 comp=0.0133 + bm25_rank=4 comp=0.0156)
[15:08:02] TRACE | [enriched-hybrid-llm]   RRF[8] idx=47 total=0.0288 (sem_rank=8 comp=0.0147 + bm25_rank=11 comp=0.0141)
[15:08:02] TRACE | [enriched-hybrid-llm]   RRF[9] idx=37 total=0.0282 (sem_rank=18 comp=0.0128 + bm25_rank=5 comp=0.0154)
[15:08:02] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:02] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0328 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:08:02] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0325 sem_rank=0 bm25_rank=3 dominant=semantic | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:08:02] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_7 doc_id=troubleshooting_guide rrf_score=0.0325 sem_rank=1 bm25_rank=2 dominant=semantic | enriched: Optimization Strategies, awk print, rate limit, raise Exception, Max retries, rate limiting, Warning | time.sleep(retry_after, Batch, API  Waiting {retry_after} seconds...") time.sleep(retry_after) co...
[15:08:02] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=api_reference_fix_4 doc_id=api_reference rrf_score=0.0320 sem_rank=4 bm25_rank=1 dominant=bm25 | enriched: malformed JSON, requested resource, Bad Gateway, Error Codes, HTTP Status, Response Format, Server Error | Status Codes, Invalid, Description, Common Causes, Forbidden  ### Error Response Format ```js...
[15:08:02] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=user_guide_fix_5 doc_id=user_guide rrf_score=0.0308 sem_rank=3 bm25_rank=7 dominant=semantic | enriched: Testing Schedules, Handling Robust, Attempt, Error Handling, Dead Letter, Letter Queue, Robust error | Fallback Actions Execute, CloudFlow, Queue  Save and activate **Testing Schedules:** Use the buil...
[15:08:02] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:02] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:02] TRACE | Query: How do I fix 429 Too Many Requests errors?
[15:08:02] TRACE | Total key facts: 5
[15:08:02] TRACE | Found facts: 4/5
[15:08:02] TRACE |   FOUND[1] 429 Too Many Requests
[15:08:02] TRACE |   FOUND[2] X-RateLimit-Remaining
[15:08:02] TRACE |   FOUND[3] Retry-After
[15:08:02] TRACE |   FOUND[4] Implement exponential backoff when receiving 429 responses
[15:08:02] TRACE | Missed facts: 1/5
[15:08:02] TRACE |   MISSED[1] Monitor X-RateLimit-Remaining header values
[15:08:02] TRACE | === END FACT COVERAGE ===
[15:08:02] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:02] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What should I do when I get rate limited?
[15:08:02] DEBUG | [query-rewrite] Rewriting query: What should I do when I get rate limited?
[15:08:02] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:02] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=840 timeout=5s
[15:08:02] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:02] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:02] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:03] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.02s
[15:08:03] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=13
[15:08:03] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=67
[15:08:03] DEBUG | [anthropic] RESPONSE: rate limit handling error response retry strategy backoff mechanism
[15:08:03] DEBUG | [query-rewrite] SUCCESS in 1.018s: What should I do when I get rate limited? → rate limit handling error response retry strategy backoff mechanism
[15:08:03] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: rate limit handling error response retry strategy backoff mechanism (took 1.018s)
[15:08:03] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:03] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:03] TRACE | [enriched-hybrid-llm]   SEM[0] idx=45 chunk_id=user_guide_fix_5 score=0.6826 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:03] TRACE | [enriched-hybrid-llm]   SEM[1] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6695 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:03] TRACE | [enriched-hybrid-llm]   SEM[2] idx=1 chunk_id=api_reference_fix_1 score=0.6339 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:03] TRACE | [enriched-hybrid-llm]   SEM[3] idx=46 chunk_id=user_guide_fix_6 score=0.6209 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:03] TRACE | [enriched-hybrid-llm]   SEM[4] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6147 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:03] TRACE | [enriched-hybrid-llm]   SEM[5] idx=4 chunk_id=api_reference_fix_4 score=0.5973 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:03] TRACE | [enriched-hybrid-llm]   SEM[6] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.5773 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:03] TRACE | [enriched-hybrid-llm]   SEM[7] idx=7 chunk_id=architecture_overview_fix_1 score=0.5606 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:03] TRACE | [enriched-hybrid-llm]   SEM[8] idx=18 chunk_id=architecture_overview_fix_12 score=0.5577 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:03] TRACE | [enriched-hybrid-llm]   SEM[9] idx=8 chunk_id=architecture_overview_fix_2 score=0.5575 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:03] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:03] TRACE | [enriched-hybrid-llm]   BM25[0] idx=4 chunk_id=api_reference_fix_4 score=14.3405 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:03] TRACE | [enriched-hybrid-llm]   BM25[1] idx=34 chunk_id=troubleshooting_guide_fix_6 score=12.2499 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:03] TRACE | [enriched-hybrid-llm]   BM25[2] idx=1 chunk_id=api_reference_fix_1 score=10.3045 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:03] TRACE | [enriched-hybrid-llm]   BM25[3] idx=33 chunk_id=troubleshooting_guide_fix_5 score=7.4084 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:03] TRACE | [enriched-hybrid-llm]   BM25[4] idx=45 chunk_id=user_guide_fix_5 score=6.4343 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:03] TRACE | [enriched-hybrid-llm]   BM25[5] idx=9 chunk_id=architecture_overview_fix_3 score=6.0106 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:03] TRACE | [enriched-hybrid-llm]   BM25[6] idx=35 chunk_id=troubleshooting_guide_fix_7 score=5.8653 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:03] TRACE | [enriched-hybrid-llm]   BM25[7] idx=10 chunk_id=architecture_overview_fix_4 score=5.5761 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:03] TRACE | [enriched-hybrid-llm]   BM25[8] idx=13 chunk_id=architecture_overview_fix_7 score=5.4888 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:08:03] TRACE | [enriched-hybrid-llm]   BM25[9] idx=3 chunk_id=api_reference_fix_3 score=4.6430 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:03] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:03] TRACE | [enriched-hybrid-llm]   RRF[0] idx=45 total=0.0323 (sem_rank=0 comp=0.0167 + bm25_rank=4 comp=0.0156)
[15:08:03] TRACE | [enriched-hybrid-llm]   RRF[1] idx=1 total=0.0323 (sem_rank=2 comp=0.0161 + bm25_rank=2 comp=0.0161)
[15:08:03] TRACE | [enriched-hybrid-llm]   RRF[2] idx=4 total=0.0321 (sem_rank=5 comp=0.0154 + bm25_rank=0 comp=0.0167)
[15:08:03] TRACE | [enriched-hybrid-llm]   RRF[3] idx=34 total=0.0320 (sem_rank=4 comp=0.0156 + bm25_rank=1 comp=0.0164)
[15:08:03] TRACE | [enriched-hybrid-llm]   RRF[4] idx=35 total=0.0315 (sem_rank=1 comp=0.0164 + bm25_rank=6 comp=0.0152)
[15:08:03] TRACE | [enriched-hybrid-llm]   RRF[5] idx=33 total=0.0310 (sem_rank=6 comp=0.0152 + bm25_rank=3 comp=0.0159)
[15:08:03] TRACE | [enriched-hybrid-llm]   RRF[6] idx=7 total=0.0288 (sem_rank=7 comp=0.0149 + bm25_rank=12 comp=0.0139)
[15:08:03] TRACE | [enriched-hybrid-llm]   RRF[7] idx=13 total=0.0286 (sem_rank=12 comp=0.0139 + bm25_rank=8 comp=0.0147)
[15:08:03] TRACE | [enriched-hybrid-llm]   RRF[8] idx=9 total=0.0284 (sem_rank=17 comp=0.0130 + bm25_rank=5 comp=0.0154)
[15:08:03] TRACE | [enriched-hybrid-llm]   RRF[9] idx=10 total=0.0277 (sem_rank=18 comp=0.0128 + bm25_rank=7 comp=0.0149)
[15:08:03] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:03] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=user_guide_fix_5 doc_id=user_guide rrf_score=0.0323 sem_rank=0 bm25_rank=4 dominant=semantic | enriched: Testing Schedules, Handling Robust, Attempt, Error Handling, Dead Letter, Letter Queue, Robust error | Fallback Actions Execute, CloudFlow, Queue  Save and activate **Testing Schedules:** Use the buil...
[15:08:03] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0323 sem_rank=2 bm25_rank=2 dominant=balanced | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:08:03] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=api_reference_fix_4 doc_id=api_reference rrf_score=0.0321 sem_rank=5 bm25_rank=0 dominant=bm25 | enriched: malformed JSON, requested resource, Bad Gateway, Error Codes, HTTP Status, Response Format, Server Error | Status Codes, Invalid, Description, Common Causes, Forbidden  ### Error Response Format ```js...
[15:08:03] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0320 sem_rank=4 bm25_rank=1 dominant=bm25 | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:08:03] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_7 doc_id=troubleshooting_guide rrf_score=0.0315 sem_rank=1 bm25_rank=6 dominant=semantic | enriched: Optimization Strategies, awk print, rate limit, raise Exception, Max retries, rate limiting, Warning | time.sleep(retry_after, Batch, API  Waiting {retry_after} seconds...") time.sleep(retry_after) co...
[15:08:03] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:03] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:03] TRACE | Query: What should I do when I get rate limited?
[15:08:03] TRACE | Total key facts: 5
[15:08:03] TRACE | Found facts: 4/5
[15:08:03] TRACE |   FOUND[1] 429 Too Many Requests
[15:08:03] TRACE |   FOUND[2] X-RateLimit-Remaining
[15:08:03] TRACE |   FOUND[3] Retry-After
[15:08:03] TRACE |   FOUND[4] Implement exponential backoff when receiving 429 responses
[15:08:03] TRACE | Missed facts: 1/5
[15:08:03] TRACE |   MISSED[1] Monitor X-RateLimit-Remaining header values
[15:08:03] TRACE | === END FACT COVERAGE ===
[15:08:03] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:03] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: My requests keep failing with 429 status code
[15:08:03] DEBUG | [query-rewrite] Rewriting query: My requests keep failing with 429 status code
[15:08:03] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:03] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=844 timeout=5s
[15:08:03] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:03] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:03] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:04] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.98s
[15:08:04] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=16
[15:08:04] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=57
[15:08:04] DEBUG | [anthropic] RESPONSE: "HTTP 429 too many requests rate limiting error handling"
[15:08:04] DEBUG | [query-rewrite] SUCCESS in 0.981s: My requests keep failing with 429 status code → "HTTP 429 too many requests rate limiting error handling"
[15:08:04] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: "HTTP 429 too many requests rate limiting error handling" (took 0.981s)
[15:08:04] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:04] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:04] TRACE | [enriched-hybrid-llm]   SEM[0] idx=1 chunk_id=api_reference_fix_1 score=0.6579 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:04] TRACE | [enriched-hybrid-llm]   SEM[1] idx=4 chunk_id=api_reference_fix_4 score=0.6325 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:04] TRACE | [enriched-hybrid-llm]   SEM[2] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6158 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:04] TRACE | [enriched-hybrid-llm]   SEM[3] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.5911 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:04] TRACE | [enriched-hybrid-llm]   SEM[4] idx=7 chunk_id=architecture_overview_fix_1 score=0.5746 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:04] TRACE | [enriched-hybrid-llm]   SEM[5] idx=45 chunk_id=user_guide_fix_5 score=0.5526 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:04] TRACE | [enriched-hybrid-llm]   SEM[6] idx=46 chunk_id=user_guide_fix_6 score=0.5441 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:04] TRACE | [enriched-hybrid-llm]   SEM[7] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5438 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:04] TRACE | [enriched-hybrid-llm]   SEM[8] idx=47 chunk_id=user_guide_fix_7 score=0.5368 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:08:04] TRACE | [enriched-hybrid-llm]   SEM[9] idx=16 chunk_id=architecture_overview_fix_10 score=0.5359 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:04] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:04] TRACE | [enriched-hybrid-llm]   BM25[0] idx=4 chunk_id=api_reference_fix_4 score=13.8660 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:04] TRACE | [enriched-hybrid-llm]   BM25[1] idx=34 chunk_id=troubleshooting_guide_fix_6 score=13.3346 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:04] TRACE | [enriched-hybrid-llm]   BM25[2] idx=1 chunk_id=api_reference_fix_1 score=11.5175 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:04] TRACE | [enriched-hybrid-llm]   BM25[3] idx=46 chunk_id=user_guide_fix_6 score=5.0508 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:04] TRACE | [enriched-hybrid-llm]   BM25[4] idx=37 chunk_id=troubleshooting_guide_fix_9 score=4.3407 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:04] TRACE | [enriched-hybrid-llm]   BM25[5] idx=38 chunk_id=troubleshooting_guide_fix_10 score=4.3013 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:04] TRACE | [enriched-hybrid-llm]   BM25[6] idx=7 chunk_id=architecture_overview_fix_1 score=3.7764 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:04] TRACE | [enriched-hybrid-llm]   BM25[7] idx=23 chunk_id=deployment_guide_fix_4 score=3.3198 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:04] TRACE | [enriched-hybrid-llm]   BM25[8] idx=35 chunk_id=troubleshooting_guide_fix_7 score=3.0493 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:04] TRACE | [enriched-hybrid-llm]   BM25[9] idx=28 chunk_id=troubleshooting_guide_fix_0 score=2.8821 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:04] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:04] TRACE | [enriched-hybrid-llm]   RRF[0] idx=4 total=0.0331 (sem_rank=1 comp=0.0164 + bm25_rank=0 comp=0.0167)
[15:08:04] TRACE | [enriched-hybrid-llm]   RRF[1] idx=1 total=0.0328 (sem_rank=0 comp=0.0167 + bm25_rank=2 comp=0.0161)
[15:08:04] TRACE | [enriched-hybrid-llm]   RRF[2] idx=34 total=0.0323 (sem_rank=3 comp=0.0159 + bm25_rank=1 comp=0.0164)
[15:08:04] TRACE | [enriched-hybrid-llm]   RRF[3] idx=46 total=0.0310 (sem_rank=6 comp=0.0152 + bm25_rank=3 comp=0.0159)
[15:08:04] TRACE | [enriched-hybrid-llm]   RRF[4] idx=35 total=0.0308 (sem_rank=2 comp=0.0161 + bm25_rank=8 comp=0.0147)
[15:08:04] TRACE | [enriched-hybrid-llm]   RRF[5] idx=7 total=0.0308 (sem_rank=4 comp=0.0156 + bm25_rank=6 comp=0.0152)
[15:08:04] TRACE | [enriched-hybrid-llm]   RRF[6] idx=37 total=0.0291 (sem_rank=14 comp=0.0135 + bm25_rank=4 comp=0.0156)
[15:08:04] TRACE | [enriched-hybrid-llm]   RRF[7] idx=16 total=0.0288 (sem_rank=9 comp=0.0145 + bm25_rank=10 comp=0.0143)
[15:08:04] TRACE | [enriched-hybrid-llm]   RRF[8] idx=38 total=0.0287 (sem_rank=15 comp=0.0133 + bm25_rank=5 comp=0.0154)
[15:08:04] TRACE | [enriched-hybrid-llm]   RRF[9] idx=45 total=0.0282 (sem_rank=5 comp=0.0154 + bm25_rank=18 comp=0.0128)
[15:08:04] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:04] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_4 doc_id=api_reference rrf_score=0.0331 sem_rank=1 bm25_rank=0 dominant=bm25 | enriched: malformed JSON, requested resource, Bad Gateway, Error Codes, HTTP Status, Response Format, Server Error | Status Codes, Invalid, Description, Common Causes, Forbidden  ### Error Response Format ```js...
[15:08:04] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0328 sem_rank=0 bm25_rank=2 dominant=semantic | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:08:04] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0323 sem_rank=3 bm25_rank=1 dominant=bm25 | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:08:04] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=user_guide_fix_6 doc_id=user_guide rrf_score=0.0310 sem_rank=6 bm25_rank=3 dominant=bm25 | enriched: workflow, date range, type, workflows, error type, execution, Execution Timeout | MB, Sync Customer Data  Filter by error type, date range, or execution ID 3. Click an execution to view full details 4...
[15:08:04] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_7 doc_id=troubleshooting_guide rrf_score=0.0308 sem_rank=2 bm25_rank=8 dominant=semantic | enriched: Optimization Strategies, awk print, rate limit, raise Exception, Max retries, rate limiting, Warning | time.sleep(retry_after, Batch, API  Waiting {retry_after} seconds...") time.sleep(retry_after) co...
[15:08:04] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:04] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:04] TRACE | Query: My requests keep failing with 429 status code
[15:08:04] TRACE | Total key facts: 5
[15:08:04] TRACE | Found facts: 4/5
[15:08:04] TRACE |   FOUND[1] 429 Too Many Requests
[15:08:04] TRACE |   FOUND[2] X-RateLimit-Remaining
[15:08:04] TRACE |   FOUND[3] Retry-After
[15:08:04] TRACE |   FOUND[4] Implement exponential backoff when receiving 429 responses
[15:08:04] TRACE | Missed facts: 1/5
[15:08:04] TRACE |   MISSED[1] Monitor X-RateLimit-Remaining header values
[15:08:04] TRACE | === END FACT COVERAGE ===
[15:08:04] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:04] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: 429 error fix
[15:08:04] DEBUG | [query-rewrite] Rewriting query: 429 error fix
[15:08:04] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:04] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=812 timeout=5s
[15:08:04] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:04] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:04] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:05] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.04s
[15:08:05] DEBUG | [anthropic] USAGE: input_tokens=191 output_tokens=14
[15:08:05] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=73
[15:08:05] DEBUG | [anthropic] RESPONSE: rate limiting error handling api request throttling mitigation strategies
[15:08:05] DEBUG | [query-rewrite] SUCCESS in 1.036s: 429 error fix → rate limiting error handling api request throttling mitigation strategies
[15:08:05] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: rate limiting error handling api request throttling mitigation strategies (took 1.036s)
[15:08:05] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:05] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:05] TRACE | [enriched-hybrid-llm]   SEM[0] idx=1 chunk_id=api_reference_fix_1 score=0.6864 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:05] TRACE | [enriched-hybrid-llm]   SEM[1] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6706 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:05] TRACE | [enriched-hybrid-llm]   SEM[2] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6513 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:05] TRACE | [enriched-hybrid-llm]   SEM[3] idx=45 chunk_id=user_guide_fix_5 score=0.6213 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:05] TRACE | [enriched-hybrid-llm]   SEM[4] idx=4 chunk_id=api_reference_fix_4 score=0.6151 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:05] TRACE | [enriched-hybrid-llm]   SEM[5] idx=47 chunk_id=user_guide_fix_7 score=0.6076 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:08:05] TRACE | [enriched-hybrid-llm]   SEM[6] idx=7 chunk_id=architecture_overview_fix_1 score=0.5980 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:05] TRACE | [enriched-hybrid-llm]   SEM[7] idx=46 chunk_id=user_guide_fix_6 score=0.5773 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:05] TRACE | [enriched-hybrid-llm]   SEM[8] idx=6 chunk_id=architecture_overview_fix_0 score=0.5767 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:05] TRACE | [enriched-hybrid-llm]   SEM[9] idx=16 chunk_id=architecture_overview_fix_10 score=0.5758 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:05] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:05] TRACE | [enriched-hybrid-llm]   BM25[0] idx=34 chunk_id=troubleshooting_guide_fix_6 score=13.0689 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:05] TRACE | [enriched-hybrid-llm]   BM25[1] idx=35 chunk_id=troubleshooting_guide_fix_7 score=8.0470 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:05] TRACE | [enriched-hybrid-llm]   BM25[2] idx=4 chunk_id=api_reference_fix_4 score=7.4365 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:05] TRACE | [enriched-hybrid-llm]   BM25[3] idx=7 chunk_id=architecture_overview_fix_1 score=7.2223 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:05] TRACE | [enriched-hybrid-llm]   BM25[4] idx=14 chunk_id=architecture_overview_fix_8 score=6.0498 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:05] TRACE | [enriched-hybrid-llm]   BM25[5] idx=1 chunk_id=api_reference_fix_1 score=5.0924 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:05] TRACE | [enriched-hybrid-llm]   BM25[6] idx=16 chunk_id=architecture_overview_fix_10 score=4.8279 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:05] TRACE | [enriched-hybrid-llm]   BM25[7] idx=38 chunk_id=troubleshooting_guide_fix_10 score=4.7669 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:05] TRACE | [enriched-hybrid-llm]   BM25[8] idx=47 chunk_id=user_guide_fix_7 score=4.2965 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:08:05] TRACE | [enriched-hybrid-llm]   BM25[9] idx=37 chunk_id=troubleshooting_guide_fix_9 score=4.2629 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:05] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:05] TRACE | [enriched-hybrid-llm]   RRF[0] idx=34 total=0.0328 (sem_rank=2 comp=0.0161 + bm25_rank=0 comp=0.0167)
[15:08:05] TRACE | [enriched-hybrid-llm]   RRF[1] idx=35 total=0.0328 (sem_rank=1 comp=0.0164 + bm25_rank=1 comp=0.0164)
[15:08:05] TRACE | [enriched-hybrid-llm]   RRF[2] idx=1 total=0.0321 (sem_rank=0 comp=0.0167 + bm25_rank=5 comp=0.0154)
[15:08:05] TRACE | [enriched-hybrid-llm]   RRF[3] idx=4 total=0.0318 (sem_rank=4 comp=0.0156 + bm25_rank=2 comp=0.0161)
[15:08:05] TRACE | [enriched-hybrid-llm]   RRF[4] idx=7 total=0.0310 (sem_rank=6 comp=0.0152 + bm25_rank=3 comp=0.0159)
[15:08:05] TRACE | [enriched-hybrid-llm]   RRF[5] idx=45 total=0.0302 (sem_rank=3 comp=0.0159 + bm25_rank=10 comp=0.0143)
[15:08:05] TRACE | [enriched-hybrid-llm]   RRF[6] idx=47 total=0.0301 (sem_rank=5 comp=0.0154 + bm25_rank=8 comp=0.0147)
[15:08:05] TRACE | [enriched-hybrid-llm]   RRF[7] idx=16 total=0.0296 (sem_rank=9 comp=0.0145 + bm25_rank=6 comp=0.0152)
[15:08:05] TRACE | [enriched-hybrid-llm]   RRF[8] idx=14 total=0.0284 (sem_rank=18 comp=0.0128 + bm25_rank=4 comp=0.0156)
[15:08:05] TRACE | [enriched-hybrid-llm]   RRF[9] idx=6 total=0.0282 (sem_rank=8 comp=0.0147 + bm25_rank=14 comp=0.0135)
[15:08:05] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:05] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0328 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:08:05] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_7 doc_id=troubleshooting_guide rrf_score=0.0328 sem_rank=1 bm25_rank=1 dominant=balanced | enriched: Optimization Strategies, awk print, rate limit, raise Exception, Max retries, rate limiting, Warning | time.sleep(retry_after, Batch, API  Waiting {retry_after} seconds...") time.sleep(retry_after) co...
[15:08:05] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0321 sem_rank=0 bm25_rank=5 dominant=semantic | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:08:05] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=api_reference_fix_4 doc_id=api_reference rrf_score=0.0318 sem_rank=4 bm25_rank=2 dominant=bm25 | enriched: malformed JSON, requested resource, Bad Gateway, Error Codes, HTTP Status, Response Format, Server Error | Status Codes, Invalid, Description, Common Causes, Forbidden  ### Error Response Format ```js...
[15:08:05] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.0310 sem_rank=6 bm25_rank=3 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:08:05] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:05] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:05] TRACE | Query: 429 error fix
[15:08:05] TRACE | Total key facts: 5
[15:08:05] TRACE | Found facts: 4/5
[15:08:05] TRACE |   FOUND[1] 429 Too Many Requests
[15:08:05] TRACE |   FOUND[2] X-RateLimit-Remaining
[15:08:05] TRACE |   FOUND[3] Retry-After
[15:08:05] TRACE |   FOUND[4] Implement exponential backoff when receiving 429 responses
[15:08:05] TRACE | Missed facts: 1/5
[15:08:05] TRACE |   MISSED[1] Monitor X-RateLimit-Remaining header values
[15:08:05] TRACE | === END FACT COVERAGE ===
[15:08:05] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:05] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: I'm getting throttled by CloudFlow API, how can I handle this in my application?
[15:08:05] DEBUG | [query-rewrite] Rewriting query: I'm getting throttled by CloudFlow API, how can I handle this in my application?
[15:08:05] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:05] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=879 timeout=5s
[15:08:05] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:05] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:05] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:06] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.21s
[15:08:06] DEBUG | [anthropic] USAGE: input_tokens=205 output_tokens=15
[15:08:06] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=75
[15:08:06] DEBUG | [anthropic] RESPONSE: cloudflow api rate limiting error handling retry mechanism backoff strategy
[15:08:06] DEBUG | [query-rewrite] SUCCESS in 1.214s: I'm getting throttled by CloudFlow API, how can I handle this in my application? → cloudflow api rate limiting error handling retry mechanism backoff strategy
[15:08:06] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: cloudflow api rate limiting error handling retry mechanism backoff strategy (took 1.214s)
[15:08:06] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:06] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:06] TRACE | [enriched-hybrid-llm]   SEM[0] idx=1 chunk_id=api_reference_fix_1 score=0.7578 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:06] TRACE | [enriched-hybrid-llm]   SEM[1] idx=45 chunk_id=user_guide_fix_5 score=0.7417 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:06] TRACE | [enriched-hybrid-llm]   SEM[2] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.7033 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:06] TRACE | [enriched-hybrid-llm]   SEM[3] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6998 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:06] TRACE | [enriched-hybrid-llm]   SEM[4] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6814 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:06] TRACE | [enriched-hybrid-llm]   SEM[5] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6804 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:06] TRACE | [enriched-hybrid-llm]   SEM[6] idx=46 chunk_id=user_guide_fix_6 score=0.6703 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:06] TRACE | [enriched-hybrid-llm]   SEM[7] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6635 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:06] TRACE | [enriched-hybrid-llm]   SEM[8] idx=6 chunk_id=architecture_overview_fix_0 score=0.6634 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:06] TRACE | [enriched-hybrid-llm]   SEM[9] idx=25 chunk_id=deployment_guide_fix_6 score=0.6625 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:06] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:06] TRACE | [enriched-hybrid-llm]   BM25[0] idx=4 chunk_id=api_reference_fix_4 score=13.5058 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:06] TRACE | [enriched-hybrid-llm]   BM25[1] idx=34 chunk_id=troubleshooting_guide_fix_6 score=12.9858 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:06] TRACE | [enriched-hybrid-llm]   BM25[2] idx=1 chunk_id=api_reference_fix_1 score=9.7603 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:06] TRACE | [enriched-hybrid-llm]   BM25[3] idx=33 chunk_id=troubleshooting_guide_fix_5 score=9.2111 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:06] TRACE | [enriched-hybrid-llm]   BM25[4] idx=45 chunk_id=user_guide_fix_5 score=7.1910 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:06] TRACE | [enriched-hybrid-llm]   BM25[5] idx=7 chunk_id=architecture_overview_fix_1 score=6.7427 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:06] TRACE | [enriched-hybrid-llm]   BM25[6] idx=38 chunk_id=troubleshooting_guide_fix_10 score=6.4303 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:06] TRACE | [enriched-hybrid-llm]   BM25[7] idx=9 chunk_id=architecture_overview_fix_3 score=6.0106 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:06] TRACE | [enriched-hybrid-llm]   BM25[8] idx=10 chunk_id=architecture_overview_fix_4 score=5.9480 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:06] TRACE | [enriched-hybrid-llm]   BM25[9] idx=37 chunk_id=troubleshooting_guide_fix_9 score=5.6545 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:06] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:06] TRACE | [enriched-hybrid-llm]   RRF[0] idx=1 total=0.0328 (sem_rank=0 comp=0.0167 + bm25_rank=2 comp=0.0161)
[15:08:06] TRACE | [enriched-hybrid-llm]   RRF[1] idx=45 total=0.0320 (sem_rank=1 comp=0.0164 + bm25_rank=4 comp=0.0156)
[15:08:06] TRACE | [enriched-hybrid-llm]   RRF[2] idx=34 total=0.0320 (sem_rank=4 comp=0.0156 + bm25_rank=1 comp=0.0164)
[15:08:06] TRACE | [enriched-hybrid-llm]   RRF[3] idx=33 total=0.0320 (sem_rank=2 comp=0.0161 + bm25_rank=3 comp=0.0159)
[15:08:06] TRACE | [enriched-hybrid-llm]   RRF[4] idx=35 total=0.0302 (sem_rank=3 comp=0.0159 + bm25_rank=10 comp=0.0143)
[15:08:06] TRACE | [enriched-hybrid-llm]   RRF[5] idx=28 total=0.0290 (sem_rank=7 comp=0.0149 + bm25_rank=11 comp=0.0141)
[15:08:06] TRACE | [enriched-hybrid-llm]   RRF[6] idx=37 total=0.0288 (sem_rank=10 comp=0.0143 + bm25_rank=9 comp=0.0145)
[15:08:06] TRACE | [enriched-hybrid-llm]   RRF[7] idx=38 total=0.0287 (sem_rank=14 comp=0.0135 + bm25_rank=6 comp=0.0152)
[15:08:06] TRACE | [enriched-hybrid-llm]   RRF[8] idx=4 total=0.0286 (sem_rank=24 comp=0.0119 + bm25_rank=0 comp=0.0167)
[15:08:06] TRACE | [enriched-hybrid-llm]   RRF[9] idx=25 total=0.0280 (sem_rank=9 comp=0.0145 + bm25_rank=14 comp=0.0135)
[15:08:06] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:06] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0328 sem_rank=0 bm25_rank=2 dominant=semantic | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:08:06] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=user_guide_fix_5 doc_id=user_guide rrf_score=0.0320 sem_rank=1 bm25_rank=4 dominant=semantic | enriched: Testing Schedules, Handling Robust, Attempt, Error Handling, Dead Letter, Letter Queue, Robust error | Fallback Actions Execute, CloudFlow, Queue  Save and activate **Testing Schedules:** Use the buil...
[15:08:06] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0320 sem_rank=4 bm25_rank=1 dominant=bm25 | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:08:06] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0320 sem_rank=2 bm25_rank=3 dominant=semantic | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:08:06] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_7 doc_id=troubleshooting_guide rrf_score=0.0302 sem_rank=3 bm25_rank=10 dominant=semantic | enriched: Optimization Strategies, awk print, rate limit, raise Exception, Max retries, rate limiting, Warning | time.sleep(retry_after, Batch, API  Waiting {retry_after} seconds...") time.sleep(retry_after) co...
[15:08:06] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:06] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:06] TRACE | Query: I'm getting throttled by CloudFlow API, how can I handle this in my application?
[15:08:06] TRACE | Total key facts: 5
[15:08:06] TRACE | Found facts: 4/5
[15:08:06] TRACE |   FOUND[1] 429 Too Many Requests
[15:08:06] TRACE |   FOUND[2] X-RateLimit-Remaining
[15:08:06] TRACE |   FOUND[3] Retry-After
[15:08:06] TRACE |   FOUND[4] Implement exponential backoff when receiving 429 responses
[15:08:06] TRACE | Missed facts: 1/5
[15:08:06] TRACE |   MISSED[1] Monitor X-RateLimit-Remaining header values
[15:08:06] TRACE | === END FACT COVERAGE ===
[15:08:06] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:06] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why am I being blocked with rate limit errors?
[15:08:06] DEBUG | [query-rewrite] Rewriting query: Why am I being blocked with rate limit errors?
[15:08:06] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:06] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=845 timeout=5s
[15:08:06] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:06] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:06] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:07] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.93s
[15:08:07] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=13
[15:08:07] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=61
[15:08:07] DEBUG | [anthropic] RESPONSE: rate limit api request throttling error handling quota policy
[15:08:07] DEBUG | [query-rewrite] SUCCESS in 0.930s: Why am I being blocked with rate limit errors? → rate limit api request throttling error handling quota policy
[15:08:07] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: rate limit api request throttling error handling quota policy (took 0.931s)
[15:08:07] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:07] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:07] TRACE | [enriched-hybrid-llm]   SEM[0] idx=1 chunk_id=api_reference_fix_1 score=0.7110 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:07] TRACE | [enriched-hybrid-llm]   SEM[1] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6657 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:07] TRACE | [enriched-hybrid-llm]   SEM[2] idx=4 chunk_id=api_reference_fix_4 score=0.6561 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:07] TRACE | [enriched-hybrid-llm]   SEM[3] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6426 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:07] TRACE | [enriched-hybrid-llm]   SEM[4] idx=45 chunk_id=user_guide_fix_5 score=0.6051 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:07] TRACE | [enriched-hybrid-llm]   SEM[5] idx=47 chunk_id=user_guide_fix_7 score=0.5944 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:08:07] TRACE | [enriched-hybrid-llm]   SEM[6] idx=7 chunk_id=architecture_overview_fix_1 score=0.5853 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:07] TRACE | [enriched-hybrid-llm]   SEM[7] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5714 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:07] TRACE | [enriched-hybrid-llm]   SEM[8] idx=46 chunk_id=user_guide_fix_6 score=0.5695 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:07] TRACE | [enriched-hybrid-llm]   SEM[9] idx=3 chunk_id=api_reference_fix_3 score=0.5652 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:07] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:07] TRACE | [enriched-hybrid-llm]   BM25[0] idx=34 chunk_id=troubleshooting_guide_fix_6 score=13.4859 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:07] TRACE | [enriched-hybrid-llm]   BM25[1] idx=4 chunk_id=api_reference_fix_4 score=11.4753 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:07] TRACE | [enriched-hybrid-llm]   BM25[2] idx=35 chunk_id=troubleshooting_guide_fix_7 score=6.6579 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:07] TRACE | [enriched-hybrid-llm]   BM25[3] idx=1 chunk_id=api_reference_fix_1 score=6.1341 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:07] TRACE | [enriched-hybrid-llm]   BM25[4] idx=7 chunk_id=architecture_overview_fix_1 score=5.6892 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:07] TRACE | [enriched-hybrid-llm]   BM25[5] idx=9 chunk_id=architecture_overview_fix_3 score=5.3910 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:07] TRACE | [enriched-hybrid-llm]   BM25[6] idx=37 chunk_id=troubleshooting_guide_fix_9 score=4.9409 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:07] TRACE | [enriched-hybrid-llm]   BM25[7] idx=16 chunk_id=architecture_overview_fix_10 score=4.8279 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:07] TRACE | [enriched-hybrid-llm]   BM25[8] idx=14 chunk_id=architecture_overview_fix_8 score=4.5421 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:07] TRACE | [enriched-hybrid-llm]   BM25[9] idx=29 chunk_id=troubleshooting_guide_fix_1 score=4.3750 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:07] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:07] TRACE | [enriched-hybrid-llm]   RRF[0] idx=1 total=0.0325 (sem_rank=0 comp=0.0167 + bm25_rank=3 comp=0.0159)
[15:08:07] TRACE | [enriched-hybrid-llm]   RRF[1] idx=34 total=0.0325 (sem_rank=3 comp=0.0159 + bm25_rank=0 comp=0.0167)
[15:08:07] TRACE | [enriched-hybrid-llm]   RRF[2] idx=35 total=0.0325 (sem_rank=1 comp=0.0164 + bm25_rank=2 comp=0.0161)
[15:08:07] TRACE | [enriched-hybrid-llm]   RRF[3] idx=4 total=0.0325 (sem_rank=2 comp=0.0161 + bm25_rank=1 comp=0.0164)
[15:08:07] TRACE | [enriched-hybrid-llm]   RRF[4] idx=7 total=0.0308 (sem_rank=6 comp=0.0152 + bm25_rank=4 comp=0.0156)
[15:08:07] TRACE | [enriched-hybrid-llm]   RRF[5] idx=45 total=0.0297 (sem_rank=4 comp=0.0156 + bm25_rank=11 comp=0.0141)
[15:08:07] TRACE | [enriched-hybrid-llm]   RRF[6] idx=47 total=0.0297 (sem_rank=5 comp=0.0154 + bm25_rank=10 comp=0.0143)
[15:08:07] TRACE | [enriched-hybrid-llm]   RRF[7] idx=29 total=0.0294 (sem_rank=7 comp=0.0149 + bm25_rank=9 comp=0.0145)
[15:08:07] TRACE | [enriched-hybrid-llm]   RRF[8] idx=37 total=0.0292 (sem_rank=11 comp=0.0141 + bm25_rank=6 comp=0.0152)
[15:08:07] TRACE | [enriched-hybrid-llm]   RRF[9] idx=16 total=0.0292 (sem_rank=10 comp=0.0143 + bm25_rank=7 comp=0.0149)
[15:08:07] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:07] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0325 sem_rank=0 bm25_rank=3 dominant=semantic | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:08:07] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0325 sem_rank=3 bm25_rank=0 dominant=bm25 | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:08:07] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_7 doc_id=troubleshooting_guide rrf_score=0.0325 sem_rank=1 bm25_rank=2 dominant=semantic | enriched: Optimization Strategies, awk print, rate limit, raise Exception, Max retries, rate limiting, Warning | time.sleep(retry_after, Batch, API  Waiting {retry_after} seconds...") time.sleep(retry_after) co...
[15:08:07] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=api_reference_fix_4 doc_id=api_reference rrf_score=0.0325 sem_rank=2 bm25_rank=1 dominant=bm25 | enriched: malformed JSON, requested resource, Bad Gateway, Error Codes, HTTP Status, Response Format, Server Error | Status Codes, Invalid, Description, Common Causes, Forbidden  ### Error Response Format ```js...
[15:08:07] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.0308 sem_rank=6 bm25_rank=4 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:08:07] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:07] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:07] TRACE | Query: Why am I being blocked with rate limit errors?
[15:08:07] TRACE | Total key facts: 5
[15:08:07] TRACE | Found facts: 4/5
[15:08:07] TRACE |   FOUND[1] 429 Too Many Requests
[15:08:07] TRACE |   FOUND[2] X-RateLimit-Remaining
[15:08:07] TRACE |   FOUND[3] Retry-After
[15:08:07] TRACE |   FOUND[4] Implement exponential backoff when receiving 429 responses
[15:08:07] TRACE | Missed facts: 1/5
[15:08:07] TRACE |   MISSED[1] Monitor X-RateLimit-Remaining header values
[15:08:07] TRACE | === END FACT COVERAGE ===
[15:08:07] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:07] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What is the JWT token expiration time?
[15:08:07] DEBUG | [query-rewrite] Rewriting query: What is the JWT token expiration time?
[15:08:07] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:07] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=837 timeout=5s
[15:08:07] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:07] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:07] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:08] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.89s
[15:08:08] DEBUG | [anthropic] USAGE: input_tokens=195 output_tokens=11
[15:08:08] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=60
[15:08:08] DEBUG | [anthropic] RESPONSE: jwt token authentication lifetime duration expiration policy
[15:08:08] DEBUG | [query-rewrite] SUCCESS in 0.894s: What is the JWT token expiration time? → jwt token authentication lifetime duration expiration policy
[15:08:08] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: jwt token authentication lifetime duration expiration policy (took 0.894s)
[15:08:08] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: jwt token authentication lifetime duration expiration policy JSON JWT claims exp iat issued web
[15:08:08] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:08] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:08] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:08] TRACE | [enriched-hybrid-llm]   SEM[0] idx=12 chunk_id=architecture_overview_fix_6 score=0.6205 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:08] TRACE | [enriched-hybrid-llm]   SEM[1] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6151 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:08] TRACE | [enriched-hybrid-llm]   SEM[2] idx=7 chunk_id=architecture_overview_fix_1 score=0.6147 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:08] TRACE | [enriched-hybrid-llm]   SEM[3] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5838 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:08] TRACE | [enriched-hybrid-llm]   SEM[4] idx=0 chunk_id=api_reference_fix_0 score=0.5793 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:08] TRACE | [enriched-hybrid-llm]   SEM[5] idx=14 chunk_id=architecture_overview_fix_8 score=0.5748 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:08] TRACE | [enriched-hybrid-llm]   SEM[6] idx=42 chunk_id=user_guide_fix_2 score=0.5500 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:08:08] TRACE | [enriched-hybrid-llm]   SEM[7] idx=4 chunk_id=api_reference_fix_4 score=0.5486 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:08] TRACE | [enriched-hybrid-llm]   SEM[8] idx=1 chunk_id=api_reference_fix_1 score=0.5359 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:08] TRACE | [enriched-hybrid-llm]   SEM[9] idx=3 chunk_id=api_reference_fix_3 score=0.5357 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:08] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:08] TRACE | [enriched-hybrid-llm]   BM25[0] idx=7 chunk_id=architecture_overview_fix_1 score=17.1062 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:08] TRACE | [enriched-hybrid-llm]   BM25[1] idx=0 chunk_id=api_reference_fix_0 score=16.0968 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:08] TRACE | [enriched-hybrid-llm]   BM25[2] idx=28 chunk_id=troubleshooting_guide_fix_0 score=14.6553 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:08] TRACE | [enriched-hybrid-llm]   BM25[3] idx=29 chunk_id=troubleshooting_guide_fix_1 score=12.6324 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:08] TRACE | [enriched-hybrid-llm]   BM25[4] idx=14 chunk_id=architecture_overview_fix_8 score=9.9099 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:08] TRACE | [enriched-hybrid-llm]   BM25[5] idx=12 chunk_id=architecture_overview_fix_6 score=7.8555 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:08] TRACE | [enriched-hybrid-llm]   BM25[6] idx=36 chunk_id=troubleshooting_guide_fix_8 score=7.0372 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:08] TRACE | [enriched-hybrid-llm]   BM25[7] idx=23 chunk_id=deployment_guide_fix_4 score=5.4432 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:08] TRACE | [enriched-hybrid-llm]   BM25[8] idx=20 chunk_id=deployment_guide_fix_1 score=5.0039 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:08] TRACE | [enriched-hybrid-llm]   BM25[9] idx=3 chunk_id=api_reference_fix_3 score=4.6694 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:08] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:08] TRACE | [enriched-hybrid-llm]   RRF[0] idx=7 total=0.3250 (sem_rank=2 comp=0.0250 + bm25_rank=0 comp=0.3000)
[15:08:08] TRACE | [enriched-hybrid-llm]   RRF[1] idx=0 total=0.2942 (sem_rank=4 comp=0.0214 + bm25_rank=1 comp=0.2727)
[15:08:08] TRACE | [enriched-hybrid-llm]   RRF[2] idx=28 total=0.2773 (sem_rank=1 comp=0.0273 + bm25_rank=2 comp=0.2500)
[15:08:08] TRACE | [enriched-hybrid-llm]   RRF[3] idx=29 total=0.2538 (sem_rank=3 comp=0.0231 + bm25_rank=3 comp=0.2308)
[15:08:08] TRACE | [enriched-hybrid-llm]   RRF[4] idx=14 total=0.2343 (sem_rank=5 comp=0.0200 + bm25_rank=4 comp=0.2143)
[15:08:08] TRACE | [enriched-hybrid-llm]   RRF[5] idx=12 total=0.2300 (sem_rank=0 comp=0.0300 + bm25_rank=5 comp=0.2000)
[15:08:08] TRACE | [enriched-hybrid-llm]   RRF[6] idx=36 total=0.1936 (sem_rank=39 comp=0.0061 + bm25_rank=6 comp=0.1875)
[15:08:08] TRACE | [enriched-hybrid-llm]   RRF[7] idx=23 total=0.1834 (sem_rank=33 comp=0.0070 + bm25_rank=7 comp=0.1765)
[15:08:08] TRACE | [enriched-hybrid-llm]   RRF[8] idx=20 total=0.1778 (sem_rank=17 comp=0.0111 + bm25_rank=8 comp=0.1667)
[15:08:08] TRACE | [enriched-hybrid-llm]   RRF[9] idx=3 total=0.1737 (sem_rank=9 comp=0.0158 + bm25_rank=9 comp=0.1579)
[15:08:08] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:08] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.3250 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:08:08] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.2942 sem_rank=4 bm25_rank=1 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:08:08] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.2773 sem_rank=1 bm25_rank=2 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:08:08] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.2538 sem_rank=3 bm25_rank=3 dominant=bm25 | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:08:08] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2343 sem_rank=5 bm25_rank=4 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:08:08] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:08] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:08] TRACE | Query: What is the JWT token expiration time?
[15:08:08] TRACE | Total key facts: 3
[15:08:08] TRACE | Found facts: 2/3
[15:08:08] TRACE |   FOUND[1] 3600 seconds
[15:08:08] TRACE |   FOUND[2] All tokens expire after 3600 seconds
[15:08:08] TRACE | Missed facts: 1/3
[15:08:08] TRACE |   MISSED[1] max 3600 seconds from iat
[15:08:08] TRACE | === END FACT COVERAGE ===
[15:08:08] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:08] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: How long do access tokens last?
[15:08:08] DEBUG | [query-rewrite] Rewriting query: How long do access tokens last?
[15:08:08] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:08] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=830 timeout=5s
[15:08:08] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:08] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:08] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:09] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.15s
[15:08:09] DEBUG | [anthropic] USAGE: input_tokens=193 output_tokens=13
[15:08:09] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=78
[15:08:09] DEBUG | [anthropic] RESPONSE: access token lifetime expiration duration authentication token validity period
[15:08:09] DEBUG | [query-rewrite] SUCCESS in 1.146s: How long do access tokens last? → access token lifetime expiration duration authentication token validity period
[15:08:09] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: access token lifetime expiration duration authentication token validity period (took 1.146s)
[15:08:09] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: access token lifetime expiration duration authentication token validity period JWT claims exp iat issued
[15:08:09] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:09] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:09] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:09] TRACE | [enriched-hybrid-llm]   SEM[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6495 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:09] TRACE | [enriched-hybrid-llm]   SEM[1] idx=12 chunk_id=architecture_overview_fix_6 score=0.6155 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:09] TRACE | [enriched-hybrid-llm]   SEM[2] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5936 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:09] TRACE | [enriched-hybrid-llm]   SEM[3] idx=14 chunk_id=architecture_overview_fix_8 score=0.5883 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:09] TRACE | [enriched-hybrid-llm]   SEM[4] idx=7 chunk_id=architecture_overview_fix_1 score=0.5827 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:09] TRACE | [enriched-hybrid-llm]   SEM[5] idx=0 chunk_id=api_reference_fix_0 score=0.5646 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:09] TRACE | [enriched-hybrid-llm]   SEM[6] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.5364 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:09] TRACE | [enriched-hybrid-llm]   SEM[7] idx=49 chunk_id=user_guide_fix_9 score=0.5364 | Requester: {{trigger.body.requester}} Description: {{trigger.body.description}} Approve: https://app...
[15:08:09] TRACE | [enriched-hybrid-llm]   SEM[8] idx=15 chunk_id=architecture_overview_fix_9 score=0.5288 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:09] TRACE | [enriched-hybrid-llm]   SEM[9] idx=3 chunk_id=api_reference_fix_3 score=0.5253 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:09] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:09] TRACE | [enriched-hybrid-llm]   BM25[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=16.7932 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:09] TRACE | [enriched-hybrid-llm]   BM25[1] idx=14 chunk_id=architecture_overview_fix_8 score=14.7940 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:09] TRACE | [enriched-hybrid-llm]   BM25[2] idx=7 chunk_id=architecture_overview_fix_1 score=14.4235 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:09] TRACE | [enriched-hybrid-llm]   BM25[3] idx=0 chunk_id=api_reference_fix_0 score=13.5388 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:09] TRACE | [enriched-hybrid-llm]   BM25[4] idx=29 chunk_id=troubleshooting_guide_fix_1 score=10.0913 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:09] TRACE | [enriched-hybrid-llm]   BM25[5] idx=4 chunk_id=api_reference_fix_4 score=7.3605 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:09] TRACE | [enriched-hybrid-llm]   BM25[6] idx=12 chunk_id=architecture_overview_fix_6 score=5.7994 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:09] TRACE | [enriched-hybrid-llm]   BM25[7] idx=3 chunk_id=api_reference_fix_3 score=5.4534 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:09] TRACE | [enriched-hybrid-llm]   BM25[8] idx=23 chunk_id=deployment_guide_fix_4 score=5.3057 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:09] TRACE | [enriched-hybrid-llm]   BM25[9] idx=20 chunk_id=deployment_guide_fix_1 score=5.0039 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:09] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:09] TRACE | [enriched-hybrid-llm]   RRF[0] idx=28 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:08:09] TRACE | [enriched-hybrid-llm]   RRF[1] idx=14 total=0.2958 (sem_rank=3 comp=0.0231 + bm25_rank=1 comp=0.2727)
[15:08:09] TRACE | [enriched-hybrid-llm]   RRF[2] idx=7 total=0.2714 (sem_rank=4 comp=0.0214 + bm25_rank=2 comp=0.2500)
[15:08:09] TRACE | [enriched-hybrid-llm]   RRF[3] idx=0 total=0.2508 (sem_rank=5 comp=0.0200 + bm25_rank=3 comp=0.2308)
[15:08:09] TRACE | [enriched-hybrid-llm]   RRF[4] idx=29 total=0.2393 (sem_rank=2 comp=0.0250 + bm25_rank=4 comp=0.2143)
[15:08:09] TRACE | [enriched-hybrid-llm]   RRF[5] idx=12 total=0.2148 (sem_rank=1 comp=0.0273 + bm25_rank=6 comp=0.1875)
[15:08:09] TRACE | [enriched-hybrid-llm]   RRF[6] idx=4 total=0.2097 (sem_rank=21 comp=0.0097 + bm25_rank=5 comp=0.2000)
[15:08:09] TRACE | [enriched-hybrid-llm]   RRF[7] idx=3 total=0.1923 (sem_rank=9 comp=0.0158 + bm25_rank=7 comp=0.1765)
[15:08:09] TRACE | [enriched-hybrid-llm]   RRF[8] idx=23 total=0.1742 (sem_rank=30 comp=0.0075 + bm25_rank=8 comp=0.1667)
[15:08:09] TRACE | [enriched-hybrid-llm]   RRF[9] idx=20 total=0.1679 (sem_rank=20 comp=0.0100 + bm25_rank=9 comp=0.1579)
[15:08:09] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:09] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:08:09] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2958 sem_rank=3 bm25_rank=1 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:08:09] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.2714 sem_rank=4 bm25_rank=2 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:08:09] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.2508 sem_rank=5 bm25_rank=3 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:08:09] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.2393 sem_rank=2 bm25_rank=4 dominant=bm25 | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:08:09] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:09] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:09] TRACE | Query: How long do access tokens last?
[15:08:09] TRACE | Total key facts: 3
[15:08:09] TRACE | Found facts: 2/3
[15:08:09] TRACE |   FOUND[1] 3600 seconds
[15:08:09] TRACE |   FOUND[2] All tokens expire after 3600 seconds
[15:08:09] TRACE | Missed facts: 1/3
[15:08:09] TRACE |   MISSED[1] max 3600 seconds from iat
[15:08:09] TRACE | === END FACT COVERAGE ===
[15:08:09] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:09] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: My authentication keeps expiring after an hour
[15:08:09] DEBUG | [query-rewrite] Rewriting query: My authentication keeps expiring after an hour
[15:08:09] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:09] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=845 timeout=5s
[15:08:09] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:09] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:09] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:10] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.00s
[15:08:10] DEBUG | [anthropic] USAGE: input_tokens=194 output_tokens=12
[15:08:10] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=73
[15:08:10] DEBUG | [anthropic] RESPONSE: authentication token session lifetime expiration duration default timeout
[15:08:10] DEBUG | [query-rewrite] SUCCESS in 1.001s: My authentication keeps expiring after an hour → authentication token session lifetime expiration duration default timeout
[15:08:10] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: authentication token session lifetime expiration duration default timeout (took 1.001s)
[15:08:10] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: authentication token session lifetime expiration duration default timeout JWT claims exp iat issued
[15:08:10] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:10] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:10] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:10] TRACE | [enriched-hybrid-llm]   SEM[0] idx=12 chunk_id=architecture_overview_fix_6 score=0.6378 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:10] TRACE | [enriched-hybrid-llm]   SEM[1] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6377 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:10] TRACE | [enriched-hybrid-llm]   SEM[2] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.6267 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:10] TRACE | [enriched-hybrid-llm]   SEM[3] idx=7 chunk_id=architecture_overview_fix_1 score=0.5997 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:10] TRACE | [enriched-hybrid-llm]   SEM[4] idx=14 chunk_id=architecture_overview_fix_8 score=0.5878 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:10] TRACE | [enriched-hybrid-llm]   SEM[5] idx=42 chunk_id=user_guide_fix_2 score=0.5608 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:08:10] TRACE | [enriched-hybrid-llm]   SEM[6] idx=13 chunk_id=architecture_overview_fix_7 score=0.5567 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:08:10] TRACE | [enriched-hybrid-llm]   SEM[7] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.5562 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:10] TRACE | [enriched-hybrid-llm]   SEM[8] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.5552 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:10] TRACE | [enriched-hybrid-llm]   SEM[9] idx=0 chunk_id=api_reference_fix_0 score=0.5467 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:10] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:10] TRACE | [enriched-hybrid-llm]   BM25[0] idx=7 chunk_id=architecture_overview_fix_1 score=12.1647 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:10] TRACE | [enriched-hybrid-llm]   BM25[1] idx=28 chunk_id=troubleshooting_guide_fix_0 score=11.3948 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:10] TRACE | [enriched-hybrid-llm]   BM25[2] idx=29 chunk_id=troubleshooting_guide_fix_1 score=9.9509 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:10] TRACE | [enriched-hybrid-llm]   BM25[3] idx=14 chunk_id=architecture_overview_fix_8 score=9.9099 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:10] TRACE | [enriched-hybrid-llm]   BM25[4] idx=0 chunk_id=api_reference_fix_0 score=8.6359 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:10] TRACE | [enriched-hybrid-llm]   BM25[5] idx=12 chunk_id=architecture_overview_fix_6 score=7.3480 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:10] TRACE | [enriched-hybrid-llm]   BM25[6] idx=32 chunk_id=troubleshooting_guide_fix_4 score=6.3491 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:10] TRACE | [enriched-hybrid-llm]   BM25[7] idx=13 chunk_id=architecture_overview_fix_7 score=6.0558 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:08:10] TRACE | [enriched-hybrid-llm]   BM25[8] idx=20 chunk_id=deployment_guide_fix_1 score=5.5435 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:10] TRACE | [enriched-hybrid-llm]   BM25[9] idx=36 chunk_id=troubleshooting_guide_fix_8 score=5.4835 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:10] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:10] TRACE | [enriched-hybrid-llm]   RRF[0] idx=7 total=0.3231 (sem_rank=3 comp=0.0231 + bm25_rank=0 comp=0.3000)
[15:08:10] TRACE | [enriched-hybrid-llm]   RRF[1] idx=28 total=0.3000 (sem_rank=1 comp=0.0273 + bm25_rank=1 comp=0.2727)
[15:08:10] TRACE | [enriched-hybrid-llm]   RRF[2] idx=29 total=0.2750 (sem_rank=2 comp=0.0250 + bm25_rank=2 comp=0.2500)
[15:08:10] TRACE | [enriched-hybrid-llm]   RRF[3] idx=14 total=0.2522 (sem_rank=4 comp=0.0214 + bm25_rank=3 comp=0.2308)
[15:08:10] TRACE | [enriched-hybrid-llm]   RRF[4] idx=0 total=0.2301 (sem_rank=9 comp=0.0158 + bm25_rank=4 comp=0.2143)
[15:08:10] TRACE | [enriched-hybrid-llm]   RRF[5] idx=12 total=0.2300 (sem_rank=0 comp=0.0300 + bm25_rank=5 comp=0.2000)
[15:08:10] TRACE | [enriched-hybrid-llm]   RRF[6] idx=32 total=0.2042 (sem_rank=8 comp=0.0167 + bm25_rank=6 comp=0.1875)
[15:08:10] TRACE | [enriched-hybrid-llm]   RRF[7] idx=13 total=0.1952 (sem_rank=6 comp=0.0187 + bm25_rank=7 comp=0.1765)
[15:08:10] TRACE | [enriched-hybrid-llm]   RRF[8] idx=20 total=0.1792 (sem_rank=14 comp=0.0125 + bm25_rank=8 comp=0.1667)
[15:08:10] TRACE | [enriched-hybrid-llm]   RRF[9] idx=42 total=0.1700 (sem_rank=5 comp=0.0200 + bm25_rank=10 comp=0.1500)
[15:08:10] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:10] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.3231 sem_rank=3 bm25_rank=0 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:08:10] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.3000 sem_rank=1 bm25_rank=1 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:08:10] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.2750 sem_rank=2 bm25_rank=2 dominant=bm25 | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:08:10] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2522 sem_rank=4 bm25_rank=3 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:08:10] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.2301 sem_rank=9 bm25_rank=4 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:08:10] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:10] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:10] TRACE | Query: My authentication keeps expiring after an hour
[15:08:10] TRACE | Total key facts: 3
[15:08:10] TRACE | Found facts: 2/3
[15:08:10] TRACE |   FOUND[1] 3600 seconds
[15:08:10] TRACE |   FOUND[2] All tokens expire after 3600 seconds
[15:08:10] TRACE | Missed facts: 1/3
[15:08:10] TRACE |   MISSED[1] max 3600 seconds from iat
[15:08:10] TRACE | === END FACT COVERAGE ===
[15:08:10] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:10] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: token expiry time
[15:08:10] DEBUG | [query-rewrite] Rewriting query: token expiry time
[15:08:10] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:10] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=816 timeout=5s
[15:08:10] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:10] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:10] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:11] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.17s
[15:08:11] DEBUG | [anthropic] USAGE: input_tokens=190 output_tokens=10
[15:08:11] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=63
[15:08:11] DEBUG | [anthropic] RESPONSE: token authentication lifetime expiration duration configuration
[15:08:11] DEBUG | [query-rewrite] SUCCESS in 1.174s: token expiry time → token authentication lifetime expiration duration configuration
[15:08:11] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: token authentication lifetime expiration duration configuration (took 1.174s)
[15:08:11] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: token authentication lifetime expiration duration configuration JWT claims exp iat issued
[15:08:11] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:11] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:11] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:11] TRACE | [enriched-hybrid-llm]   SEM[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6380 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:11] TRACE | [enriched-hybrid-llm]   SEM[1] idx=12 chunk_id=architecture_overview_fix_6 score=0.6201 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:11] TRACE | [enriched-hybrid-llm]   SEM[2] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.6062 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:11] TRACE | [enriched-hybrid-llm]   SEM[3] idx=7 chunk_id=architecture_overview_fix_1 score=0.5930 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:11] TRACE | [enriched-hybrid-llm]   SEM[4] idx=14 chunk_id=architecture_overview_fix_8 score=0.5761 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:11] TRACE | [enriched-hybrid-llm]   SEM[5] idx=0 chunk_id=api_reference_fix_0 score=0.5687 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:11] TRACE | [enriched-hybrid-llm]   SEM[6] idx=15 chunk_id=architecture_overview_fix_9 score=0.5547 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:11] TRACE | [enriched-hybrid-llm]   SEM[7] idx=42 chunk_id=user_guide_fix_2 score=0.5503 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:08:11] TRACE | [enriched-hybrid-llm]   SEM[8] idx=20 chunk_id=deployment_guide_fix_1 score=0.5503 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:11] TRACE | [enriched-hybrid-llm]   SEM[9] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.5424 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:11] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:11] TRACE | [enriched-hybrid-llm]   BM25[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=11.3948 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:11] TRACE | [enriched-hybrid-llm]   BM25[1] idx=14 chunk_id=architecture_overview_fix_8 score=9.9099 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:11] TRACE | [enriched-hybrid-llm]   BM25[2] idx=7 chunk_id=architecture_overview_fix_1 score=8.9474 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:11] TRACE | [enriched-hybrid-llm]   BM25[3] idx=0 chunk_id=api_reference_fix_0 score=8.6359 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:11] TRACE | [enriched-hybrid-llm]   BM25[4] idx=29 chunk_id=troubleshooting_guide_fix_1 score=7.7846 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:11] TRACE | [enriched-hybrid-llm]   BM25[5] idx=20 chunk_id=deployment_guide_fix_1 score=5.7626 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:11] TRACE | [enriched-hybrid-llm]   BM25[6] idx=36 chunk_id=troubleshooting_guide_fix_8 score=5.7483 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:11] TRACE | [enriched-hybrid-llm]   BM25[7] idx=12 chunk_id=architecture_overview_fix_6 score=4.1194 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:11] TRACE | [enriched-hybrid-llm]   BM25[8] idx=23 chunk_id=deployment_guide_fix_4 score=3.8048 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:11] TRACE | [enriched-hybrid-llm]   BM25[9] idx=38 chunk_id=troubleshooting_guide_fix_10 score=3.5981 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:11] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:11] TRACE | [enriched-hybrid-llm]   RRF[0] idx=28 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:08:11] TRACE | [enriched-hybrid-llm]   RRF[1] idx=14 total=0.2942 (sem_rank=4 comp=0.0214 + bm25_rank=1 comp=0.2727)
[15:08:11] TRACE | [enriched-hybrid-llm]   RRF[2] idx=7 total=0.2731 (sem_rank=3 comp=0.0231 + bm25_rank=2 comp=0.2500)
[15:08:11] TRACE | [enriched-hybrid-llm]   RRF[3] idx=0 total=0.2508 (sem_rank=5 comp=0.0200 + bm25_rank=3 comp=0.2308)
[15:08:11] TRACE | [enriched-hybrid-llm]   RRF[4] idx=29 total=0.2393 (sem_rank=2 comp=0.0250 + bm25_rank=4 comp=0.2143)
[15:08:11] TRACE | [enriched-hybrid-llm]   RRF[5] idx=20 total=0.2167 (sem_rank=8 comp=0.0167 + bm25_rank=5 comp=0.2000)
[15:08:11] TRACE | [enriched-hybrid-llm]   RRF[6] idx=12 total=0.2037 (sem_rank=1 comp=0.0273 + bm25_rank=7 comp=0.1765)
[15:08:11] TRACE | [enriched-hybrid-llm]   RRF[7] idx=36 total=0.1942 (sem_rank=35 comp=0.0067 + bm25_rank=6 comp=0.1875)
[15:08:11] TRACE | [enriched-hybrid-llm]   RRF[8] idx=23 total=0.1735 (sem_rank=34 comp=0.0068 + bm25_rank=8 comp=0.1667)
[15:08:11] TRACE | [enriched-hybrid-llm]   RRF[9] idx=38 total=0.1722 (sem_rank=11 comp=0.0143 + bm25_rank=9 comp=0.1579)
[15:08:11] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:11] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:08:11] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2942 sem_rank=4 bm25_rank=1 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:08:11] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.2731 sem_rank=3 bm25_rank=2 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:08:11] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.2508 sem_rank=5 bm25_rank=3 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:08:11] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.2393 sem_rank=2 bm25_rank=4 dominant=bm25 | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:08:11] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:11] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:11] TRACE | Query: token expiry time
[15:08:11] TRACE | Total key facts: 3
[15:08:11] TRACE | Found facts: 2/3
[15:08:11] TRACE |   FOUND[1] 3600 seconds
[15:08:11] TRACE |   FOUND[2] All tokens expire after 3600 seconds
[15:08:11] TRACE | Missed facts: 1/3
[15:08:11] TRACE |   MISSED[1] max 3600 seconds from iat
[15:08:11] TRACE | === END FACT COVERAGE ===
[15:08:11] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:11] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: I need to implement token refresh logic, when do JWT tokens expire?
[15:08:11] DEBUG | [query-rewrite] Rewriting query: I need to implement token refresh logic, when do JWT tokens expire?
[15:08:11] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:11] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=866 timeout=5s
[15:08:11] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:11] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:11] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:12] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.96s
[15:08:12] DEBUG | [anthropic] USAGE: input_tokens=200 output_tokens=13
[15:08:12] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=76
[15:08:12] DEBUG | [anthropic] RESPONSE: jwt token expiration authentication access token lifecycle refresh mechanism
[15:08:12] DEBUG | [query-rewrite] SUCCESS in 0.965s: I need to implement token refresh logic, when do JWT tokens expire? → jwt token expiration authentication access token lifecycle refresh mechanism
[15:08:12] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: jwt token expiration authentication access token lifecycle refresh mechanism (took 0.965s)
[15:08:12] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: jwt token expiration authentication access token lifecycle refresh mechanism JSON JWT claims exp iat issued web
[15:08:12] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:12] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:12] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:12] TRACE | [enriched-hybrid-llm]   SEM[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6427 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:12] TRACE | [enriched-hybrid-llm]   SEM[1] idx=12 chunk_id=architecture_overview_fix_6 score=0.6194 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:12] TRACE | [enriched-hybrid-llm]   SEM[2] idx=7 chunk_id=architecture_overview_fix_1 score=0.6161 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:12] TRACE | [enriched-hybrid-llm]   SEM[3] idx=0 chunk_id=api_reference_fix_0 score=0.5872 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:12] TRACE | [enriched-hybrid-llm]   SEM[4] idx=14 chunk_id=architecture_overview_fix_8 score=0.5841 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:12] TRACE | [enriched-hybrid-llm]   SEM[5] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5750 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:12] TRACE | [enriched-hybrid-llm]   SEM[6] idx=42 chunk_id=user_guide_fix_2 score=0.5694 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:08:12] TRACE | [enriched-hybrid-llm]   SEM[7] idx=49 chunk_id=user_guide_fix_9 score=0.5520 | Requester: {{trigger.body.requester}} Description: {{trigger.body.description}} Approve: https://app...
[15:08:12] TRACE | [enriched-hybrid-llm]   SEM[8] idx=3 chunk_id=api_reference_fix_3 score=0.5472 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:12] TRACE | [enriched-hybrid-llm]   SEM[9] idx=2 chunk_id=api_reference_fix_2 score=0.5470 | **Endpoint:** `POST /workflows` **Request Body:** ```json { "name": "Email Campaign Automation", "de...
[15:08:12] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:12] TRACE | [enriched-hybrid-llm]   BM25[0] idx=7 chunk_id=architecture_overview_fix_1 score=26.8111 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:12] TRACE | [enriched-hybrid-llm]   BM25[1] idx=28 chunk_id=troubleshooting_guide_fix_0 score=23.8512 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:12] TRACE | [enriched-hybrid-llm]   BM25[2] idx=0 chunk_id=api_reference_fix_0 score=23.4800 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:12] TRACE | [enriched-hybrid-llm]   BM25[3] idx=12 chunk_id=architecture_overview_fix_6 score=12.8534 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:12] TRACE | [enriched-hybrid-llm]   BM25[4] idx=14 chunk_id=architecture_overview_fix_8 score=12.3345 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:12] TRACE | [enriched-hybrid-llm]   BM25[5] idx=29 chunk_id=troubleshooting_guide_fix_1 score=9.5053 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:12] TRACE | [enriched-hybrid-llm]   BM25[6] idx=36 chunk_id=troubleshooting_guide_fix_8 score=7.0372 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:12] TRACE | [enriched-hybrid-llm]   BM25[7] idx=20 chunk_id=deployment_guide_fix_1 score=6.6718 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:12] TRACE | [enriched-hybrid-llm]   BM25[8] idx=4 chunk_id=api_reference_fix_4 score=6.1595 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:12] TRACE | [enriched-hybrid-llm]   BM25[9] idx=9 chunk_id=architecture_overview_fix_3 score=4.1048 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:12] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:12] TRACE | [enriched-hybrid-llm]   RRF[0] idx=7 total=0.3250 (sem_rank=2 comp=0.0250 + bm25_rank=0 comp=0.3000)
[15:08:12] TRACE | [enriched-hybrid-llm]   RRF[1] idx=28 total=0.3027 (sem_rank=0 comp=0.0300 + bm25_rank=1 comp=0.2727)
[15:08:12] TRACE | [enriched-hybrid-llm]   RRF[2] idx=0 total=0.2731 (sem_rank=3 comp=0.0231 + bm25_rank=2 comp=0.2500)
[15:08:12] TRACE | [enriched-hybrid-llm]   RRF[3] idx=12 total=0.2580 (sem_rank=1 comp=0.0273 + bm25_rank=3 comp=0.2308)
[15:08:12] TRACE | [enriched-hybrid-llm]   RRF[4] idx=14 total=0.2357 (sem_rank=4 comp=0.0214 + bm25_rank=4 comp=0.2143)
[15:08:12] TRACE | [enriched-hybrid-llm]   RRF[5] idx=29 total=0.2200 (sem_rank=5 comp=0.0200 + bm25_rank=5 comp=0.2000)
[15:08:12] TRACE | [enriched-hybrid-llm]   RRF[6] idx=36 total=0.1940 (sem_rank=36 comp=0.0065 + bm25_rank=6 comp=0.1875)
[15:08:12] TRACE | [enriched-hybrid-llm]   RRF[7] idx=20 total=0.1850 (sem_rank=25 comp=0.0086 + bm25_rank=7 comp=0.1765)
[15:08:12] TRACE | [enriched-hybrid-llm]   RRF[8] idx=4 total=0.1817 (sem_rank=10 comp=0.0150 + bm25_rank=8 comp=0.1667)
[15:08:12] TRACE | [enriched-hybrid-llm]   RRF[9] idx=9 total=0.1632 (sem_rank=47 comp=0.0053 + bm25_rank=9 comp=0.1579)
[15:08:12] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:12] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.3250 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:08:12] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.3027 sem_rank=0 bm25_rank=1 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:08:12] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.2731 sem_rank=3 bm25_rank=2 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:08:12] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_6 doc_id=architecture_overview rrf_score=0.2580 sem_rank=1 bm25_rank=3 dominant=bm25 | enriched: Key pattern, JWT expiry, TTL, Data, Key, Invalidation, pattern | JWT, Redis, Kafka Event Streaming  **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:12] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2357 sem_rank=4 bm25_rank=4 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:08:12] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:12] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:12] TRACE | Query: I need to implement token refresh logic, when do JWT tokens expire?
[15:08:12] TRACE | Total key facts: 3
[15:08:12] TRACE | Found facts: 2/3
[15:08:12] TRACE |   FOUND[1] 3600 seconds
[15:08:12] TRACE |   FOUND[2] All tokens expire after 3600 seconds
[15:08:12] TRACE | Missed facts: 1/3
[15:08:12] TRACE |   MISSED[1] max 3600 seconds from iat
[15:08:12] TRACE | === END FACT COVERAGE ===
[15:08:12] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:12] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why does my token stop working after 3600 seconds?
[15:08:12] DEBUG | [query-rewrite] Rewriting query: Why does my token stop working after 3600 seconds?
[15:08:12] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:12] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=849 timeout=5s
[15:08:12] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:12] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:12] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:13] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.90s
[15:08:13] DEBUG | [anthropic] USAGE: input_tokens=199 output_tokens=11
[15:08:13] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=65
[15:08:13] DEBUG | [anthropic] RESPONSE: token expiration authentication session lifetime timeout duration
[15:08:13] DEBUG | [query-rewrite] SUCCESS in 0.899s: Why does my token stop working after 3600 seconds? → token expiration authentication session lifetime timeout duration
[15:08:13] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: token expiration authentication session lifetime timeout duration (took 0.899s)
[15:08:13] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: token expiration authentication session lifetime timeout duration JWT claims exp iat issued
[15:08:13] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:13] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:13] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:13] TRACE | [enriched-hybrid-llm]   SEM[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6457 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:13] TRACE | [enriched-hybrid-llm]   SEM[1] idx=12 chunk_id=architecture_overview_fix_6 score=0.6341 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:13] TRACE | [enriched-hybrid-llm]   SEM[2] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.6256 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:13] TRACE | [enriched-hybrid-llm]   SEM[3] idx=7 chunk_id=architecture_overview_fix_1 score=0.5946 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:13] TRACE | [enriched-hybrid-llm]   SEM[4] idx=14 chunk_id=architecture_overview_fix_8 score=0.5797 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:13] TRACE | [enriched-hybrid-llm]   SEM[5] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.5536 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:13] TRACE | [enriched-hybrid-llm]   SEM[6] idx=13 chunk_id=architecture_overview_fix_7 score=0.5531 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:08:13] TRACE | [enriched-hybrid-llm]   SEM[7] idx=42 chunk_id=user_guide_fix_2 score=0.5517 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:08:13] TRACE | [enriched-hybrid-llm]   SEM[8] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.5494 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:13] TRACE | [enriched-hybrid-llm]   SEM[9] idx=0 chunk_id=api_reference_fix_0 score=0.5457 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:13] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:13] TRACE | [enriched-hybrid-llm]   BM25[0] idx=7 chunk_id=architecture_overview_fix_1 score=12.1647 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:13] TRACE | [enriched-hybrid-llm]   BM25[1] idx=28 chunk_id=troubleshooting_guide_fix_0 score=11.3948 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:13] TRACE | [enriched-hybrid-llm]   BM25[2] idx=29 chunk_id=troubleshooting_guide_fix_1 score=9.9509 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:13] TRACE | [enriched-hybrid-llm]   BM25[3] idx=14 chunk_id=architecture_overview_fix_8 score=9.9099 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:13] TRACE | [enriched-hybrid-llm]   BM25[4] idx=0 chunk_id=api_reference_fix_0 score=8.6359 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:13] TRACE | [enriched-hybrid-llm]   BM25[5] idx=12 chunk_id=architecture_overview_fix_6 score=7.3480 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:13] TRACE | [enriched-hybrid-llm]   BM25[6] idx=32 chunk_id=troubleshooting_guide_fix_4 score=6.3491 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:13] TRACE | [enriched-hybrid-llm]   BM25[7] idx=13 chunk_id=architecture_overview_fix_7 score=6.0558 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:08:13] TRACE | [enriched-hybrid-llm]   BM25[8] idx=20 chunk_id=deployment_guide_fix_1 score=5.5435 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:13] TRACE | [enriched-hybrid-llm]   BM25[9] idx=36 chunk_id=troubleshooting_guide_fix_8 score=5.4835 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:13] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:13] TRACE | [enriched-hybrid-llm]   RRF[0] idx=7 total=0.3231 (sem_rank=3 comp=0.0231 + bm25_rank=0 comp=0.3000)
[15:08:13] TRACE | [enriched-hybrid-llm]   RRF[1] idx=28 total=0.3027 (sem_rank=0 comp=0.0300 + bm25_rank=1 comp=0.2727)
[15:08:13] TRACE | [enriched-hybrid-llm]   RRF[2] idx=29 total=0.2750 (sem_rank=2 comp=0.0250 + bm25_rank=2 comp=0.2500)
[15:08:13] TRACE | [enriched-hybrid-llm]   RRF[3] idx=14 total=0.2522 (sem_rank=4 comp=0.0214 + bm25_rank=3 comp=0.2308)
[15:08:13] TRACE | [enriched-hybrid-llm]   RRF[4] idx=0 total=0.2301 (sem_rank=9 comp=0.0158 + bm25_rank=4 comp=0.2143)
[15:08:13] TRACE | [enriched-hybrid-llm]   RRF[5] idx=12 total=0.2273 (sem_rank=1 comp=0.0273 + bm25_rank=5 comp=0.2000)
[15:08:13] TRACE | [enriched-hybrid-llm]   RRF[6] idx=32 total=0.2042 (sem_rank=8 comp=0.0167 + bm25_rank=6 comp=0.1875)
[15:08:13] TRACE | [enriched-hybrid-llm]   RRF[7] idx=13 total=0.1952 (sem_rank=6 comp=0.0187 + bm25_rank=7 comp=0.1765)
[15:08:13] TRACE | [enriched-hybrid-llm]   RRF[8] idx=20 total=0.1792 (sem_rank=14 comp=0.0125 + bm25_rank=8 comp=0.1667)
[15:08:13] TRACE | [enriched-hybrid-llm]   RRF[9] idx=36 total=0.1644 (sem_rank=36 comp=0.0065 + bm25_rank=9 comp=0.1579)
[15:08:13] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:13] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.3231 sem_rank=3 bm25_rank=0 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:08:13] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.3027 sem_rank=0 bm25_rank=1 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:08:13] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.2750 sem_rank=2 bm25_rank=2 dominant=bm25 | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:08:13] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2522 sem_rank=4 bm25_rank=3 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:08:13] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.2301 sem_rank=9 bm25_rank=4 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:08:13] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:13] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:13] TRACE | Query: Why does my token stop working after 3600 seconds?
[15:08:13] TRACE | Total key facts: 3
[15:08:13] TRACE | Found facts: 2/3
[15:08:13] TRACE |   FOUND[1] 3600 seconds
[15:08:13] TRACE |   FOUND[2] All tokens expire after 3600 seconds
[15:08:13] TRACE | Missed facts: 1/3
[15:08:13] TRACE |   MISSED[1] max 3600 seconds from iat
[15:08:13] TRACE | === END FACT COVERAGE ===
[15:08:13] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:13] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What database technology does CloudFlow use?
[15:08:13] DEBUG | [query-rewrite] Rewriting query: What database technology does CloudFlow use?
[15:08:13] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:13] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=843 timeout=5s
[15:08:13] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:13] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:13] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:14] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.88s
[15:08:14] DEBUG | [anthropic] USAGE: input_tokens=194 output_tokens=11
[15:08:14] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=66
[15:08:14] DEBUG | [anthropic] RESPONSE: CloudFlow database technology supported platforms backend database
[15:08:14] DEBUG | [query-rewrite] SUCCESS in 0.880s: What database technology does CloudFlow use? → CloudFlow database technology supported platforms backend database
[15:08:14] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: CloudFlow database technology supported platforms backend database (took 0.880s)
[15:08:14] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: CloudFlow database technology supported platforms backend database Kafka PostgreSQL Redis data layer storage
[15:08:14] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:14] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:14] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:14] TRACE | [enriched-hybrid-llm]   SEM[0] idx=25 chunk_id=deployment_guide_fix_6 score=0.7043 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:14] TRACE | [enriched-hybrid-llm]   SEM[1] idx=6 chunk_id=architecture_overview_fix_0 score=0.6985 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:14] TRACE | [enriched-hybrid-llm]   SEM[2] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6898 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:14] TRACE | [enriched-hybrid-llm]   SEM[3] idx=19 chunk_id=deployment_guide_fix_0 score=0.6806 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:14] TRACE | [enriched-hybrid-llm]   SEM[4] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6742 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:14] TRACE | [enriched-hybrid-llm]   SEM[5] idx=22 chunk_id=deployment_guide_fix_3 score=0.6684 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:08:14] TRACE | [enriched-hybrid-llm]   SEM[6] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6617 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:14] TRACE | [enriched-hybrid-llm]   SEM[7] idx=0 chunk_id=api_reference_fix_0 score=0.6614 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:14] TRACE | [enriched-hybrid-llm]   SEM[8] idx=11 chunk_id=architecture_overview_fix_5 score=0.6534 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:14] TRACE | [enriched-hybrid-llm]   SEM[9] idx=8 chunk_id=architecture_overview_fix_2 score=0.6477 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:14] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:14] TRACE | [enriched-hybrid-llm]   BM25[0] idx=6 chunk_id=architecture_overview_fix_0 score=11.0967 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:14] TRACE | [enriched-hybrid-llm]   BM25[1] idx=10 chunk_id=architecture_overview_fix_4 score=7.5944 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:14] TRACE | [enriched-hybrid-llm]   BM25[2] idx=18 chunk_id=architecture_overview_fix_12 score=7.4392 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:14] TRACE | [enriched-hybrid-llm]   BM25[3] idx=11 chunk_id=architecture_overview_fix_5 score=6.1418 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:14] TRACE | [enriched-hybrid-llm]   BM25[4] idx=14 chunk_id=architecture_overview_fix_8 score=6.1112 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:14] TRACE | [enriched-hybrid-llm]   BM25[5] idx=20 chunk_id=deployment_guide_fix_1 score=5.9902 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:14] TRACE | [enriched-hybrid-llm]   BM25[6] idx=30 chunk_id=troubleshooting_guide_fix_2 score=5.8883 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:14] TRACE | [enriched-hybrid-llm]   BM25[7] idx=17 chunk_id=architecture_overview_fix_11 score=5.6609 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:14] TRACE | [enriched-hybrid-llm]   BM25[8] idx=5 chunk_id=api_reference_fix_5 score=4.2144 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:08:14] TRACE | [enriched-hybrid-llm]   BM25[9] idx=42 chunk_id=user_guide_fix_2 score=3.9791 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:08:14] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:14] TRACE | [enriched-hybrid-llm]   RRF[0] idx=6 total=0.3273 (sem_rank=1 comp=0.0273 + bm25_rank=0 comp=0.3000)
[15:08:14] TRACE | [enriched-hybrid-llm]   RRF[1] idx=10 total=0.2824 (sem_rank=21 comp=0.0097 + bm25_rank=1 comp=0.2727)
[15:08:14] TRACE | [enriched-hybrid-llm]   RRF[2] idx=18 total=0.2607 (sem_rank=18 comp=0.0107 + bm25_rank=2 comp=0.2500)
[15:08:14] TRACE | [enriched-hybrid-llm]   RRF[3] idx=11 total=0.2474 (sem_rank=8 comp=0.0167 + bm25_rank=3 comp=0.2308)
[15:08:14] TRACE | [enriched-hybrid-llm]   RRF[4] idx=14 total=0.2207 (sem_rank=37 comp=0.0064 + bm25_rank=4 comp=0.2143)
[15:08:14] TRACE | [enriched-hybrid-llm]   RRF[5] idx=30 total=0.2125 (sem_rank=2 comp=0.0250 + bm25_rank=6 comp=0.1875)
[15:08:14] TRACE | [enriched-hybrid-llm]   RRF[6] idx=20 total=0.2115 (sem_rank=16 comp=0.0115 + bm25_rank=5 comp=0.2000)
[15:08:14] TRACE | [enriched-hybrid-llm]   RRF[7] idx=17 total=0.1840 (sem_rank=30 comp=0.0075 + bm25_rank=7 comp=0.1765)
[15:08:14] TRACE | [enriched-hybrid-llm]   RRF[8] idx=5 total=0.1797 (sem_rank=13 comp=0.0130 + bm25_rank=8 comp=0.1667)
[15:08:14] TRACE | [enriched-hybrid-llm]   RRF[9] idx=42 total=0.1633 (sem_rank=45 comp=0.0055 + bm25_rank=9 comp=0.1579)
[15:08:14] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:14] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.3273 sem_rank=1 bm25_rank=0 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:14] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_4 doc_id=architecture_overview rrf_score=0.2824 sem_rank=21 bm25_rank=1 dominant=bm25 | enriched: SMS Queue, Webhook Queue, Email Queue, Resource Allocation, Key Responsibilities, Compiled templates, AWS SNS | Consume, Handlebars, Kafka - Template, SMS, Redis  **Technology**: Node.js with worker p...
[15:08:14] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.2607 sem_rank=18 bm25_rank=2 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:08:14] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.2474 sem_rank=8 bm25_rank=3 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:08:14] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2207 sem_rank=37 bm25_rank=4 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:08:14] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:14] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:14] TRACE | Query: What database technology does CloudFlow use?
[15:08:14] TRACE | Total key facts: 3
[15:08:14] TRACE | Found facts: 3/3
[15:08:14] TRACE |   FOUND[1] PostgreSQL 15.4
[15:08:14] TRACE |   FOUND[2] Redis 7.2
[15:08:14] TRACE |   FOUND[3] Apache Kafka 3.6
[15:08:14] TRACE | === END FACT COVERAGE ===
[15:08:14] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:14] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Which database system powers CloudFlow?
[15:08:14] DEBUG | [query-rewrite] Rewriting query: Which database system powers CloudFlow?
[15:08:14] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:14] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=838 timeout=5s
[15:08:14] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:14] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:14] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:15] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.83s
[15:08:15] DEBUG | [anthropic] USAGE: input_tokens=193 output_tokens=9
[15:08:15] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=44
[15:08:15] DEBUG | [anthropic] RESPONSE: CloudFlow database backend system technology
[15:08:15] DEBUG | [query-rewrite] SUCCESS in 0.827s: Which database system powers CloudFlow? → CloudFlow database backend system technology
[15:08:15] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: CloudFlow database backend system technology (took 0.827s)
[15:08:15] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: CloudFlow database backend system technology Kafka PostgreSQL Redis data layer storage
[15:08:15] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:15] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:15] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:15] TRACE | [enriched-hybrid-llm]   SEM[0] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.7306 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:15] TRACE | [enriched-hybrid-llm]   SEM[1] idx=25 chunk_id=deployment_guide_fix_6 score=0.7138 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:15] TRACE | [enriched-hybrid-llm]   SEM[2] idx=6 chunk_id=architecture_overview_fix_0 score=0.6935 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:15] TRACE | [enriched-hybrid-llm]   SEM[3] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6834 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:15] TRACE | [enriched-hybrid-llm]   SEM[4] idx=19 chunk_id=deployment_guide_fix_0 score=0.6821 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:15] TRACE | [enriched-hybrid-llm]   SEM[5] idx=11 chunk_id=architecture_overview_fix_5 score=0.6815 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:15] TRACE | [enriched-hybrid-llm]   SEM[6] idx=8 chunk_id=architecture_overview_fix_2 score=0.6808 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:15] TRACE | [enriched-hybrid-llm]   SEM[7] idx=22 chunk_id=deployment_guide_fix_3 score=0.6715 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:08:15] TRACE | [enriched-hybrid-llm]   SEM[8] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6656 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:15] TRACE | [enriched-hybrid-llm]   SEM[9] idx=0 chunk_id=api_reference_fix_0 score=0.6581 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:15] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:15] TRACE | [enriched-hybrid-llm]   BM25[0] idx=6 chunk_id=architecture_overview_fix_0 score=13.3276 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:15] TRACE | [enriched-hybrid-llm]   BM25[1] idx=10 chunk_id=architecture_overview_fix_4 score=7.5944 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:15] TRACE | [enriched-hybrid-llm]   BM25[2] idx=18 chunk_id=architecture_overview_fix_12 score=7.3771 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:15] TRACE | [enriched-hybrid-llm]   BM25[3] idx=14 chunk_id=architecture_overview_fix_8 score=7.2273 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:15] TRACE | [enriched-hybrid-llm]   BM25[4] idx=11 chunk_id=architecture_overview_fix_5 score=6.0887 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:15] TRACE | [enriched-hybrid-llm]   BM25[5] idx=20 chunk_id=deployment_guide_fix_1 score=5.9902 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:15] TRACE | [enriched-hybrid-llm]   BM25[6] idx=30 chunk_id=troubleshooting_guide_fix_2 score=5.8516 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:15] TRACE | [enriched-hybrid-llm]   BM25[7] idx=17 chunk_id=architecture_overview_fix_11 score=5.5988 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:15] TRACE | [enriched-hybrid-llm]   BM25[8] idx=9 chunk_id=architecture_overview_fix_3 score=5.1207 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:15] TRACE | [enriched-hybrid-llm]   BM25[9] idx=8 chunk_id=architecture_overview_fix_2 score=4.2528 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:15] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:15] TRACE | [enriched-hybrid-llm]   RRF[0] idx=6 total=0.3250 (sem_rank=2 comp=0.0250 + bm25_rank=0 comp=0.3000)
[15:08:15] TRACE | [enriched-hybrid-llm]   RRF[1] idx=10 total=0.2824 (sem_rank=21 comp=0.0097 + bm25_rank=1 comp=0.2727)
[15:08:15] TRACE | [enriched-hybrid-llm]   RRF[2] idx=18 total=0.2607 (sem_rank=18 comp=0.0107 + bm25_rank=2 comp=0.2500)
[15:08:15] TRACE | [enriched-hybrid-llm]   RRF[3] idx=14 total=0.2373 (sem_rank=36 comp=0.0065 + bm25_rank=3 comp=0.2308)
[15:08:15] TRACE | [enriched-hybrid-llm]   RRF[4] idx=11 total=0.2343 (sem_rank=5 comp=0.0200 + bm25_rank=4 comp=0.2143)
[15:08:15] TRACE | [enriched-hybrid-llm]   RRF[5] idx=30 total=0.2175 (sem_rank=0 comp=0.0300 + bm25_rank=6 comp=0.1875)
[15:08:15] TRACE | [enriched-hybrid-llm]   RRF[6] idx=20 total=0.2130 (sem_rank=13 comp=0.0130 + bm25_rank=5 comp=0.2000)
[15:08:15] TRACE | [enriched-hybrid-llm]   RRF[7] idx=17 total=0.1848 (sem_rank=26 comp=0.0083 + bm25_rank=7 comp=0.1765)
[15:08:15] TRACE | [enriched-hybrid-llm]   RRF[8] idx=9 total=0.1787 (sem_rank=15 comp=0.0120 + bm25_rank=8 comp=0.1667)
[15:08:15] TRACE | [enriched-hybrid-llm]   RRF[9] idx=8 total=0.1766 (sem_rank=6 comp=0.0187 + bm25_rank=9 comp=0.1579)
[15:08:15] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:15] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.3250 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:15] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_4 doc_id=architecture_overview rrf_score=0.2824 sem_rank=21 bm25_rank=1 dominant=bm25 | enriched: SMS Queue, Webhook Queue, Email Queue, Resource Allocation, Key Responsibilities, Compiled templates, AWS SNS | Consume, Handlebars, Kafka - Template, SMS, Redis  **Technology**: Node.js with worker p...
[15:08:15] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.2607 sem_rank=18 bm25_rank=2 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:08:15] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2373 sem_rank=36 bm25_rank=3 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:08:15] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.2343 sem_rank=5 bm25_rank=4 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:08:15] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:15] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:15] TRACE | Query: Which database system powers CloudFlow?
[15:08:15] TRACE | Total key facts: 3
[15:08:15] TRACE | Found facts: 3/3
[15:08:15] TRACE |   FOUND[1] PostgreSQL 15.4
[15:08:15] TRACE |   FOUND[2] Redis 7.2
[15:08:15] TRACE |   FOUND[3] Apache Kafka 3.6
[15:08:15] TRACE | === END FACT COVERAGE ===
[15:08:15] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:15] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: I need to understand the data storage architecture
[15:08:15] DEBUG | [query-rewrite] Rewriting query: I need to understand the data storage architecture
[15:08:15] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:15] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=849 timeout=5s
[15:08:15] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:15] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:15] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:16] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.05s
[15:08:16] DEBUG | [anthropic] USAGE: input_tokens=194 output_tokens=12
[15:08:16] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=77
[15:08:16] DEBUG | [anthropic] RESPONSE: data storage architecture design system storage models persistence mechanisms
[15:08:16] DEBUG | [query-rewrite] SUCCESS in 1.049s: I need to understand the data storage architecture → data storage architecture design system storage models persistence mechanisms
[15:08:16] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: data storage architecture design system storage models persistence mechanisms (took 1.049s)
[15:08:16] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:16] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:16] TRACE | [enriched-hybrid-llm]   SEM[0] idx=6 chunk_id=architecture_overview_fix_0 score=0.6150 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:16] TRACE | [enriched-hybrid-llm]   SEM[1] idx=11 chunk_id=architecture_overview_fix_5 score=0.6064 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:16] TRACE | [enriched-hybrid-llm]   SEM[2] idx=14 chunk_id=architecture_overview_fix_8 score=0.5656 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:16] TRACE | [enriched-hybrid-llm]   SEM[3] idx=9 chunk_id=architecture_overview_fix_3 score=0.5624 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:16] TRACE | [enriched-hybrid-llm]   SEM[4] idx=12 chunk_id=architecture_overview_fix_6 score=0.5481 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:16] TRACE | [enriched-hybrid-llm]   SEM[5] idx=8 chunk_id=architecture_overview_fix_2 score=0.5434 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:16] TRACE | [enriched-hybrid-llm]   SEM[6] idx=15 chunk_id=architecture_overview_fix_9 score=0.5413 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:16] TRACE | [enriched-hybrid-llm]   SEM[7] idx=13 chunk_id=architecture_overview_fix_7 score=0.5341 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:08:16] TRACE | [enriched-hybrid-llm]   SEM[8] idx=25 chunk_id=deployment_guide_fix_6 score=0.5340 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:16] TRACE | [enriched-hybrid-llm]   SEM[9] idx=18 chunk_id=architecture_overview_fix_12 score=0.5299 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:16] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:16] TRACE | [enriched-hybrid-llm]   BM25[0] idx=18 chunk_id=architecture_overview_fix_12 score=9.6297 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:16] TRACE | [enriched-hybrid-llm]   BM25[1] idx=14 chunk_id=architecture_overview_fix_8 score=7.5915 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:16] TRACE | [enriched-hybrid-llm]   BM25[2] idx=20 chunk_id=deployment_guide_fix_1 score=6.4235 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:16] TRACE | [enriched-hybrid-llm]   BM25[3] idx=6 chunk_id=architecture_overview_fix_0 score=5.9478 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:16] TRACE | [enriched-hybrid-llm]   BM25[4] idx=8 chunk_id=architecture_overview_fix_2 score=4.7698 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:16] TRACE | [enriched-hybrid-llm]   BM25[5] idx=7 chunk_id=architecture_overview_fix_1 score=4.4258 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:16] TRACE | [enriched-hybrid-llm]   BM25[6] idx=9 chunk_id=architecture_overview_fix_3 score=3.3754 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:16] TRACE | [enriched-hybrid-llm]   BM25[7] idx=16 chunk_id=architecture_overview_fix_10 score=3.1816 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:16] TRACE | [enriched-hybrid-llm]   BM25[8] idx=31 chunk_id=troubleshooting_guide_fix_3 score=2.9264 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:16] TRACE | [enriched-hybrid-llm]   BM25[9] idx=1 chunk_id=api_reference_fix_1 score=2.2077 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:16] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:16] TRACE | [enriched-hybrid-llm]   RRF[0] idx=6 total=0.0325 (sem_rank=0 comp=0.0167 + bm25_rank=3 comp=0.0159)
[15:08:16] TRACE | [enriched-hybrid-llm]   RRF[1] idx=14 total=0.0325 (sem_rank=2 comp=0.0161 + bm25_rank=1 comp=0.0164)
[15:08:16] TRACE | [enriched-hybrid-llm]   RRF[2] idx=18 total=0.0312 (sem_rank=9 comp=0.0145 + bm25_rank=0 comp=0.0167)
[15:08:16] TRACE | [enriched-hybrid-llm]   RRF[3] idx=9 total=0.0310 (sem_rank=3 comp=0.0159 + bm25_rank=6 comp=0.0152)
[15:08:16] TRACE | [enriched-hybrid-llm]   RRF[4] idx=8 total=0.0310 (sem_rank=5 comp=0.0154 + bm25_rank=4 comp=0.0156)
[15:08:16] TRACE | [enriched-hybrid-llm]   RRF[5] idx=11 total=0.0297 (sem_rank=1 comp=0.0164 + bm25_rank=15 comp=0.0133)
[15:08:16] TRACE | [enriched-hybrid-llm]   RRF[6] idx=7 total=0.0293 (sem_rank=12 comp=0.0139 + bm25_rank=5 comp=0.0154)
[15:08:16] TRACE | [enriched-hybrid-llm]   RRF[7] idx=20 total=0.0286 (sem_rank=20 comp=0.0125 + bm25_rank=2 comp=0.0161)
[15:08:16] TRACE | [enriched-hybrid-llm]   RRF[8] idx=13 total=0.0286 (sem_rank=7 comp=0.0149 + bm25_rank=13 comp=0.0137)
[15:08:16] TRACE | [enriched-hybrid-llm]   RRF[9] idx=15 total=0.0277 (sem_rank=6 comp=0.0152 + bm25_rank=20 comp=0.0125)
[15:08:16] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:16] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.0325 sem_rank=0 bm25_rank=3 dominant=semantic | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:16] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.0325 sem_rank=2 bm25_rank=1 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:08:16] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.0312 sem_rank=9 bm25_rank=0 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:08:16] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_3 doc_id=architecture_overview rrf_score=0.0310 sem_rank=3 bm25_rank=6 dominant=semantic | enriched: leader election, Missed execution, Resource Allocation, Key Responsibilities, Reliability Features, Performance Targets, Scheduling Architecture | PostgreSQL, Leader Scheduler, Kafka, Redis, SMS  **Te...
[15:08:16] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_2 doc_id=architecture_overview rrf_score=0.0310 sem_rank=5 bm25_rank=4 dominant=bm25 | enriched: Resource Allocation, Key Responsibilities, Performance Targets, Scheduler Service, State Management, Execution Model, JSON-based DSL | TypeScript, Bull, PostgreSQL  **Technology**: Node.js with TypeSc...
[15:08:16] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:16] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:16] TRACE | Query: I need to understand the data storage architecture
[15:08:16] TRACE | Total key facts: 3
[15:08:16] TRACE | Found facts: 3/3
[15:08:16] TRACE |   FOUND[1] PostgreSQL 15.4
[15:08:16] TRACE |   FOUND[2] Redis 7.2
[15:08:16] TRACE |   FOUND[3] Apache Kafka 3.6
[15:08:16] TRACE | === END FACT COVERAGE ===
[15:08:16] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:16] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: database stack
[15:08:16] DEBUG | [query-rewrite] Rewriting query: database stack
[15:08:16] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:16] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=813 timeout=5s
[15:08:16] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:16] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:16] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:17] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.91s
[15:08:17] DEBUG | [anthropic] USAGE: input_tokens=188 output_tokens=9
[15:08:17] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=58
[15:08:17] DEBUG | [anthropic] RESPONSE: database architecture components stack technology overview
[15:08:17] DEBUG | [query-rewrite] SUCCESS in 0.911s: database stack → database architecture components stack technology overview
[15:08:17] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: database architecture components stack technology overview (took 0.911s)
[15:08:17] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: database architecture components stack technology overview Kafka PostgreSQL Redis data layer storage
[15:08:17] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:17] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:17] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:17] TRACE | [enriched-hybrid-llm]   SEM[0] idx=11 chunk_id=architecture_overview_fix_5 score=0.6833 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:17] TRACE | [enriched-hybrid-llm]   SEM[1] idx=9 chunk_id=architecture_overview_fix_3 score=0.6534 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:17] TRACE | [enriched-hybrid-llm]   SEM[2] idx=17 chunk_id=architecture_overview_fix_11 score=0.6450 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:17] TRACE | [enriched-hybrid-llm]   SEM[3] idx=15 chunk_id=architecture_overview_fix_9 score=0.6417 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:17] TRACE | [enriched-hybrid-llm]   SEM[4] idx=8 chunk_id=architecture_overview_fix_2 score=0.6267 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:17] TRACE | [enriched-hybrid-llm]   SEM[5] idx=6 chunk_id=architecture_overview_fix_0 score=0.6195 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:17] TRACE | [enriched-hybrid-llm]   SEM[6] idx=10 chunk_id=architecture_overview_fix_4 score=0.6175 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:17] TRACE | [enriched-hybrid-llm]   SEM[7] idx=18 chunk_id=architecture_overview_fix_12 score=0.6159 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:17] TRACE | [enriched-hybrid-llm]   SEM[8] idx=25 chunk_id=deployment_guide_fix_6 score=0.6116 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:17] TRACE | [enriched-hybrid-llm]   SEM[9] idx=12 chunk_id=architecture_overview_fix_6 score=0.6067 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:17] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:17] TRACE | [enriched-hybrid-llm]   BM25[0] idx=6 chunk_id=architecture_overview_fix_0 score=19.8132 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:17] TRACE | [enriched-hybrid-llm]   BM25[1] idx=18 chunk_id=architecture_overview_fix_12 score=8.9194 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:17] TRACE | [enriched-hybrid-llm]   BM25[2] idx=11 chunk_id=architecture_overview_fix_5 score=7.6461 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:17] TRACE | [enriched-hybrid-llm]   BM25[3] idx=14 chunk_id=architecture_overview_fix_8 score=7.5770 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:17] TRACE | [enriched-hybrid-llm]   BM25[4] idx=10 chunk_id=architecture_overview_fix_4 score=6.2814 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:17] TRACE | [enriched-hybrid-llm]   BM25[5] idx=15 chunk_id=architecture_overview_fix_9 score=5.9235 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:17] TRACE | [enriched-hybrid-llm]   BM25[6] idx=17 chunk_id=architecture_overview_fix_11 score=5.5988 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:17] TRACE | [enriched-hybrid-llm]   BM25[7] idx=9 chunk_id=architecture_overview_fix_3 score=5.5570 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:17] TRACE | [enriched-hybrid-llm]   BM25[8] idx=19 chunk_id=deployment_guide_fix_0 score=5.4331 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:17] TRACE | [enriched-hybrid-llm]   BM25[9] idx=20 chunk_id=deployment_guide_fix_1 score=4.5703 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:17] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:17] TRACE | [enriched-hybrid-llm]   RRF[0] idx=6 total=0.3200 (sem_rank=5 comp=0.0200 + bm25_rank=0 comp=0.3000)
[15:08:17] TRACE | [enriched-hybrid-llm]   RRF[1] idx=18 total=0.2904 (sem_rank=7 comp=0.0176 + bm25_rank=1 comp=0.2727)
[15:08:17] TRACE | [enriched-hybrid-llm]   RRF[2] idx=11 total=0.2800 (sem_rank=0 comp=0.0300 + bm25_rank=2 comp=0.2500)
[15:08:17] TRACE | [enriched-hybrid-llm]   RRF[3] idx=14 total=0.2458 (sem_rank=10 comp=0.0150 + bm25_rank=3 comp=0.2308)
[15:08:17] TRACE | [enriched-hybrid-llm]   RRF[4] idx=10 total=0.2330 (sem_rank=6 comp=0.0187 + bm25_rank=4 comp=0.2143)
[15:08:17] TRACE | [enriched-hybrid-llm]   RRF[5] idx=15 total=0.2231 (sem_rank=3 comp=0.0231 + bm25_rank=5 comp=0.2000)
[15:08:17] TRACE | [enriched-hybrid-llm]   RRF[6] idx=17 total=0.2125 (sem_rank=2 comp=0.0250 + bm25_rank=6 comp=0.1875)
[15:08:17] TRACE | [enriched-hybrid-llm]   RRF[7] idx=9 total=0.2037 (sem_rank=1 comp=0.0273 + bm25_rank=7 comp=0.1765)
[15:08:17] TRACE | [enriched-hybrid-llm]   RRF[8] idx=19 total=0.1787 (sem_rank=15 comp=0.0120 + bm25_rank=8 comp=0.1667)
[15:08:17] TRACE | [enriched-hybrid-llm]   RRF[9] idx=20 total=0.1670 (sem_rank=23 comp=0.0091 + bm25_rank=9 comp=0.1579)
[15:08:17] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:17] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.3200 sem_rank=5 bm25_rank=0 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:17] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.2904 sem_rank=7 bm25_rank=1 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:08:17] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.2800 sem_rank=0 bm25_rank=2 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:08:17] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2458 sem_rank=10 bm25_rank=3 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:08:17] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_4 doc_id=architecture_overview rrf_score=0.2330 sem_rank=6 bm25_rank=4 dominant=bm25 | enriched: SMS Queue, Webhook Queue, Email Queue, Resource Allocation, Key Responsibilities, Compiled templates, AWS SNS | Consume, Handlebars, Kafka - Template, SMS, Redis  **Technology**: Node.js with worker p...
[15:08:17] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:17] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:17] TRACE | Query: database stack
[15:08:17] TRACE | Total key facts: 3
[15:08:17] TRACE | Found facts: 3/3
[15:08:17] TRACE |   FOUND[1] PostgreSQL 15.4
[15:08:17] TRACE |   FOUND[2] Redis 7.2
[15:08:17] TRACE |   FOUND[3] Apache Kafka 3.6
[15:08:17] TRACE | === END FACT COVERAGE ===
[15:08:17] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:17] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: For capacity planning, what databases does CloudFlow rely on?
[15:08:17] DEBUG | [query-rewrite] Rewriting query: For capacity planning, what databases does CloudFlow rely on?
[15:08:17] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:17] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=860 timeout=5s
[15:08:17] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:17] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:17] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:18] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.03s
[15:08:18] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=13
[15:08:18] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=68
[15:08:18] DEBUG | [anthropic] RESPONSE: "CloudFlow supported database engines capacity planning integration"
[15:08:18] DEBUG | [query-rewrite] SUCCESS in 1.030s: For capacity planning, what databases does CloudFlow rely on? → "CloudFlow supported database engines capacity planning integration"
[15:08:18] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: "CloudFlow supported database engines capacity planning integration" (took 1.030s)
[15:08:18] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: "CloudFlow supported database engines capacity planning integration" Kafka PostgreSQL Redis data layer storage
[15:08:18] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:18] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:18] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:18] TRACE | [enriched-hybrid-llm]   SEM[0] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.7310 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:18] TRACE | [enriched-hybrid-llm]   SEM[1] idx=25 chunk_id=deployment_guide_fix_6 score=0.7147 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:18] TRACE | [enriched-hybrid-llm]   SEM[2] idx=6 chunk_id=architecture_overview_fix_0 score=0.6953 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:18] TRACE | [enriched-hybrid-llm]   SEM[3] idx=11 chunk_id=architecture_overview_fix_5 score=0.6922 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:18] TRACE | [enriched-hybrid-llm]   SEM[4] idx=8 chunk_id=architecture_overview_fix_2 score=0.6801 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:18] TRACE | [enriched-hybrid-llm]   SEM[5] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6800 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:18] TRACE | [enriched-hybrid-llm]   SEM[6] idx=19 chunk_id=deployment_guide_fix_0 score=0.6748 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:18] TRACE | [enriched-hybrid-llm]   SEM[7] idx=22 chunk_id=deployment_guide_fix_3 score=0.6722 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:08:18] TRACE | [enriched-hybrid-llm]   SEM[8] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6622 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:18] TRACE | [enriched-hybrid-llm]   SEM[9] idx=9 chunk_id=architecture_overview_fix_3 score=0.6563 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:18] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:18] TRACE | [enriched-hybrid-llm]   BM25[0] idx=18 chunk_id=architecture_overview_fix_12 score=12.9252 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:18] TRACE | [enriched-hybrid-llm]   BM25[1] idx=17 chunk_id=architecture_overview_fix_11 score=7.8277 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:18] TRACE | [enriched-hybrid-llm]   BM25[2] idx=6 chunk_id=architecture_overview_fix_0 score=6.4706 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:18] TRACE | [enriched-hybrid-llm]   BM25[3] idx=11 chunk_id=architecture_overview_fix_5 score=6.0887 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:18] TRACE | [enriched-hybrid-llm]   BM25[4] idx=14 chunk_id=architecture_overview_fix_8 score=6.0494 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:18] TRACE | [enriched-hybrid-llm]   BM25[5] idx=15 chunk_id=architecture_overview_fix_9 score=5.3349 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:18] TRACE | [enriched-hybrid-llm]   BM25[6] idx=10 chunk_id=architecture_overview_fix_4 score=4.6970 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:18] TRACE | [enriched-hybrid-llm]   BM25[7] idx=20 chunk_id=deployment_guide_fix_1 score=4.5703 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:18] TRACE | [enriched-hybrid-llm]   BM25[8] idx=5 chunk_id=api_reference_fix_5 score=4.2144 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:08:18] TRACE | [enriched-hybrid-llm]   BM25[9] idx=7 chunk_id=architecture_overview_fix_1 score=3.9397 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:18] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:18] TRACE | [enriched-hybrid-llm]   RRF[0] idx=18 total=0.3143 (sem_rank=11 comp=0.0143 + bm25_rank=0 comp=0.3000)
[15:08:18] TRACE | [enriched-hybrid-llm]   RRF[1] idx=17 total=0.2824 (sem_rank=21 comp=0.0097 + bm25_rank=1 comp=0.2727)
[15:08:18] TRACE | [enriched-hybrid-llm]   RRF[2] idx=6 total=0.2750 (sem_rank=2 comp=0.0250 + bm25_rank=2 comp=0.2500)
[15:08:18] TRACE | [enriched-hybrid-llm]   RRF[3] idx=11 total=0.2538 (sem_rank=3 comp=0.0231 + bm25_rank=3 comp=0.2308)
[15:08:18] TRACE | [enriched-hybrid-llm]   RRF[4] idx=14 total=0.2222 (sem_rank=28 comp=0.0079 + bm25_rank=4 comp=0.2143)
[15:08:18] TRACE | [enriched-hybrid-llm]   RRF[5] idx=15 total=0.2136 (sem_rank=12 comp=0.0136 + bm25_rank=5 comp=0.2000)
[15:08:18] TRACE | [enriched-hybrid-llm]   RRF[6] idx=10 total=0.2000 (sem_rank=14 comp=0.0125 + bm25_rank=6 comp=0.1875)
[15:08:18] TRACE | [enriched-hybrid-llm]   RRF[7] idx=20 total=0.1895 (sem_rank=13 comp=0.0130 + bm25_rank=7 comp=0.1765)
[15:08:18] TRACE | [enriched-hybrid-llm]   RRF[8] idx=5 total=0.1752 (sem_rank=25 comp=0.0086 + bm25_rank=8 comp=0.1667)
[15:08:18] TRACE | [enriched-hybrid-llm]   RRF[9] idx=9 total=0.1658 (sem_rank=9 comp=0.0158 + bm25_rank=10 comp=0.1500)
[15:08:18] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:18] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.3143 sem_rank=11 bm25_rank=0 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:08:18] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_11 doc_id=architecture_overview rrf_score=0.2824 sem_rank=21 bm25_rank=1 dominant=bm25 | enriched: Kafka Broker, Redis Replica, Backup Strategy, Backup Schedule, Kubernetes health, Weekly automated, automatic promotion | Redis Replica, Kafka Broker, Sentinel, S3, Glacier  Service (2) - PostgreSQL P...
[15:08:18] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2750 sem_rank=2 bm25_rank=2 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:18] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.2538 sem_rank=3 bm25_rank=3 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:08:18] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2222 sem_rank=28 bm25_rank=4 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:08:18] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:18] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:18] TRACE | Query: For capacity planning, what databases does CloudFlow rely on?
[15:08:18] TRACE | Total key facts: 3
[15:08:18] TRACE | Found facts: 3/3
[15:08:18] TRACE |   FOUND[1] PostgreSQL 15.4
[15:08:18] TRACE |   FOUND[2] Redis 7.2
[15:08:18] TRACE |   FOUND[3] Apache Kafka 3.6
[15:08:18] TRACE | === END FACT COVERAGE ===
[15:08:18] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:18] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Is CloudFlow using MySQL or something else?
[15:08:18] DEBUG | [query-rewrite] Rewriting query: Is CloudFlow using MySQL or something else?
[15:08:18] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:18] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=842 timeout=5s
[15:08:18] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:18] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:18] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:19] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.01s
[15:08:19] DEBUG | [anthropic] USAGE: input_tokens=195 output_tokens=12
[15:08:19] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=57
[15:08:19] DEBUG | [anthropic] RESPONSE: "CloudFlow database backend storage engine configuration"
[15:08:19] DEBUG | [query-rewrite] SUCCESS in 1.015s: Is CloudFlow using MySQL or something else? → "CloudFlow database backend storage engine configuration"
[15:08:19] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: "CloudFlow database backend storage engine configuration" (took 1.015s)
[15:08:19] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: "CloudFlow database backend storage engine configuration" Kafka PostgreSQL Redis data layer
[15:08:19] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:19] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:19] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:19] TRACE | [enriched-hybrid-llm]   SEM[0] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.7341 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:19] TRACE | [enriched-hybrid-llm]   SEM[1] idx=25 chunk_id=deployment_guide_fix_6 score=0.7295 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:19] TRACE | [enriched-hybrid-llm]   SEM[2] idx=11 chunk_id=architecture_overview_fix_5 score=0.7267 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:19] TRACE | [enriched-hybrid-llm]   SEM[3] idx=22 chunk_id=deployment_guide_fix_3 score=0.7121 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:08:19] TRACE | [enriched-hybrid-llm]   SEM[4] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6996 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:19] TRACE | [enriched-hybrid-llm]   SEM[5] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6985 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:19] TRACE | [enriched-hybrid-llm]   SEM[6] idx=8 chunk_id=architecture_overview_fix_2 score=0.6978 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:19] TRACE | [enriched-hybrid-llm]   SEM[7] idx=15 chunk_id=architecture_overview_fix_9 score=0.6813 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:19] TRACE | [enriched-hybrid-llm]   SEM[8] idx=20 chunk_id=deployment_guide_fix_1 score=0.6762 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:19] TRACE | [enriched-hybrid-llm]   SEM[9] idx=19 chunk_id=deployment_guide_fix_0 score=0.6736 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:19] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:19] TRACE | [enriched-hybrid-llm]   BM25[0] idx=18 chunk_id=architecture_overview_fix_12 score=9.0591 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:19] TRACE | [enriched-hybrid-llm]   BM25[1] idx=6 chunk_id=architecture_overview_fix_0 score=8.1547 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:19] TRACE | [enriched-hybrid-llm]   BM25[2] idx=10 chunk_id=architecture_overview_fix_4 score=7.5944 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:19] TRACE | [enriched-hybrid-llm]   BM25[3] idx=11 chunk_id=architecture_overview_fix_5 score=6.0887 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:19] TRACE | [enriched-hybrid-llm]   BM25[4] idx=14 chunk_id=architecture_overview_fix_8 score=6.0494 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:19] TRACE | [enriched-hybrid-llm]   BM25[5] idx=7 chunk_id=architecture_overview_fix_1 score=5.6117 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:19] TRACE | [enriched-hybrid-llm]   BM25[6] idx=17 chunk_id=architecture_overview_fix_11 score=5.5988 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:19] TRACE | [enriched-hybrid-llm]   BM25[7] idx=16 chunk_id=architecture_overview_fix_10 score=4.9629 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:19] TRACE | [enriched-hybrid-llm]   BM25[8] idx=8 chunk_id=architecture_overview_fix_2 score=4.8389 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:19] TRACE | [enriched-hybrid-llm]   BM25[9] idx=15 chunk_id=architecture_overview_fix_9 score=4.7959 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:19] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:19] TRACE | [enriched-hybrid-llm]   RRF[0] idx=18 total=0.3136 (sem_rank=12 comp=0.0136 + bm25_rank=0 comp=0.3000)
[15:08:19] TRACE | [enriched-hybrid-llm]   RRF[1] idx=6 total=0.2877 (sem_rank=10 comp=0.0150 + bm25_rank=1 comp=0.2727)
[15:08:19] TRACE | [enriched-hybrid-llm]   RRF[2] idx=10 total=0.2625 (sem_rank=14 comp=0.0125 + bm25_rank=2 comp=0.2500)
[15:08:19] TRACE | [enriched-hybrid-llm]   RRF[3] idx=11 total=0.2558 (sem_rank=2 comp=0.0250 + bm25_rank=3 comp=0.2308)
[15:08:19] TRACE | [enriched-hybrid-llm]   RRF[4] idx=14 total=0.2216 (sem_rank=31 comp=0.0073 + bm25_rank=4 comp=0.2143)
[15:08:19] TRACE | [enriched-hybrid-llm]   RRF[5] idx=7 total=0.2060 (sem_rank=40 comp=0.0060 + bm25_rank=5 comp=0.2000)
[15:08:19] TRACE | [enriched-hybrid-llm]   RRF[6] idx=17 total=0.1982 (sem_rank=18 comp=0.0107 + bm25_rank=6 comp=0.1875)
[15:08:19] TRACE | [enriched-hybrid-llm]   RRF[7] idx=16 total=0.1908 (sem_rank=11 comp=0.0143 + bm25_rank=7 comp=0.1765)
[15:08:19] TRACE | [enriched-hybrid-llm]   RRF[8] idx=8 total=0.1854 (sem_rank=6 comp=0.0187 + bm25_rank=8 comp=0.1667)
[15:08:19] TRACE | [enriched-hybrid-llm]   RRF[9] idx=15 total=0.1755 (sem_rank=7 comp=0.0176 + bm25_rank=9 comp=0.1579)
[15:08:19] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:19] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.3136 sem_rank=12 bm25_rank=0 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:08:19] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2877 sem_rank=10 bm25_rank=1 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:19] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_4 doc_id=architecture_overview rrf_score=0.2625 sem_rank=14 bm25_rank=2 dominant=bm25 | enriched: SMS Queue, Webhook Queue, Email Queue, Resource Allocation, Key Responsibilities, Compiled templates, AWS SNS | Consume, Handlebars, Kafka - Template, SMS, Redis  **Technology**: Node.js with worker p...
[15:08:19] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.2558 sem_rank=2 bm25_rank=3 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:08:19] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2216 sem_rank=31 bm25_rank=4 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:08:19] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:19] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:19] TRACE | Query: Is CloudFlow using MySQL or something else?
[15:08:19] TRACE | Total key facts: 3
[15:08:19] TRACE | Found facts: 3/3
[15:08:19] TRACE |   FOUND[1] PostgreSQL 15.4
[15:08:19] TRACE |   FOUND[2] Redis 7.2
[15:08:19] TRACE |   FOUND[3] Apache Kafka 3.6
[15:08:19] TRACE | === END FACT COVERAGE ===
[15:08:19] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:19] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What is the Kubernetes namespace for production deployment?
[15:08:19] DEBUG | [query-rewrite] Rewriting query: What is the Kubernetes namespace for production deployment?
[15:08:19] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:19] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=858 timeout=5s
[15:08:19] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:19] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:19] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:20] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.87s
[15:08:20] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=10
[15:08:20] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=71
[15:08:20] DEBUG | [anthropic] RESPONSE: kubernetes production deployment namespace configuration best practices
[15:08:20] DEBUG | [query-rewrite] SUCCESS in 0.873s: What is the Kubernetes namespace for production deployment? → kubernetes production deployment namespace configuration best practices
[15:08:20] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: kubernetes production deployment namespace configuration best practices (took 0.873s)
[15:08:20] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:20] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:20] TRACE | [enriched-hybrid-llm]   SEM[0] idx=19 chunk_id=deployment_guide_fix_0 score=0.6190 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:20] TRACE | [enriched-hybrid-llm]   SEM[1] idx=26 chunk_id=deployment_guide_fix_7 score=0.6160 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:20] TRACE | [enriched-hybrid-llm]   SEM[2] idx=20 chunk_id=deployment_guide_fix_1 score=0.6154 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:20] TRACE | [enriched-hybrid-llm]   SEM[3] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.6029 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:20] TRACE | [enriched-hybrid-llm]   SEM[4] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.5906 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:20] TRACE | [enriched-hybrid-llm]   SEM[5] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.5900 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:20] TRACE | [enriched-hybrid-llm]   SEM[6] idx=25 chunk_id=deployment_guide_fix_6 score=0.5865 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:20] TRACE | [enriched-hybrid-llm]   SEM[7] idx=11 chunk_id=architecture_overview_fix_5 score=0.5683 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:20] TRACE | [enriched-hybrid-llm]   SEM[8] idx=21 chunk_id=deployment_guide_fix_2 score=0.5640 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:20] TRACE | [enriched-hybrid-llm]   SEM[9] idx=22 chunk_id=deployment_guide_fix_3 score=0.5583 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:08:20] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:20] TRACE | [enriched-hybrid-llm]   BM25[0] idx=20 chunk_id=deployment_guide_fix_1 score=14.4981 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:20] TRACE | [enriched-hybrid-llm]   BM25[1] idx=19 chunk_id=deployment_guide_fix_0 score=9.6462 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:20] TRACE | [enriched-hybrid-llm]   BM25[2] idx=46 chunk_id=user_guide_fix_6 score=6.9580 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:20] TRACE | [enriched-hybrid-llm]   BM25[3] idx=26 chunk_id=deployment_guide_fix_7 score=6.4218 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:20] TRACE | [enriched-hybrid-llm]   BM25[4] idx=36 chunk_id=troubleshooting_guide_fix_8 score=5.8707 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:20] TRACE | [enriched-hybrid-llm]   BM25[5] idx=17 chunk_id=architecture_overview_fix_11 score=5.2885 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:20] TRACE | [enriched-hybrid-llm]   BM25[6] idx=4 chunk_id=api_reference_fix_4 score=4.7729 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:20] TRACE | [enriched-hybrid-llm]   BM25[7] idx=21 chunk_id=deployment_guide_fix_2 score=4.1070 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:20] TRACE | [enriched-hybrid-llm]   BM25[8] idx=0 chunk_id=api_reference_fix_0 score=4.0596 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:20] TRACE | [enriched-hybrid-llm]   BM25[9] idx=6 chunk_id=architecture_overview_fix_0 score=3.8595 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:20] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:20] TRACE | [enriched-hybrid-llm]   RRF[0] idx=19 total=0.0331 (sem_rank=0 comp=0.0167 + bm25_rank=1 comp=0.0164)
[15:08:20] TRACE | [enriched-hybrid-llm]   RRF[1] idx=20 total=0.0328 (sem_rank=2 comp=0.0161 + bm25_rank=0 comp=0.0167)
[15:08:20] TRACE | [enriched-hybrid-llm]   RRF[2] idx=26 total=0.0323 (sem_rank=1 comp=0.0164 + bm25_rank=3 comp=0.0159)
[15:08:20] TRACE | [enriched-hybrid-llm]   RRF[3] idx=36 total=0.0315 (sem_rank=3 comp=0.0159 + bm25_rank=4 comp=0.0156)
[15:08:20] TRACE | [enriched-hybrid-llm]   RRF[4] idx=21 total=0.0296 (sem_rank=8 comp=0.0147 + bm25_rank=7 comp=0.0149)
[15:08:20] TRACE | [enriched-hybrid-llm]   RRF[5] idx=22 total=0.0288 (sem_rank=9 comp=0.0145 + bm25_rank=10 comp=0.0143)
[15:08:20] TRACE | [enriched-hybrid-llm]   RRF[6] idx=17 total=0.0284 (sem_rank=17 comp=0.0130 + bm25_rank=5 comp=0.0154)
[15:08:20] TRACE | [enriched-hybrid-llm]   RRF[7] idx=6 total=0.0282 (sem_rank=13 comp=0.0137 + bm25_rank=9 comp=0.0145)
[15:08:20] TRACE | [enriched-hybrid-llm]   RRF[8] idx=11 total=0.0279 (sem_rank=7 comp=0.0149 + bm25_rank=17 comp=0.0130)
[15:08:20] TRACE | [enriched-hybrid-llm]   RRF[9] idx=33 total=0.0278 (sem_rank=12 comp=0.0139 + bm25_rank=12 comp=0.0139)
[15:08:20] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:20] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.0331 sem_rank=0 bm25_rank=1 dominant=semantic | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:08:20] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.0328 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:08:20] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_7 doc_id=deployment_guide rrf_score=0.0323 sem_rank=1 bm25_rank=3 dominant=semantic | enriched: TCP port, SHOW POOLS, External Secrets, Secrets Operator, kubectl top, Egress ingress, bash kubectl | Install External Secrets Operator, EOF, Create SecretStore, external-secrets.io/v1beta1  podSelect...
[15:08:20] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.0315 sem_rank=3 bm25_rank=4 dominant=semantic | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:08:20] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_2 doc_id=deployment_guide rrf_score=0.0296 sem_rank=8 bm25_rank=7 dominant=bm25 | enriched: Test health, RESTARTS AGE, curl http, Database Configuration, Verification Verify, Expected output, Test readiness | Helm, NAME, 1/1 Running, CloudFlow  - secretName: cloudflow-tls hosts: - api.cloudf...
[15:08:20] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:20] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:20] TRACE | Query: What is the Kubernetes namespace for production deployment?
[15:08:20] TRACE | Total key facts: 1
[15:08:20] TRACE | Found facts: 1/1
[15:08:20] TRACE |   FOUND[1] cloudflow-prod
[15:08:20] TRACE | === END FACT COVERAGE ===
[15:08:20] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:20] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Which namespace is used for CloudFlow production?
[15:08:20] DEBUG | [query-rewrite] Rewriting query: Which namespace is used for CloudFlow production?
[15:08:20] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:20] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=848 timeout=5s
[15:08:20] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:20] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:20] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:21] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.03s
[15:08:21] DEBUG | [anthropic] USAGE: input_tokens=195 output_tokens=9
[15:08:21] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=55
[15:08:21] DEBUG | [anthropic] RESPONSE: cloudflow kubernetes namespace production configuration
[15:08:21] DEBUG | [query-rewrite] SUCCESS in 1.035s: Which namespace is used for CloudFlow production? → cloudflow kubernetes namespace production configuration
[15:08:21] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: cloudflow kubernetes namespace production configuration (took 1.035s)
[15:08:21] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:21] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:21] TRACE | [enriched-hybrid-llm]   SEM[0] idx=20 chunk_id=deployment_guide_fix_1 score=0.7150 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:21] TRACE | [enriched-hybrid-llm]   SEM[1] idx=19 chunk_id=deployment_guide_fix_0 score=0.6905 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:21] TRACE | [enriched-hybrid-llm]   SEM[2] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.6874 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:21] TRACE | [enriched-hybrid-llm]   SEM[3] idx=26 chunk_id=deployment_guide_fix_7 score=0.6802 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:21] TRACE | [enriched-hybrid-llm]   SEM[4] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6799 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:21] TRACE | [enriched-hybrid-llm]   SEM[5] idx=21 chunk_id=deployment_guide_fix_2 score=0.6782 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:21] TRACE | [enriched-hybrid-llm]   SEM[6] idx=25 chunk_id=deployment_guide_fix_6 score=0.6705 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:21] TRACE | [enriched-hybrid-llm]   SEM[7] idx=0 chunk_id=api_reference_fix_0 score=0.6634 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:21] TRACE | [enriched-hybrid-llm]   SEM[8] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.6628 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:21] TRACE | [enriched-hybrid-llm]   SEM[9] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6559 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:21] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:21] TRACE | [enriched-hybrid-llm]   BM25[0] idx=20 chunk_id=deployment_guide_fix_1 score=14.0451 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:21] TRACE | [enriched-hybrid-llm]   BM25[1] idx=19 chunk_id=deployment_guide_fix_0 score=8.5810 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:21] TRACE | [enriched-hybrid-llm]   BM25[2] idx=36 chunk_id=troubleshooting_guide_fix_8 score=6.4684 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:21] TRACE | [enriched-hybrid-llm]   BM25[3] idx=26 chunk_id=deployment_guide_fix_7 score=5.5084 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:21] TRACE | [enriched-hybrid-llm]   BM25[4] idx=17 chunk_id=architecture_overview_fix_11 score=5.2885 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:21] TRACE | [enriched-hybrid-llm]   BM25[5] idx=6 chunk_id=architecture_overview_fix_0 score=5.1596 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:21] TRACE | [enriched-hybrid-llm]   BM25[6] idx=33 chunk_id=troubleshooting_guide_fix_5 score=4.3374 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:21] TRACE | [enriched-hybrid-llm]   BM25[7] idx=24 chunk_id=deployment_guide_fix_5 score=4.0159 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:21] TRACE | [enriched-hybrid-llm]   BM25[8] idx=28 chunk_id=troubleshooting_guide_fix_0 score=3.6414 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:21] TRACE | [enriched-hybrid-llm]   BM25[9] idx=21 chunk_id=deployment_guide_fix_2 score=3.5225 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:21] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:21] TRACE | [enriched-hybrid-llm]   RRF[0] idx=20 total=0.0333 (sem_rank=0 comp=0.0167 + bm25_rank=0 comp=0.0167)
[15:08:21] TRACE | [enriched-hybrid-llm]   RRF[1] idx=19 total=0.0328 (sem_rank=1 comp=0.0164 + bm25_rank=1 comp=0.0164)
[15:08:21] TRACE | [enriched-hybrid-llm]   RRF[2] idx=36 total=0.0323 (sem_rank=2 comp=0.0161 + bm25_rank=2 comp=0.0161)
[15:08:21] TRACE | [enriched-hybrid-llm]   RRF[3] idx=26 total=0.0317 (sem_rank=3 comp=0.0159 + bm25_rank=3 comp=0.0159)
[15:08:21] TRACE | [enriched-hybrid-llm]   RRF[4] idx=21 total=0.0299 (sem_rank=5 comp=0.0154 + bm25_rank=9 comp=0.0145)
[15:08:21] TRACE | [enriched-hybrid-llm]   RRF[5] idx=33 total=0.0294 (sem_rank=10 comp=0.0143 + bm25_rank=6 comp=0.0152)
[15:08:21] TRACE | [enriched-hybrid-llm]   RRF[6] idx=32 total=0.0293 (sem_rank=4 comp=0.0156 + bm25_rank=13 comp=0.0137)
[15:08:21] TRACE | [enriched-hybrid-llm]   RRF[7] idx=0 total=0.0292 (sem_rank=7 comp=0.0149 + bm25_rank=10 comp=0.0143)
[15:08:21] TRACE | [enriched-hybrid-llm]   RRF[8] idx=6 total=0.0291 (sem_rank=13 comp=0.0137 + bm25_rank=5 comp=0.0154)
[15:08:21] TRACE | [enriched-hybrid-llm]   RRF[9] idx=37 total=0.0280 (sem_rank=8 comp=0.0147 + bm25_rank=15 comp=0.0133)
[15:08:21] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:21] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.0333 sem_rank=0 bm25_rank=0 dominant=balanced | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:08:21] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.0328 sem_rank=1 bm25_rank=1 dominant=balanced | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:08:21] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.0323 sem_rank=2 bm25_rank=2 dominant=balanced | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:08:21] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_7 doc_id=deployment_guide rrf_score=0.0317 sem_rank=3 bm25_rank=3 dominant=balanced | enriched: TCP port, SHOW POOLS, External Secrets, Secrets Operator, kubectl top, Egress ingress, bash kubectl | Install External Secrets Operator, EOF, Create SecretStore, external-secrets.io/v1beta1  podSelect...
[15:08:21] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_2 doc_id=deployment_guide rrf_score=0.0299 sem_rank=5 bm25_rank=9 dominant=semantic | enriched: Test health, RESTARTS AGE, curl http, Database Configuration, Verification Verify, Expected output, Test readiness | Helm, NAME, 1/1 Running, CloudFlow  - secretName: cloudflow-tls hosts: - api.cloudf...
[15:08:21] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:21] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:21] TRACE | Query: Which namespace is used for CloudFlow production?
[15:08:21] TRACE | Total key facts: 1
[15:08:21] TRACE | Found facts: 1/1
[15:08:21] TRACE |   FOUND[1] cloudflow-prod
[15:08:21] TRACE | === END FACT COVERAGE ===
[15:08:21] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:21] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: I can't find the production pods
[15:08:21] DEBUG | [query-rewrite] Rewriting query: I can't find the production pods
[15:08:21] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:21] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=831 timeout=5s
[15:08:21] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:21] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:21] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:22] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.95s
[15:08:22] DEBUG | [anthropic] USAGE: input_tokens=193 output_tokens=12
[15:08:22] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=62
[15:08:22] DEBUG | [anthropic] RESPONSE: kubernetes production deployment pod discovery troubleshooting
[15:08:22] DEBUG | [query-rewrite] SUCCESS in 0.947s: I can't find the production pods → kubernetes production deployment pod discovery troubleshooting
[15:08:22] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: kubernetes production deployment pod discovery troubleshooting (took 0.947s)
[15:08:22] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:22] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:22] TRACE | [enriched-hybrid-llm]   SEM[0] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.6638 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:22] TRACE | [enriched-hybrid-llm]   SEM[1] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.6593 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:22] TRACE | [enriched-hybrid-llm]   SEM[2] idx=26 chunk_id=deployment_guide_fix_7 score=0.6104 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:22] TRACE | [enriched-hybrid-llm]   SEM[3] idx=25 chunk_id=deployment_guide_fix_6 score=0.6098 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:22] TRACE | [enriched-hybrid-llm]   SEM[4] idx=19 chunk_id=deployment_guide_fix_0 score=0.6055 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:22] TRACE | [enriched-hybrid-llm]   SEM[5] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.5906 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:22] TRACE | [enriched-hybrid-llm]   SEM[6] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.5823 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:22] TRACE | [enriched-hybrid-llm]   SEM[7] idx=11 chunk_id=architecture_overview_fix_5 score=0.5747 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:22] TRACE | [enriched-hybrid-llm]   SEM[8] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5669 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:22] TRACE | [enriched-hybrid-llm]   SEM[9] idx=21 chunk_id=deployment_guide_fix_2 score=0.5650 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:22] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:22] TRACE | [enriched-hybrid-llm]   BM25[0] idx=19 chunk_id=deployment_guide_fix_0 score=7.9862 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:22] TRACE | [enriched-hybrid-llm]   BM25[1] idx=20 chunk_id=deployment_guide_fix_1 score=7.4342 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:22] TRACE | [enriched-hybrid-llm]   BM25[2] idx=26 chunk_id=deployment_guide_fix_7 score=6.2536 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:22] TRACE | [enriched-hybrid-llm]   BM25[3] idx=36 chunk_id=troubleshooting_guide_fix_8 score=5.6302 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:22] TRACE | [enriched-hybrid-llm]   BM25[4] idx=28 chunk_id=troubleshooting_guide_fix_0 score=5.3810 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:22] TRACE | [enriched-hybrid-llm]   BM25[5] idx=17 chunk_id=architecture_overview_fix_11 score=5.2885 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:22] TRACE | [enriched-hybrid-llm]   BM25[6] idx=6 chunk_id=architecture_overview_fix_0 score=3.8595 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:22] TRACE | [enriched-hybrid-llm]   BM25[7] idx=21 chunk_id=deployment_guide_fix_2 score=3.2896 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:22] TRACE | [enriched-hybrid-llm]   BM25[8] idx=32 chunk_id=troubleshooting_guide_fix_4 score=3.2123 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:22] TRACE | [enriched-hybrid-llm]   BM25[9] idx=25 chunk_id=deployment_guide_fix_6 score=2.9735 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:22] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:22] TRACE | [enriched-hybrid-llm]   RRF[0] idx=36 total=0.0325 (sem_rank=0 comp=0.0167 + bm25_rank=3 comp=0.0159)
[15:08:22] TRACE | [enriched-hybrid-llm]   RRF[1] idx=19 total=0.0323 (sem_rank=4 comp=0.0156 + bm25_rank=0 comp=0.0167)
[15:08:22] TRACE | [enriched-hybrid-llm]   RRF[2] idx=26 total=0.0323 (sem_rank=2 comp=0.0161 + bm25_rank=2 comp=0.0161)
[15:08:22] TRACE | [enriched-hybrid-llm]   RRF[3] idx=28 total=0.0308 (sem_rank=6 comp=0.0152 + bm25_rank=4 comp=0.0156)
[15:08:22] TRACE | [enriched-hybrid-llm]   RRF[4] idx=25 total=0.0304 (sem_rank=3 comp=0.0159 + bm25_rank=9 comp=0.0145)
[15:08:22] TRACE | [enriched-hybrid-llm]   RRF[5] idx=32 total=0.0301 (sem_rank=5 comp=0.0154 + bm25_rank=8 comp=0.0147)
[15:08:22] TRACE | [enriched-hybrid-llm]   RRF[6] idx=20 total=0.0296 (sem_rank=16 comp=0.0132 + bm25_rank=1 comp=0.0164)
[15:08:22] TRACE | [enriched-hybrid-llm]   RRF[7] idx=21 total=0.0294 (sem_rank=9 comp=0.0145 + bm25_rank=7 comp=0.0149)
[15:08:22] TRACE | [enriched-hybrid-llm]   RRF[8] idx=37 total=0.0294 (sem_rank=1 comp=0.0164 + bm25_rank=17 comp=0.0130)
[15:08:22] TRACE | [enriched-hybrid-llm]   RRF[9] idx=17 total=0.0291 (sem_rank=13 comp=0.0137 + bm25_rank=5 comp=0.0154)
[15:08:22] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:22] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.0325 sem_rank=0 bm25_rank=3 dominant=semantic | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:08:22] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.0323 sem_rank=4 bm25_rank=0 dominant=bm25 | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:08:22] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_7 doc_id=deployment_guide rrf_score=0.0323 sem_rank=2 bm25_rank=2 dominant=balanced | enriched: TCP port, SHOW POOLS, External Secrets, Secrets Operator, kubectl top, Egress ingress, bash kubectl | Install External Secrets Operator, EOF, Create SecretStore, external-secrets.io/v1beta1  podSelect...
[15:08:22] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.0308 sem_rank=6 bm25_rank=4 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:08:22] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0304 sem_rank=3 bm25_rank=9 dominant=semantic | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:22] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:22] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:22] TRACE | Query: I can't find the production pods
[15:08:22] TRACE | Total key facts: 1
[15:08:22] TRACE | Found facts: 1/1
[15:08:22] TRACE |   FOUND[1] cloudflow-prod
[15:08:22] TRACE | === END FACT COVERAGE ===
[15:08:22] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:22] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: prod namespace
[15:08:22] DEBUG | [query-rewrite] Rewriting query: prod namespace
[15:08:22] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:22] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=813 timeout=5s
[15:08:22] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:22] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:22] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:23] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.93s
[15:08:23] DEBUG | [anthropic] USAGE: input_tokens=188 output_tokens=10
[15:08:23] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=58
[15:08:23] DEBUG | [anthropic] RESPONSE: "kubernetes production namespace configuration management"
[15:08:23] DEBUG | [query-rewrite] SUCCESS in 0.929s: prod namespace → "kubernetes production namespace configuration management"
[15:08:23] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: "kubernetes production namespace configuration management" (took 0.929s)
[15:08:23] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:23] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:23] TRACE | [enriched-hybrid-llm]   SEM[0] idx=20 chunk_id=deployment_guide_fix_1 score=0.6105 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:23] TRACE | [enriched-hybrid-llm]   SEM[1] idx=19 chunk_id=deployment_guide_fix_0 score=0.6076 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:23] TRACE | [enriched-hybrid-llm]   SEM[2] idx=26 chunk_id=deployment_guide_fix_7 score=0.6066 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:23] TRACE | [enriched-hybrid-llm]   SEM[3] idx=25 chunk_id=deployment_guide_fix_6 score=0.5989 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:23] TRACE | [enriched-hybrid-llm]   SEM[4] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.5917 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:23] TRACE | [enriched-hybrid-llm]   SEM[5] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.5679 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:23] TRACE | [enriched-hybrid-llm]   SEM[6] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.5644 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:23] TRACE | [enriched-hybrid-llm]   SEM[7] idx=11 chunk_id=architecture_overview_fix_5 score=0.5614 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:23] TRACE | [enriched-hybrid-llm]   SEM[8] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.5584 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:23] TRACE | [enriched-hybrid-llm]   SEM[9] idx=5 chunk_id=api_reference_fix_5 score=0.5561 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:08:23] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:23] TRACE | [enriched-hybrid-llm]   BM25[0] idx=20 chunk_id=deployment_guide_fix_1 score=9.7159 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:23] TRACE | [enriched-hybrid-llm]   BM25[1] idx=19 chunk_id=deployment_guide_fix_0 score=5.0849 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:23] TRACE | [enriched-hybrid-llm]   BM25[2] idx=26 chunk_id=deployment_guide_fix_7 score=4.2171 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:23] TRACE | [enriched-hybrid-llm]   BM25[3] idx=33 chunk_id=troubleshooting_guide_fix_5 score=2.5348 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:23] TRACE | [enriched-hybrid-llm]   BM25[4] idx=24 chunk_id=deployment_guide_fix_5 score=2.4984 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:23] TRACE | [enriched-hybrid-llm]   BM25[5] idx=21 chunk_id=deployment_guide_fix_2 score=1.9866 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:23] TRACE | [enriched-hybrid-llm]   BM25[6] idx=28 chunk_id=troubleshooting_guide_fix_0 score=1.9766 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:23] TRACE | [enriched-hybrid-llm]   BM25[7] idx=6 chunk_id=architecture_overview_fix_0 score=1.8404 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:23] TRACE | [enriched-hybrid-llm]   BM25[8] idx=17 chunk_id=architecture_overview_fix_11 score=1.8404 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:23] TRACE | [enriched-hybrid-llm]   BM25[9] idx=0 chunk_id=api_reference_fix_0 score=1.8360 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:23] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:23] TRACE | [enriched-hybrid-llm]   RRF[0] idx=20 total=0.0333 (sem_rank=0 comp=0.0167 + bm25_rank=0 comp=0.0167)
[15:08:23] TRACE | [enriched-hybrid-llm]   RRF[1] idx=19 total=0.0328 (sem_rank=1 comp=0.0164 + bm25_rank=1 comp=0.0164)
[15:08:23] TRACE | [enriched-hybrid-llm]   RRF[2] idx=26 total=0.0323 (sem_rank=2 comp=0.0161 + bm25_rank=2 comp=0.0161)
[15:08:23] TRACE | [enriched-hybrid-llm]   RRF[3] idx=36 total=0.0297 (sem_rank=4 comp=0.0156 + bm25_rank=11 comp=0.0141)
[15:08:23] TRACE | [enriched-hybrid-llm]   RRF[4] idx=21 total=0.0293 (sem_rank=12 comp=0.0139 + bm25_rank=5 comp=0.0154)
[15:08:23] TRACE | [enriched-hybrid-llm]   RRF[5] idx=6 total=0.0292 (sem_rank=10 comp=0.0143 + bm25_rank=7 comp=0.0149)
[15:08:23] TRACE | [enriched-hybrid-llm]   RRF[6] idx=33 total=0.0292 (sem_rank=15 comp=0.0133 + bm25_rank=3 comp=0.0159)
[15:08:23] TRACE | [enriched-hybrid-llm]   RRF[7] idx=0 total=0.0286 (sem_rank=11 comp=0.0141 + bm25_rank=9 comp=0.0145)
[15:08:23] TRACE | [enriched-hybrid-llm]   RRF[8] idx=24 total=0.0283 (sem_rank=19 comp=0.0127 + bm25_rank=4 comp=0.0156)
[15:08:23] TRACE | [enriched-hybrid-llm]   RRF[9] idx=17 total=0.0277 (sem_rank=17 comp=0.0130 + bm25_rank=8 comp=0.0147)
[15:08:23] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:23] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.0333 sem_rank=0 bm25_rank=0 dominant=balanced | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:08:23] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.0328 sem_rank=1 bm25_rank=1 dominant=balanced | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:08:23] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_7 doc_id=deployment_guide rrf_score=0.0323 sem_rank=2 bm25_rank=2 dominant=balanced | enriched: TCP port, SHOW POOLS, External Secrets, Secrets Operator, kubectl top, Egress ingress, bash kubectl | Install External Secrets Operator, EOF, Create SecretStore, external-secrets.io/v1beta1  podSelect...
[15:08:23] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.0297 sem_rank=4 bm25_rank=11 dominant=semantic | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:08:23] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_2 doc_id=deployment_guide rrf_score=0.0293 sem_rank=12 bm25_rank=5 dominant=bm25 | enriched: Test health, RESTARTS AGE, curl http, Database Configuration, Verification Verify, Expected output, Test readiness | Helm, NAME, 1/1 Running, CloudFlow  - secretName: cloudflow-tls hosts: - api.cloudf...
[15:08:23] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:23] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:23] TRACE | Query: prod namespace
[15:08:23] TRACE | Total key facts: 1
[15:08:23] TRACE | Found facts: 1/1
[15:08:23] TRACE |   FOUND[1] cloudflow-prod
[15:08:23] TRACE | === END FACT COVERAGE ===
[15:08:23] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:23] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: I need to deploy to production, what namespace should I use?
[15:08:23] DEBUG | [query-rewrite] Rewriting query: I need to deploy to production, what namespace should I use?
[15:08:23] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:23] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=859 timeout=5s
[15:08:23] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:23] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:23] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:24] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.90s
[15:08:24] DEBUG | [anthropic] USAGE: input_tokens=199 output_tokens=9
[15:08:24] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=57
[15:08:24] DEBUG | [anthropic] RESPONSE: production deployment kubernetes namespace best practices
[15:08:24] DEBUG | [query-rewrite] SUCCESS in 0.896s: I need to deploy to production, what namespace should I use? → production deployment kubernetes namespace best practices
[15:08:24] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: production deployment kubernetes namespace best practices (took 0.896s)
[15:08:24] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:24] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:24] TRACE | [enriched-hybrid-llm]   SEM[0] idx=19 chunk_id=deployment_guide_fix_0 score=0.6370 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:24] TRACE | [enriched-hybrid-llm]   SEM[1] idx=20 chunk_id=deployment_guide_fix_1 score=0.6182 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:24] TRACE | [enriched-hybrid-llm]   SEM[2] idx=26 chunk_id=deployment_guide_fix_7 score=0.6091 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:24] TRACE | [enriched-hybrid-llm]   SEM[3] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.5982 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:24] TRACE | [enriched-hybrid-llm]   SEM[4] idx=25 chunk_id=deployment_guide_fix_6 score=0.5922 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:24] TRACE | [enriched-hybrid-llm]   SEM[5] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.5873 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:24] TRACE | [enriched-hybrid-llm]   SEM[6] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.5788 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:24] TRACE | [enriched-hybrid-llm]   SEM[7] idx=11 chunk_id=architecture_overview_fix_5 score=0.5768 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:24] TRACE | [enriched-hybrid-llm]   SEM[8] idx=21 chunk_id=deployment_guide_fix_2 score=0.5628 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:24] TRACE | [enriched-hybrid-llm]   SEM[9] idx=22 chunk_id=deployment_guide_fix_3 score=0.5556 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:08:24] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:24] TRACE | [enriched-hybrid-llm]   BM25[0] idx=20 chunk_id=deployment_guide_fix_1 score=12.0715 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:24] TRACE | [enriched-hybrid-llm]   BM25[1] idx=19 chunk_id=deployment_guide_fix_0 score=7.9862 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:24] TRACE | [enriched-hybrid-llm]   BM25[2] idx=46 chunk_id=user_guide_fix_6 score=6.9580 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:24] TRACE | [enriched-hybrid-llm]   BM25[3] idx=26 chunk_id=deployment_guide_fix_7 score=6.4218 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:24] TRACE | [enriched-hybrid-llm]   BM25[4] idx=17 chunk_id=architecture_overview_fix_11 score=5.2885 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:24] TRACE | [enriched-hybrid-llm]   BM25[5] idx=4 chunk_id=api_reference_fix_4 score=4.7729 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:24] TRACE | [enriched-hybrid-llm]   BM25[6] idx=36 chunk_id=troubleshooting_guide_fix_8 score=4.2007 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:24] TRACE | [enriched-hybrid-llm]   BM25[7] idx=0 chunk_id=api_reference_fix_0 score=4.0596 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:24] TRACE | [enriched-hybrid-llm]   BM25[8] idx=6 chunk_id=architecture_overview_fix_0 score=3.8595 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:24] TRACE | [enriched-hybrid-llm]   BM25[9] idx=41 chunk_id=user_guide_fix_1 score=2.5896 | Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...
[15:08:24] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:24] TRACE | [enriched-hybrid-llm]   RRF[0] idx=19 total=0.0331 (sem_rank=0 comp=0.0167 + bm25_rank=1 comp=0.0164)
[15:08:24] TRACE | [enriched-hybrid-llm]   RRF[1] idx=20 total=0.0331 (sem_rank=1 comp=0.0164 + bm25_rank=0 comp=0.0167)
[15:08:24] TRACE | [enriched-hybrid-llm]   RRF[2] idx=26 total=0.0320 (sem_rank=2 comp=0.0161 + bm25_rank=3 comp=0.0159)
[15:08:24] TRACE | [enriched-hybrid-llm]   RRF[3] idx=36 total=0.0310 (sem_rank=3 comp=0.0159 + bm25_rank=6 comp=0.0152)
[15:08:24] TRACE | [enriched-hybrid-llm]   RRF[4] idx=17 total=0.0297 (sem_rank=11 comp=0.0141 + bm25_rank=4 comp=0.0156)
[15:08:24] TRACE | [enriched-hybrid-llm]   RRF[5] idx=25 total=0.0286 (sem_rank=4 comp=0.0156 + bm25_rank=17 comp=0.0130)
[15:08:24] TRACE | [enriched-hybrid-llm]   RRF[6] idx=21 total=0.0286 (sem_rank=8 comp=0.0147 + bm25_rank=12 comp=0.0139)
[15:08:24] TRACE | [enriched-hybrid-llm]   RRF[7] idx=6 total=0.0286 (sem_rank=12 comp=0.0139 + bm25_rank=8 comp=0.0147)
[15:08:24] TRACE | [enriched-hybrid-llm]   RRF[8] idx=11 total=0.0284 (sem_rank=7 comp=0.0149 + bm25_rank=14 comp=0.0135)
[15:08:24] TRACE | [enriched-hybrid-llm]   RRF[9] idx=32 total=0.0278 (sem_rank=6 comp=0.0152 + bm25_rank=19 comp=0.0127)
[15:08:24] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:24] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.0331 sem_rank=0 bm25_rank=1 dominant=semantic | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:08:24] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.0331 sem_rank=1 bm25_rank=0 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:08:24] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_7 doc_id=deployment_guide rrf_score=0.0320 sem_rank=2 bm25_rank=3 dominant=semantic | enriched: TCP port, SHOW POOLS, External Secrets, Secrets Operator, kubectl top, Egress ingress, bash kubectl | Install External Secrets Operator, EOF, Create SecretStore, external-secrets.io/v1beta1  podSelect...
[15:08:24] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.0310 sem_rank=3 bm25_rank=6 dominant=semantic | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:08:24] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_11 doc_id=architecture_overview rrf_score=0.0297 sem_rank=11 bm25_rank=4 dominant=bm25 | enriched: Kafka Broker, Redis Replica, Backup Strategy, Backup Schedule, Kubernetes health, Weekly automated, automatic promotion | Redis Replica, Kafka Broker, Sentinel, S3, Glacier  Service (2) - PostgreSQL P...
[15:08:24] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:24] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:24] TRACE | Query: I need to deploy to production, what namespace should I use?
[15:08:24] TRACE | Total key facts: 1
[15:08:24] TRACE | Found facts: 1/1
[15:08:24] TRACE |   FOUND[1] cloudflow-prod
[15:08:24] TRACE | === END FACT COVERAGE ===
[15:08:24] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:24] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why can't I see resources in the default namespace?
[15:08:24] DEBUG | [query-rewrite] Rewriting query: Why can't I see resources in the default namespace?
[15:08:24] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:24] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=850 timeout=5s
[15:08:24] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:24] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:24] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:25] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.88s
[15:08:25] DEBUG | [anthropic] USAGE: input_tokens=197 output_tokens=11
[15:08:25] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=75
[15:08:25] DEBUG | [anthropic] RESPONSE: kubernetes default namespace resource visibility permissions access control
[15:08:25] DEBUG | [query-rewrite] SUCCESS in 0.876s: Why can't I see resources in the default namespace? → kubernetes default namespace resource visibility permissions access control
[15:08:25] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: kubernetes default namespace resource visibility permissions access control (took 0.876s)
[15:08:25] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:25] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:25] TRACE | [enriched-hybrid-llm]   SEM[0] idx=26 chunk_id=deployment_guide_fix_7 score=0.6439 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:25] TRACE | [enriched-hybrid-llm]   SEM[1] idx=20 chunk_id=deployment_guide_fix_1 score=0.6183 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:25] TRACE | [enriched-hybrid-llm]   SEM[2] idx=25 chunk_id=deployment_guide_fix_6 score=0.5960 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:25] TRACE | [enriched-hybrid-llm]   SEM[3] idx=15 chunk_id=architecture_overview_fix_9 score=0.5557 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:25] TRACE | [enriched-hybrid-llm]   SEM[4] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.5524 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:25] TRACE | [enriched-hybrid-llm]   SEM[5] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.5478 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:25] TRACE | [enriched-hybrid-llm]   SEM[6] idx=19 chunk_id=deployment_guide_fix_0 score=0.5462 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:25] TRACE | [enriched-hybrid-llm]   SEM[7] idx=21 chunk_id=deployment_guide_fix_2 score=0.5373 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:25] TRACE | [enriched-hybrid-llm]   SEM[8] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.5367 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:25] TRACE | [enriched-hybrid-llm]   SEM[9] idx=0 chunk_id=api_reference_fix_0 score=0.5339 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:25] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:25] TRACE | [enriched-hybrid-llm]   BM25[0] idx=29 chunk_id=troubleshooting_guide_fix_1 score=8.9623 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:25] TRACE | [enriched-hybrid-llm]   BM25[1] idx=20 chunk_id=deployment_guide_fix_1 score=8.8339 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:25] TRACE | [enriched-hybrid-llm]   BM25[2] idx=7 chunk_id=architecture_overview_fix_1 score=7.0182 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:25] TRACE | [enriched-hybrid-llm]   BM25[3] idx=19 chunk_id=deployment_guide_fix_0 score=6.1961 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:25] TRACE | [enriched-hybrid-llm]   BM25[4] idx=26 chunk_id=deployment_guide_fix_7 score=5.5015 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:25] TRACE | [enriched-hybrid-llm]   BM25[5] idx=24 chunk_id=deployment_guide_fix_5 score=4.9968 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:25] TRACE | [enriched-hybrid-llm]   BM25[6] idx=25 chunk_id=deployment_guide_fix_6 score=4.6747 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:25] TRACE | [enriched-hybrid-llm]   BM25[7] idx=4 chunk_id=api_reference_fix_4 score=4.4929 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:25] TRACE | [enriched-hybrid-llm]   BM25[8] idx=41 chunk_id=user_guide_fix_1 score=4.2572 | Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...
[15:08:25] TRACE | [enriched-hybrid-llm]   BM25[9] idx=42 chunk_id=user_guide_fix_2 score=3.6550 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:08:25] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:25] TRACE | [enriched-hybrid-llm]   RRF[0] idx=20 total=0.0328 (sem_rank=1 comp=0.0164 + bm25_rank=1 comp=0.0164)
[15:08:25] TRACE | [enriched-hybrid-llm]   RRF[1] idx=26 total=0.0323 (sem_rank=0 comp=0.0167 + bm25_rank=4 comp=0.0156)
[15:08:25] TRACE | [enriched-hybrid-llm]   RRF[2] idx=25 total=0.0313 (sem_rank=2 comp=0.0161 + bm25_rank=6 comp=0.0152)
[15:08:25] TRACE | [enriched-hybrid-llm]   RRF[3] idx=19 total=0.0310 (sem_rank=6 comp=0.0152 + bm25_rank=3 comp=0.0159)
[15:08:25] TRACE | [enriched-hybrid-llm]   RRF[4] idx=29 total=0.0310 (sem_rank=10 comp=0.0143 + bm25_rank=0 comp=0.0167)
[15:08:25] TRACE | [enriched-hybrid-llm]   RRF[5] idx=36 total=0.0295 (sem_rank=4 comp=0.0156 + bm25_rank=12 comp=0.0139)
[15:08:25] TRACE | [enriched-hybrid-llm]   RRF[6] idx=7 total=0.0293 (sem_rank=16 comp=0.0132 + bm25_rank=2 comp=0.0161)
[15:08:25] TRACE | [enriched-hybrid-llm]   RRF[7] idx=15 total=0.0290 (sem_rank=3 comp=0.0159 + bm25_rank=16 comp=0.0132)
[15:08:25] TRACE | [enriched-hybrid-llm]   RRF[8] idx=0 total=0.0278 (sem_rank=9 comp=0.0145 + bm25_rank=15 comp=0.0133)
[15:08:25] TRACE | [enriched-hybrid-llm]   RRF[9] idx=17 total=0.0276 (sem_rank=15 comp=0.0133 + bm25_rank=10 comp=0.0143)
[15:08:25] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:25] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.0328 sem_rank=1 bm25_rank=1 dominant=balanced | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:08:25] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_7 doc_id=deployment_guide rrf_score=0.0323 sem_rank=0 bm25_rank=4 dominant=semantic | enriched: TCP port, SHOW POOLS, External Secrets, Secrets Operator, kubectl top, Egress ingress, bash kubectl | Install External Secrets Operator, EOF, Create SecretStore, external-secrets.io/v1beta1  podSelect...
[15:08:25] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0313 sem_rank=2 bm25_rank=6 dominant=semantic | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:25] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.0310 sem_rank=6 bm25_rank=3 dominant=bm25 | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:08:25] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.0310 sem_rank=10 bm25_rank=0 dominant=bm25 | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:08:25] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:25] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:25] TRACE | Query: Why can't I see resources in the default namespace?
[15:08:25] TRACE | Total key facts: 1
[15:08:25] TRACE | Found facts: 1/1
[15:08:25] TRACE |   FOUND[1] cloudflow-prod
[15:08:25] TRACE | === END FACT COVERAGE ===
[15:08:25] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:25] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What are the resource requirements for the API Gateway?
[15:08:25] DEBUG | [query-rewrite] Rewriting query: What are the resource requirements for the API Gateway?
[15:08:25] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:25] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=854 timeout=5s
[15:08:25] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:25] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:25] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:26] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.00s
[15:08:26] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=12
[15:08:26] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=87
[15:08:26] DEBUG | [anthropic] RESPONSE: api gateway resource requirements performance scaling specifications system constraints
[15:08:26] DEBUG | [query-rewrite] SUCCESS in 1.004s: What are the resource requirements for the API Gateway? → api gateway resource requirements performance scaling specifications system constraints
[15:08:26] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: api gateway resource requirements performance scaling specifications system constraints (took 1.004s)
[15:08:26] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:26] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:26] TRACE | [enriched-hybrid-llm]   SEM[0] idx=16 chunk_id=architecture_overview_fix_10 score=0.6432 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:26] TRACE | [enriched-hybrid-llm]   SEM[1] idx=7 chunk_id=architecture_overview_fix_1 score=0.6189 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:26] TRACE | [enriched-hybrid-llm]   SEM[2] idx=1 chunk_id=api_reference_fix_1 score=0.6139 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:26] TRACE | [enriched-hybrid-llm]   SEM[3] idx=6 chunk_id=architecture_overview_fix_0 score=0.6111 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:26] TRACE | [enriched-hybrid-llm]   SEM[4] idx=8 chunk_id=architecture_overview_fix_2 score=0.6087 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:26] TRACE | [enriched-hybrid-llm]   SEM[5] idx=25 chunk_id=deployment_guide_fix_6 score=0.6035 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:26] TRACE | [enriched-hybrid-llm]   SEM[6] idx=4 chunk_id=api_reference_fix_4 score=0.5921 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:26] TRACE | [enriched-hybrid-llm]   SEM[7] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.5859 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:26] TRACE | [enriched-hybrid-llm]   SEM[8] idx=15 chunk_id=architecture_overview_fix_9 score=0.5838 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:26] TRACE | [enriched-hybrid-llm]   SEM[9] idx=18 chunk_id=architecture_overview_fix_12 score=0.5831 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:26] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:26] TRACE | [enriched-hybrid-llm]   BM25[0] idx=25 chunk_id=deployment_guide_fix_6 score=8.6583 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:26] TRACE | [enriched-hybrid-llm]   BM25[1] idx=6 chunk_id=architecture_overview_fix_0 score=7.7452 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:26] TRACE | [enriched-hybrid-llm]   BM25[2] idx=16 chunk_id=architecture_overview_fix_10 score=7.3190 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:26] TRACE | [enriched-hybrid-llm]   BM25[3] idx=19 chunk_id=deployment_guide_fix_0 score=7.0427 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:26] TRACE | [enriched-hybrid-llm]   BM25[4] idx=15 chunk_id=architecture_overview_fix_9 score=5.6000 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:26] TRACE | [enriched-hybrid-llm]   BM25[5] idx=29 chunk_id=troubleshooting_guide_fix_1 score=5.4327 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:26] TRACE | [enriched-hybrid-llm]   BM25[6] idx=10 chunk_id=architecture_overview_fix_4 score=5.3204 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:26] TRACE | [enriched-hybrid-llm]   BM25[7] idx=7 chunk_id=architecture_overview_fix_1 score=4.8478 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:26] TRACE | [enriched-hybrid-llm]   BM25[8] idx=38 chunk_id=troubleshooting_guide_fix_10 score=4.6928 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:26] TRACE | [enriched-hybrid-llm]   BM25[9] idx=4 chunk_id=api_reference_fix_4 score=4.4251 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:26] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:26] TRACE | [enriched-hybrid-llm]   RRF[0] idx=16 total=0.0328 (sem_rank=0 comp=0.0167 + bm25_rank=2 comp=0.0161)
[15:08:26] TRACE | [enriched-hybrid-llm]   RRF[1] idx=6 total=0.0323 (sem_rank=3 comp=0.0159 + bm25_rank=1 comp=0.0164)
[15:08:26] TRACE | [enriched-hybrid-llm]   RRF[2] idx=25 total=0.0321 (sem_rank=5 comp=0.0154 + bm25_rank=0 comp=0.0167)
[15:08:26] TRACE | [enriched-hybrid-llm]   RRF[3] idx=7 total=0.0313 (sem_rank=1 comp=0.0164 + bm25_rank=7 comp=0.0149)
[15:08:26] TRACE | [enriched-hybrid-llm]   RRF[4] idx=15 total=0.0303 (sem_rank=8 comp=0.0147 + bm25_rank=4 comp=0.0156)
[15:08:26] TRACE | [enriched-hybrid-llm]   RRF[5] idx=4 total=0.0296 (sem_rank=6 comp=0.0152 + bm25_rank=9 comp=0.0145)
[15:08:26] TRACE | [enriched-hybrid-llm]   RRF[6] idx=8 total=0.0295 (sem_rank=4 comp=0.0156 + bm25_rank=12 comp=0.0139)
[15:08:26] TRACE | [enriched-hybrid-llm]   RRF[7] idx=1 total=0.0295 (sem_rank=2 comp=0.0161 + bm25_rank=15 comp=0.0133)
[15:08:26] TRACE | [enriched-hybrid-llm]   RRF[8] idx=10 total=0.0292 (sem_rank=11 comp=0.0141 + bm25_rank=6 comp=0.0152)
[15:08:26] TRACE | [enriched-hybrid-llm]   RRF[9] idx=19 total=0.0289 (sem_rank=17 comp=0.0130 + bm25_rank=3 comp=0.0159)
[15:08:26] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:26] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0328 sem_rank=0 bm25_rank=2 dominant=semantic | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:26] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.0323 sem_rank=3 bm25_rank=1 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:26] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0321 sem_rank=5 bm25_rank=0 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:26] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.0313 sem_rank=1 bm25_rank=7 dominant=semantic | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:08:26] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_9 doc_id=architecture_overview rrf_score=0.0303 sem_rank=8 bm25_rank=4 dominant=bm25 | enriched: API Operations, API key, Redis SET, Redis DEL, API Gateway, Simple SELECT, Performance Characteristics | API, TTL - Encryption, Request, TTL, PostgreSQL  per API key (default: 1000 RPM) ### Secrets Ma...
[15:08:26] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:26] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:26] TRACE | Query: What are the resource requirements for the API Gateway?
[15:08:26] TRACE | Total key facts: 1
[15:08:26] TRACE | Found facts: 1/1
[15:08:26] TRACE |   FOUND[1] 2 vCPU, 4GB RAM per pod
[15:08:26] TRACE | === END FACT COVERAGE ===
[15:08:26] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:26] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: How much CPU and memory does the API Gateway need?
[15:08:26] DEBUG | [query-rewrite] Rewriting query: How much CPU and memory does the API Gateway need?
[15:08:26] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:26] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=849 timeout=5s
[15:08:26] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:26] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:26] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:27] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.03s
[15:08:27] DEBUG | [anthropic] USAGE: input_tokens=197 output_tokens=13
[15:08:27] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=64
[15:08:27] DEBUG | [anthropic] RESPONSE: "api gateway resource requirements cpu memory allocation sizing"
[15:08:27] DEBUG | [query-rewrite] SUCCESS in 1.035s: How much CPU and memory does the API Gateway need? → "api gateway resource requirements cpu memory allocation sizing"
[15:08:27] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: "api gateway resource requirements cpu memory allocation sizing" (took 1.035s)
[15:08:27] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:27] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:27] TRACE | [enriched-hybrid-llm]   SEM[0] idx=16 chunk_id=architecture_overview_fix_10 score=0.6702 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:27] TRACE | [enriched-hybrid-llm]   SEM[1] idx=8 chunk_id=architecture_overview_fix_2 score=0.6247 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:27] TRACE | [enriched-hybrid-llm]   SEM[2] idx=25 chunk_id=deployment_guide_fix_6 score=0.6198 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:27] TRACE | [enriched-hybrid-llm]   SEM[3] idx=7 chunk_id=architecture_overview_fix_1 score=0.6138 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:27] TRACE | [enriched-hybrid-llm]   SEM[4] idx=18 chunk_id=architecture_overview_fix_12 score=0.6022 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:27] TRACE | [enriched-hybrid-llm]   SEM[5] idx=1 chunk_id=api_reference_fix_1 score=0.5979 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:27] TRACE | [enriched-hybrid-llm]   SEM[6] idx=6 chunk_id=architecture_overview_fix_0 score=0.5905 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:27] TRACE | [enriched-hybrid-llm]   SEM[7] idx=4 chunk_id=api_reference_fix_4 score=0.5896 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:27] TRACE | [enriched-hybrid-llm]   SEM[8] idx=10 chunk_id=architecture_overview_fix_4 score=0.5872 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:27] TRACE | [enriched-hybrid-llm]   SEM[9] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.5789 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:27] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:27] TRACE | [enriched-hybrid-llm]   BM25[0] idx=25 chunk_id=deployment_guide_fix_6 score=6.4215 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:27] TRACE | [enriched-hybrid-llm]   BM25[1] idx=19 chunk_id=deployment_guide_fix_0 score=5.9495 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:27] TRACE | [enriched-hybrid-llm]   BM25[2] idx=23 chunk_id=deployment_guide_fix_4 score=5.3546 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:27] TRACE | [enriched-hybrid-llm]   BM25[3] idx=26 chunk_id=deployment_guide_fix_7 score=4.7088 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:27] TRACE | [enriched-hybrid-llm]   BM25[4] idx=7 chunk_id=architecture_overview_fix_1 score=4.6855 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:27] TRACE | [enriched-hybrid-llm]   BM25[5] idx=16 chunk_id=architecture_overview_fix_10 score=4.4440 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:27] TRACE | [enriched-hybrid-llm]   BM25[6] idx=31 chunk_id=troubleshooting_guide_fix_3 score=4.4022 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:27] TRACE | [enriched-hybrid-llm]   BM25[7] idx=30 chunk_id=troubleshooting_guide_fix_2 score=4.1999 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:27] TRACE | [enriched-hybrid-llm]   BM25[8] idx=10 chunk_id=architecture_overview_fix_4 score=3.7267 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:27] TRACE | [enriched-hybrid-llm]   BM25[9] idx=4 chunk_id=api_reference_fix_4 score=3.6545 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:27] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:27] TRACE | [enriched-hybrid-llm]   RRF[0] idx=25 total=0.0328 (sem_rank=2 comp=0.0161 + bm25_rank=0 comp=0.0167)
[15:08:27] TRACE | [enriched-hybrid-llm]   RRF[1] idx=16 total=0.0321 (sem_rank=0 comp=0.0167 + bm25_rank=5 comp=0.0154)
[15:08:27] TRACE | [enriched-hybrid-llm]   RRF[2] idx=7 total=0.0315 (sem_rank=3 comp=0.0159 + bm25_rank=4 comp=0.0156)
[15:08:27] TRACE | [enriched-hybrid-llm]   RRF[3] idx=23 total=0.0295 (sem_rank=15 comp=0.0133 + bm25_rank=2 comp=0.0161)
[15:08:27] TRACE | [enriched-hybrid-llm]   RRF[4] idx=4 total=0.0294 (sem_rank=7 comp=0.0149 + bm25_rank=9 comp=0.0145)
[15:08:27] TRACE | [enriched-hybrid-llm]   RRF[5] idx=30 total=0.0294 (sem_rank=9 comp=0.0145 + bm25_rank=7 comp=0.0149)
[15:08:27] TRACE | [enriched-hybrid-llm]   RRF[6] idx=10 total=0.0294 (sem_rank=8 comp=0.0147 + bm25_rank=8 comp=0.0147)
[15:08:27] TRACE | [enriched-hybrid-llm]   RRF[7] idx=8 total=0.0294 (sem_rank=1 comp=0.0164 + bm25_rank=17 comp=0.0130)
[15:08:27] TRACE | [enriched-hybrid-llm]   RRF[8] idx=18 total=0.0293 (sem_rank=4 comp=0.0156 + bm25_rank=13 comp=0.0137)
[15:08:27] TRACE | [enriched-hybrid-llm]   RRF[9] idx=19 total=0.0291 (sem_rank=19 comp=0.0127 + bm25_rank=1 comp=0.0164)
[15:08:27] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:27] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0328 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:27] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0321 sem_rank=0 bm25_rank=5 dominant=semantic | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:27] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.0315 sem_rank=3 bm25_rank=4 dominant=semantic | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:08:27] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.0295 sem_rank=15 bm25_rank=2 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:08:27] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=api_reference_fix_4 doc_id=api_reference rrf_score=0.0294 sem_rank=7 bm25_rank=9 dominant=semantic | enriched: malformed JSON, requested resource, Bad Gateway, Error Codes, HTTP Status, Response Format, Server Error | Status Codes, Invalid, Description, Common Causes, Forbidden  ### Error Response Format ```js...
[15:08:27] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:27] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:27] TRACE | Query: How much CPU and memory does the API Gateway need?
[15:08:27] TRACE | Total key facts: 1
[15:08:27] TRACE | Found facts: 1/1
[15:08:27] TRACE |   FOUND[1] 2 vCPU, 4GB RAM per pod
[15:08:27] TRACE | === END FACT COVERAGE ===
[15:08:27] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:27] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: The API Gateway pods keep getting OOMKilled
[15:08:27] DEBUG | [query-rewrite] Rewriting query: The API Gateway pods keep getting OOMKilled
[15:08:27] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:27] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=842 timeout=5s
[15:08:27] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:27] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:27] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:28] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.14s
[15:08:28] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=20
[15:08:28] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=82
[15:08:28] DEBUG | [anthropic] RESPONSE: kubernetes api gateway pod out of memory oomkilled troubleshooting resource limits
[15:08:28] DEBUG | [query-rewrite] SUCCESS in 1.141s: The API Gateway pods keep getting OOMKilled → kubernetes api gateway pod out of memory oomkilled troubleshooting resource limits
[15:08:28] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: kubernetes api gateway pod out of memory oomkilled troubleshooting resource limits (took 1.141s)
[15:08:28] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:28] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:28] TRACE | [enriched-hybrid-llm]   SEM[0] idx=16 chunk_id=architecture_overview_fix_10 score=0.6192 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:28] TRACE | [enriched-hybrid-llm]   SEM[1] idx=25 chunk_id=deployment_guide_fix_6 score=0.6136 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:28] TRACE | [enriched-hybrid-llm]   SEM[2] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.5929 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:28] TRACE | [enriched-hybrid-llm]   SEM[3] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.5913 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:28] TRACE | [enriched-hybrid-llm]   SEM[4] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.5851 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:28] TRACE | [enriched-hybrid-llm]   SEM[5] idx=4 chunk_id=api_reference_fix_4 score=0.5844 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:28] TRACE | [enriched-hybrid-llm]   SEM[6] idx=18 chunk_id=architecture_overview_fix_12 score=0.5715 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:28] TRACE | [enriched-hybrid-llm]   SEM[7] idx=10 chunk_id=architecture_overview_fix_4 score=0.5715 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:28] TRACE | [enriched-hybrid-llm]   SEM[8] idx=8 chunk_id=architecture_overview_fix_2 score=0.5669 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:28] TRACE | [enriched-hybrid-llm]   SEM[9] idx=11 chunk_id=architecture_overview_fix_5 score=0.5625 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:28] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:28] TRACE | [enriched-hybrid-llm]   BM25[0] idx=26 chunk_id=deployment_guide_fix_7 score=13.3663 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:28] TRACE | [enriched-hybrid-llm]   BM25[1] idx=30 chunk_id=troubleshooting_guide_fix_2 score=12.6027 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:28] TRACE | [enriched-hybrid-llm]   BM25[2] idx=16 chunk_id=architecture_overview_fix_10 score=8.0038 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:28] TRACE | [enriched-hybrid-llm]   BM25[3] idx=28 chunk_id=troubleshooting_guide_fix_0 score=7.8787 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:28] TRACE | [enriched-hybrid-llm]   BM25[4] idx=25 chunk_id=deployment_guide_fix_6 score=7.1898 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:28] TRACE | [enriched-hybrid-llm]   BM25[5] idx=10 chunk_id=architecture_overview_fix_4 score=6.3374 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:28] TRACE | [enriched-hybrid-llm]   BM25[6] idx=6 chunk_id=architecture_overview_fix_0 score=5.3585 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:28] TRACE | [enriched-hybrid-llm]   BM25[7] idx=7 chunk_id=architecture_overview_fix_1 score=5.1981 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:28] TRACE | [enriched-hybrid-llm]   BM25[8] idx=20 chunk_id=deployment_guide_fix_1 score=5.1314 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:28] TRACE | [enriched-hybrid-llm]   BM25[9] idx=36 chunk_id=troubleshooting_guide_fix_8 score=5.0962 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:28] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:28] TRACE | [enriched-hybrid-llm]   RRF[0] idx=16 total=0.0328 (sem_rank=0 comp=0.0167 + bm25_rank=2 comp=0.0161)
[15:08:28] TRACE | [enriched-hybrid-llm]   RRF[1] idx=25 total=0.0320 (sem_rank=1 comp=0.0164 + bm25_rank=4 comp=0.0156)
[15:08:28] TRACE | [enriched-hybrid-llm]   RRF[2] idx=30 total=0.0305 (sem_rank=11 comp=0.0141 + bm25_rank=1 comp=0.0164)
[15:08:28] TRACE | [enriched-hybrid-llm]   RRF[3] idx=31 total=0.0304 (sem_rank=2 comp=0.0161 + bm25_rank=10 comp=0.0143)
[15:08:28] TRACE | [enriched-hybrid-llm]   RRF[4] idx=10 total=0.0303 (sem_rank=7 comp=0.0149 + bm25_rank=5 comp=0.0154)
[15:08:28] TRACE | [enriched-hybrid-llm]   RRF[5] idx=26 total=0.0302 (sem_rank=14 comp=0.0135 + bm25_rank=0 comp=0.0167)
[15:08:28] TRACE | [enriched-hybrid-llm]   RRF[6] idx=4 total=0.0291 (sem_rank=5 comp=0.0154 + bm25_rank=13 comp=0.0137)
[15:08:28] TRACE | [enriched-hybrid-llm]   RRF[7] idx=32 total=0.0287 (sem_rank=3 comp=0.0159 + bm25_rank=18 comp=0.0128)
[15:08:28] TRACE | [enriched-hybrid-llm]   RRF[8] idx=28 total=0.0287 (sem_rank=18 comp=0.0128 + bm25_rank=3 comp=0.0159)
[15:08:28] TRACE | [enriched-hybrid-llm]   RRF[9] idx=36 total=0.0284 (sem_rank=12 comp=0.0139 + bm25_rank=9 comp=0.0145)
[15:08:28] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:28] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0328 sem_rank=0 bm25_rank=2 dominant=semantic | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:28] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0320 sem_rank=1 bm25_rank=4 dominant=semantic | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:28] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_2 doc_id=troubleshooting_guide rrf_score=0.0305 sem_rank=11 bm25_rank=1 dominant=bm25 | enriched: Execution Plans, Query Execution, Review Query, Memory Leaks, High API, Breakdown Analysis, Plans | API  Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --r...
[15:08:28] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.0304 sem_rank=2 bm25_rank=10 dominant=semantic | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:08:28] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_4 doc_id=architecture_overview rrf_score=0.0303 sem_rank=7 bm25_rank=5 dominant=bm25 | enriched: SMS Queue, Webhook Queue, Email Queue, Resource Allocation, Key Responsibilities, Compiled templates, AWS SNS | Consume, Handlebars, Kafka - Template, SMS, Redis  **Technology**: Node.js with worker p...
[15:08:28] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:28] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:28] TRACE | Query: The API Gateway pods keep getting OOMKilled
[15:08:28] TRACE | Total key facts: 1
[15:08:28] TRACE | Found facts: 1/1
[15:08:28] TRACE |   FOUND[1] 2 vCPU, 4GB RAM per pod
[15:08:28] TRACE | === END FACT COVERAGE ===
[15:08:28] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:28] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: api gateway resources
[15:08:28] DEBUG | [query-rewrite] Rewriting query: api gateway resources
[15:08:28] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:28] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=820 timeout=5s
[15:08:28] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:28] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:28] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:29] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.86s
[15:08:29] DEBUG | [anthropic] USAGE: input_tokens=189 output_tokens=10
[15:08:29] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=65
[15:08:29] DEBUG | [anthropic] RESPONSE: api gateway resource configuration management endpoint definition
[15:08:29] DEBUG | [query-rewrite] SUCCESS in 0.861s: api gateway resources → api gateway resource configuration management endpoint definition
[15:08:29] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: api gateway resource configuration management endpoint definition (took 0.861s)
[15:08:29] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:29] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:29] TRACE | [enriched-hybrid-llm]   SEM[0] idx=7 chunk_id=architecture_overview_fix_1 score=0.5893 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:29] TRACE | [enriched-hybrid-llm]   SEM[1] idx=0 chunk_id=api_reference_fix_0 score=0.5843 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:29] TRACE | [enriched-hybrid-llm]   SEM[2] idx=16 chunk_id=architecture_overview_fix_10 score=0.5745 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:29] TRACE | [enriched-hybrid-llm]   SEM[3] idx=3 chunk_id=api_reference_fix_3 score=0.5636 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:29] TRACE | [enriched-hybrid-llm]   SEM[4] idx=25 chunk_id=deployment_guide_fix_6 score=0.5634 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:29] TRACE | [enriched-hybrid-llm]   SEM[5] idx=6 chunk_id=architecture_overview_fix_0 score=0.5626 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:29] TRACE | [enriched-hybrid-llm]   SEM[6] idx=15 chunk_id=architecture_overview_fix_9 score=0.5565 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:29] TRACE | [enriched-hybrid-llm]   SEM[7] idx=42 chunk_id=user_guide_fix_2 score=0.5554 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:08:29] TRACE | [enriched-hybrid-llm]   SEM[8] idx=1 chunk_id=api_reference_fix_1 score=0.5531 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:29] TRACE | [enriched-hybrid-llm]   SEM[9] idx=47 chunk_id=user_guide_fix_7 score=0.5496 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:08:29] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:29] TRACE | [enriched-hybrid-llm]   BM25[0] idx=10 chunk_id=architecture_overview_fix_4 score=7.0483 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:29] TRACE | [enriched-hybrid-llm]   BM25[1] idx=19 chunk_id=deployment_guide_fix_0 score=6.3451 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:29] TRACE | [enriched-hybrid-llm]   BM25[2] idx=16 chunk_id=architecture_overview_fix_10 score=6.1410 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:29] TRACE | [enriched-hybrid-llm]   BM25[3] idx=7 chunk_id=architecture_overview_fix_1 score=5.4394 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:29] TRACE | [enriched-hybrid-llm]   BM25[4] idx=21 chunk_id=deployment_guide_fix_2 score=5.2802 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:29] TRACE | [enriched-hybrid-llm]   BM25[5] idx=13 chunk_id=architecture_overview_fix_7 score=4.5075 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:08:29] TRACE | [enriched-hybrid-llm]   BM25[6] idx=20 chunk_id=deployment_guide_fix_1 score=4.4681 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:29] TRACE | [enriched-hybrid-llm]   BM25[7] idx=4 chunk_id=api_reference_fix_4 score=4.4251 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:29] TRACE | [enriched-hybrid-llm]   BM25[8] idx=14 chunk_id=architecture_overview_fix_8 score=4.2712 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:29] TRACE | [enriched-hybrid-llm]   BM25[9] idx=41 chunk_id=user_guide_fix_1 score=4.2570 | Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...
[15:08:29] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:29] TRACE | [enriched-hybrid-llm]   RRF[0] idx=7 total=0.0325 (sem_rank=0 comp=0.0167 + bm25_rank=3 comp=0.0159)
[15:08:29] TRACE | [enriched-hybrid-llm]   RRF[1] idx=16 total=0.0323 (sem_rank=2 comp=0.0161 + bm25_rank=2 comp=0.0161)
[15:08:29] TRACE | [enriched-hybrid-llm]   RRF[2] idx=25 total=0.0299 (sem_rank=4 comp=0.0156 + bm25_rank=10 comp=0.0143)
[15:08:29] TRACE | [enriched-hybrid-llm]   RRF[3] idx=20 total=0.0292 (sem_rank=11 comp=0.0141 + bm25_rank=6 comp=0.0152)
[15:08:29] TRACE | [enriched-hybrid-llm]   RRF[4] idx=42 total=0.0288 (sem_rank=7 comp=0.0149 + bm25_rank=12 comp=0.0139)
[15:08:29] TRACE | [enriched-hybrid-llm]   RRF[5] idx=6 total=0.0287 (sem_rank=5 comp=0.0154 + bm25_rank=15 comp=0.0133)
[15:08:29] TRACE | [enriched-hybrid-llm]   RRF[6] idx=10 total=0.0287 (sem_rank=23 comp=0.0120 + bm25_rank=0 comp=0.0167)
[15:08:29] TRACE | [enriched-hybrid-llm]   RRF[7] idx=15 total=0.0287 (sem_rank=6 comp=0.0152 + bm25_rank=14 comp=0.0135)
[15:08:29] TRACE | [enriched-hybrid-llm]   RRF[8] idx=0 total=0.0286 (sem_rank=1 comp=0.0164 + bm25_rank=22 comp=0.0122)
[15:08:29] TRACE | [enriched-hybrid-llm]   RRF[9] idx=19 total=0.0286 (sem_rank=22 comp=0.0122 + bm25_rank=1 comp=0.0164)
[15:08:29] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:29] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.0325 sem_rank=0 bm25_rank=3 dominant=semantic | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:08:29] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0323 sem_rank=2 bm25_rank=2 dominant=balanced | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:29] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0299 sem_rank=4 bm25_rank=10 dominant=semantic | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:29] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.0292 sem_rank=11 bm25_rank=6 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:08:29] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=user_guide_fix_2 doc_id=user_guide rrf_score=0.0288 sem_rank=7 bm25_rank=12 dominant=semantic | enriched: Basic Auth, Bearer Token, Important Notes, HTTP Requests, Query Parameters, API Key, Make HTTP | API, POST, Bearer Token, API Key  ### HTTP Requests Make HTTP requests to any API endpoint: **Configura...
[15:08:29] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:29] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:29] TRACE | Query: api gateway resources
[15:08:29] TRACE | Total key facts: 1
[15:08:29] TRACE | Found facts: 1/1
[15:08:29] TRACE |   FOUND[1] 2 vCPU, 4GB RAM per pod
[15:08:29] TRACE | === END FACT COVERAGE ===
[15:08:29] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:29] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: I'm provisioning infrastructure, what are the compute specs for API Gateway?
[15:08:29] DEBUG | [query-rewrite] Rewriting query: I'm provisioning infrastructure, what are the compute specs for API Gateway?
[15:08:29] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:29] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=875 timeout=5s
[15:08:29] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:29] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:29] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:30] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.05s
[15:08:30] DEBUG | [anthropic] USAGE: input_tokens=201 output_tokens=14
[15:08:30] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=77
[15:08:30] DEBUG | [anthropic] RESPONSE: "API Gateway compute resources instance specifications sizing scaling limits"
[15:08:30] DEBUG | [query-rewrite] SUCCESS in 1.053s: I'm provisioning infrastructure, what are the compute specs for API Gateway? → "API Gateway compute resources instance specifications sizing scaling limits"
[15:08:30] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: "API Gateway compute resources instance specifications sizing scaling limits" (took 1.053s)
[15:08:30] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:30] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:30] TRACE | [enriched-hybrid-llm]   SEM[0] idx=16 chunk_id=architecture_overview_fix_10 score=0.6529 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:30] TRACE | [enriched-hybrid-llm]   SEM[1] idx=1 chunk_id=api_reference_fix_1 score=0.6461 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:30] TRACE | [enriched-hybrid-llm]   SEM[2] idx=6 chunk_id=architecture_overview_fix_0 score=0.6211 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:30] TRACE | [enriched-hybrid-llm]   SEM[3] idx=25 chunk_id=deployment_guide_fix_6 score=0.6191 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:30] TRACE | [enriched-hybrid-llm]   SEM[4] idx=7 chunk_id=architecture_overview_fix_1 score=0.6056 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:30] TRACE | [enriched-hybrid-llm]   SEM[5] idx=18 chunk_id=architecture_overview_fix_12 score=0.6055 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:30] TRACE | [enriched-hybrid-llm]   SEM[6] idx=8 chunk_id=architecture_overview_fix_2 score=0.6007 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:30] TRACE | [enriched-hybrid-llm]   SEM[7] idx=4 chunk_id=api_reference_fix_4 score=0.5986 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:30] TRACE | [enriched-hybrid-llm]   SEM[8] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.5898 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:30] TRACE | [enriched-hybrid-llm]   SEM[9] idx=3 chunk_id=api_reference_fix_3 score=0.5854 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:30] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:30] TRACE | [enriched-hybrid-llm]   BM25[0] idx=11 chunk_id=architecture_overview_fix_5 score=5.3237 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:30] TRACE | [enriched-hybrid-llm]   BM25[1] idx=6 chunk_id=architecture_overview_fix_0 score=4.2141 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:30] TRACE | [enriched-hybrid-llm]   BM25[2] idx=26 chunk_id=deployment_guide_fix_7 score=4.0619 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:30] TRACE | [enriched-hybrid-llm]   BM25[3] idx=25 chunk_id=deployment_guide_fix_6 score=3.5858 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:30] TRACE | [enriched-hybrid-llm]   BM25[4] idx=34 chunk_id=troubleshooting_guide_fix_6 score=3.5127 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:30] TRACE | [enriched-hybrid-llm]   BM25[5] idx=39 chunk_id=troubleshooting_guide_fix_11 score=3.2797 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:30] TRACE | [enriched-hybrid-llm]   BM25[6] idx=12 chunk_id=architecture_overview_fix_6 score=2.8171 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:30] TRACE | [enriched-hybrid-llm]   BM25[7] idx=15 chunk_id=architecture_overview_fix_9 score=2.4596 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:30] TRACE | [enriched-hybrid-llm]   BM25[8] idx=10 chunk_id=architecture_overview_fix_4 score=2.3930 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:30] TRACE | [enriched-hybrid-llm]   BM25[9] idx=16 chunk_id=architecture_overview_fix_10 score=2.0210 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:30] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:30] TRACE | [enriched-hybrid-llm]   RRF[0] idx=6 total=0.0325 (sem_rank=2 comp=0.0161 + bm25_rank=1 comp=0.0164)
[15:08:30] TRACE | [enriched-hybrid-llm]   RRF[1] idx=25 total=0.0317 (sem_rank=3 comp=0.0159 + bm25_rank=3 comp=0.0159)
[15:08:30] TRACE | [enriched-hybrid-llm]   RRF[2] idx=16 total=0.0312 (sem_rank=0 comp=0.0167 + bm25_rank=9 comp=0.0145)
[15:08:30] TRACE | [enriched-hybrid-llm]   RRF[3] idx=11 total=0.0310 (sem_rank=10 comp=0.0143 + bm25_rank=0 comp=0.0167)
[15:08:30] TRACE | [enriched-hybrid-llm]   RRF[4] idx=18 total=0.0297 (sem_rank=5 comp=0.0154 + bm25_rank=10 comp=0.0143)
[15:08:30] TRACE | [enriched-hybrid-llm]   RRF[5] idx=34 total=0.0293 (sem_rank=13 comp=0.0137 + bm25_rank=4 comp=0.0156)
[15:08:30] TRACE | [enriched-hybrid-llm]   RRF[6] idx=7 total=0.0291 (sem_rank=4 comp=0.0156 + bm25_rank=14 comp=0.0135)
[15:08:30] TRACE | [enriched-hybrid-llm]   RRF[7] idx=4 total=0.0286 (sem_rank=7 comp=0.0149 + bm25_rank=13 comp=0.0137)
[15:08:30] TRACE | [enriched-hybrid-llm]   RRF[8] idx=1 total=0.0283 (sem_rank=1 comp=0.0164 + bm25_rank=24 comp=0.0119)
[15:08:30] TRACE | [enriched-hybrid-llm]   RRF[9] idx=8 total=0.0278 (sem_rank=6 comp=0.0152 + bm25_rank=19 comp=0.0127)
[15:08:30] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:30] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.0325 sem_rank=2 bm25_rank=1 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:30] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0317 sem_rank=3 bm25_rank=3 dominant=balanced | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:30] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0312 sem_rank=0 bm25_rank=9 dominant=semantic | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:30] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.0310 sem_rank=10 bm25_rank=0 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:08:30] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.0297 sem_rank=5 bm25_rank=10 dominant=semantic | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:08:30] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:30] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:30] TRACE | Query: I'm provisioning infrastructure, what are the compute specs for API Gateway?
[15:08:30] TRACE | Total key facts: 1
[15:08:30] TRACE | Found facts: 0/1
[15:08:30] TRACE | Missed facts: 1/1
[15:08:30] TRACE |   MISSED[1] 2 vCPU, 4GB RAM per pod
[15:08:30] TRACE |     -> Found in chunk_id=architecture_overview_fix_1 (rank not in top-5)
[15:08:30] TRACE | === END FACT COVERAGE ===
[15:08:30] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:30] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why is 1GB RAM not enough for API Gateway?
[15:08:30] DEBUG | [query-rewrite] Rewriting query: Why is 1GB RAM not enough for API Gateway?
[15:08:30] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:30] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=841 timeout=5s
[15:08:30] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:30] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:30] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:31] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.86s
[15:08:31] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=12
[15:08:31] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=77
[15:08:31] DEBUG | [anthropic] RESPONSE: api gateway minimum memory requirements performance scalability configuration
[15:08:31] DEBUG | [query-rewrite] SUCCESS in 0.863s: Why is 1GB RAM not enough for API Gateway? → api gateway minimum memory requirements performance scalability configuration
[15:08:31] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: api gateway minimum memory requirements performance scalability configuration (took 0.863s)
[15:08:31] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:31] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:31] TRACE | [enriched-hybrid-llm]   SEM[0] idx=16 chunk_id=architecture_overview_fix_10 score=0.6437 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:31] TRACE | [enriched-hybrid-llm]   SEM[1] idx=6 chunk_id=architecture_overview_fix_0 score=0.6172 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:31] TRACE | [enriched-hybrid-llm]   SEM[2] idx=25 chunk_id=deployment_guide_fix_6 score=0.6123 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:31] TRACE | [enriched-hybrid-llm]   SEM[3] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6029 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:31] TRACE | [enriched-hybrid-llm]   SEM[4] idx=7 chunk_id=architecture_overview_fix_1 score=0.6001 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:31] TRACE | [enriched-hybrid-llm]   SEM[5] idx=15 chunk_id=architecture_overview_fix_9 score=0.5933 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:31] TRACE | [enriched-hybrid-llm]   SEM[6] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.5900 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:31] TRACE | [enriched-hybrid-llm]   SEM[7] idx=8 chunk_id=architecture_overview_fix_2 score=0.5888 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:31] TRACE | [enriched-hybrid-llm]   SEM[8] idx=11 chunk_id=architecture_overview_fix_5 score=0.5859 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:31] TRACE | [enriched-hybrid-llm]   SEM[9] idx=1 chunk_id=api_reference_fix_1 score=0.5824 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:31] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:31] TRACE | [enriched-hybrid-llm]   BM25[0] idx=19 chunk_id=deployment_guide_fix_0 score=8.7027 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:31] TRACE | [enriched-hybrid-llm]   BM25[1] idx=16 chunk_id=architecture_overview_fix_10 score=6.1776 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:31] TRACE | [enriched-hybrid-llm]   BM25[2] idx=30 chunk_id=troubleshooting_guide_fix_2 score=5.6311 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:31] TRACE | [enriched-hybrid-llm]   BM25[3] idx=25 chunk_id=deployment_guide_fix_6 score=4.8654 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:31] TRACE | [enriched-hybrid-llm]   BM25[4] idx=18 chunk_id=architecture_overview_fix_12 score=4.3922 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:31] TRACE | [enriched-hybrid-llm]   BM25[5] idx=10 chunk_id=architecture_overview_fix_4 score=3.9867 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:31] TRACE | [enriched-hybrid-llm]   BM25[6] idx=23 chunk_id=deployment_guide_fix_4 score=3.9167 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:31] TRACE | [enriched-hybrid-llm]   BM25[7] idx=7 chunk_id=architecture_overview_fix_1 score=3.5573 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:31] TRACE | [enriched-hybrid-llm]   BM25[8] idx=26 chunk_id=deployment_guide_fix_7 score=3.4245 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:31] TRACE | [enriched-hybrid-llm]   BM25[9] idx=20 chunk_id=deployment_guide_fix_1 score=3.1807 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:31] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:31] TRACE | [enriched-hybrid-llm]   RRF[0] idx=16 total=0.0331 (sem_rank=0 comp=0.0167 + bm25_rank=1 comp=0.0164)
[15:08:31] TRACE | [enriched-hybrid-llm]   RRF[1] idx=25 total=0.0320 (sem_rank=2 comp=0.0161 + bm25_rank=3 comp=0.0159)
[15:08:31] TRACE | [enriched-hybrid-llm]   RRF[2] idx=30 total=0.0320 (sem_rank=3 comp=0.0159 + bm25_rank=2 comp=0.0161)
[15:08:31] TRACE | [enriched-hybrid-llm]   RRF[3] idx=7 total=0.0306 (sem_rank=4 comp=0.0156 + bm25_rank=7 comp=0.0149)
[15:08:31] TRACE | [enriched-hybrid-llm]   RRF[4] idx=6 total=0.0303 (sem_rank=1 comp=0.0164 + bm25_rank=12 comp=0.0139)
[15:08:31] TRACE | [enriched-hybrid-llm]   RRF[5] idx=18 total=0.0299 (sem_rank=10 comp=0.0143 + bm25_rank=4 comp=0.0156)
[15:08:31] TRACE | [enriched-hybrid-llm]   RRF[6] idx=15 total=0.0297 (sem_rank=5 comp=0.0154 + bm25_rank=10 comp=0.0143)
[15:08:31] TRACE | [enriched-hybrid-llm]   RRF[7] idx=10 total=0.0293 (sem_rank=12 comp=0.0139 + bm25_rank=5 comp=0.0154)
[15:08:31] TRACE | [enriched-hybrid-llm]   RRF[8] idx=11 total=0.0288 (sem_rank=8 comp=0.0147 + bm25_rank=11 comp=0.0141)
[15:08:31] TRACE | [enriched-hybrid-llm]   RRF[9] idx=31 total=0.0287 (sem_rank=6 comp=0.0152 + bm25_rank=14 comp=0.0135)
[15:08:31] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:31] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0331 sem_rank=0 bm25_rank=1 dominant=semantic | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:31] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0320 sem_rank=2 bm25_rank=3 dominant=semantic | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:31] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_2 doc_id=troubleshooting_guide rrf_score=0.0320 sem_rank=3 bm25_rank=2 dominant=bm25 | enriched: Execution Plans, Query Execution, Review Query, Memory Leaks, High API, Breakdown Analysis, Plans | API  Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --r...
[15:08:31] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.0306 sem_rank=4 bm25_rank=7 dominant=semantic | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:08:31] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.0303 sem_rank=1 bm25_rank=12 dominant=semantic | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:31] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:31] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:31] TRACE | Query: Why is 1GB RAM not enough for API Gateway?
[15:08:31] TRACE | Total key facts: 1
[15:08:31] TRACE | Found facts: 1/1
[15:08:31] TRACE |   FOUND[1] 2 vCPU, 4GB RAM per pod
[15:08:31] TRACE | === END FACT COVERAGE ===
[15:08:31] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:31] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What are the health check endpoints?
[15:08:31] DEBUG | [query-rewrite] Rewriting query: What are the health check endpoints?
[15:08:31] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:31] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=835 timeout=5s
[15:08:31] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:31] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:31] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:32] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.91s
[15:08:32] DEBUG | [anthropic] USAGE: input_tokens=193 output_tokens=10
[15:08:32] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=58
[15:08:32] DEBUG | [anthropic] RESPONSE: health check endpoint configuration monitoring diagnostics
[15:08:32] DEBUG | [query-rewrite] SUCCESS in 0.907s: What are the health check endpoints? → health check endpoint configuration monitoring diagnostics
[15:08:32] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: health check endpoint configuration monitoring diagnostics (took 0.907s)
[15:08:32] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: health check endpoint configuration monitoring diagnostics Grafana Jaeger Prometheus metrics observability tracing
[15:08:32] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:32] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:32] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:32] TRACE | [enriched-hybrid-llm]   SEM[0] idx=23 chunk_id=deployment_guide_fix_4 score=0.6638 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:32] TRACE | [enriched-hybrid-llm]   SEM[1] idx=21 chunk_id=deployment_guide_fix_2 score=0.6054 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:32] TRACE | [enriched-hybrid-llm]   SEM[2] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.6042 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:32] TRACE | [enriched-hybrid-llm]   SEM[3] idx=3 chunk_id=api_reference_fix_3 score=0.5727 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:32] TRACE | [enriched-hybrid-llm]   SEM[4] idx=7 chunk_id=architecture_overview_fix_1 score=0.5654 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:32] TRACE | [enriched-hybrid-llm]   SEM[5] idx=8 chunk_id=architecture_overview_fix_2 score=0.5393 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:32] TRACE | [enriched-hybrid-llm]   SEM[6] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.5298 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:32] TRACE | [enriched-hybrid-llm]   SEM[7] idx=10 chunk_id=architecture_overview_fix_4 score=0.5282 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:32] TRACE | [enriched-hybrid-llm]   SEM[8] idx=25 chunk_id=deployment_guide_fix_6 score=0.5277 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:32] TRACE | [enriched-hybrid-llm]   SEM[9] idx=17 chunk_id=architecture_overview_fix_11 score=0.5271 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:32] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:32] TRACE | [enriched-hybrid-llm]   BM25[0] idx=23 chunk_id=deployment_guide_fix_4 score=14.1200 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:32] TRACE | [enriched-hybrid-llm]   BM25[1] idx=22 chunk_id=deployment_guide_fix_3 score=12.0285 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:08:32] TRACE | [enriched-hybrid-llm]   BM25[2] idx=21 chunk_id=deployment_guide_fix_2 score=10.8507 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:32] TRACE | [enriched-hybrid-llm]   BM25[3] idx=17 chunk_id=architecture_overview_fix_11 score=7.8527 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:32] TRACE | [enriched-hybrid-llm]   BM25[4] idx=6 chunk_id=architecture_overview_fix_0 score=7.8426 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:32] TRACE | [enriched-hybrid-llm]   BM25[5] idx=38 chunk_id=troubleshooting_guide_fix_10 score=7.7408 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:32] TRACE | [enriched-hybrid-llm]   BM25[6] idx=19 chunk_id=deployment_guide_fix_0 score=6.6406 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:32] TRACE | [enriched-hybrid-llm]   BM25[7] idx=20 chunk_id=deployment_guide_fix_1 score=5.8136 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:32] TRACE | [enriched-hybrid-llm]   BM25[8] idx=30 chunk_id=troubleshooting_guide_fix_2 score=5.1598 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:32] TRACE | [enriched-hybrid-llm]   BM25[9] idx=33 chunk_id=troubleshooting_guide_fix_5 score=4.6591 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:32] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:32] TRACE | [enriched-hybrid-llm]   RRF[0] idx=23 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:08:32] TRACE | [enriched-hybrid-llm]   RRF[1] idx=22 total=0.2824 (sem_rank=21 comp=0.0097 + bm25_rank=1 comp=0.2727)
[15:08:32] TRACE | [enriched-hybrid-llm]   RRF[2] idx=21 total=0.2773 (sem_rank=1 comp=0.0273 + bm25_rank=2 comp=0.2500)
[15:08:32] TRACE | [enriched-hybrid-llm]   RRF[3] idx=17 total=0.2466 (sem_rank=9 comp=0.0158 + bm25_rank=3 comp=0.2308)
[15:08:32] TRACE | [enriched-hybrid-llm]   RRF[4] idx=38 total=0.2250 (sem_rank=2 comp=0.0250 + bm25_rank=5 comp=0.2000)
[15:08:32] TRACE | [enriched-hybrid-llm]   RRF[5] idx=6 total=0.2211 (sem_rank=34 comp=0.0068 + bm25_rank=4 comp=0.2143)
[15:08:32] TRACE | [enriched-hybrid-llm]   RRF[6] idx=19 total=0.1940 (sem_rank=36 comp=0.0065 + bm25_rank=6 comp=0.1875)
[15:08:32] TRACE | [enriched-hybrid-llm]   RRF[7] idx=20 total=0.1850 (sem_rank=25 comp=0.0086 + bm25_rank=7 comp=0.1765)
[15:08:32] TRACE | [enriched-hybrid-llm]   RRF[8] idx=30 total=0.1770 (sem_rank=19 comp=0.0103 + bm25_rank=8 comp=0.1667)
[15:08:32] TRACE | [enriched-hybrid-llm]   RRF[9] idx=33 total=0.1635 (sem_rank=44 comp=0.0056 + bm25_rank=9 comp=0.1579)
[15:08:32] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:32] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:08:32] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.2824 sem_rank=21 bm25_rank=1 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:08:32] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_2 doc_id=deployment_guide rrf_score=0.2773 sem_rank=1 bm25_rank=2 dominant=bm25 | enriched: Test health, RESTARTS AGE, curl http, Database Configuration, Verification Verify, Expected output, Test readiness | Helm, NAME, 1/1 Running, CloudFlow  - secretName: cloudflow-tls hosts: - api.cloudf...
[15:08:32] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_11 doc_id=architecture_overview rrf_score=0.2466 sem_rank=9 bm25_rank=3 dominant=bm25 | enriched: Kafka Broker, Redis Replica, Backup Strategy, Backup Schedule, Kubernetes health, Weekly automated, automatic promotion | Redis Replica, Kafka Broker, Sentinel, S3, Glacier  Service (2) - PostgreSQL P...
[15:08:32] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_10 doc_id=troubleshooting_guide rrf_score=0.2250 sem_rank=2 bm25_rank=5 dominant=bm25 | enriched: health check, Run health, Capture packets, Capture system, metrics dashboard, Trace route, Review recent | database nc -zv cloudflow-db.internal.company.com 5432 #, Run, Trace, API  database nc -zv cl...
[15:08:32] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:32] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:32] TRACE | Query: What are the health check endpoints?
[15:08:32] TRACE | Total key facts: 2
[15:08:32] TRACE | Found facts: 2/2
[15:08:32] TRACE |   FOUND[1] /health
[15:08:32] TRACE |   FOUND[2] /ready
[15:08:32] TRACE | === END FACT COVERAGE ===
[15:08:32] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:32] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Which URLs should I use for health monitoring?
[15:08:32] DEBUG | [query-rewrite] Rewriting query: Which URLs should I use for health monitoring?
[15:08:32] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:32] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=845 timeout=5s
[15:08:32] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:32] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:32] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:33] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.82s
[15:08:33] DEBUG | [anthropic] USAGE: input_tokens=195 output_tokens=9
[15:08:33] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=51
[15:08:33] DEBUG | [anthropic] RESPONSE: health monitoring endpoint urls configuration guide
[15:08:33] DEBUG | [query-rewrite] SUCCESS in 0.820s: Which URLs should I use for health monitoring? → health monitoring endpoint urls configuration guide
[15:08:33] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: health monitoring endpoint urls configuration guide (took 0.820s)
[15:08:33] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: health monitoring endpoint urls configuration guide Grafana Jaeger Prometheus metrics observability tracing
[15:08:33] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:33] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:33] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:33] TRACE | [enriched-hybrid-llm]   SEM[0] idx=23 chunk_id=deployment_guide_fix_4 score=0.6828 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:33] TRACE | [enriched-hybrid-llm]   SEM[1] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.6175 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:33] TRACE | [enriched-hybrid-llm]   SEM[2] idx=3 chunk_id=api_reference_fix_3 score=0.6135 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:33] TRACE | [enriched-hybrid-llm]   SEM[3] idx=7 chunk_id=architecture_overview_fix_1 score=0.5995 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:33] TRACE | [enriched-hybrid-llm]   SEM[4] idx=21 chunk_id=deployment_guide_fix_2 score=0.5988 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:33] TRACE | [enriched-hybrid-llm]   SEM[5] idx=10 chunk_id=architecture_overview_fix_4 score=0.5553 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:33] TRACE | [enriched-hybrid-llm]   SEM[6] idx=25 chunk_id=deployment_guide_fix_6 score=0.5539 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:33] TRACE | [enriched-hybrid-llm]   SEM[7] idx=2 chunk_id=api_reference_fix_2 score=0.5521 | **Endpoint:** `POST /workflows` **Request Body:** ```json { "name": "Email Campaign Automation", "de...
[15:08:33] TRACE | [enriched-hybrid-llm]   SEM[8] idx=8 chunk_id=architecture_overview_fix_2 score=0.5497 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:33] TRACE | [enriched-hybrid-llm]   SEM[9] idx=17 chunk_id=architecture_overview_fix_11 score=0.5468 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:33] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:33] TRACE | [enriched-hybrid-llm]   BM25[0] idx=23 chunk_id=deployment_guide_fix_4 score=14.1200 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:33] TRACE | [enriched-hybrid-llm]   BM25[1] idx=22 chunk_id=deployment_guide_fix_3 score=12.0285 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:08:33] TRACE | [enriched-hybrid-llm]   BM25[2] idx=19 chunk_id=deployment_guide_fix_0 score=10.4160 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:33] TRACE | [enriched-hybrid-llm]   BM25[3] idx=21 chunk_id=deployment_guide_fix_2 score=9.3360 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:33] TRACE | [enriched-hybrid-llm]   BM25[4] idx=6 chunk_id=architecture_overview_fix_0 score=7.8426 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:33] TRACE | [enriched-hybrid-llm]   BM25[5] idx=17 chunk_id=architecture_overview_fix_11 score=6.6773 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:33] TRACE | [enriched-hybrid-llm]   BM25[6] idx=38 chunk_id=troubleshooting_guide_fix_10 score=6.2325 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:33] TRACE | [enriched-hybrid-llm]   BM25[7] idx=20 chunk_id=deployment_guide_fix_1 score=5.8136 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:33] TRACE | [enriched-hybrid-llm]   BM25[8] idx=28 chunk_id=troubleshooting_guide_fix_0 score=4.6832 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:33] TRACE | [enriched-hybrid-llm]   BM25[9] idx=33 chunk_id=troubleshooting_guide_fix_5 score=4.6591 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:33] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:33] TRACE | [enriched-hybrid-llm]   RRF[0] idx=23 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:08:33] TRACE | [enriched-hybrid-llm]   RRF[1] idx=22 total=0.2811 (sem_rank=26 comp=0.0083 + bm25_rank=1 comp=0.2727)
[15:08:33] TRACE | [enriched-hybrid-llm]   RRF[2] idx=19 total=0.2565 (sem_rank=36 comp=0.0065 + bm25_rank=2 comp=0.2500)
[15:08:33] TRACE | [enriched-hybrid-llm]   RRF[3] idx=21 total=0.2522 (sem_rank=4 comp=0.0214 + bm25_rank=3 comp=0.2308)
[15:08:33] TRACE | [enriched-hybrid-llm]   RRF[4] idx=6 total=0.2211 (sem_rank=34 comp=0.0068 + bm25_rank=4 comp=0.2143)
[15:08:33] TRACE | [enriched-hybrid-llm]   RRF[5] idx=17 total=0.2158 (sem_rank=9 comp=0.0158 + bm25_rank=5 comp=0.2000)
[15:08:33] TRACE | [enriched-hybrid-llm]   RRF[6] idx=38 total=0.2148 (sem_rank=1 comp=0.0273 + bm25_rank=6 comp=0.1875)
[15:08:33] TRACE | [enriched-hybrid-llm]   RRF[7] idx=20 total=0.1868 (sem_rank=19 comp=0.0103 + bm25_rank=7 comp=0.1765)
[15:08:33] TRACE | [enriched-hybrid-llm]   RRF[8] idx=28 total=0.1767 (sem_rank=20 comp=0.0100 + bm25_rank=8 comp=0.1667)
[15:08:33] TRACE | [enriched-hybrid-llm]   RRF[9] idx=33 total=0.1630 (sem_rank=49 comp=0.0051 + bm25_rank=9 comp=0.1579)
[15:08:33] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:33] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:08:33] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.2811 sem_rank=26 bm25_rank=1 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:08:33] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.2565 sem_rank=36 bm25_rank=2 dominant=bm25 | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:08:33] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_2 doc_id=deployment_guide rrf_score=0.2522 sem_rank=4 bm25_rank=3 dominant=bm25 | enriched: Test health, RESTARTS AGE, curl http, Database Configuration, Verification Verify, Expected output, Test readiness | Helm, NAME, 1/1 Running, CloudFlow  - secretName: cloudflow-tls hosts: - api.cloudf...
[15:08:33] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2211 sem_rank=34 bm25_rank=4 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:33] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:33] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:33] TRACE | Query: Which URLs should I use for health monitoring?
[15:08:33] TRACE | Total key facts: 2
[15:08:33] TRACE | Found facts: 2/2
[15:08:33] TRACE |   FOUND[1] /health
[15:08:33] TRACE |   FOUND[2] /ready
[15:08:33] TRACE | === END FACT COVERAGE ===
[15:08:33] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:33] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: My load balancer health checks are failing
[15:08:33] DEBUG | [query-rewrite] Rewriting query: My load balancer health checks are failing
[15:08:33] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:33] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=841 timeout=5s
[15:08:33] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:33] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:33] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:34] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.98s
[15:08:34] DEBUG | [anthropic] USAGE: input_tokens=194 output_tokens=16
[15:08:34] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=84
[15:08:34] DEBUG | [anthropic] RESPONSE: load balancer health check failure troubleshooting configuration validation criteria
[15:08:34] DEBUG | [query-rewrite] SUCCESS in 0.977s: My load balancer health checks are failing → load balancer health check failure troubleshooting configuration validation criteria
[15:08:34] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: load balancer health check failure troubleshooting configuration validation criteria (took 0.977s)
[15:08:34] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:34] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:34] TRACE | [enriched-hybrid-llm]   SEM[0] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.6080 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:34] TRACE | [enriched-hybrid-llm]   SEM[1] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6072 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:34] TRACE | [enriched-hybrid-llm]   SEM[2] idx=21 chunk_id=deployment_guide_fix_2 score=0.5970 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:34] TRACE | [enriched-hybrid-llm]   SEM[3] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.5759 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:34] TRACE | [enriched-hybrid-llm]   SEM[4] idx=18 chunk_id=architecture_overview_fix_12 score=0.5649 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:34] TRACE | [enriched-hybrid-llm]   SEM[5] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5571 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:34] TRACE | [enriched-hybrid-llm]   SEM[6] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5398 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:34] TRACE | [enriched-hybrid-llm]   SEM[7] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.5358 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:34] TRACE | [enriched-hybrid-llm]   SEM[8] idx=47 chunk_id=user_guide_fix_7 score=0.5313 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:08:34] TRACE | [enriched-hybrid-llm]   SEM[9] idx=6 chunk_id=architecture_overview_fix_0 score=0.5307 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:34] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:34] TRACE | [enriched-hybrid-llm]   BM25[0] idx=10 chunk_id=architecture_overview_fix_4 score=10.2362 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:34] TRACE | [enriched-hybrid-llm]   BM25[1] idx=21 chunk_id=deployment_guide_fix_2 score=7.5572 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:34] TRACE | [enriched-hybrid-llm]   BM25[2] idx=17 chunk_id=architecture_overview_fix_11 score=7.4128 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:34] TRACE | [enriched-hybrid-llm]   BM25[3] idx=6 chunk_id=architecture_overview_fix_0 score=7.3318 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:34] TRACE | [enriched-hybrid-llm]   BM25[4] idx=28 chunk_id=troubleshooting_guide_fix_0 score=5.8104 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:34] TRACE | [enriched-hybrid-llm]   BM25[5] idx=38 chunk_id=troubleshooting_guide_fix_10 score=5.7226 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:34] TRACE | [enriched-hybrid-llm]   BM25[6] idx=26 chunk_id=deployment_guide_fix_7 score=5.3947 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:34] TRACE | [enriched-hybrid-llm]   BM25[7] idx=25 chunk_id=deployment_guide_fix_6 score=3.7883 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:34] TRACE | [enriched-hybrid-llm]   BM25[8] idx=32 chunk_id=troubleshooting_guide_fix_4 score=3.7395 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:34] TRACE | [enriched-hybrid-llm]   BM25[9] idx=39 chunk_id=troubleshooting_guide_fix_11 score=3.5295 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:34] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:34] TRACE | [enriched-hybrid-llm]   RRF[0] idx=21 total=0.0325 (sem_rank=2 comp=0.0161 + bm25_rank=1 comp=0.0164)
[15:08:34] TRACE | [enriched-hybrid-llm]   RRF[1] idx=38 total=0.0321 (sem_rank=0 comp=0.0167 + bm25_rank=5 comp=0.0154)
[15:08:34] TRACE | [enriched-hybrid-llm]   RRF[2] idx=28 total=0.0315 (sem_rank=3 comp=0.0159 + bm25_rank=4 comp=0.0156)
[15:08:34] TRACE | [enriched-hybrid-llm]   RRF[3] idx=6 total=0.0304 (sem_rank=9 comp=0.0145 + bm25_rank=3 comp=0.0159)
[15:08:34] TRACE | [enriched-hybrid-llm]   RRF[4] idx=34 total=0.0301 (sem_rank=1 comp=0.0164 + bm25_rank=13 comp=0.0137)
[15:08:34] TRACE | [enriched-hybrid-llm]   RRF[5] idx=39 total=0.0299 (sem_rank=5 comp=0.0154 + bm25_rank=9 comp=0.0145)
[15:08:34] TRACE | [enriched-hybrid-llm]   RRF[6] idx=18 total=0.0297 (sem_rank=4 comp=0.0156 + bm25_rank=11 comp=0.0141)
[15:08:34] TRACE | [enriched-hybrid-llm]   RRF[7] idx=32 total=0.0296 (sem_rank=7 comp=0.0149 + bm25_rank=8 comp=0.0147)
[15:08:34] TRACE | [enriched-hybrid-llm]   RRF[8] idx=17 total=0.0283 (sem_rank=22 comp=0.0122 + bm25_rank=2 comp=0.0161)
[15:08:34] TRACE | [enriched-hybrid-llm]   RRF[9] idx=10 total=0.0280 (sem_rank=28 comp=0.0114 + bm25_rank=0 comp=0.0167)
[15:08:34] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:34] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_2 doc_id=deployment_guide rrf_score=0.0325 sem_rank=2 bm25_rank=1 dominant=bm25 | enriched: Test health, RESTARTS AGE, curl http, Database Configuration, Verification Verify, Expected output, Test readiness | Helm, NAME, 1/1 Running, CloudFlow  - secretName: cloudflow-tls hosts: - api.cloudf...
[15:08:34] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_10 doc_id=troubleshooting_guide rrf_score=0.0321 sem_rank=0 bm25_rank=5 dominant=semantic | enriched: health check, Run health, Capture packets, Capture system, metrics dashboard, Trace route, Review recent | database nc -zv cloudflow-db.internal.company.com 5432 #, Run, Trace, API  database nc -zv cl...
[15:08:34] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.0315 sem_rank=3 bm25_rank=4 dominant=semantic | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:08:34] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.0304 sem_rank=9 bm25_rank=3 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:34] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0301 sem_rank=1 bm25_rank=13 dominant=semantic | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:08:34] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:34] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:34] TRACE | Query: My load balancer health checks are failing
[15:08:34] TRACE | Total key facts: 2
[15:08:34] TRACE | Found facts: 2/2
[15:08:34] TRACE |   FOUND[1] /health
[15:08:34] TRACE |   FOUND[2] /ready
[15:08:34] TRACE | === END FACT COVERAGE ===
[15:08:34] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:34] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: health endpoints
[15:08:34] DEBUG | [query-rewrite] Rewriting query: health endpoints
[15:08:34] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:34] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=815 timeout=5s
[15:08:34] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:34] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:34] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:35] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.09s
[15:08:35] DEBUG | [anthropic] USAGE: input_tokens=188 output_tokens=13
[15:08:35] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=69
[15:08:35] DEBUG | [anthropic] RESPONSE: "monitoring health check endpoint status API availability diagnostic"
[15:08:35] DEBUG | [query-rewrite] SUCCESS in 1.095s: health endpoints → "monitoring health check endpoint status API availability diagnostic"
[15:08:35] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: "monitoring health check endpoint status API availability diagnostic" (took 1.095s)
[15:08:35] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: "monitoring health check endpoint status API availability diagnostic" Grafana Jaeger Prometheus metrics observability tracing
[15:08:35] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:35] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:35] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:35] TRACE | [enriched-hybrid-llm]   SEM[0] idx=23 chunk_id=deployment_guide_fix_4 score=0.6718 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:35] TRACE | [enriched-hybrid-llm]   SEM[1] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.6148 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:35] TRACE | [enriched-hybrid-llm]   SEM[2] idx=3 chunk_id=api_reference_fix_3 score=0.6104 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:35] TRACE | [enriched-hybrid-llm]   SEM[3] idx=21 chunk_id=deployment_guide_fix_2 score=0.5993 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:35] TRACE | [enriched-hybrid-llm]   SEM[4] idx=7 chunk_id=architecture_overview_fix_1 score=0.5792 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:35] TRACE | [enriched-hybrid-llm]   SEM[5] idx=8 chunk_id=architecture_overview_fix_2 score=0.5538 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:35] TRACE | [enriched-hybrid-llm]   SEM[6] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.5458 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:35] TRACE | [enriched-hybrid-llm]   SEM[7] idx=0 chunk_id=api_reference_fix_0 score=0.5437 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:35] TRACE | [enriched-hybrid-llm]   SEM[8] idx=25 chunk_id=deployment_guide_fix_6 score=0.5436 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:35] TRACE | [enriched-hybrid-llm]   SEM[9] idx=16 chunk_id=architecture_overview_fix_10 score=0.5429 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:35] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:35] TRACE | [enriched-hybrid-llm]   BM25[0] idx=23 chunk_id=deployment_guide_fix_4 score=11.5751 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:35] TRACE | [enriched-hybrid-llm]   BM25[1] idx=6 chunk_id=architecture_overview_fix_0 score=11.3717 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:35] TRACE | [enriched-hybrid-llm]   BM25[2] idx=38 chunk_id=troubleshooting_guide_fix_10 score=9.9773 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:35] TRACE | [enriched-hybrid-llm]   BM25[3] idx=21 chunk_id=deployment_guide_fix_2 score=9.6523 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:35] TRACE | [enriched-hybrid-llm]   BM25[4] idx=19 chunk_id=deployment_guide_fix_0 score=8.2708 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:35] TRACE | [enriched-hybrid-llm]   BM25[5] idx=22 chunk_id=deployment_guide_fix_3 score=7.4513 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:08:35] TRACE | [enriched-hybrid-llm]   BM25[6] idx=30 chunk_id=troubleshooting_guide_fix_2 score=7.2958 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:35] TRACE | [enriched-hybrid-llm]   BM25[7] idx=17 chunk_id=architecture_overview_fix_11 score=5.8337 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:35] TRACE | [enriched-hybrid-llm]   BM25[8] idx=29 chunk_id=troubleshooting_guide_fix_1 score=4.8812 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:35] TRACE | [enriched-hybrid-llm]   BM25[9] idx=34 chunk_id=troubleshooting_guide_fix_6 score=4.3048 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:35] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:35] TRACE | [enriched-hybrid-llm]   RRF[0] idx=23 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:08:35] TRACE | [enriched-hybrid-llm]   RRF[1] idx=6 total=0.2792 (sem_rank=36 comp=0.0065 + bm25_rank=1 comp=0.2727)
[15:08:35] TRACE | [enriched-hybrid-llm]   RRF[2] idx=38 total=0.2773 (sem_rank=1 comp=0.0273 + bm25_rank=2 comp=0.2500)
[15:08:35] TRACE | [enriched-hybrid-llm]   RRF[3] idx=21 total=0.2538 (sem_rank=3 comp=0.0231 + bm25_rank=3 comp=0.2308)
[15:08:35] TRACE | [enriched-hybrid-llm]   RRF[4] idx=19 total=0.2207 (sem_rank=37 comp=0.0064 + bm25_rank=4 comp=0.2143)
[15:08:35] TRACE | [enriched-hybrid-llm]   RRF[5] idx=22 total=0.2070 (sem_rank=33 comp=0.0070 + bm25_rank=5 comp=0.2000)
[15:08:35] TRACE | [enriched-hybrid-llm]   RRF[6] idx=30 total=0.1990 (sem_rank=16 comp=0.0115 + bm25_rank=6 comp=0.1875)
[15:08:35] TRACE | [enriched-hybrid-llm]   RRF[7] idx=17 total=0.1890 (sem_rank=14 comp=0.0125 + bm25_rank=7 comp=0.1765)
[15:08:35] TRACE | [enriched-hybrid-llm]   RRF[8] idx=29 total=0.1752 (sem_rank=25 comp=0.0086 + bm25_rank=8 comp=0.1667)
[15:08:35] TRACE | [enriched-hybrid-llm]   RRF[9] idx=28 total=0.1687 (sem_rank=6 comp=0.0187 + bm25_rank=10 comp=0.1500)
[15:08:35] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:35] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:08:35] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2792 sem_rank=36 bm25_rank=1 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:35] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_10 doc_id=troubleshooting_guide rrf_score=0.2773 sem_rank=1 bm25_rank=2 dominant=bm25 | enriched: health check, Run health, Capture packets, Capture system, metrics dashboard, Trace route, Review recent | database nc -zv cloudflow-db.internal.company.com 5432 #, Run, Trace, API  database nc -zv cl...
[15:08:35] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_2 doc_id=deployment_guide rrf_score=0.2538 sem_rank=3 bm25_rank=3 dominant=bm25 | enriched: Test health, RESTARTS AGE, curl http, Database Configuration, Verification Verify, Expected output, Test readiness | Helm, NAME, 1/1 Running, CloudFlow  - secretName: cloudflow-tls hosts: - api.cloudf...
[15:08:35] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.2207 sem_rank=37 bm25_rank=4 dominant=bm25 | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:08:35] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:35] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:35] TRACE | Query: health endpoints
[15:08:35] TRACE | Total key facts: 2
[15:08:35] TRACE | Found facts: 2/2
[15:08:35] TRACE |   FOUND[1] /health
[15:08:35] TRACE |   FOUND[2] /ready
[15:08:35] TRACE | === END FACT COVERAGE ===
[15:08:35] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:35] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Setting up monitoring, what endpoints indicate service health?
[15:08:35] DEBUG | [query-rewrite] Rewriting query: Setting up monitoring, what endpoints indicate service health?
[15:08:35] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:35] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=861 timeout=5s
[15:08:35] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:35] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:35] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:36] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.89s
[15:08:36] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=12
[15:08:36] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=69
[15:08:36] DEBUG | [anthropic] RESPONSE: service health monitoring endpoints availability probes status checks
[15:08:36] DEBUG | [query-rewrite] SUCCESS in 0.890s: Setting up monitoring, what endpoints indicate service health? → service health monitoring endpoints availability probes status checks
[15:08:36] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: service health monitoring endpoints availability probes status checks (took 0.890s)
[15:08:36] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: service health monitoring endpoints availability probes status checks Grafana Jaeger Prometheus metrics observability tracing
[15:08:36] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:36] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:36] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:36] TRACE | [enriched-hybrid-llm]   SEM[0] idx=23 chunk_id=deployment_guide_fix_4 score=0.6577 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:36] TRACE | [enriched-hybrid-llm]   SEM[1] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.5978 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:36] TRACE | [enriched-hybrid-llm]   SEM[2] idx=3 chunk_id=api_reference_fix_3 score=0.5927 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:36] TRACE | [enriched-hybrid-llm]   SEM[3] idx=7 chunk_id=architecture_overview_fix_1 score=0.5787 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:36] TRACE | [enriched-hybrid-llm]   SEM[4] idx=21 chunk_id=deployment_guide_fix_2 score=0.5737 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:36] TRACE | [enriched-hybrid-llm]   SEM[5] idx=8 chunk_id=architecture_overview_fix_2 score=0.5506 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:36] TRACE | [enriched-hybrid-llm]   SEM[6] idx=10 chunk_id=architecture_overview_fix_4 score=0.5439 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:36] TRACE | [enriched-hybrid-llm]   SEM[7] idx=17 chunk_id=architecture_overview_fix_11 score=0.5362 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:36] TRACE | [enriched-hybrid-llm]   SEM[8] idx=16 chunk_id=architecture_overview_fix_10 score=0.5291 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:36] TRACE | [enriched-hybrid-llm]   SEM[9] idx=18 chunk_id=architecture_overview_fix_12 score=0.5279 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:36] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:36] TRACE | [enriched-hybrid-llm]   BM25[0] idx=17 chunk_id=architecture_overview_fix_11 score=14.5801 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:36] TRACE | [enriched-hybrid-llm]   BM25[1] idx=23 chunk_id=deployment_guide_fix_4 score=14.1200 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:36] TRACE | [enriched-hybrid-llm]   BM25[2] idx=22 chunk_id=deployment_guide_fix_3 score=10.6881 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:08:36] TRACE | [enriched-hybrid-llm]   BM25[3] idx=6 chunk_id=architecture_overview_fix_0 score=10.5514 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:36] TRACE | [enriched-hybrid-llm]   BM25[4] idx=38 chunk_id=troubleshooting_guide_fix_10 score=9.9804 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:36] TRACE | [enriched-hybrid-llm]   BM25[5] idx=21 chunk_id=deployment_guide_fix_2 score=8.1671 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:36] TRACE | [enriched-hybrid-llm]   BM25[6] idx=19 chunk_id=deployment_guide_fix_0 score=7.1776 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:36] TRACE | [enriched-hybrid-llm]   BM25[7] idx=16 chunk_id=architecture_overview_fix_10 score=4.7636 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:36] TRACE | [enriched-hybrid-llm]   BM25[8] idx=34 chunk_id=troubleshooting_guide_fix_6 score=4.7344 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:36] TRACE | [enriched-hybrid-llm]   BM25[9] idx=1 chunk_id=api_reference_fix_1 score=4.0909 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:36] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:36] TRACE | [enriched-hybrid-llm]   RRF[0] idx=17 total=0.3176 (sem_rank=7 comp=0.0176 + bm25_rank=0 comp=0.3000)
[15:08:36] TRACE | [enriched-hybrid-llm]   RRF[1] idx=23 total=0.3027 (sem_rank=0 comp=0.0300 + bm25_rank=1 comp=0.2727)
[15:08:36] TRACE | [enriched-hybrid-llm]   RRF[2] idx=22 total=0.2570 (sem_rank=33 comp=0.0070 + bm25_rank=2 comp=0.2500)
[15:08:36] TRACE | [enriched-hybrid-llm]   RRF[3] idx=38 total=0.2416 (sem_rank=1 comp=0.0273 + bm25_rank=4 comp=0.2143)
[15:08:36] TRACE | [enriched-hybrid-llm]   RRF[4] idx=6 total=0.2383 (sem_rank=30 comp=0.0075 + bm25_rank=3 comp=0.2308)
[15:08:36] TRACE | [enriched-hybrid-llm]   RRF[5] idx=21 total=0.2214 (sem_rank=4 comp=0.0214 + bm25_rank=5 comp=0.2000)
[15:08:36] TRACE | [enriched-hybrid-llm]   RRF[6] idx=19 total=0.1956 (sem_rank=27 comp=0.0081 + bm25_rank=6 comp=0.1875)
[15:08:36] TRACE | [enriched-hybrid-llm]   RRF[7] idx=16 total=0.1931 (sem_rank=8 comp=0.0167 + bm25_rank=7 comp=0.1765)
[15:08:36] TRACE | [enriched-hybrid-llm]   RRF[8] idx=34 total=0.1730 (sem_rank=37 comp=0.0064 + bm25_rank=8 comp=0.1667)
[15:08:36] TRACE | [enriched-hybrid-llm]   RRF[9] idx=1 total=0.1644 (sem_rank=36 comp=0.0065 + bm25_rank=9 comp=0.1579)
[15:08:36] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:36] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_11 doc_id=architecture_overview rrf_score=0.3176 sem_rank=7 bm25_rank=0 dominant=bm25 | enriched: Kafka Broker, Redis Replica, Backup Strategy, Backup Schedule, Kubernetes health, Weekly automated, automatic promotion | Redis Replica, Kafka Broker, Sentinel, S3, Glacier  Service (2) - PostgreSQL P...
[15:08:36] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.3027 sem_rank=0 bm25_rank=1 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:08:36] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.2570 sem_rank=33 bm25_rank=2 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:08:36] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_10 doc_id=troubleshooting_guide rrf_score=0.2416 sem_rank=1 bm25_rank=4 dominant=bm25 | enriched: health check, Run health, Capture packets, Capture system, metrics dashboard, Trace route, Review recent | database nc -zv cloudflow-db.internal.company.com 5432 #, Run, Trace, API  database nc -zv cl...
[15:08:36] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2383 sem_rank=30 bm25_rank=3 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:36] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:36] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:36] TRACE | Query: Setting up monitoring, what endpoints indicate service health?
[15:08:36] TRACE | Total key facts: 2
[15:08:36] TRACE | Found facts: 0/2
[15:08:36] TRACE | Missed facts: 2/2
[15:08:36] TRACE |   MISSED[1] /health
[15:08:36] TRACE |     -> Found in chunk_id=deployment_guide_fix_2 (rank not in top-5)
[15:08:36] TRACE |   MISSED[2] /ready
[15:08:36] TRACE |     -> Found in chunk_id=deployment_guide_fix_2 (rank not in top-5)
[15:08:36] TRACE | === END FACT COVERAGE ===
[15:08:36] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:36] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why doesn't /status return health information?
[15:08:36] DEBUG | [query-rewrite] Rewriting query: Why doesn't /status return health information?
[15:08:36] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:36] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=845 timeout=5s
[15:08:36] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:36] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:36] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:37] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.97s
[15:08:37] DEBUG | [anthropic] USAGE: input_tokens=195 output_tokens=10
[15:08:37] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=46
[15:08:37] DEBUG | [anthropic] RESPONSE: /status endpoint health check response details
[15:08:37] DEBUG | [query-rewrite] SUCCESS in 0.973s: Why doesn't /status return health information? → /status endpoint health check response details
[15:08:37] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: /status endpoint health check response details (took 0.973s)
[15:08:37] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:37] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[0] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.6297 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[1] idx=3 chunk_id=api_reference_fix_3 score=0.6115 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[2] idx=21 chunk_id=deployment_guide_fix_2 score=0.6055 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[3] idx=7 chunk_id=architecture_overview_fix_1 score=0.6041 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[4] idx=2 chunk_id=api_reference_fix_2 score=0.6029 | **Endpoint:** `POST /workflows` **Request Body:** ```json { "name": "Email Campaign Automation", "de...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[5] idx=42 chunk_id=user_guide_fix_2 score=0.5509 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[6] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5444 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[7] idx=4 chunk_id=api_reference_fix_4 score=0.5443 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[8] idx=18 chunk_id=architecture_overview_fix_12 score=0.5428 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[9] idx=47 chunk_id=user_guide_fix_7 score=0.5408 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:08:37] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[0] idx=21 chunk_id=deployment_guide_fix_2 score=8.8641 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[1] idx=17 chunk_id=architecture_overview_fix_11 score=5.8337 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[2] idx=38 chunk_id=troubleshooting_guide_fix_10 score=5.7226 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[3] idx=2 chunk_id=api_reference_fix_2 score=5.2293 | **Endpoint:** `POST /workflows` **Request Body:** ```json { "name": "Email Campaign Automation", "de...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[4] idx=30 chunk_id=troubleshooting_guide_fix_2 score=4.6223 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[5] idx=42 chunk_id=user_guide_fix_2 score=4.0334 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[6] idx=32 chunk_id=troubleshooting_guide_fix_4 score=3.3520 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[7] idx=37 chunk_id=troubleshooting_guide_fix_9 score=3.1703 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[8] idx=29 chunk_id=troubleshooting_guide_fix_1 score=3.0031 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[9] idx=45 chunk_id=user_guide_fix_5 score=2.6589 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:37] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[0] idx=38 total=0.0328 (sem_rank=0 comp=0.0167 + bm25_rank=2 comp=0.0161)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[1] idx=21 total=0.0328 (sem_rank=2 comp=0.0161 + bm25_rank=0 comp=0.0167)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[2] idx=2 total=0.0315 (sem_rank=4 comp=0.0156 + bm25_rank=3 comp=0.0159)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[3] idx=42 total=0.0308 (sem_rank=5 comp=0.0154 + bm25_rank=5 comp=0.0154)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[4] idx=3 total=0.0303 (sem_rank=1 comp=0.0164 + bm25_rank=12 comp=0.0139)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[5] idx=30 total=0.0291 (sem_rank=14 comp=0.0135 + bm25_rank=4 comp=0.0156)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[6] idx=4 total=0.0286 (sem_rank=7 comp=0.0149 + bm25_rank=13 comp=0.0137)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[7] idx=18 total=0.0277 (sem_rank=8 comp=0.0147 + bm25_rank=17 comp=0.0130)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[8] idx=7 total=0.0276 (sem_rank=3 comp=0.0159 + bm25_rank=25 comp=0.0118)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[9] idx=17 total=0.0276 (sem_rank=29 comp=0.0112 + bm25_rank=1 comp=0.0164)
[15:08:37] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:37] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_10 doc_id=troubleshooting_guide rrf_score=0.0328 sem_rank=0 bm25_rank=2 dominant=semantic | enriched: health check, Run health, Capture packets, Capture system, metrics dashboard, Trace route, Review recent | database nc -zv cloudflow-db.internal.company.com 5432 #, Run, Trace, API  database nc -zv cl...
[15:08:37] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_2 doc_id=deployment_guide rrf_score=0.0328 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: Test health, RESTARTS AGE, curl http, Database Configuration, Verification Verify, Expected output, Test readiness | Helm, NAME, 1/1 Running, CloudFlow  - secretName: cloudflow-tls hosts: - api.cloudf...
[15:08:37] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=api_reference_fix_2 doc_id=api_reference rrf_score=0.0315 sem_rank=4 bm25_rank=3 dominant=bm25 | enriched: Request Body, Details Retrieve, Workflow Details, Endpoint, Response, Request, detailed information | Workflow Modify, Delete Workflow  **Endpoint:** `POST /workflows` **Request Body:** ```json { "nam...
[15:08:37] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=user_guide_fix_2 doc_id=user_guide rrf_score=0.0308 sem_rank=5 bm25_rank=5 dominant=balanced | enriched: Basic Auth, Bearer Token, Important Notes, HTTP Requests, Query Parameters, API Key, Make HTTP | API, POST, Bearer Token, API Key  ### HTTP Requests Make HTTP requests to any API endpoint: **Configura...
[15:08:37] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=api_reference_fix_3 doc_id=api_reference rrf_score=0.0303 sem_rank=1 bm25_rank=12 dominant=semantic | enriched: Query Parameters, Pagination offset, optional, Retrieve performance, Metrics Retrieve, ISO, Workflow Metrics | ISO 8601, JSON  **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameter...
[15:08:37] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:37] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:37] TRACE | Query: Why doesn't /status return health information?
[15:08:37] TRACE | Total key facts: 2
[15:08:37] TRACE | Found facts: 2/2
[15:08:37] TRACE |   FOUND[1] /health
[15:08:37] TRACE |   FOUND[2] /ready
[15:08:37] TRACE | === END FACT COVERAGE ===
[15:08:37] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:37] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What are the HPA scaling parameters?
[15:08:37] DEBUG | [query-rewrite] Rewriting query: What are the HPA scaling parameters?
[15:08:37] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:37] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=835 timeout=5s
[15:08:37] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:37] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:37] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:37] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.80s
[15:08:37] DEBUG | [anthropic] USAGE: input_tokens=194 output_tokens=12
[15:08:37] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=69
[15:08:37] DEBUG | [anthropic] RESPONSE: horizontal pod autoscaler kubernetes scaling configuration parameters
[15:08:37] DEBUG | [query-rewrite] SUCCESS in 0.798s: What are the HPA scaling parameters? → horizontal pod autoscaler kubernetes scaling configuration parameters
[15:08:37] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: horizontal pod autoscaler kubernetes scaling configuration parameters (took 0.798s)
[15:08:37] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: horizontal pod autoscaler kubernetes scaling configuration parameters CPU HPA replicas
[15:08:37] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:37] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:37] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[0] idx=25 chunk_id=deployment_guide_fix_6 score=0.7473 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[1] idx=17 chunk_id=architecture_overview_fix_11 score=0.6227 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[2] idx=11 chunk_id=architecture_overview_fix_5 score=0.6007 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[3] idx=6 chunk_id=architecture_overview_fix_0 score=0.5811 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[4] idx=15 chunk_id=architecture_overview_fix_9 score=0.5704 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[5] idx=16 chunk_id=architecture_overview_fix_10 score=0.5682 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[6] idx=18 chunk_id=architecture_overview_fix_12 score=0.5640 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[7] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.5589 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[8] idx=19 chunk_id=deployment_guide_fix_0 score=0.5511 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:37] TRACE | [enriched-hybrid-llm]   SEM[9] idx=9 chunk_id=architecture_overview_fix_3 score=0.5463 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:37] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[0] idx=25 chunk_id=deployment_guide_fix_6 score=20.3747 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[1] idx=6 chunk_id=architecture_overview_fix_0 score=7.3292 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[2] idx=36 chunk_id=troubleshooting_guide_fix_8 score=6.0112 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[3] idx=20 chunk_id=deployment_guide_fix_1 score=5.3359 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[4] idx=32 chunk_id=troubleshooting_guide_fix_4 score=4.5902 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[5] idx=23 chunk_id=deployment_guide_fix_4 score=4.5015 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[6] idx=26 chunk_id=deployment_guide_fix_7 score=4.3032 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[7] idx=19 chunk_id=deployment_guide_fix_0 score=3.6502 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[8] idx=7 chunk_id=architecture_overview_fix_1 score=3.6436 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:37] TRACE | [enriched-hybrid-llm]   BM25[9] idx=17 chunk_id=architecture_overview_fix_11 score=3.4481 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:37] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[0] idx=25 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[1] idx=6 total=0.2958 (sem_rank=3 comp=0.0231 + bm25_rank=1 comp=0.2727)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[2] idx=36 total=0.2676 (sem_rank=7 comp=0.0176 + bm25_rank=2 comp=0.2500)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[3] idx=20 total=0.2411 (sem_rank=19 comp=0.0103 + bm25_rank=3 comp=0.2308)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[4] idx=32 total=0.2254 (sem_rank=17 comp=0.0111 + bm25_rank=4 comp=0.2143)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[5] idx=23 total=0.2100 (sem_rank=20 comp=0.0100 + bm25_rank=5 comp=0.2000)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[6] idx=26 total=0.2025 (sem_rank=10 comp=0.0150 + bm25_rank=6 comp=0.1875)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[7] idx=19 total=0.1931 (sem_rank=8 comp=0.0167 + bm25_rank=7 comp=0.1765)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[8] idx=17 total=0.1852 (sem_rank=1 comp=0.0273 + bm25_rank=9 comp=0.1579)
[15:08:37] TRACE | [enriched-hybrid-llm]   RRF[9] idx=7 total=0.1803 (sem_rank=12 comp=0.0136 + bm25_rank=8 comp=0.1667)
[15:08:37] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:37] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:37] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2958 sem_rank=3 bm25_rank=1 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:37] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.2676 sem_rank=7 bm25_rank=2 dominant=bm25 | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:08:37] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.2411 sem_rank=19 bm25_rank=3 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:08:37] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.2254 sem_rank=17 bm25_rank=4 dominant=bm25 | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:08:37] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:37] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:37] TRACE | Query: What are the HPA scaling parameters?
[15:08:37] TRACE | Total key facts: 3
[15:08:37] TRACE | Found facts: 3/3
[15:08:37] TRACE |   FOUND[1] minReplicas: 3
[15:08:37] TRACE |   FOUND[2] maxReplicas: 10
[15:08:37] TRACE |   FOUND[3] targetCPUUtilizationPercentage: 70
[15:08:37] TRACE | === END FACT COVERAGE ===
[15:08:37] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:37] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: How does horizontal pod autoscaling work?
[15:08:37] DEBUG | [query-rewrite] Rewriting query: How does horizontal pod autoscaling work?
[15:08:37] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:37] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=840 timeout=5s
[15:08:37] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:37] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:37] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:38] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.91s
[15:08:38] DEBUG | [anthropic] USAGE: input_tokens=195 output_tokens=13
[15:08:38] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=79
[15:08:38] DEBUG | [anthropic] RESPONSE: kubernetes horizontal pod autoscaler scaling mechanism configuration parameters
[15:08:38] DEBUG | [query-rewrite] SUCCESS in 0.913s: How does horizontal pod autoscaling work? → kubernetes horizontal pod autoscaler scaling mechanism configuration parameters
[15:08:38] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: kubernetes horizontal pod autoscaler scaling mechanism configuration parameters (took 0.913s)
[15:08:38] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: kubernetes horizontal pod autoscaler scaling mechanism configuration parameters CPU HPA replicas
[15:08:38] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:38] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:38] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:38] TRACE | [enriched-hybrid-llm]   SEM[0] idx=25 chunk_id=deployment_guide_fix_6 score=0.7352 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:38] TRACE | [enriched-hybrid-llm]   SEM[1] idx=17 chunk_id=architecture_overview_fix_11 score=0.6192 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:38] TRACE | [enriched-hybrid-llm]   SEM[2] idx=11 chunk_id=architecture_overview_fix_5 score=0.5974 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:38] TRACE | [enriched-hybrid-llm]   SEM[3] idx=6 chunk_id=architecture_overview_fix_0 score=0.5804 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:38] TRACE | [enriched-hybrid-llm]   SEM[4] idx=16 chunk_id=architecture_overview_fix_10 score=0.5632 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:38] TRACE | [enriched-hybrid-llm]   SEM[5] idx=15 chunk_id=architecture_overview_fix_9 score=0.5617 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:38] TRACE | [enriched-hybrid-llm]   SEM[6] idx=18 chunk_id=architecture_overview_fix_12 score=0.5487 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:38] TRACE | [enriched-hybrid-llm]   SEM[7] idx=19 chunk_id=deployment_guide_fix_0 score=0.5464 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:38] TRACE | [enriched-hybrid-llm]   SEM[8] idx=9 chunk_id=architecture_overview_fix_3 score=0.5456 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:38] TRACE | [enriched-hybrid-llm]   SEM[9] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.5393 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:38] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:38] TRACE | [enriched-hybrid-llm]   BM25[0] idx=25 chunk_id=deployment_guide_fix_6 score=20.3747 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:38] TRACE | [enriched-hybrid-llm]   BM25[1] idx=6 chunk_id=architecture_overview_fix_0 score=7.3292 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:38] TRACE | [enriched-hybrid-llm]   BM25[2] idx=36 chunk_id=troubleshooting_guide_fix_8 score=6.0112 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:38] TRACE | [enriched-hybrid-llm]   BM25[3] idx=20 chunk_id=deployment_guide_fix_1 score=5.3359 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:38] TRACE | [enriched-hybrid-llm]   BM25[4] idx=9 chunk_id=architecture_overview_fix_3 score=5.3281 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:38] TRACE | [enriched-hybrid-llm]   BM25[5] idx=32 chunk_id=troubleshooting_guide_fix_4 score=4.5902 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:38] TRACE | [enriched-hybrid-llm]   BM25[6] idx=23 chunk_id=deployment_guide_fix_4 score=4.5015 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:38] TRACE | [enriched-hybrid-llm]   BM25[7] idx=26 chunk_id=deployment_guide_fix_7 score=4.3032 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:38] TRACE | [enriched-hybrid-llm]   BM25[8] idx=19 chunk_id=deployment_guide_fix_0 score=3.6502 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:38] TRACE | [enriched-hybrid-llm]   BM25[9] idx=7 chunk_id=architecture_overview_fix_1 score=3.6436 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:38] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:38] TRACE | [enriched-hybrid-llm]   RRF[0] idx=25 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:08:38] TRACE | [enriched-hybrid-llm]   RRF[1] idx=6 total=0.2958 (sem_rank=3 comp=0.0231 + bm25_rank=1 comp=0.2727)
[15:08:38] TRACE | [enriched-hybrid-llm]   RRF[2] idx=36 total=0.2658 (sem_rank=9 comp=0.0158 + bm25_rank=2 comp=0.2500)
[15:08:38] TRACE | [enriched-hybrid-llm]   RRF[3] idx=20 total=0.2415 (sem_rank=18 comp=0.0107 + bm25_rank=3 comp=0.2308)
[15:08:38] TRACE | [enriched-hybrid-llm]   RRF[4] idx=9 total=0.2310 (sem_rank=8 comp=0.0167 + bm25_rank=4 comp=0.2143)
[15:08:38] TRACE | [enriched-hybrid-llm]   RRF[5] idx=32 total=0.2120 (sem_rank=15 comp=0.0120 + bm25_rank=5 comp=0.2000)
[15:08:38] TRACE | [enriched-hybrid-llm]   RRF[6] idx=23 total=0.1966 (sem_rank=23 comp=0.0091 + bm25_rank=6 comp=0.1875)
[15:08:38] TRACE | [enriched-hybrid-llm]   RRF[7] idx=26 total=0.1915 (sem_rank=10 comp=0.0150 + bm25_rank=7 comp=0.1765)
[15:08:38] TRACE | [enriched-hybrid-llm]   RRF[8] idx=19 total=0.1843 (sem_rank=7 comp=0.0176 + bm25_rank=8 comp=0.1667)
[15:08:38] TRACE | [enriched-hybrid-llm]   RRF[9] idx=17 total=0.1773 (sem_rank=1 comp=0.0273 + bm25_rank=10 comp=0.1500)
[15:08:38] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:38] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:38] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2958 sem_rank=3 bm25_rank=1 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:38] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.2658 sem_rank=9 bm25_rank=2 dominant=bm25 | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:08:38] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.2415 sem_rank=18 bm25_rank=3 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:08:38] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_3 doc_id=architecture_overview rrf_score=0.2310 sem_rank=8 bm25_rank=4 dominant=bm25 | enriched: leader election, Missed execution, Resource Allocation, Key Responsibilities, Reliability Features, Performance Targets, Scheduling Architecture | PostgreSQL, Leader Scheduler, Kafka, Redis, SMS  **Te...
[15:08:38] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:38] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:38] TRACE | Query: How does horizontal pod autoscaling work?
[15:08:38] TRACE | Total key facts: 3
[15:08:38] TRACE | Found facts: 3/3
[15:08:38] TRACE |   FOUND[1] minReplicas: 3
[15:08:38] TRACE |   FOUND[2] maxReplicas: 10
[15:08:38] TRACE |   FOUND[3] targetCPUUtilizationPercentage: 70
[15:08:38] TRACE | === END FACT COVERAGE ===
[15:08:38] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:38] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Pods aren't scaling up during traffic spikes
[15:08:38] DEBUG | [query-rewrite] Rewriting query: Pods aren't scaling up during traffic spikes
[15:08:38] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:38] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=843 timeout=5s
[15:08:38] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:38] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:38] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:39] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.93s
[15:08:39] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=14
[15:08:39] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=81
[15:08:39] DEBUG | [anthropic] RESPONSE: kubernetes horizontal pod autoscaler traffic spike scaling behavior configuration
[15:08:39] DEBUG | [query-rewrite] SUCCESS in 0.926s: Pods aren't scaling up during traffic spikes → kubernetes horizontal pod autoscaler traffic spike scaling behavior configuration
[15:08:39] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: kubernetes horizontal pod autoscaler traffic spike scaling behavior configuration (took 0.926s)
[15:08:39] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: kubernetes horizontal pod autoscaler traffic spike scaling behavior configuration CPU HPA replicas
[15:08:39] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:39] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:39] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:39] TRACE | [enriched-hybrid-llm]   SEM[0] idx=25 chunk_id=deployment_guide_fix_6 score=0.7188 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:39] TRACE | [enriched-hybrid-llm]   SEM[1] idx=17 chunk_id=architecture_overview_fix_11 score=0.6199 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:39] TRACE | [enriched-hybrid-llm]   SEM[2] idx=11 chunk_id=architecture_overview_fix_5 score=0.5782 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:39] TRACE | [enriched-hybrid-llm]   SEM[3] idx=16 chunk_id=architecture_overview_fix_10 score=0.5685 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:39] TRACE | [enriched-hybrid-llm]   SEM[4] idx=6 chunk_id=architecture_overview_fix_0 score=0.5611 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:39] TRACE | [enriched-hybrid-llm]   SEM[5] idx=10 chunk_id=architecture_overview_fix_4 score=0.5521 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:39] TRACE | [enriched-hybrid-llm]   SEM[6] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.5473 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:39] TRACE | [enriched-hybrid-llm]   SEM[7] idx=9 chunk_id=architecture_overview_fix_3 score=0.5446 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:39] TRACE | [enriched-hybrid-llm]   SEM[8] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.5434 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:39] TRACE | [enriched-hybrid-llm]   SEM[9] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.5423 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:39] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:39] TRACE | [enriched-hybrid-llm]   BM25[0] idx=25 chunk_id=deployment_guide_fix_6 score=20.3747 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:39] TRACE | [enriched-hybrid-llm]   BM25[1] idx=6 chunk_id=architecture_overview_fix_0 score=7.3292 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:39] TRACE | [enriched-hybrid-llm]   BM25[2] idx=17 chunk_id=architecture_overview_fix_11 score=6.2719 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:39] TRACE | [enriched-hybrid-llm]   BM25[3] idx=36 chunk_id=troubleshooting_guide_fix_8 score=6.0112 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:39] TRACE | [enriched-hybrid-llm]   BM25[4] idx=33 chunk_id=troubleshooting_guide_fix_5 score=5.5059 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:39] TRACE | [enriched-hybrid-llm]   BM25[5] idx=20 chunk_id=deployment_guide_fix_1 score=5.3359 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:39] TRACE | [enriched-hybrid-llm]   BM25[6] idx=32 chunk_id=troubleshooting_guide_fix_4 score=4.5902 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:39] TRACE | [enriched-hybrid-llm]   BM25[7] idx=23 chunk_id=deployment_guide_fix_4 score=4.5015 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:39] TRACE | [enriched-hybrid-llm]   BM25[8] idx=26 chunk_id=deployment_guide_fix_7 score=4.3032 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:39] TRACE | [enriched-hybrid-llm]   BM25[9] idx=19 chunk_id=deployment_guide_fix_0 score=3.6502 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:39] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:39] TRACE | [enriched-hybrid-llm]   RRF[0] idx=25 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:08:39] TRACE | [enriched-hybrid-llm]   RRF[1] idx=6 total=0.2942 (sem_rank=4 comp=0.0214 + bm25_rank=1 comp=0.2727)
[15:08:39] TRACE | [enriched-hybrid-llm]   RRF[2] idx=17 total=0.2773 (sem_rank=1 comp=0.0273 + bm25_rank=2 comp=0.2500)
[15:08:39] TRACE | [enriched-hybrid-llm]   RRF[3] idx=36 total=0.2474 (sem_rank=8 comp=0.0167 + bm25_rank=3 comp=0.2308)
[15:08:39] TRACE | [enriched-hybrid-llm]   RRF[4] idx=33 total=0.2234 (sem_rank=23 comp=0.0091 + bm25_rank=4 comp=0.2143)
[15:08:39] TRACE | [enriched-hybrid-llm]   RRF[5] idx=20 total=0.2103 (sem_rank=19 comp=0.0103 + bm25_rank=5 comp=0.2000)
[15:08:39] TRACE | [enriched-hybrid-llm]   RRF[6] idx=32 total=0.2033 (sem_rank=9 comp=0.0158 + bm25_rank=6 comp=0.1875)
[15:08:39] TRACE | [enriched-hybrid-llm]   RRF[7] idx=23 total=0.1861 (sem_rank=21 comp=0.0097 + bm25_rank=7 comp=0.1765)
[15:08:39] TRACE | [enriched-hybrid-llm]   RRF[8] idx=26 total=0.1803 (sem_rank=12 comp=0.0136 + bm25_rank=8 comp=0.1667)
[15:08:39] TRACE | [enriched-hybrid-llm]   RRF[9] idx=19 total=0.1704 (sem_rank=14 comp=0.0125 + bm25_rank=9 comp=0.1579)
[15:08:39] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:39] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:39] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2942 sem_rank=4 bm25_rank=1 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:39] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_11 doc_id=architecture_overview rrf_score=0.2773 sem_rank=1 bm25_rank=2 dominant=bm25 | enriched: Kafka Broker, Redis Replica, Backup Strategy, Backup Schedule, Kubernetes health, Weekly automated, automatic promotion | Redis Replica, Kafka Broker, Sentinel, S3, Glacier  Service (2) - PostgreSQL P...
[15:08:39] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.2474 sem_rank=8 bm25_rank=3 dominant=bm25 | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:08:39] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.2234 sem_rank=23 bm25_rank=4 dominant=bm25 | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:08:39] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:39] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:39] TRACE | Query: Pods aren't scaling up during traffic spikes
[15:08:39] TRACE | Total key facts: 3
[15:08:39] TRACE | Found facts: 2/3
[15:08:39] TRACE |   FOUND[1] minReplicas: 3
[15:08:39] TRACE |   FOUND[2] maxReplicas: 10
[15:08:39] TRACE | Missed facts: 1/3
[15:08:39] TRACE |   MISSED[1] targetCPUUtilizationPercentage: 70
[15:08:39] TRACE |     -> Found in chunk_id=deployment_guide_fix_1 (rank not in top-5)
[15:08:39] TRACE | === END FACT COVERAGE ===
[15:08:39] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:39] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: autoscaling config
[15:08:39] DEBUG | [query-rewrite] Rewriting query: autoscaling config
[15:08:39] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:39] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=817 timeout=5s
[15:08:39] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:39] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:39] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:40] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.88s
[15:08:40] DEBUG | [anthropic] USAGE: input_tokens=190 output_tokens=13
[15:08:40] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=78
[15:08:40] DEBUG | [anthropic] RESPONSE: autoscaling configuration parameters scaling group dynamic resource allocation
[15:08:40] DEBUG | [query-rewrite] SUCCESS in 0.877s: autoscaling config → autoscaling configuration parameters scaling group dynamic resource allocation
[15:08:40] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: autoscaling configuration parameters scaling group dynamic resource allocation (took 0.877s)
[15:08:40] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: autoscaling configuration parameters scaling group dynamic resource allocation CPU HPA autoscaler horizontal pod replicas utilization
[15:08:40] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:40] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:40] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:40] TRACE | [enriched-hybrid-llm]   SEM[0] idx=25 chunk_id=deployment_guide_fix_6 score=0.6971 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:40] TRACE | [enriched-hybrid-llm]   SEM[1] idx=11 chunk_id=architecture_overview_fix_5 score=0.5970 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:40] TRACE | [enriched-hybrid-llm]   SEM[2] idx=17 chunk_id=architecture_overview_fix_11 score=0.5956 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:40] TRACE | [enriched-hybrid-llm]   SEM[3] idx=6 chunk_id=architecture_overview_fix_0 score=0.5844 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:40] TRACE | [enriched-hybrid-llm]   SEM[4] idx=16 chunk_id=architecture_overview_fix_10 score=0.5751 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:40] TRACE | [enriched-hybrid-llm]   SEM[5] idx=8 chunk_id=architecture_overview_fix_2 score=0.5744 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:40] TRACE | [enriched-hybrid-llm]   SEM[6] idx=18 chunk_id=architecture_overview_fix_12 score=0.5699 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:40] TRACE | [enriched-hybrid-llm]   SEM[7] idx=7 chunk_id=architecture_overview_fix_1 score=0.5676 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:40] TRACE | [enriched-hybrid-llm]   SEM[8] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.5602 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:40] TRACE | [enriched-hybrid-llm]   SEM[9] idx=15 chunk_id=architecture_overview_fix_9 score=0.5515 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:40] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:40] TRACE | [enriched-hybrid-llm]   BM25[0] idx=25 chunk_id=deployment_guide_fix_6 score=30.7290 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:40] TRACE | [enriched-hybrid-llm]   BM25[1] idx=16 chunk_id=architecture_overview_fix_10 score=8.8982 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:40] TRACE | [enriched-hybrid-llm]   BM25[2] idx=23 chunk_id=deployment_guide_fix_4 score=8.0610 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:40] TRACE | [enriched-hybrid-llm]   BM25[3] idx=15 chunk_id=architecture_overview_fix_9 score=6.0391 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:40] TRACE | [enriched-hybrid-llm]   BM25[4] idx=26 chunk_id=deployment_guide_fix_7 score=5.5875 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:40] TRACE | [enriched-hybrid-llm]   BM25[5] idx=6 chunk_id=architecture_overview_fix_0 score=5.3102 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:40] TRACE | [enriched-hybrid-llm]   BM25[6] idx=4 chunk_id=api_reference_fix_4 score=4.9659 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:40] TRACE | [enriched-hybrid-llm]   BM25[7] idx=42 chunk_id=user_guide_fix_2 score=4.9428 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:08:40] TRACE | [enriched-hybrid-llm]   BM25[8] idx=7 chunk_id=architecture_overview_fix_1 score=4.9341 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:40] TRACE | [enriched-hybrid-llm]   BM25[9] idx=31 chunk_id=troubleshooting_guide_fix_3 score=4.8865 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:40] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:40] TRACE | [enriched-hybrid-llm]   RRF[0] idx=25 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:08:40] TRACE | [enriched-hybrid-llm]   RRF[1] idx=16 total=0.2942 (sem_rank=4 comp=0.0214 + bm25_rank=1 comp=0.2727)
[15:08:40] TRACE | [enriched-hybrid-llm]   RRF[2] idx=23 total=0.2583 (sem_rank=26 comp=0.0083 + bm25_rank=2 comp=0.2500)
[15:08:40] TRACE | [enriched-hybrid-llm]   RRF[3] idx=15 total=0.2466 (sem_rank=9 comp=0.0158 + bm25_rank=3 comp=0.2308)
[15:08:40] TRACE | [enriched-hybrid-llm]   RRF[4] idx=6 total=0.2231 (sem_rank=3 comp=0.0231 + bm25_rank=5 comp=0.2000)
[15:08:40] TRACE | [enriched-hybrid-llm]   RRF[5] idx=26 total=0.2213 (sem_rank=33 comp=0.0070 + bm25_rank=4 comp=0.2143)
[15:08:40] TRACE | [enriched-hybrid-llm]   RRF[6] idx=4 total=0.1934 (sem_rank=41 comp=0.0059 + bm25_rank=6 comp=0.1875)
[15:08:40] TRACE | [enriched-hybrid-llm]   RRF[7] idx=7 total=0.1843 (sem_rank=7 comp=0.0176 + bm25_rank=8 comp=0.1667)
[15:08:40] TRACE | [enriched-hybrid-llm]   RRF[8] idx=42 total=0.1821 (sem_rank=43 comp=0.0057 + bm25_rank=7 comp=0.1765)
[15:08:40] TRACE | [enriched-hybrid-llm]   RRF[9] idx=31 total=0.1746 (sem_rank=8 comp=0.0167 + bm25_rank=9 comp=0.1579)
[15:08:40] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:40] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:40] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2942 sem_rank=4 bm25_rank=1 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:40] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.2583 sem_rank=26 bm25_rank=2 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:08:40] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_9 doc_id=architecture_overview rrf_score=0.2466 sem_rank=9 bm25_rank=3 dominant=bm25 | enriched: API Operations, API key, Redis SET, Redis DEL, API Gateway, Simple SELECT, Performance Characteristics | API, TTL - Encryption, Request, TTL, PostgreSQL  per API key (default: 1000 RPM) ### Secrets Ma...
[15:08:40] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2231 sem_rank=3 bm25_rank=5 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:40] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:40] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:40] TRACE | Query: autoscaling config
[15:08:40] TRACE | Total key facts: 3
[15:08:40] TRACE | Found facts: 2/3
[15:08:40] TRACE |   FOUND[1] minReplicas: 3
[15:08:40] TRACE |   FOUND[2] maxReplicas: 10
[15:08:40] TRACE | Missed facts: 1/3
[15:08:40] TRACE |   MISSED[1] targetCPUUtilizationPercentage: 70
[15:08:40] TRACE |     -> Found in chunk_id=deployment_guide_fix_1 (rank not in top-5)
[15:08:40] TRACE | === END FACT COVERAGE ===
[15:08:40] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:40] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: I need to configure autoscaling, what are the min/max replicas and thresholds?
[15:08:40] DEBUG | [query-rewrite] Rewriting query: I need to configure autoscaling, what are the min/max replicas and thresholds?
[15:08:40] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:40] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=877 timeout=5s
[15:08:40] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:40] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:40] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:41] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.07s
[15:08:41] DEBUG | [anthropic] USAGE: input_tokens=207 output_tokens=15
[15:08:41] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=74
[15:08:41] DEBUG | [anthropic] RESPONSE: autoscaling configuration minimum maximum replica count scaling thresholds
[15:08:41] DEBUG | [query-rewrite] SUCCESS in 1.074s: I need to configure autoscaling, what are the min/max replicas and thresholds? → autoscaling configuration minimum maximum replica count scaling thresholds
[15:08:41] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: autoscaling configuration minimum maximum replica count scaling thresholds (took 1.074s)
[15:08:41] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: autoscaling configuration minimum maximum replica count scaling thresholds CPU HPA autoscaler horizontal pod replicas utilization
[15:08:41] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:41] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:41] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:41] TRACE | [enriched-hybrid-llm]   SEM[0] idx=25 chunk_id=deployment_guide_fix_6 score=0.6868 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:41] TRACE | [enriched-hybrid-llm]   SEM[1] idx=17 chunk_id=architecture_overview_fix_11 score=0.6124 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:41] TRACE | [enriched-hybrid-llm]   SEM[2] idx=11 chunk_id=architecture_overview_fix_5 score=0.6036 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:41] TRACE | [enriched-hybrid-llm]   SEM[3] idx=7 chunk_id=architecture_overview_fix_1 score=0.5929 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:41] TRACE | [enriched-hybrid-llm]   SEM[4] idx=16 chunk_id=architecture_overview_fix_10 score=0.5847 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:41] TRACE | [enriched-hybrid-llm]   SEM[5] idx=6 chunk_id=architecture_overview_fix_0 score=0.5766 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:41] TRACE | [enriched-hybrid-llm]   SEM[6] idx=18 chunk_id=architecture_overview_fix_12 score=0.5759 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:41] TRACE | [enriched-hybrid-llm]   SEM[7] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.5619 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:41] TRACE | [enriched-hybrid-llm]   SEM[8] idx=8 chunk_id=architecture_overview_fix_2 score=0.5544 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:41] TRACE | [enriched-hybrid-llm]   SEM[9] idx=9 chunk_id=architecture_overview_fix_3 score=0.5508 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:41] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:41] TRACE | [enriched-hybrid-llm]   BM25[0] idx=25 chunk_id=deployment_guide_fix_6 score=28.5198 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:41] TRACE | [enriched-hybrid-llm]   BM25[1] idx=16 chunk_id=architecture_overview_fix_10 score=16.2490 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:41] TRACE | [enriched-hybrid-llm]   BM25[2] idx=23 chunk_id=deployment_guide_fix_4 score=11.1950 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:41] TRACE | [enriched-hybrid-llm]   BM25[3] idx=32 chunk_id=troubleshooting_guide_fix_4 score=7.2561 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:41] TRACE | [enriched-hybrid-llm]   BM25[4] idx=31 chunk_id=troubleshooting_guide_fix_3 score=6.5271 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:41] TRACE | [enriched-hybrid-llm]   BM25[5] idx=6 chunk_id=architecture_overview_fix_0 score=5.3102 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:41] TRACE | [enriched-hybrid-llm]   BM25[6] idx=37 chunk_id=troubleshooting_guide_fix_9 score=5.2178 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:41] TRACE | [enriched-hybrid-llm]   BM25[7] idx=17 chunk_id=architecture_overview_fix_11 score=5.1591 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:41] TRACE | [enriched-hybrid-llm]   BM25[8] idx=43 chunk_id=user_guide_fix_3 score=4.5466 | ``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...
[15:08:41] TRACE | [enriched-hybrid-llm]   BM25[9] idx=26 chunk_id=deployment_guide_fix_7 score=4.3032 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:41] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:41] TRACE | [enriched-hybrid-llm]   RRF[0] idx=25 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:08:41] TRACE | [enriched-hybrid-llm]   RRF[1] idx=16 total=0.2942 (sem_rank=4 comp=0.0214 + bm25_rank=1 comp=0.2727)
[15:08:41] TRACE | [enriched-hybrid-llm]   RRF[2] idx=23 total=0.2575 (sem_rank=30 comp=0.0075 + bm25_rank=2 comp=0.2500)
[15:08:41] TRACE | [enriched-hybrid-llm]   RRF[3] idx=32 total=0.2401 (sem_rank=22 comp=0.0094 + bm25_rank=3 comp=0.2308)
[15:08:41] TRACE | [enriched-hybrid-llm]   RRF[4] idx=31 total=0.2319 (sem_rank=7 comp=0.0176 + bm25_rank=4 comp=0.2143)
[15:08:41] TRACE | [enriched-hybrid-llm]   RRF[5] idx=6 total=0.2200 (sem_rank=5 comp=0.0200 + bm25_rank=5 comp=0.2000)
[15:08:41] TRACE | [enriched-hybrid-llm]   RRF[6] idx=17 total=0.2037 (sem_rank=1 comp=0.0273 + bm25_rank=7 comp=0.1765)
[15:08:41] TRACE | [enriched-hybrid-llm]   RRF[7] idx=37 total=0.1966 (sem_rank=23 comp=0.0091 + bm25_rank=6 comp=0.1875)
[15:08:41] TRACE | [enriched-hybrid-llm]   RRF[8] idx=7 total=0.1731 (sem_rank=3 comp=0.0231 + bm25_rank=10 comp=0.1500)
[15:08:41] TRACE | [enriched-hybrid-llm]   RRF[9] idx=43 total=0.1718 (sem_rank=48 comp=0.0052 + bm25_rank=8 comp=0.1667)
[15:08:41] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:41] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:41] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2942 sem_rank=4 bm25_rank=1 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:41] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.2575 sem_rank=30 bm25_rank=2 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:08:41] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.2401 sem_rank=22 bm25_rank=3 dominant=bm25 | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:08:41] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.2319 sem_rank=7 bm25_rank=4 dominant=bm25 | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:08:41] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:41] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:41] TRACE | Query: I need to configure autoscaling, what are the min/max replicas and thresholds?
[15:08:41] TRACE | Total key facts: 3
[15:08:41] TRACE | Found facts: 2/3
[15:08:41] TRACE |   FOUND[1] minReplicas: 3
[15:08:41] TRACE |   FOUND[2] maxReplicas: 10
[15:08:41] TRACE | Missed facts: 1/3
[15:08:41] TRACE |   MISSED[1] targetCPUUtilizationPercentage: 70
[15:08:41] TRACE |     -> Found in chunk_id=deployment_guide_fix_1 (rank not in top-5)
[15:08:41] TRACE | === END FACT COVERAGE ===
[15:08:41] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:41] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why do we have 3 replicas even with low traffic?
[15:08:41] DEBUG | [query-rewrite] Rewriting query: Why do we have 3 replicas even with low traffic?
[15:08:41] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:41] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=847 timeout=5s
[15:08:41] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:41] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:41] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:42] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.23s
[15:08:42] DEBUG | [anthropic] USAGE: input_tokens=200 output_tokens=14
[15:08:42] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=84
[15:08:42] DEBUG | [anthropic] RESPONSE: database replication factor minimum replicas high availability cluster configuration
[15:08:42] DEBUG | [query-rewrite] SUCCESS in 1.231s: Why do we have 3 replicas even with low traffic? → database replication factor minimum replicas high availability cluster configuration
[15:08:42] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: database replication factor minimum replicas high availability cluster configuration (took 1.231s)
[15:08:42] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: database replication factor minimum replicas high availability cluster configuration Kafka PostgreSQL Redis data layer storage
[15:08:42] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:42] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:42] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:42] TRACE | [enriched-hybrid-llm]   SEM[0] idx=17 chunk_id=architecture_overview_fix_11 score=0.7143 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:42] TRACE | [enriched-hybrid-llm]   SEM[1] idx=11 chunk_id=architecture_overview_fix_5 score=0.7128 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:42] TRACE | [enriched-hybrid-llm]   SEM[2] idx=9 chunk_id=architecture_overview_fix_3 score=0.6718 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:42] TRACE | [enriched-hybrid-llm]   SEM[3] idx=18 chunk_id=architecture_overview_fix_12 score=0.6468 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:42] TRACE | [enriched-hybrid-llm]   SEM[4] idx=15 chunk_id=architecture_overview_fix_9 score=0.6414 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:42] TRACE | [enriched-hybrid-llm]   SEM[5] idx=25 chunk_id=deployment_guide_fix_6 score=0.6331 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:42] TRACE | [enriched-hybrid-llm]   SEM[6] idx=14 chunk_id=architecture_overview_fix_8 score=0.6327 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:42] TRACE | [enriched-hybrid-llm]   SEM[7] idx=12 chunk_id=architecture_overview_fix_6 score=0.6318 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:42] TRACE | [enriched-hybrid-llm]   SEM[8] idx=16 chunk_id=architecture_overview_fix_10 score=0.6316 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:42] TRACE | [enriched-hybrid-llm]   SEM[9] idx=8 chunk_id=architecture_overview_fix_2 score=0.6212 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:42] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:42] TRACE | [enriched-hybrid-llm]   BM25[0] idx=11 chunk_id=architecture_overview_fix_5 score=17.4236 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:42] TRACE | [enriched-hybrid-llm]   BM25[1] idx=6 chunk_id=architecture_overview_fix_0 score=11.8427 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:42] TRACE | [enriched-hybrid-llm]   BM25[2] idx=16 chunk_id=architecture_overview_fix_10 score=10.5870 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:42] TRACE | [enriched-hybrid-llm]   BM25[3] idx=20 chunk_id=deployment_guide_fix_1 score=8.8197 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:42] TRACE | [enriched-hybrid-llm]   BM25[4] idx=19 chunk_id=deployment_guide_fix_0 score=8.2137 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:42] TRACE | [enriched-hybrid-llm]   BM25[5] idx=17 chunk_id=architecture_overview_fix_11 score=7.6178 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:42] TRACE | [enriched-hybrid-llm]   BM25[6] idx=18 chunk_id=architecture_overview_fix_12 score=7.3771 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:42] TRACE | [enriched-hybrid-llm]   BM25[7] idx=12 chunk_id=architecture_overview_fix_6 score=6.2345 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:08:42] TRACE | [enriched-hybrid-llm]   BM25[8] idx=14 chunk_id=architecture_overview_fix_8 score=6.0494 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:42] TRACE | [enriched-hybrid-llm]   BM25[9] idx=26 chunk_id=deployment_guide_fix_7 score=5.9356 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:08:42] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:42] TRACE | [enriched-hybrid-llm]   RRF[0] idx=11 total=0.3273 (sem_rank=1 comp=0.0273 + bm25_rank=0 comp=0.3000)
[15:08:42] TRACE | [enriched-hybrid-llm]   RRF[1] idx=6 total=0.2852 (sem_rank=14 comp=0.0125 + bm25_rank=1 comp=0.2727)
[15:08:42] TRACE | [enriched-hybrid-llm]   RRF[2] idx=16 total=0.2667 (sem_rank=8 comp=0.0167 + bm25_rank=2 comp=0.2500)
[15:08:42] TRACE | [enriched-hybrid-llm]   RRF[3] idx=20 total=0.2411 (sem_rank=19 comp=0.0103 + bm25_rank=3 comp=0.2308)
[15:08:42] TRACE | [enriched-hybrid-llm]   RRF[4] idx=17 total=0.2300 (sem_rank=0 comp=0.0300 + bm25_rank=5 comp=0.2000)
[15:08:42] TRACE | [enriched-hybrid-llm]   RRF[5] idx=19 total=0.2254 (sem_rank=17 comp=0.0111 + bm25_rank=4 comp=0.2143)
[15:08:42] TRACE | [enriched-hybrid-llm]   RRF[6] idx=18 total=0.2106 (sem_rank=3 comp=0.0231 + bm25_rank=6 comp=0.1875)
[15:08:42] TRACE | [enriched-hybrid-llm]   RRF[7] idx=12 total=0.1941 (sem_rank=7 comp=0.0176 + bm25_rank=7 comp=0.1765)
[15:08:42] TRACE | [enriched-hybrid-llm]   RRF[8] idx=14 total=0.1854 (sem_rank=6 comp=0.0187 + bm25_rank=8 comp=0.1667)
[15:08:42] TRACE | [enriched-hybrid-llm]   RRF[9] idx=26 total=0.1662 (sem_rank=26 comp=0.0083 + bm25_rank=9 comp=0.1579)
[15:08:42] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:42] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.3273 sem_rank=1 bm25_rank=0 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:08:42] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2852 sem_rank=14 bm25_rank=1 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:42] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2667 sem_rank=8 bm25_rank=2 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:42] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.2411 sem_rank=19 bm25_rank=3 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:08:42] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_11 doc_id=architecture_overview rrf_score=0.2300 sem_rank=0 bm25_rank=5 dominant=bm25 | enriched: Kafka Broker, Redis Replica, Backup Strategy, Backup Schedule, Kubernetes health, Weekly automated, automatic promotion | Redis Replica, Kafka Broker, Sentinel, S3, Glacier  Service (2) - PostgreSQL P...
[15:08:42] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:42] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:42] TRACE | Query: Why do we have 3 replicas even with low traffic?
[15:08:42] TRACE | Total key facts: 3
[15:08:42] TRACE | Found facts: 3/3
[15:08:42] TRACE |   FOUND[1] minReplicas: 3
[15:08:42] TRACE |   FOUND[2] maxReplicas: 10
[15:08:42] TRACE |   FOUND[3] targetCPUUtilizationPercentage: 70
[15:08:42] TRACE | === END FACT COVERAGE ===
[15:08:42] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:42] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What is the P99 latency target for API operations?
[15:08:42] DEBUG | [query-rewrite] Rewriting query: What is the P99 latency target for API operations?
[15:08:42] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:42] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=849 timeout=5s
[15:08:42] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:42] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:42] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:44] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.13s
[15:08:44] DEBUG | [anthropic] USAGE: input_tokens=199 output_tokens=15
[15:08:44] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=66
[15:08:44] DEBUG | [anthropic] RESPONSE: API performance p99 latency service level objective target metrics
[15:08:44] DEBUG | [query-rewrite] SUCCESS in 1.131s: What is the P99 latency target for API operations? → API performance p99 latency service level objective target metrics
[15:08:44] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: API performance p99 latency service level objective target metrics (took 1.131s)
[15:08:44] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:44] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:44] TRACE | [enriched-hybrid-llm]   SEM[0] idx=16 chunk_id=architecture_overview_fix_10 score=0.6421 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:44] TRACE | [enriched-hybrid-llm]   SEM[1] idx=7 chunk_id=architecture_overview_fix_1 score=0.6245 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:44] TRACE | [enriched-hybrid-llm]   SEM[2] idx=25 chunk_id=deployment_guide_fix_6 score=0.6163 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:44] TRACE | [enriched-hybrid-llm]   SEM[3] idx=3 chunk_id=api_reference_fix_3 score=0.6146 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:44] TRACE | [enriched-hybrid-llm]   SEM[4] idx=6 chunk_id=architecture_overview_fix_0 score=0.5971 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:44] TRACE | [enriched-hybrid-llm]   SEM[5] idx=15 chunk_id=architecture_overview_fix_9 score=0.5917 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:44] TRACE | [enriched-hybrid-llm]   SEM[6] idx=8 chunk_id=architecture_overview_fix_2 score=0.5823 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:44] TRACE | [enriched-hybrid-llm]   SEM[7] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.5733 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:44] TRACE | [enriched-hybrid-llm]   SEM[8] idx=18 chunk_id=architecture_overview_fix_12 score=0.5670 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:44] TRACE | [enriched-hybrid-llm]   SEM[9] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.5658 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:44] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:44] TRACE | [enriched-hybrid-llm]   BM25[0] idx=25 chunk_id=deployment_guide_fix_6 score=10.3471 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:44] TRACE | [enriched-hybrid-llm]   BM25[1] idx=15 chunk_id=architecture_overview_fix_9 score=7.6278 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:44] TRACE | [enriched-hybrid-llm]   BM25[2] idx=38 chunk_id=troubleshooting_guide_fix_10 score=7.1370 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:44] TRACE | [enriched-hybrid-llm]   BM25[3] idx=16 chunk_id=architecture_overview_fix_10 score=6.8879 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:44] TRACE | [enriched-hybrid-llm]   BM25[4] idx=6 chunk_id=architecture_overview_fix_0 score=6.8838 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:44] TRACE | [enriched-hybrid-llm]   BM25[5] idx=30 chunk_id=troubleshooting_guide_fix_2 score=6.6673 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:44] TRACE | [enriched-hybrid-llm]   BM25[6] idx=29 chunk_id=troubleshooting_guide_fix_1 score=6.3858 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:44] TRACE | [enriched-hybrid-llm]   BM25[7] idx=10 chunk_id=architecture_overview_fix_4 score=5.9614 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:44] TRACE | [enriched-hybrid-llm]   BM25[8] idx=7 chunk_id=architecture_overview_fix_1 score=5.2945 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:44] TRACE | [enriched-hybrid-llm]   BM25[9] idx=36 chunk_id=troubleshooting_guide_fix_8 score=4.5432 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:44] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:44] TRACE | [enriched-hybrid-llm]   RRF[0] idx=25 total=0.0328 (sem_rank=2 comp=0.0161 + bm25_rank=0 comp=0.0167)
[15:08:44] TRACE | [enriched-hybrid-llm]   RRF[1] idx=16 total=0.0325 (sem_rank=0 comp=0.0167 + bm25_rank=3 comp=0.0159)
[15:08:44] TRACE | [enriched-hybrid-llm]   RRF[2] idx=15 total=0.0318 (sem_rank=5 comp=0.0154 + bm25_rank=1 comp=0.0164)
[15:08:44] TRACE | [enriched-hybrid-llm]   RRF[3] idx=6 total=0.0312 (sem_rank=4 comp=0.0156 + bm25_rank=4 comp=0.0156)
[15:08:44] TRACE | [enriched-hybrid-llm]   RRF[4] idx=7 total=0.0311 (sem_rank=1 comp=0.0164 + bm25_rank=8 comp=0.0147)
[15:08:44] TRACE | [enriched-hybrid-llm]   RRF[5] idx=38 total=0.0306 (sem_rank=9 comp=0.0145 + bm25_rank=2 comp=0.0161)
[15:08:44] TRACE | [enriched-hybrid-llm]   RRF[6] idx=30 total=0.0303 (sem_rank=7 comp=0.0149 + bm25_rank=5 comp=0.0154)
[15:08:44] TRACE | [enriched-hybrid-llm]   RRF[7] idx=3 total=0.0298 (sem_rank=3 comp=0.0159 + bm25_rank=12 comp=0.0139)
[15:08:44] TRACE | [enriched-hybrid-llm]   RRF[8] idx=10 total=0.0288 (sem_rank=12 comp=0.0139 + bm25_rank=7 comp=0.0149)
[15:08:44] TRACE | [enriched-hybrid-llm]   RRF[9] idx=23 total=0.0280 (sem_rank=10 comp=0.0143 + bm25_rank=13 comp=0.0137)
[15:08:44] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:44] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0328 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:44] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0325 sem_rank=0 bm25_rank=3 dominant=semantic | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:44] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_9 doc_id=architecture_overview rrf_score=0.0318 sem_rank=5 bm25_rank=1 dominant=bm25 | enriched: API Operations, API key, Redis SET, Redis DEL, API Gateway, Simple SELECT, Performance Characteristics | API, TTL - Encryption, Request, TTL, PostgreSQL  per API key (default: 1000 RPM) ### Secrets Ma...
[15:08:44] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.0312 sem_rank=4 bm25_rank=4 dominant=balanced | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:44] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.0311 sem_rank=1 bm25_rank=8 dominant=semantic | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:08:44] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:44] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:44] TRACE | Query: What is the P99 latency target for API operations?
[15:08:44] TRACE | Total key facts: 2
[15:08:44] TRACE | Found facts: 2/2
[15:08:44] TRACE |   FOUND[1] P99 latency: < 200ms
[15:08:44] TRACE |   FOUND[2] average P99 latency of 180ms for API operations
[15:08:44] TRACE | === END FACT COVERAGE ===
[15:08:44] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:44] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What's the 99th percentile response time target?
[15:08:44] DEBUG | [query-rewrite] Rewriting query: What's the 99th percentile response time target?
[15:08:44] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:44] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=847 timeout=5s
[15:08:44] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:44] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:44] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:45] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.07s
[15:08:45] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=17
[15:08:45] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=80
[15:08:45] DEBUG | [anthropic] RESPONSE: service level objective performance latency 99th percentile response time target
[15:08:45] DEBUG | [query-rewrite] SUCCESS in 1.073s: What's the 99th percentile response time target? → service level objective performance latency 99th percentile response time target
[15:08:45] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: service level objective performance latency 99th percentile response time target (took 1.073s)
[15:08:45] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:45] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:45] TRACE | [enriched-hybrid-llm]   SEM[0] idx=7 chunk_id=architecture_overview_fix_1 score=0.5858 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:45] TRACE | [enriched-hybrid-llm]   SEM[1] idx=16 chunk_id=architecture_overview_fix_10 score=0.5685 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:45] TRACE | [enriched-hybrid-llm]   SEM[2] idx=25 chunk_id=deployment_guide_fix_6 score=0.5542 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:45] TRACE | [enriched-hybrid-llm]   SEM[3] idx=18 chunk_id=architecture_overview_fix_12 score=0.5398 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:45] TRACE | [enriched-hybrid-llm]   SEM[4] idx=6 chunk_id=architecture_overview_fix_0 score=0.5320 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:45] TRACE | [enriched-hybrid-llm]   SEM[5] idx=3 chunk_id=api_reference_fix_3 score=0.5295 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:45] TRACE | [enriched-hybrid-llm]   SEM[6] idx=9 chunk_id=architecture_overview_fix_3 score=0.5287 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:45] TRACE | [enriched-hybrid-llm]   SEM[7] idx=8 chunk_id=architecture_overview_fix_2 score=0.5284 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:45] TRACE | [enriched-hybrid-llm]   SEM[8] idx=15 chunk_id=architecture_overview_fix_9 score=0.5223 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:45] TRACE | [enriched-hybrid-llm]   SEM[9] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.5201 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:45] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:45] TRACE | [enriched-hybrid-llm]   BM25[0] idx=25 chunk_id=deployment_guide_fix_6 score=7.8881 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:45] TRACE | [enriched-hybrid-llm]   BM25[1] idx=29 chunk_id=troubleshooting_guide_fix_1 score=6.4310 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:45] TRACE | [enriched-hybrid-llm]   BM25[2] idx=15 chunk_id=architecture_overview_fix_9 score=6.0541 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:45] TRACE | [enriched-hybrid-llm]   BM25[3] idx=30 chunk_id=troubleshooting_guide_fix_2 score=5.7556 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:45] TRACE | [enriched-hybrid-llm]   BM25[4] idx=10 chunk_id=architecture_overview_fix_4 score=5.5895 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:45] TRACE | [enriched-hybrid-llm]   BM25[5] idx=27 chunk_id=deployment_guide_fix_8 score=4.3091 | UTC - **Secondary**: Wednesday 10:00-12:00 UTC All deployments should target these windows to minimi...
[15:08:45] TRACE | [enriched-hybrid-llm]   BM25[6] idx=3 chunk_id=api_reference_fix_3 score=4.3000 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:45] TRACE | [enriched-hybrid-llm]   BM25[7] idx=36 chunk_id=troubleshooting_guide_fix_8 score=3.7883 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:45] TRACE | [enriched-hybrid-llm]   BM25[8] idx=16 chunk_id=architecture_overview_fix_10 score=3.7027 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:45] TRACE | [enriched-hybrid-llm]   BM25[9] idx=38 chunk_id=troubleshooting_guide_fix_10 score=3.7013 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:45] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:45] TRACE | [enriched-hybrid-llm]   RRF[0] idx=25 total=0.0328 (sem_rank=2 comp=0.0161 + bm25_rank=0 comp=0.0167)
[15:08:45] TRACE | [enriched-hybrid-llm]   RRF[1] idx=16 total=0.0311 (sem_rank=1 comp=0.0164 + bm25_rank=8 comp=0.0147)
[15:08:45] TRACE | [enriched-hybrid-llm]   RRF[2] idx=15 total=0.0308 (sem_rank=8 comp=0.0147 + bm25_rank=2 comp=0.0161)
[15:08:45] TRACE | [enriched-hybrid-llm]   RRF[3] idx=3 total=0.0305 (sem_rank=5 comp=0.0154 + bm25_rank=6 comp=0.0152)
[15:08:45] TRACE | [enriched-hybrid-llm]   RRF[4] idx=10 total=0.0299 (sem_rank=10 comp=0.0143 + bm25_rank=4 comp=0.0156)
[15:08:45] TRACE | [enriched-hybrid-llm]   RRF[5] idx=30 total=0.0294 (sem_rank=14 comp=0.0135 + bm25_rank=3 comp=0.0159)
[15:08:45] TRACE | [enriched-hybrid-llm]   RRF[6] idx=38 total=0.0290 (sem_rank=9 comp=0.0145 + bm25_rank=9 comp=0.0145)
[15:08:45] TRACE | [enriched-hybrid-llm]   RRF[7] idx=7 total=0.0289 (sem_rank=0 comp=0.0167 + bm25_rank=22 comp=0.0122)
[15:08:45] TRACE | [enriched-hybrid-llm]   RRF[8] idx=9 total=0.0289 (sem_rank=6 comp=0.0152 + bm25_rank=13 comp=0.0137)
[15:08:45] TRACE | [enriched-hybrid-llm]   RRF[9] idx=11 total=0.0284 (sem_rank=11 comp=0.0141 + bm25_rank=10 comp=0.0143)
[15:08:45] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:45] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0328 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:45] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0311 sem_rank=1 bm25_rank=8 dominant=semantic | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:45] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_9 doc_id=architecture_overview rrf_score=0.0308 sem_rank=8 bm25_rank=2 dominant=bm25 | enriched: API Operations, API key, Redis SET, Redis DEL, API Gateway, Simple SELECT, Performance Characteristics | API, TTL - Encryption, Request, TTL, PostgreSQL  per API key (default: 1000 RPM) ### Secrets Ma...
[15:08:45] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=api_reference_fix_3 doc_id=api_reference rrf_score=0.0305 sem_rank=5 bm25_rank=6 dominant=semantic | enriched: Query Parameters, Pagination offset, optional, Retrieve performance, Metrics Retrieve, ISO, Workflow Metrics | ISO 8601, JSON  **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameter...
[15:08:45] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_4 doc_id=architecture_overview rrf_score=0.0299 sem_rank=10 bm25_rank=4 dominant=bm25 | enriched: SMS Queue, Webhook Queue, Email Queue, Resource Allocation, Key Responsibilities, Compiled templates, AWS SNS | Consume, Handlebars, Kafka - Template, SMS, Redis  **Technology**: Node.js with worker p...
[15:08:45] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:45] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:45] TRACE | Query: What's the 99th percentile response time target?
[15:08:45] TRACE | Total key facts: 2
[15:08:45] TRACE | Found facts: 0/2
[15:08:45] TRACE | Missed facts: 2/2
[15:08:45] TRACE |   MISSED[1] P99 latency: < 200ms
[15:08:45] TRACE |     -> Found in chunk_id=architecture_overview_fix_1 (rank not in top-5)
[15:08:45] TRACE |   MISSED[2] average P99 latency of 180ms for API operations
[15:08:45] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:08:45] TRACE | === END FACT COVERAGE ===
[15:08:45] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:45] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Our API latency is 500ms, is that acceptable?
[15:08:45] DEBUG | [query-rewrite] Rewriting query: Our API latency is 500ms, is that acceptable?
[15:08:45] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:45] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=844 timeout=5s
[15:08:45] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:45] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:45] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:46] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.93s
[15:08:46] DEBUG | [anthropic] USAGE: input_tokens=199 output_tokens=10
[15:08:46] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=54
[15:08:46] DEBUG | [anthropic] RESPONSE: api performance latency acceptable threshold benchmark
[15:08:46] DEBUG | [query-rewrite] SUCCESS in 0.935s: Our API latency is 500ms, is that acceptable? → api performance latency acceptable threshold benchmark
[15:08:46] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: api performance latency acceptable threshold benchmark (took 0.935s)
[15:08:46] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:46] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:46] TRACE | [enriched-hybrid-llm]   SEM[0] idx=16 chunk_id=architecture_overview_fix_10 score=0.6606 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:46] TRACE | [enriched-hybrid-llm]   SEM[1] idx=25 chunk_id=deployment_guide_fix_6 score=0.6444 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:46] TRACE | [enriched-hybrid-llm]   SEM[2] idx=3 chunk_id=api_reference_fix_3 score=0.6426 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:46] TRACE | [enriched-hybrid-llm]   SEM[3] idx=1 chunk_id=api_reference_fix_1 score=0.6351 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:46] TRACE | [enriched-hybrid-llm]   SEM[4] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6262 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:46] TRACE | [enriched-hybrid-llm]   SEM[5] idx=15 chunk_id=architecture_overview_fix_9 score=0.6222 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:46] TRACE | [enriched-hybrid-llm]   SEM[6] idx=7 chunk_id=architecture_overview_fix_1 score=0.6211 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:46] TRACE | [enriched-hybrid-llm]   SEM[7] idx=18 chunk_id=architecture_overview_fix_12 score=0.6101 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:46] TRACE | [enriched-hybrid-llm]   SEM[8] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6070 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:46] TRACE | [enriched-hybrid-llm]   SEM[9] idx=47 chunk_id=user_guide_fix_7 score=0.5956 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:08:46] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:46] TRACE | [enriched-hybrid-llm]   BM25[0] idx=16 chunk_id=architecture_overview_fix_10 score=8.1871 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:46] TRACE | [enriched-hybrid-llm]   BM25[1] idx=11 chunk_id=architecture_overview_fix_5 score=6.4117 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:08:46] TRACE | [enriched-hybrid-llm]   BM25[2] idx=15 chunk_id=architecture_overview_fix_9 score=4.8064 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:46] TRACE | [enriched-hybrid-llm]   BM25[3] idx=38 chunk_id=troubleshooting_guide_fix_10 score=4.6435 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:46] TRACE | [enriched-hybrid-llm]   BM25[4] idx=30 chunk_id=troubleshooting_guide_fix_2 score=4.5972 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:46] TRACE | [enriched-hybrid-llm]   BM25[5] idx=29 chunk_id=troubleshooting_guide_fix_1 score=4.5654 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:46] TRACE | [enriched-hybrid-llm]   BM25[6] idx=45 chunk_id=user_guide_fix_5 score=3.3059 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:46] TRACE | [enriched-hybrid-llm]   BM25[7] idx=6 chunk_id=architecture_overview_fix_0 score=2.9842 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:46] TRACE | [enriched-hybrid-llm]   BM25[8] idx=25 chunk_id=deployment_guide_fix_6 score=2.8633 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:46] TRACE | [enriched-hybrid-llm]   BM25[9] idx=18 chunk_id=architecture_overview_fix_12 score=2.6659 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:46] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:46] TRACE | [enriched-hybrid-llm]   RRF[0] idx=16 total=0.0333 (sem_rank=0 comp=0.0167 + bm25_rank=0 comp=0.0167)
[15:08:46] TRACE | [enriched-hybrid-llm]   RRF[1] idx=15 total=0.0315 (sem_rank=5 comp=0.0154 + bm25_rank=2 comp=0.0161)
[15:08:46] TRACE | [enriched-hybrid-llm]   RRF[2] idx=30 total=0.0312 (sem_rank=4 comp=0.0156 + bm25_rank=4 comp=0.0156)
[15:08:46] TRACE | [enriched-hybrid-llm]   RRF[3] idx=25 total=0.0311 (sem_rank=1 comp=0.0164 + bm25_rank=8 comp=0.0147)
[15:08:46] TRACE | [enriched-hybrid-llm]   RRF[4] idx=11 total=0.0301 (sem_rank=13 comp=0.0137 + bm25_rank=1 comp=0.0164)
[15:08:46] TRACE | [enriched-hybrid-llm]   RRF[5] idx=29 total=0.0295 (sem_rank=11 comp=0.0141 + bm25_rank=5 comp=0.0154)
[15:08:46] TRACE | [enriched-hybrid-llm]   RRF[6] idx=7 total=0.0294 (sem_rank=6 comp=0.0152 + bm25_rank=10 comp=0.0143)
[15:08:46] TRACE | [enriched-hybrid-llm]   RRF[7] idx=18 total=0.0294 (sem_rank=7 comp=0.0149 + bm25_rank=9 comp=0.0145)
[15:08:46] TRACE | [enriched-hybrid-llm]   RRF[8] idx=6 total=0.0292 (sem_rank=10 comp=0.0143 + bm25_rank=7 comp=0.0149)
[15:08:46] TRACE | [enriched-hybrid-llm]   RRF[9] idx=1 total=0.0292 (sem_rank=3 comp=0.0159 + bm25_rank=15 comp=0.0133)
[15:08:46] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:46] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0333 sem_rank=0 bm25_rank=0 dominant=balanced | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:46] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_9 doc_id=architecture_overview rrf_score=0.0315 sem_rank=5 bm25_rank=2 dominant=bm25 | enriched: API Operations, API key, Redis SET, Redis DEL, API Gateway, Simple SELECT, Performance Characteristics | API, TTL - Encryption, Request, TTL, PostgreSQL  per API key (default: 1000 RPM) ### Secrets Ma...
[15:08:46] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_2 doc_id=troubleshooting_guide rrf_score=0.0312 sem_rank=4 bm25_rank=4 dominant=balanced | enriched: Execution Plans, Query Execution, Review Query, Memory Leaks, High API, Breakdown Analysis, Plans | API  Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --r...
[15:08:46] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0311 sem_rank=1 bm25_rank=8 dominant=semantic | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:46] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.0301 sem_rank=13 bm25_rank=1 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:08:46] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:46] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:46] TRACE | Query: Our API latency is 500ms, is that acceptable?
[15:08:46] TRACE | Total key facts: 2
[15:08:46] TRACE | Found facts: 0/2
[15:08:46] TRACE | Missed facts: 2/2
[15:08:46] TRACE |   MISSED[1] P99 latency: < 200ms
[15:08:46] TRACE |     -> Found in chunk_id=architecture_overview_fix_1 (rank not in top-5)
[15:08:46] TRACE |   MISSED[2] average P99 latency of 180ms for API operations
[15:08:46] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:08:46] TRACE | === END FACT COVERAGE ===
[15:08:46] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:46] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: api latency target
[15:08:46] DEBUG | [query-rewrite] Rewriting query: api latency target
[15:08:46] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:46] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=817 timeout=5s
[15:08:46] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:46] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:46] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:47] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.93s
[15:08:47] DEBUG | [anthropic] USAGE: input_tokens=190 output_tokens=12
[15:08:47] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=62
[15:08:47] DEBUG | [anthropic] RESPONSE: api performance latency service level objective target metrics
[15:08:47] DEBUG | [query-rewrite] SUCCESS in 0.932s: api latency target → api performance latency service level objective target metrics
[15:08:47] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: api performance latency service level objective target metrics (took 0.932s)
[15:08:47] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:47] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:47] TRACE | [enriched-hybrid-llm]   SEM[0] idx=16 chunk_id=architecture_overview_fix_10 score=0.6561 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:47] TRACE | [enriched-hybrid-llm]   SEM[1] idx=25 chunk_id=deployment_guide_fix_6 score=0.6348 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:47] TRACE | [enriched-hybrid-llm]   SEM[2] idx=7 chunk_id=architecture_overview_fix_1 score=0.6333 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:47] TRACE | [enriched-hybrid-llm]   SEM[3] idx=3 chunk_id=api_reference_fix_3 score=0.6147 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:47] TRACE | [enriched-hybrid-llm]   SEM[4] idx=8 chunk_id=architecture_overview_fix_2 score=0.6097 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:47] TRACE | [enriched-hybrid-llm]   SEM[5] idx=6 chunk_id=architecture_overview_fix_0 score=0.6049 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:47] TRACE | [enriched-hybrid-llm]   SEM[6] idx=15 chunk_id=architecture_overview_fix_9 score=0.6029 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:47] TRACE | [enriched-hybrid-llm]   SEM[7] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.5983 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:47] TRACE | [enriched-hybrid-llm]   SEM[8] idx=18 chunk_id=architecture_overview_fix_12 score=0.5818 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:47] TRACE | [enriched-hybrid-llm]   SEM[9] idx=23 chunk_id=deployment_guide_fix_4 score=0.5731 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:47] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:47] TRACE | [enriched-hybrid-llm]   BM25[0] idx=25 chunk_id=deployment_guide_fix_6 score=8.1369 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:47] TRACE | [enriched-hybrid-llm]   BM25[1] idx=15 chunk_id=architecture_overview_fix_9 score=7.6278 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:47] TRACE | [enriched-hybrid-llm]   BM25[2] idx=38 chunk_id=troubleshooting_guide_fix_10 score=7.1370 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:47] TRACE | [enriched-hybrid-llm]   BM25[3] idx=30 chunk_id=troubleshooting_guide_fix_2 score=6.6673 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:47] TRACE | [enriched-hybrid-llm]   BM25[4] idx=29 chunk_id=troubleshooting_guide_fix_1 score=6.3858 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:47] TRACE | [enriched-hybrid-llm]   BM25[5] idx=10 chunk_id=architecture_overview_fix_4 score=5.9614 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:47] TRACE | [enriched-hybrid-llm]   BM25[6] idx=16 chunk_id=architecture_overview_fix_10 score=4.6829 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:47] TRACE | [enriched-hybrid-llm]   BM25[7] idx=6 chunk_id=architecture_overview_fix_0 score=4.6549 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:47] TRACE | [enriched-hybrid-llm]   BM25[8] idx=36 chunk_id=troubleshooting_guide_fix_8 score=4.5432 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:47] TRACE | [enriched-hybrid-llm]   BM25[9] idx=27 chunk_id=deployment_guide_fix_8 score=4.3091 | UTC - **Secondary**: Wednesday 10:00-12:00 UTC All deployments should target these windows to minimi...
[15:08:47] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:47] TRACE | [enriched-hybrid-llm]   RRF[0] idx=25 total=0.0331 (sem_rank=1 comp=0.0164 + bm25_rank=0 comp=0.0167)
[15:08:47] TRACE | [enriched-hybrid-llm]   RRF[1] idx=16 total=0.0318 (sem_rank=0 comp=0.0167 + bm25_rank=6 comp=0.0152)
[15:08:47] TRACE | [enriched-hybrid-llm]   RRF[2] idx=15 total=0.0315 (sem_rank=6 comp=0.0152 + bm25_rank=1 comp=0.0164)
[15:08:47] TRACE | [enriched-hybrid-llm]   RRF[3] idx=30 total=0.0308 (sem_rank=7 comp=0.0149 + bm25_rank=3 comp=0.0159)
[15:08:47] TRACE | [enriched-hybrid-llm]   RRF[4] idx=38 total=0.0304 (sem_rank=10 comp=0.0143 + bm25_rank=2 comp=0.0161)
[15:08:47] TRACE | [enriched-hybrid-llm]   RRF[5] idx=6 total=0.0303 (sem_rank=5 comp=0.0154 + bm25_rank=7 comp=0.0149)
[15:08:47] TRACE | [enriched-hybrid-llm]   RRF[6] idx=3 total=0.0300 (sem_rank=3 comp=0.0159 + bm25_rank=11 comp=0.0141)
[15:08:47] TRACE | [enriched-hybrid-llm]   RRF[7] idx=10 total=0.0295 (sem_rank=11 comp=0.0141 + bm25_rank=5 comp=0.0154)
[15:08:47] TRACE | [enriched-hybrid-llm]   RRF[8] idx=7 total=0.0291 (sem_rank=2 comp=0.0161 + bm25_rank=17 comp=0.0130)
[15:08:47] TRACE | [enriched-hybrid-llm]   RRF[9] idx=23 total=0.0284 (sem_rank=9 comp=0.0145 + bm25_rank=12 comp=0.0139)
[15:08:47] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:47] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0331 sem_rank=1 bm25_rank=0 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:47] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0318 sem_rank=0 bm25_rank=6 dominant=semantic | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:47] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_9 doc_id=architecture_overview rrf_score=0.0315 sem_rank=6 bm25_rank=1 dominant=bm25 | enriched: API Operations, API key, Redis SET, Redis DEL, API Gateway, Simple SELECT, Performance Characteristics | API, TTL - Encryption, Request, TTL, PostgreSQL  per API key (default: 1000 RPM) ### Secrets Ma...
[15:08:47] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_2 doc_id=troubleshooting_guide rrf_score=0.0308 sem_rank=7 bm25_rank=3 dominant=bm25 | enriched: Execution Plans, Query Execution, Review Query, Memory Leaks, High API, Breakdown Analysis, Plans | API  Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --r...
[15:08:47] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_10 doc_id=troubleshooting_guide rrf_score=0.0304 sem_rank=10 bm25_rank=2 dominant=bm25 | enriched: health check, Run health, Capture packets, Capture system, metrics dashboard, Trace route, Review recent | database nc -zv cloudflow-db.internal.company.com 5432 #, Run, Trace, API  database nc -zv cl...
[15:08:47] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:47] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:47] TRACE | Query: api latency target
[15:08:47] TRACE | Total key facts: 2
[15:08:47] TRACE | Found facts: 0/2
[15:08:47] TRACE | Missed facts: 2/2
[15:08:47] TRACE |   MISSED[1] P99 latency: < 200ms
[15:08:47] TRACE |     -> Found in chunk_id=architecture_overview_fix_1 (rank not in top-5)
[15:08:47] TRACE |   MISSED[2] average P99 latency of 180ms for API operations
[15:08:47] TRACE |     -> Found in chunk_id=architecture_overview_fix_0 (rank not in top-5)
[15:08:47] TRACE | === END FACT COVERAGE ===
[15:08:47] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:47] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Setting SLOs for our service, what P99 latency does CloudFlow guarantee?
[15:08:47] DEBUG | [query-rewrite] Rewriting query: Setting SLOs for our service, what P99 latency does CloudFlow guarantee?
[15:08:47] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:47] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=871 timeout=5s
[15:08:47] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:47] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:47] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:48] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.37s
[15:08:48] DEBUG | [anthropic] USAGE: input_tokens=205 output_tokens=14
[15:08:48] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=55
[15:08:48] DEBUG | [anthropic] RESPONSE: CloudFlow service level objective P99 latency guarantee
[15:08:48] DEBUG | [query-rewrite] SUCCESS in 1.371s: Setting SLOs for our service, what P99 latency does CloudFlow guarantee? → CloudFlow service level objective P99 latency guarantee
[15:08:48] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: CloudFlow service level objective P99 latency guarantee (took 1.371s)
[15:08:48] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:48] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:48] TRACE | [enriched-hybrid-llm]   SEM[0] idx=25 chunk_id=deployment_guide_fix_6 score=0.6825 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:48] TRACE | [enriched-hybrid-llm]   SEM[1] idx=6 chunk_id=architecture_overview_fix_0 score=0.6751 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:48] TRACE | [enriched-hybrid-llm]   SEM[2] idx=1 chunk_id=api_reference_fix_1 score=0.6665 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:48] TRACE | [enriched-hybrid-llm]   SEM[3] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6483 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:48] TRACE | [enriched-hybrid-llm]   SEM[4] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6387 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:48] TRACE | [enriched-hybrid-llm]   SEM[5] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.6334 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:48] TRACE | [enriched-hybrid-llm]   SEM[6] idx=0 chunk_id=api_reference_fix_0 score=0.6310 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:08:48] TRACE | [enriched-hybrid-llm]   SEM[7] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.6285 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:48] TRACE | [enriched-hybrid-llm]   SEM[8] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6276 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:48] TRACE | [enriched-hybrid-llm]   SEM[9] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6237 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:08:48] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:48] TRACE | [enriched-hybrid-llm]   BM25[0] idx=16 chunk_id=architecture_overview_fix_10 score=8.4810 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:48] TRACE | [enriched-hybrid-llm]   BM25[1] idx=25 chunk_id=deployment_guide_fix_6 score=8.2387 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:48] TRACE | [enriched-hybrid-llm]   BM25[2] idx=6 chunk_id=architecture_overview_fix_0 score=5.6931 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:48] TRACE | [enriched-hybrid-llm]   BM25[3] idx=36 chunk_id=troubleshooting_guide_fix_8 score=5.6750 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:48] TRACE | [enriched-hybrid-llm]   BM25[4] idx=30 chunk_id=troubleshooting_guide_fix_2 score=5.2880 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:48] TRACE | [enriched-hybrid-llm]   BM25[5] idx=15 chunk_id=architecture_overview_fix_9 score=4.4874 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:48] TRACE | [enriched-hybrid-llm]   BM25[6] idx=37 chunk_id=troubleshooting_guide_fix_9 score=4.0809 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:48] TRACE | [enriched-hybrid-llm]   BM25[7] idx=38 chunk_id=troubleshooting_guide_fix_10 score=3.8007 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:48] TRACE | [enriched-hybrid-llm]   BM25[8] idx=24 chunk_id=deployment_guide_fix_5 score=3.7572 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:48] TRACE | [enriched-hybrid-llm]   BM25[9] idx=29 chunk_id=troubleshooting_guide_fix_1 score=3.6204 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:48] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:48] TRACE | [enriched-hybrid-llm]   RRF[0] idx=25 total=0.0331 (sem_rank=0 comp=0.0167 + bm25_rank=1 comp=0.0164)
[15:08:48] TRACE | [enriched-hybrid-llm]   RRF[1] idx=6 total=0.0325 (sem_rank=1 comp=0.0164 + bm25_rank=2 comp=0.0161)
[15:08:48] TRACE | [enriched-hybrid-llm]   RRF[2] idx=30 total=0.0315 (sem_rank=3 comp=0.0159 + bm25_rank=4 comp=0.0156)
[15:08:48] TRACE | [enriched-hybrid-llm]   RRF[3] idx=38 total=0.0303 (sem_rank=5 comp=0.0154 + bm25_rank=7 comp=0.0149)
[15:08:48] TRACE | [enriched-hybrid-llm]   RRF[4] idx=36 total=0.0298 (sem_rank=12 comp=0.0139 + bm25_rank=3 comp=0.0159)
[15:08:48] TRACE | [enriched-hybrid-llm]   RRF[5] idx=16 total=0.0297 (sem_rank=17 comp=0.0130 + bm25_rank=0 comp=0.0167)
[15:08:48] TRACE | [enriched-hybrid-llm]   RRF[6] idx=32 total=0.0288 (sem_rank=4 comp=0.0156 + bm25_rank=16 comp=0.0132)
[15:08:48] TRACE | [enriched-hybrid-llm]   RRF[7] idx=0 total=0.0287 (sem_rank=6 comp=0.0152 + bm25_rank=14 comp=0.0135)
[15:08:48] TRACE | [enriched-hybrid-llm]   RRF[8] idx=28 total=0.0282 (sem_rank=9 comp=0.0145 + bm25_rank=13 comp=0.0137)
[15:08:48] TRACE | [enriched-hybrid-llm]   RRF[9] idx=37 total=0.0278 (sem_rank=19 comp=0.0127 + bm25_rank=6 comp=0.0152)
[15:08:48] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:48] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0331 sem_rank=0 bm25_rank=1 dominant=semantic | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:48] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.0325 sem_rank=1 bm25_rank=2 dominant=semantic | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:48] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_2 doc_id=troubleshooting_guide rrf_score=0.0315 sem_rank=3 bm25_rank=4 dominant=semantic | enriched: Execution Plans, Query Execution, Review Query, Memory Leaks, High API, Breakdown Analysis, Plans | API  Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --r...
[15:08:48] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_10 doc_id=troubleshooting_guide rrf_score=0.0303 sem_rank=5 bm25_rank=7 dominant=semantic | enriched: health check, Run health, Capture packets, Capture system, metrics dashboard, Trace route, Review recent | database nc -zv cloudflow-db.internal.company.com 5432 #, Run, Trace, API  database nc -zv cl...
[15:08:48] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.0298 sem_rank=12 bm25_rank=3 dominant=bm25 | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:08:48] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:48] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:48] TRACE | Query: Setting SLOs for our service, what P99 latency does CloudFlow guarantee?
[15:08:48] TRACE | Total key facts: 2
[15:08:48] TRACE | Found facts: 1/2
[15:08:48] TRACE |   FOUND[1] average P99 latency of 180ms for API operations
[15:08:48] TRACE | Missed facts: 1/2
[15:08:48] TRACE |   MISSED[1] P99 latency: < 200ms
[15:08:48] TRACE |     -> Found in chunk_id=architecture_overview_fix_1 (rank not in top-5)
[15:08:48] TRACE | === END FACT COVERAGE ===
[15:08:48] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:48] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why are we getting alerts at 200ms latency?
[15:08:48] DEBUG | [query-rewrite] Rewriting query: Why are we getting alerts at 200ms latency?
[15:08:48] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:48] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=842 timeout=5s
[15:08:48] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:48] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:48] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:49] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.94s
[15:08:49] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=11
[15:08:49] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=71
[15:08:49] DEBUG | [anthropic] RESPONSE: latency threshold monitoring alert configuration performance monitoring
[15:08:49] DEBUG | [query-rewrite] SUCCESS in 0.943s: Why are we getting alerts at 200ms latency? → latency threshold monitoring alert configuration performance monitoring
[15:08:49] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: latency threshold monitoring alert configuration performance monitoring (took 0.943s)
[15:08:49] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: latency threshold monitoring alert configuration performance monitoring Grafana Jaeger Prometheus metrics observability tracing
[15:08:49] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:49] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:49] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:49] TRACE | [enriched-hybrid-llm]   SEM[0] idx=23 chunk_id=deployment_guide_fix_4 score=0.6552 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:49] TRACE | [enriched-hybrid-llm]   SEM[1] idx=7 chunk_id=architecture_overview_fix_1 score=0.5743 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:49] TRACE | [enriched-hybrid-llm]   SEM[2] idx=16 chunk_id=architecture_overview_fix_10 score=0.5610 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:49] TRACE | [enriched-hybrid-llm]   SEM[3] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.5596 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:49] TRACE | [enriched-hybrid-llm]   SEM[4] idx=10 chunk_id=architecture_overview_fix_4 score=0.5499 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:08:49] TRACE | [enriched-hybrid-llm]   SEM[5] idx=3 chunk_id=api_reference_fix_3 score=0.5494 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:49] TRACE | [enriched-hybrid-llm]   SEM[6] idx=8 chunk_id=architecture_overview_fix_2 score=0.5483 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:49] TRACE | [enriched-hybrid-llm]   SEM[7] idx=25 chunk_id=deployment_guide_fix_6 score=0.5442 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:49] TRACE | [enriched-hybrid-llm]   SEM[8] idx=15 chunk_id=architecture_overview_fix_9 score=0.5440 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:49] TRACE | [enriched-hybrid-llm]   SEM[9] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5406 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:49] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:49] TRACE | [enriched-hybrid-llm]   BM25[0] idx=23 chunk_id=deployment_guide_fix_4 score=18.0367 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:49] TRACE | [enriched-hybrid-llm]   BM25[1] idx=22 chunk_id=deployment_guide_fix_3 score=14.9378 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:08:49] TRACE | [enriched-hybrid-llm]   BM25[2] idx=6 chunk_id=architecture_overview_fix_0 score=9.5267 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:49] TRACE | [enriched-hybrid-llm]   BM25[3] idx=33 chunk_id=troubleshooting_guide_fix_5 score=6.7833 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:49] TRACE | [enriched-hybrid-llm]   BM25[4] idx=19 chunk_id=deployment_guide_fix_0 score=6.6406 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:49] TRACE | [enriched-hybrid-llm]   BM25[5] idx=16 chunk_id=architecture_overview_fix_10 score=6.4191 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:49] TRACE | [enriched-hybrid-llm]   BM25[6] idx=20 chunk_id=deployment_guide_fix_1 score=5.8136 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:08:49] TRACE | [enriched-hybrid-llm]   BM25[7] idx=29 chunk_id=troubleshooting_guide_fix_1 score=5.5671 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:49] TRACE | [enriched-hybrid-llm]   BM25[8] idx=38 chunk_id=troubleshooting_guide_fix_10 score=5.2442 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:49] TRACE | [enriched-hybrid-llm]   BM25[9] idx=30 chunk_id=troubleshooting_guide_fix_2 score=4.9029 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:49] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:49] TRACE | [enriched-hybrid-llm]   RRF[0] idx=23 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:08:49] TRACE | [enriched-hybrid-llm]   RRF[1] idx=22 total=0.2788 (sem_rank=39 comp=0.0061 + bm25_rank=1 comp=0.2727)
[15:08:49] TRACE | [enriched-hybrid-llm]   RRF[2] idx=6 total=0.2603 (sem_rank=19 comp=0.0103 + bm25_rank=2 comp=0.2500)
[15:08:49] TRACE | [enriched-hybrid-llm]   RRF[3] idx=33 total=0.2362 (sem_rank=45 comp=0.0055 + bm25_rank=3 comp=0.2308)
[15:08:49] TRACE | [enriched-hybrid-llm]   RRF[4] idx=16 total=0.2250 (sem_rank=2 comp=0.0250 + bm25_rank=5 comp=0.2000)
[15:08:49] TRACE | [enriched-hybrid-llm]   RRF[5] idx=19 total=0.2205 (sem_rank=38 comp=0.0062 + bm25_rank=4 comp=0.2143)
[15:08:49] TRACE | [enriched-hybrid-llm]   RRF[6] idx=20 total=0.1952 (sem_rank=29 comp=0.0077 + bm25_rank=6 comp=0.1875)
[15:08:49] TRACE | [enriched-hybrid-llm]   RRF[7] idx=38 total=0.1897 (sem_rank=3 comp=0.0231 + bm25_rank=8 comp=0.1667)
[15:08:49] TRACE | [enriched-hybrid-llm]   RRF[8] idx=29 total=0.1876 (sem_rank=17 comp=0.0111 + bm25_rank=7 comp=0.1765)
[15:08:49] TRACE | [enriched-hybrid-llm]   RRF[9] idx=30 total=0.1715 (sem_rank=12 comp=0.0136 + bm25_rank=9 comp=0.1579)
[15:08:49] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:49] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:08:49] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.2788 sem_rank=39 bm25_rank=1 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:08:49] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2603 sem_rank=19 bm25_rank=2 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:08:49] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.2362 sem_rank=45 bm25_rank=3 dominant=bm25 | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:08:49] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2250 sem_rank=2 bm25_rank=5 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:49] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:49] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:49] TRACE | Query: Why are we getting alerts at 200ms latency?
[15:08:49] TRACE | Total key facts: 2
[15:08:49] TRACE | Found facts: 1/2
[15:08:49] TRACE |   FOUND[1] average P99 latency of 180ms for API operations
[15:08:49] TRACE | Missed facts: 1/2
[15:08:49] TRACE |   MISSED[1] P99 latency: < 200ms
[15:08:49] TRACE |     -> Found in chunk_id=architecture_overview_fix_1 (rank not in top-5)
[15:08:49] TRACE | === END FACT COVERAGE ===
[15:08:49] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:49] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What are the disaster recovery RPO and RTO values?
[15:08:49] DEBUG | [query-rewrite] Rewriting query: What are the disaster recovery RPO and RTO values?
[15:08:49] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:49] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=849 timeout=5s
[15:08:49] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:49] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:49] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:50] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.00s
[15:08:50] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=13
[15:08:50] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=87
[15:08:50] DEBUG | [anthropic] RESPONSE: disaster recovery recovery point objective recovery time objective configuration limits
[15:08:50] DEBUG | [query-rewrite] SUCCESS in 0.997s: What are the disaster recovery RPO and RTO values? → disaster recovery recovery point objective recovery time objective configuration limits
[15:08:50] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: disaster recovery recovery point objective recovery time objective configuration limits (took 0.997s)
[15:08:50] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: disaster recovery recovery point objective recovery time objective configuration limits RPO RTO backup data downtime loss restore
[15:08:50] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:50] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:50] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:50] TRACE | [enriched-hybrid-llm]   SEM[0] idx=18 chunk_id=architecture_overview_fix_12 score=0.6188 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:50] TRACE | [enriched-hybrid-llm]   SEM[1] idx=25 chunk_id=deployment_guide_fix_6 score=0.5804 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:50] TRACE | [enriched-hybrid-llm]   SEM[2] idx=24 chunk_id=deployment_guide_fix_5 score=0.5742 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:50] TRACE | [enriched-hybrid-llm]   SEM[3] idx=7 chunk_id=architecture_overview_fix_1 score=0.5568 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:50] TRACE | [enriched-hybrid-llm]   SEM[4] idx=46 chunk_id=user_guide_fix_6 score=0.5518 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:50] TRACE | [enriched-hybrid-llm]   SEM[5] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5471 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:50] TRACE | [enriched-hybrid-llm]   SEM[6] idx=19 chunk_id=deployment_guide_fix_0 score=0.5310 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:50] TRACE | [enriched-hybrid-llm]   SEM[7] idx=15 chunk_id=architecture_overview_fix_9 score=0.5308 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:50] TRACE | [enriched-hybrid-llm]   SEM[8] idx=9 chunk_id=architecture_overview_fix_3 score=0.5278 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:50] TRACE | [enriched-hybrid-llm]   SEM[9] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.5233 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:50] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:50] TRACE | [enriched-hybrid-llm]   BM25[0] idx=17 chunk_id=architecture_overview_fix_11 score=26.7141 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:50] TRACE | [enriched-hybrid-llm]   BM25[1] idx=24 chunk_id=deployment_guide_fix_5 score=24.1021 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:50] TRACE | [enriched-hybrid-llm]   BM25[2] idx=16 chunk_id=architecture_overview_fix_10 score=20.8502 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:50] TRACE | [enriched-hybrid-llm]   BM25[3] idx=25 chunk_id=deployment_guide_fix_6 score=18.3236 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:50] TRACE | [enriched-hybrid-llm]   BM25[4] idx=18 chunk_id=architecture_overview_fix_12 score=12.9840 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:50] TRACE | [enriched-hybrid-llm]   BM25[5] idx=8 chunk_id=architecture_overview_fix_2 score=6.5599 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:50] TRACE | [enriched-hybrid-llm]   BM25[6] idx=19 chunk_id=deployment_guide_fix_0 score=4.8852 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:50] TRACE | [enriched-hybrid-llm]   BM25[7] idx=31 chunk_id=troubleshooting_guide_fix_3 score=4.8337 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:50] TRACE | [enriched-hybrid-llm]   BM25[8] idx=46 chunk_id=user_guide_fix_6 score=4.5941 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:50] TRACE | [enriched-hybrid-llm]   BM25[9] idx=34 chunk_id=troubleshooting_guide_fix_6 score=4.1785 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:50] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:50] TRACE | [enriched-hybrid-llm]   RRF[0] idx=17 total=0.3100 (sem_rank=20 comp=0.0100 + bm25_rank=0 comp=0.3000)
[15:08:50] TRACE | [enriched-hybrid-llm]   RRF[1] idx=24 total=0.2977 (sem_rank=2 comp=0.0250 + bm25_rank=1 comp=0.2727)
[15:08:50] TRACE | [enriched-hybrid-llm]   RRF[2] idx=16 total=0.2581 (sem_rank=27 comp=0.0081 + bm25_rank=2 comp=0.2500)
[15:08:50] TRACE | [enriched-hybrid-llm]   RRF[3] idx=25 total=0.2580 (sem_rank=1 comp=0.0273 + bm25_rank=3 comp=0.2308)
[15:08:50] TRACE | [enriched-hybrid-llm]   RRF[4] idx=18 total=0.2443 (sem_rank=0 comp=0.0300 + bm25_rank=4 comp=0.2143)
[15:08:50] TRACE | [enriched-hybrid-llm]   RRF[5] idx=8 total=0.2107 (sem_rank=18 comp=0.0107 + bm25_rank=5 comp=0.2000)
[15:08:50] TRACE | [enriched-hybrid-llm]   RRF[6] idx=19 total=0.2062 (sem_rank=6 comp=0.0187 + bm25_rank=6 comp=0.1875)
[15:08:50] TRACE | [enriched-hybrid-llm]   RRF[7] idx=46 total=0.1881 (sem_rank=4 comp=0.0214 + bm25_rank=8 comp=0.1667)
[15:08:50] TRACE | [enriched-hybrid-llm]   RRF[8] idx=31 total=0.1840 (sem_rank=30 comp=0.0075 + bm25_rank=7 comp=0.1765)
[15:08:50] TRACE | [enriched-hybrid-llm]   RRF[9] idx=34 total=0.1699 (sem_rank=15 comp=0.0120 + bm25_rank=9 comp=0.1579)
[15:08:50] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:50] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_11 doc_id=architecture_overview rrf_score=0.3100 sem_rank=20 bm25_rank=0 dominant=bm25 | enriched: Kafka Broker, Redis Replica, Backup Strategy, Backup Schedule, Kubernetes health, Weekly automated, automatic promotion | Redis Replica, Kafka Broker, Sentinel, S3, Glacier  Service (2) - PostgreSQL P...
[15:08:50] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_5 doc_id=deployment_guide rrf_score=0.2977 sem_rank=2 bm25_rank=1 dominant=bm25 | enriched: Disaster Recovery, Recovery Procedure, Backup Strategy, Query logs, CloudWatch Insights, Velero Install, Install Velero | CloudWatch Insights, WAL, Backup, Automated Backup  Configure log aggregation:...
[15:08:50] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2581 sem_rank=27 bm25_rank=2 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:50] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.2580 sem_rank=1 bm25_rank=3 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:50] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.2443 sem_rank=0 bm25_rank=4 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:08:50] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:50] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:50] TRACE | Query: What are the disaster recovery RPO and RTO values?
[15:08:50] TRACE | Total key facts: 2
[15:08:50] TRACE | Found facts: 2/2
[15:08:50] TRACE |   FOUND[1] RPO (Recovery Point Objective): 1 hour
[15:08:50] TRACE |   FOUND[2] RTO (Recovery Time Objective): 4 hours
[15:08:50] TRACE | === END FACT COVERAGE ===
[15:08:50] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:50] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What's the maximum data loss and recovery time?
[15:08:50] DEBUG | [query-rewrite] Rewriting query: What's the maximum data loss and recovery time?
[15:08:50] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:50] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=846 timeout=5s
[15:08:50] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:50] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:50] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:51] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.04s
[15:08:51] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=21
[15:08:51] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=109
[15:08:51] DEBUG | [anthropic] RESPONSE: recovery point objective recovery time objective maximum tolerable downtime RPO RTO disaster recovery metrics
[15:08:51] DEBUG | [query-rewrite] SUCCESS in 1.041s: What's the maximum data loss and recovery time? → recovery point objective recovery time objective maximum tolerable downtime RPO RTO disaster recovery metrics
[15:08:51] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: recovery point objective recovery time objective maximum tolerable downtime RPO RTO disaster recovery metrics (took 1.041s)
[15:08:51] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: recovery point objective recovery time objective maximum tolerable downtime RPO RTO disaster recovery metrics RPO RTO backup data loss restore
[15:08:51] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:51] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:51] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:51] TRACE | [enriched-hybrid-llm]   SEM[0] idx=18 chunk_id=architecture_overview_fix_12 score=0.6151 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:51] TRACE | [enriched-hybrid-llm]   SEM[1] idx=25 chunk_id=deployment_guide_fix_6 score=0.5957 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:51] TRACE | [enriched-hybrid-llm]   SEM[2] idx=24 chunk_id=deployment_guide_fix_5 score=0.5638 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:51] TRACE | [enriched-hybrid-llm]   SEM[3] idx=7 chunk_id=architecture_overview_fix_1 score=0.5551 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:51] TRACE | [enriched-hybrid-llm]   SEM[4] idx=46 chunk_id=user_guide_fix_6 score=0.5521 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:51] TRACE | [enriched-hybrid-llm]   SEM[5] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5513 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:51] TRACE | [enriched-hybrid-llm]   SEM[6] idx=9 chunk_id=architecture_overview_fix_3 score=0.5393 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:51] TRACE | [enriched-hybrid-llm]   SEM[7] idx=15 chunk_id=architecture_overview_fix_9 score=0.5374 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:51] TRACE | [enriched-hybrid-llm]   SEM[8] idx=3 chunk_id=api_reference_fix_3 score=0.5311 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:51] TRACE | [enriched-hybrid-llm]   SEM[9] idx=19 chunk_id=deployment_guide_fix_0 score=0.5301 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:51] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:51] TRACE | [enriched-hybrid-llm]   BM25[0] idx=16 chunk_id=architecture_overview_fix_10 score=26.7900 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:51] TRACE | [enriched-hybrid-llm]   BM25[1] idx=17 chunk_id=architecture_overview_fix_11 score=26.7141 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:51] TRACE | [enriched-hybrid-llm]   BM25[2] idx=24 chunk_id=deployment_guide_fix_5 score=24.1021 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:51] TRACE | [enriched-hybrid-llm]   BM25[3] idx=25 chunk_id=deployment_guide_fix_6 score=18.3236 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:51] TRACE | [enriched-hybrid-llm]   BM25[4] idx=18 chunk_id=architecture_overview_fix_12 score=12.9840 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:51] TRACE | [enriched-hybrid-llm]   BM25[5] idx=8 chunk_id=architecture_overview_fix_2 score=6.5599 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:51] TRACE | [enriched-hybrid-llm]   BM25[6] idx=38 chunk_id=troubleshooting_guide_fix_10 score=5.6269 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:51] TRACE | [enriched-hybrid-llm]   BM25[7] idx=29 chunk_id=troubleshooting_guide_fix_1 score=5.2033 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:51] TRACE | [enriched-hybrid-llm]   BM25[8] idx=31 chunk_id=troubleshooting_guide_fix_3 score=4.8337 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:51] TRACE | [enriched-hybrid-llm]   BM25[9] idx=6 chunk_id=architecture_overview_fix_0 score=3.7504 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:51] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:51] TRACE | [enriched-hybrid-llm]   RRF[0] idx=16 total=0.3091 (sem_rank=23 comp=0.0091 + bm25_rank=0 comp=0.3000)
[15:08:51] TRACE | [enriched-hybrid-llm]   RRF[1] idx=17 total=0.2838 (sem_rank=17 comp=0.0111 + bm25_rank=1 comp=0.2727)
[15:08:51] TRACE | [enriched-hybrid-llm]   RRF[2] idx=24 total=0.2750 (sem_rank=2 comp=0.0250 + bm25_rank=2 comp=0.2500)
[15:08:51] TRACE | [enriched-hybrid-llm]   RRF[3] idx=25 total=0.2580 (sem_rank=1 comp=0.0273 + bm25_rank=3 comp=0.2308)
[15:08:51] TRACE | [enriched-hybrid-llm]   RRF[4] idx=18 total=0.2443 (sem_rank=0 comp=0.0300 + bm25_rank=4 comp=0.2143)
[15:08:51] TRACE | [enriched-hybrid-llm]   RRF[5] idx=8 total=0.2115 (sem_rank=16 comp=0.0115 + bm25_rank=5 comp=0.2000)
[15:08:51] TRACE | [enriched-hybrid-llm]   RRF[6] idx=38 total=0.1995 (sem_rank=15 comp=0.0120 + bm25_rank=6 comp=0.1875)
[15:08:51] TRACE | [enriched-hybrid-llm]   RRF[7] idx=29 total=0.1850 (sem_rank=25 comp=0.0086 + bm25_rank=7 comp=0.1765)
[15:08:51] TRACE | [enriched-hybrid-llm]   RRF[8] idx=31 total=0.1725 (sem_rank=41 comp=0.0059 + bm25_rank=8 comp=0.1667)
[15:08:51] TRACE | [enriched-hybrid-llm]   RRF[9] idx=6 total=0.1676 (sem_rank=21 comp=0.0097 + bm25_rank=9 comp=0.1579)
[15:08:51] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:51] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.3091 sem_rank=23 bm25_rank=0 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:51] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_11 doc_id=architecture_overview rrf_score=0.2838 sem_rank=17 bm25_rank=1 dominant=bm25 | enriched: Kafka Broker, Redis Replica, Backup Strategy, Backup Schedule, Kubernetes health, Weekly automated, automatic promotion | Redis Replica, Kafka Broker, Sentinel, S3, Glacier  Service (2) - PostgreSQL P...
[15:08:51] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_5 doc_id=deployment_guide rrf_score=0.2750 sem_rank=2 bm25_rank=2 dominant=bm25 | enriched: Disaster Recovery, Recovery Procedure, Backup Strategy, Query logs, CloudWatch Insights, Velero Install, Install Velero | CloudWatch Insights, WAL, Backup, Automated Backup  Configure log aggregation:...
[15:08:51] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.2580 sem_rank=1 bm25_rank=3 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:51] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.2443 sem_rank=0 bm25_rank=4 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:08:51] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:51] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:51] TRACE | Query: What's the maximum data loss and recovery time?
[15:08:51] TRACE | Total key facts: 2
[15:08:51] TRACE | Found facts: 2/2
[15:08:51] TRACE |   FOUND[1] RPO (Recovery Point Objective): 1 hour
[15:08:51] TRACE |   FOUND[2] RTO (Recovery Time Objective): 4 hours
[15:08:51] TRACE | === END FACT COVERAGE ===
[15:08:51] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:51] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: How long will it take to recover from a disaster?
[15:08:51] DEBUG | [query-rewrite] Rewriting query: How long will it take to recover from a disaster?
[15:08:51] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:51] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=848 timeout=5s
[15:08:51] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:51] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:51] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:52] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.10s
[15:08:52] DEBUG | [anthropic] USAGE: input_tokens=197 output_tokens=22
[15:08:52] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=102
[15:08:52] DEBUG | [anthropic] RESPONSE: disaster recovery recovery time objective (RTO) recovery point objective (RPO) metrics and calculation
[15:08:52] DEBUG | [query-rewrite] SUCCESS in 1.100s: How long will it take to recover from a disaster? → disaster recovery recovery time objective (RTO) recovery point objective (RPO) metrics and calculation
[15:08:52] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: disaster recovery recovery time objective (RTO) recovery point objective (RPO) metrics and calculation (took 1.100s)
[15:08:52] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: disaster recovery recovery time objective (RTO) recovery point objective (RPO) metrics and calculation RPO RTO backup data downtime loss restore
[15:08:52] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:52] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:52] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:52] TRACE | [enriched-hybrid-llm]   SEM[0] idx=18 chunk_id=architecture_overview_fix_12 score=0.6062 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:52] TRACE | [enriched-hybrid-llm]   SEM[1] idx=25 chunk_id=deployment_guide_fix_6 score=0.5900 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:52] TRACE | [enriched-hybrid-llm]   SEM[2] idx=24 chunk_id=deployment_guide_fix_5 score=0.5731 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:52] TRACE | [enriched-hybrid-llm]   SEM[3] idx=46 chunk_id=user_guide_fix_6 score=0.5505 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:52] TRACE | [enriched-hybrid-llm]   SEM[4] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5439 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:52] TRACE | [enriched-hybrid-llm]   SEM[5] idx=3 chunk_id=api_reference_fix_3 score=0.5365 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:52] TRACE | [enriched-hybrid-llm]   SEM[6] idx=19 chunk_id=deployment_guide_fix_0 score=0.5341 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:52] TRACE | [enriched-hybrid-llm]   SEM[7] idx=7 chunk_id=architecture_overview_fix_1 score=0.5337 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:52] TRACE | [enriched-hybrid-llm]   SEM[8] idx=9 chunk_id=architecture_overview_fix_3 score=0.5292 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:52] TRACE | [enriched-hybrid-llm]   SEM[9] idx=15 chunk_id=architecture_overview_fix_9 score=0.5248 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:52] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:52] TRACE | [enriched-hybrid-llm]   BM25[0] idx=17 chunk_id=architecture_overview_fix_11 score=27.4755 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:52] TRACE | [enriched-hybrid-llm]   BM25[1] idx=24 chunk_id=deployment_guide_fix_5 score=24.8671 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:52] TRACE | [enriched-hybrid-llm]   BM25[2] idx=16 chunk_id=architecture_overview_fix_10 score=21.6033 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:52] TRACE | [enriched-hybrid-llm]   BM25[3] idx=25 chunk_id=deployment_guide_fix_6 score=19.4215 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:52] TRACE | [enriched-hybrid-llm]   BM25[4] idx=18 chunk_id=architecture_overview_fix_12 score=12.9840 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:52] TRACE | [enriched-hybrid-llm]   BM25[5] idx=8 chunk_id=architecture_overview_fix_2 score=8.2311 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:52] TRACE | [enriched-hybrid-llm]   BM25[6] idx=38 chunk_id=troubleshooting_guide_fix_10 score=7.0445 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:52] TRACE | [enriched-hybrid-llm]   BM25[7] idx=6 chunk_id=architecture_overview_fix_0 score=5.2649 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:52] TRACE | [enriched-hybrid-llm]   BM25[8] idx=19 chunk_id=deployment_guide_fix_0 score=4.9478 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:52] TRACE | [enriched-hybrid-llm]   BM25[9] idx=3 chunk_id=api_reference_fix_3 score=4.5668 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:52] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:52] TRACE | [enriched-hybrid-llm]   RRF[0] idx=17 total=0.3120 (sem_rank=15 comp=0.0120 + bm25_rank=0 comp=0.3000)
[15:08:52] TRACE | [enriched-hybrid-llm]   RRF[1] idx=24 total=0.2977 (sem_rank=2 comp=0.0250 + bm25_rank=1 comp=0.2727)
[15:08:52] TRACE | [enriched-hybrid-llm]   RRF[2] idx=16 total=0.2591 (sem_rank=23 comp=0.0091 + bm25_rank=2 comp=0.2500)
[15:08:52] TRACE | [enriched-hybrid-llm]   RRF[3] idx=25 total=0.2580 (sem_rank=1 comp=0.0273 + bm25_rank=3 comp=0.2308)
[15:08:52] TRACE | [enriched-hybrid-llm]   RRF[4] idx=18 total=0.2443 (sem_rank=0 comp=0.0300 + bm25_rank=4 comp=0.2143)
[15:08:52] TRACE | [enriched-hybrid-llm]   RRF[5] idx=8 total=0.2130 (sem_rank=13 comp=0.0130 + bm25_rank=5 comp=0.2000)
[15:08:52] TRACE | [enriched-hybrid-llm]   RRF[6] idx=38 total=0.2018 (sem_rank=11 comp=0.0143 + bm25_rank=6 comp=0.1875)
[15:08:52] TRACE | [enriched-hybrid-llm]   RRF[7] idx=6 total=0.1872 (sem_rank=18 comp=0.0107 + bm25_rank=7 comp=0.1765)
[15:08:52] TRACE | [enriched-hybrid-llm]   RRF[8] idx=19 total=0.1854 (sem_rank=6 comp=0.0187 + bm25_rank=8 comp=0.1667)
[15:08:52] TRACE | [enriched-hybrid-llm]   RRF[9] idx=3 total=0.1779 (sem_rank=5 comp=0.0200 + bm25_rank=9 comp=0.1579)
[15:08:52] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:52] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_11 doc_id=architecture_overview rrf_score=0.3120 sem_rank=15 bm25_rank=0 dominant=bm25 | enriched: Kafka Broker, Redis Replica, Backup Strategy, Backup Schedule, Kubernetes health, Weekly automated, automatic promotion | Redis Replica, Kafka Broker, Sentinel, S3, Glacier  Service (2) - PostgreSQL P...
[15:08:52] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_5 doc_id=deployment_guide rrf_score=0.2977 sem_rank=2 bm25_rank=1 dominant=bm25 | enriched: Disaster Recovery, Recovery Procedure, Backup Strategy, Query logs, CloudWatch Insights, Velero Install, Install Velero | CloudWatch Insights, WAL, Backup, Automated Backup  Configure log aggregation:...
[15:08:52] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2591 sem_rank=23 bm25_rank=2 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:52] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.2580 sem_rank=1 bm25_rank=3 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:52] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.2443 sem_rank=0 bm25_rank=4 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:08:52] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:52] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:52] TRACE | Query: How long will it take to recover from a disaster?
[15:08:52] TRACE | Total key facts: 2
[15:08:52] TRACE | Found facts: 2/2
[15:08:52] TRACE |   FOUND[1] RPO (Recovery Point Objective): 1 hour
[15:08:52] TRACE |   FOUND[2] RTO (Recovery Time Objective): 4 hours
[15:08:52] TRACE | === END FACT COVERAGE ===
[15:08:52] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:52] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: RPO RTO
[15:08:52] DEBUG | [query-rewrite] Rewriting query: RPO RTO
[15:08:52] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:52] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=806 timeout=5s
[15:08:52] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:52] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:52] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:53] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.92s
[15:08:53] DEBUG | [anthropic] USAGE: input_tokens=190 output_tokens=16
[15:08:53] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=103
[15:08:53] DEBUG | [anthropic] RESPONSE: recovery point objective recovery time objective disaster recovery metrics business continuity planning
[15:08:53] DEBUG | [query-rewrite] SUCCESS in 0.925s: RPO RTO → recovery point objective recovery time objective disaster recovery metrics business continuity planning
[15:08:53] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: recovery point objective recovery time objective disaster recovery metrics business continuity planning (took 0.925s)
[15:08:53] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: recovery point objective recovery time objective disaster recovery metrics business continuity planning RPO RTO backup data downtime loss restore
[15:08:53] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:53] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:53] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:53] TRACE | [enriched-hybrid-llm]   SEM[0] idx=18 chunk_id=architecture_overview_fix_12 score=0.6126 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:53] TRACE | [enriched-hybrid-llm]   SEM[1] idx=24 chunk_id=deployment_guide_fix_5 score=0.5837 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:53] TRACE | [enriched-hybrid-llm]   SEM[2] idx=25 chunk_id=deployment_guide_fix_6 score=0.5773 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:53] TRACE | [enriched-hybrid-llm]   SEM[3] idx=46 chunk_id=user_guide_fix_6 score=0.5582 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:53] TRACE | [enriched-hybrid-llm]   SEM[4] idx=7 chunk_id=architecture_overview_fix_1 score=0.5557 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:53] TRACE | [enriched-hybrid-llm]   SEM[5] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5529 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:53] TRACE | [enriched-hybrid-llm]   SEM[6] idx=19 chunk_id=deployment_guide_fix_0 score=0.5447 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:53] TRACE | [enriched-hybrid-llm]   SEM[7] idx=3 chunk_id=api_reference_fix_3 score=0.5416 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:53] TRACE | [enriched-hybrid-llm]   SEM[8] idx=9 chunk_id=architecture_overview_fix_3 score=0.5345 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:53] TRACE | [enriched-hybrid-llm]   SEM[9] idx=15 chunk_id=architecture_overview_fix_9 score=0.5219 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:08:53] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:53] TRACE | [enriched-hybrid-llm]   BM25[0] idx=17 chunk_id=architecture_overview_fix_11 score=26.7141 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:53] TRACE | [enriched-hybrid-llm]   BM25[1] idx=24 chunk_id=deployment_guide_fix_5 score=24.1021 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:53] TRACE | [enriched-hybrid-llm]   BM25[2] idx=18 chunk_id=architecture_overview_fix_12 score=21.6444 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:53] TRACE | [enriched-hybrid-llm]   BM25[3] idx=16 chunk_id=architecture_overview_fix_10 score=20.8502 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:53] TRACE | [enriched-hybrid-llm]   BM25[4] idx=25 chunk_id=deployment_guide_fix_6 score=18.3236 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:53] TRACE | [enriched-hybrid-llm]   BM25[5] idx=38 chunk_id=troubleshooting_guide_fix_10 score=8.5286 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:53] TRACE | [enriched-hybrid-llm]   BM25[6] idx=8 chunk_id=architecture_overview_fix_2 score=6.5599 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:53] TRACE | [enriched-hybrid-llm]   BM25[7] idx=6 chunk_id=architecture_overview_fix_0 score=5.7694 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:53] TRACE | [enriched-hybrid-llm]   BM25[8] idx=30 chunk_id=troubleshooting_guide_fix_2 score=4.8277 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:53] TRACE | [enriched-hybrid-llm]   BM25[9] idx=44 chunk_id=user_guide_fix_4 score=3.6543 | ### Cron Syntax Use standard cron expressions to define schedules: ``` * * * * * ┬ ┬ ┬ ┬ ┬ │ │ │ │ │...
[15:08:53] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:53] TRACE | [enriched-hybrid-llm]   RRF[0] idx=17 total=0.3136 (sem_rank=12 comp=0.0136 + bm25_rank=0 comp=0.3000)
[15:08:53] TRACE | [enriched-hybrid-llm]   RRF[1] idx=24 total=0.3000 (sem_rank=1 comp=0.0273 + bm25_rank=1 comp=0.2727)
[15:08:53] TRACE | [enriched-hybrid-llm]   RRF[2] idx=18 total=0.2800 (sem_rank=0 comp=0.0300 + bm25_rank=2 comp=0.2500)
[15:08:53] TRACE | [enriched-hybrid-llm]   RRF[3] idx=25 total=0.2393 (sem_rank=2 comp=0.0250 + bm25_rank=4 comp=0.2143)
[15:08:53] TRACE | [enriched-hybrid-llm]   RRF[4] idx=16 total=0.2391 (sem_rank=26 comp=0.0083 + bm25_rank=3 comp=0.2308)
[15:08:53] TRACE | [enriched-hybrid-llm]   RRF[5] idx=38 total=0.2125 (sem_rank=14 comp=0.0125 + bm25_rank=5 comp=0.2000)
[15:08:53] TRACE | [enriched-hybrid-llm]   RRF[6] idx=8 total=0.2025 (sem_rank=10 comp=0.0150 + bm25_rank=6 comp=0.1875)
[15:08:53] TRACE | [enriched-hybrid-llm]   RRF[7] idx=6 total=0.1868 (sem_rank=19 comp=0.0103 + bm25_rank=7 comp=0.1765)
[15:08:53] TRACE | [enriched-hybrid-llm]   RRF[8] idx=30 total=0.1746 (sem_rank=28 comp=0.0079 + bm25_rank=8 comp=0.1667)
[15:08:53] TRACE | [enriched-hybrid-llm]   RRF[9] idx=3 total=0.1676 (sem_rank=7 comp=0.0176 + bm25_rank=10 comp=0.1500)
[15:08:53] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:53] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_11 doc_id=architecture_overview rrf_score=0.3136 sem_rank=12 bm25_rank=0 dominant=bm25 | enriched: Kafka Broker, Redis Replica, Backup Strategy, Backup Schedule, Kubernetes health, Weekly automated, automatic promotion | Redis Replica, Kafka Broker, Sentinel, S3, Glacier  Service (2) - PostgreSQL P...
[15:08:53] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_5 doc_id=deployment_guide rrf_score=0.3000 sem_rank=1 bm25_rank=1 dominant=bm25 | enriched: Disaster Recovery, Recovery Procedure, Backup Strategy, Query logs, CloudWatch Insights, Velero Install, Install Velero | CloudWatch Insights, WAL, Backup, Automated Backup  Configure log aggregation:...
[15:08:53] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.2800 sem_rank=0 bm25_rank=2 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:08:53] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.2393 sem_rank=2 bm25_rank=4 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:53] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2391 sem_rank=26 bm25_rank=3 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:53] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:53] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:53] TRACE | Query: RPO RTO
[15:08:53] TRACE | Total key facts: 2
[15:08:53] TRACE | Found facts: 2/2
[15:08:53] TRACE |   FOUND[1] RPO (Recovery Point Objective): 1 hour
[15:08:53] TRACE |   FOUND[2] RTO (Recovery Time Objective): 4 hours
[15:08:53] TRACE | === END FACT COVERAGE ===
[15:08:53] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:53] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: For our business continuity plan, what are CloudFlow's recovery objectives?
[15:08:53] DEBUG | [query-rewrite] Rewriting query: For our business continuity plan, what are CloudFlow's recovery objectives?
[15:08:53] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:53] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=874 timeout=5s
[15:08:53] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:53] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:53] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:54] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.89s
[15:08:54] DEBUG | [anthropic] USAGE: input_tokens=201 output_tokens=17
[15:08:54] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=105
[15:08:54] DEBUG | [anthropic] RESPONSE: CloudFlow disaster recovery recovery point objective recovery time objective business continuity planning
[15:08:54] DEBUG | [query-rewrite] SUCCESS in 0.893s: For our business continuity plan, what are CloudFlow's recovery objectives? → CloudFlow disaster recovery recovery point objective recovery time objective business continuity planning
[15:08:54] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: CloudFlow disaster recovery recovery point objective recovery time objective business continuity planning (took 0.893s)
[15:08:54] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: CloudFlow disaster recovery recovery point objective recovery time objective business continuity planning RPO RTO backup data downtime loss restore
[15:08:54] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:54] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:54] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:54] TRACE | [enriched-hybrid-llm]   SEM[0] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.6812 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:54] TRACE | [enriched-hybrid-llm]   SEM[1] idx=19 chunk_id=deployment_guide_fix_0 score=0.6710 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:54] TRACE | [enriched-hybrid-llm]   SEM[2] idx=25 chunk_id=deployment_guide_fix_6 score=0.6691 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:54] TRACE | [enriched-hybrid-llm]   SEM[3] idx=24 chunk_id=deployment_guide_fix_5 score=0.6579 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:54] TRACE | [enriched-hybrid-llm]   SEM[4] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6513 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:54] TRACE | [enriched-hybrid-llm]   SEM[5] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6390 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:54] TRACE | [enriched-hybrid-llm]   SEM[6] idx=18 chunk_id=architecture_overview_fix_12 score=0.6344 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:54] TRACE | [enriched-hybrid-llm]   SEM[7] idx=6 chunk_id=architecture_overview_fix_0 score=0.6309 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:54] TRACE | [enriched-hybrid-llm]   SEM[8] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6243 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:54] TRACE | [enriched-hybrid-llm]   SEM[9] idx=45 chunk_id=user_guide_fix_5 score=0.6232 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:54] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:54] TRACE | [enriched-hybrid-llm]   BM25[0] idx=17 chunk_id=architecture_overview_fix_11 score=26.7141 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:54] TRACE | [enriched-hybrid-llm]   BM25[1] idx=24 chunk_id=deployment_guide_fix_5 score=25.6196 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:54] TRACE | [enriched-hybrid-llm]   BM25[2] idx=18 chunk_id=architecture_overview_fix_12 score=21.6444 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:54] TRACE | [enriched-hybrid-llm]   BM25[3] idx=16 chunk_id=architecture_overview_fix_10 score=20.8502 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:54] TRACE | [enriched-hybrid-llm]   BM25[4] idx=25 chunk_id=deployment_guide_fix_6 score=19.0785 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:54] TRACE | [enriched-hybrid-llm]   BM25[5] idx=38 chunk_id=troubleshooting_guide_fix_10 score=8.1737 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:54] TRACE | [enriched-hybrid-llm]   BM25[6] idx=8 chunk_id=architecture_overview_fix_2 score=6.5599 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:54] TRACE | [enriched-hybrid-llm]   BM25[7] idx=6 chunk_id=architecture_overview_fix_0 score=5.8788 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:54] TRACE | [enriched-hybrid-llm]   BM25[8] idx=30 chunk_id=troubleshooting_guide_fix_2 score=4.8797 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:54] TRACE | [enriched-hybrid-llm]   BM25[9] idx=31 chunk_id=troubleshooting_guide_fix_3 score=4.8004 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:54] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:54] TRACE | [enriched-hybrid-llm]   RRF[0] idx=17 total=0.3058 (sem_rank=42 comp=0.0058 + bm25_rank=0 comp=0.3000)
[15:08:54] TRACE | [enriched-hybrid-llm]   RRF[1] idx=24 total=0.2958 (sem_rank=3 comp=0.0231 + bm25_rank=1 comp=0.2727)
[15:08:54] TRACE | [enriched-hybrid-llm]   RRF[2] idx=18 total=0.2687 (sem_rank=6 comp=0.0187 + bm25_rank=2 comp=0.2500)
[15:08:54] TRACE | [enriched-hybrid-llm]   RRF[3] idx=25 total=0.2393 (sem_rank=2 comp=0.0250 + bm25_rank=4 comp=0.2143)
[15:08:54] TRACE | [enriched-hybrid-llm]   RRF[4] idx=16 total=0.2368 (sem_rank=40 comp=0.0060 + bm25_rank=3 comp=0.2308)
[15:08:54] TRACE | [enriched-hybrid-llm]   RRF[5] idx=38 total=0.2136 (sem_rank=12 comp=0.0136 + bm25_rank=5 comp=0.2000)
[15:08:54] TRACE | [enriched-hybrid-llm]   RRF[6] idx=8 total=0.1954 (sem_rank=28 comp=0.0079 + bm25_rank=6 comp=0.1875)
[15:08:54] TRACE | [enriched-hybrid-llm]   RRF[7] idx=6 total=0.1941 (sem_rank=7 comp=0.0176 + bm25_rank=7 comp=0.1765)
[15:08:54] TRACE | [enriched-hybrid-llm]   RRF[8] idx=30 total=0.1833 (sem_rank=8 comp=0.0167 + bm25_rank=8 comp=0.1667)
[15:08:54] TRACE | [enriched-hybrid-llm]   RRF[9] idx=19 total=0.1701 (sem_rank=1 comp=0.0273 + bm25_rank=11 comp=0.1429)
[15:08:54] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:54] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_11 doc_id=architecture_overview rrf_score=0.3058 sem_rank=42 bm25_rank=0 dominant=bm25 | enriched: Kafka Broker, Redis Replica, Backup Strategy, Backup Schedule, Kubernetes health, Weekly automated, automatic promotion | Redis Replica, Kafka Broker, Sentinel, S3, Glacier  Service (2) - PostgreSQL P...
[15:08:54] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_5 doc_id=deployment_guide rrf_score=0.2958 sem_rank=3 bm25_rank=1 dominant=bm25 | enriched: Disaster Recovery, Recovery Procedure, Backup Strategy, Query logs, CloudWatch Insights, Velero Install, Install Velero | CloudWatch Insights, WAL, Backup, Automated Backup  Configure log aggregation:...
[15:08:54] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.2687 sem_rank=6 bm25_rank=2 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:08:54] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.2393 sem_rank=2 bm25_rank=4 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:54] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2368 sem_rank=40 bm25_rank=3 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:54] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:54] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:54] TRACE | Query: For our business continuity plan, what are CloudFlow's recovery objectives?
[15:08:54] TRACE | Total key facts: 2
[15:08:54] TRACE | Found facts: 2/2
[15:08:54] TRACE |   FOUND[1] RPO (Recovery Point Objective): 1 hour
[15:08:54] TRACE |   FOUND[2] RTO (Recovery Time Objective): 4 hours
[15:08:54] TRACE | === END FACT COVERAGE ===
[15:08:54] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:54] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why can't we guarantee zero data loss?
[15:08:54] DEBUG | [query-rewrite] Rewriting query: Why can't we guarantee zero data loss?
[15:08:54] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:54] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=837 timeout=5s
[15:08:54] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:54] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:54] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:55] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.97s
[15:08:55] DEBUG | [anthropic] USAGE: input_tokens=195 output_tokens=16
[15:08:55] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=77
[15:08:55] DEBUG | [anthropic] RESPONSE: data loss guarantees recovery point objective RPO minimum data loss tolerance
[15:08:55] DEBUG | [query-rewrite] SUCCESS in 0.968s: Why can't we guarantee zero data loss? → data loss guarantees recovery point objective RPO minimum data loss tolerance
[15:08:55] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: data loss guarantees recovery point objective RPO minimum data loss tolerance (took 0.968s)
[15:08:55] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: data loss guarantees recovery point objective RPO minimum data loss tolerance RPO backup disaster
[15:08:55] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:08:55] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:08:55] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:55] TRACE | [enriched-hybrid-llm]   SEM[0] idx=18 chunk_id=architecture_overview_fix_12 score=0.5563 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:55] TRACE | [enriched-hybrid-llm]   SEM[1] idx=46 chunk_id=user_guide_fix_6 score=0.5306 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:55] TRACE | [enriched-hybrid-llm]   SEM[2] idx=7 chunk_id=architecture_overview_fix_1 score=0.5239 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:08:55] TRACE | [enriched-hybrid-llm]   SEM[3] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5187 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:55] TRACE | [enriched-hybrid-llm]   SEM[4] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.5162 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:55] TRACE | [enriched-hybrid-llm]   SEM[5] idx=9 chunk_id=architecture_overview_fix_3 score=0.5129 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:08:55] TRACE | [enriched-hybrid-llm]   SEM[6] idx=24 chunk_id=deployment_guide_fix_5 score=0.5075 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:55] TRACE | [enriched-hybrid-llm]   SEM[7] idx=45 chunk_id=user_guide_fix_5 score=0.5043 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:08:55] TRACE | [enriched-hybrid-llm]   SEM[8] idx=4 chunk_id=api_reference_fix_4 score=0.5023 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:08:55] TRACE | [enriched-hybrid-llm]   SEM[9] idx=8 chunk_id=architecture_overview_fix_2 score=0.4893 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:55] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:55] TRACE | [enriched-hybrid-llm]   BM25[0] idx=17 chunk_id=architecture_overview_fix_11 score=15.2771 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:08:55] TRACE | [enriched-hybrid-llm]   BM25[1] idx=24 chunk_id=deployment_guide_fix_5 score=12.4958 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:08:55] TRACE | [enriched-hybrid-llm]   BM25[2] idx=16 chunk_id=architecture_overview_fix_10 score=10.7379 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:55] TRACE | [enriched-hybrid-llm]   BM25[3] idx=25 chunk_id=deployment_guide_fix_6 score=8.8318 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:08:55] TRACE | [enriched-hybrid-llm]   BM25[4] idx=18 chunk_id=architecture_overview_fix_12 score=8.1271 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:55] TRACE | [enriched-hybrid-llm]   BM25[5] idx=38 chunk_id=troubleshooting_guide_fix_10 score=7.2173 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:08:55] TRACE | [enriched-hybrid-llm]   BM25[6] idx=50 chunk_id=user_guide_fix_10 score=5.5213 | - **Documentation**: https://docs.cloudflow.io - **Community Forum**: https://community.cloudflow.io...
[15:08:55] TRACE | [enriched-hybrid-llm]   BM25[7] idx=43 chunk_id=user_guide_fix_3 score=3.6073 | ``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...
[15:08:55] TRACE | [enriched-hybrid-llm]   BM25[8] idx=19 chunk_id=deployment_guide_fix_0 score=3.5511 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:08:55] TRACE | [enriched-hybrid-llm]   BM25[9] idx=6 chunk_id=architecture_overview_fix_0 score=2.8904 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:55] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:55] TRACE | [enriched-hybrid-llm]   RRF[0] idx=17 total=0.3130 (sem_rank=13 comp=0.0130 + bm25_rank=0 comp=0.3000)
[15:08:55] TRACE | [enriched-hybrid-llm]   RRF[1] idx=24 total=0.2915 (sem_rank=6 comp=0.0187 + bm25_rank=1 comp=0.2727)
[15:08:55] TRACE | [enriched-hybrid-llm]   RRF[2] idx=16 total=0.2579 (sem_rank=28 comp=0.0079 + bm25_rank=2 comp=0.2500)
[15:08:55] TRACE | [enriched-hybrid-llm]   RRF[3] idx=18 total=0.2443 (sem_rank=0 comp=0.0300 + bm25_rank=4 comp=0.2143)
[15:08:55] TRACE | [enriched-hybrid-llm]   RRF[4] idx=25 total=0.2428 (sem_rank=15 comp=0.0120 + bm25_rank=3 comp=0.2308)
[15:08:55] TRACE | [enriched-hybrid-llm]   RRF[5] idx=38 total=0.2111 (sem_rank=17 comp=0.0111 + bm25_rank=5 comp=0.2000)
[15:08:55] TRACE | [enriched-hybrid-llm]   RRF[6] idx=50 total=0.1935 (sem_rank=40 comp=0.0060 + bm25_rank=6 comp=0.1875)
[15:08:55] TRACE | [enriched-hybrid-llm]   RRF[7] idx=43 total=0.1819 (sem_rank=45 comp=0.0055 + bm25_rank=7 comp=0.1765)
[15:08:55] TRACE | [enriched-hybrid-llm]   RRF[8] idx=19 total=0.1782 (sem_rank=16 comp=0.0115 + bm25_rank=8 comp=0.1667)
[15:08:55] TRACE | [enriched-hybrid-llm]   RRF[9] idx=6 total=0.1676 (sem_rank=21 comp=0.0097 + bm25_rank=9 comp=0.1579)
[15:08:55] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:55] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_11 doc_id=architecture_overview rrf_score=0.3130 sem_rank=13 bm25_rank=0 dominant=bm25 | enriched: Kafka Broker, Redis Replica, Backup Strategy, Backup Schedule, Kubernetes health, Weekly automated, automatic promotion | Redis Replica, Kafka Broker, Sentinel, S3, Glacier  Service (2) - PostgreSQL P...
[15:08:55] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_5 doc_id=deployment_guide rrf_score=0.2915 sem_rank=6 bm25_rank=1 dominant=bm25 | enriched: Disaster Recovery, Recovery Procedure, Backup Strategy, Query logs, CloudWatch Insights, Velero Install, Install Velero | CloudWatch Insights, WAL, Backup, Automated Backup  Configure log aggregation:...
[15:08:55] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2579 sem_rank=28 bm25_rank=2 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:55] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.2443 sem_rank=0 bm25_rank=4 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:08:55] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.2428 sem_rank=15 bm25_rank=3 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:08:55] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:55] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:55] TRACE | Query: Why can't we guarantee zero data loss?
[15:08:55] TRACE | Total key facts: 2
[15:08:55] TRACE | Found facts: 2/2
[15:08:55] TRACE |   FOUND[1] RPO (Recovery Point Objective): 1 hour
[15:08:55] TRACE |   FOUND[2] RTO (Recovery Time Objective): 4 hours
[15:08:55] TRACE | === END FACT COVERAGE ===
[15:08:55] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:55] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What is the maximum workflow execution timeout?
[15:08:55] DEBUG | [query-rewrite] Rewriting query: What is the maximum workflow execution timeout?
[15:08:55] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:55] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=846 timeout=5s
[15:08:55] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:55] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:55] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:56] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.85s
[15:08:56] DEBUG | [anthropic] USAGE: input_tokens=194 output_tokens=9
[15:08:56] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=54
[15:08:56] DEBUG | [anthropic] RESPONSE: workflow execution maximum timeout limit configuration
[15:08:56] DEBUG | [query-rewrite] SUCCESS in 0.853s: What is the maximum workflow execution timeout? → workflow execution maximum timeout limit configuration
[15:08:56] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow execution maximum timeout limit configuration (took 0.853s)
[15:08:56] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:56] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:56] TRACE | [enriched-hybrid-llm]   SEM[0] idx=46 chunk_id=user_guide_fix_6 score=0.7555 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:56] TRACE | [enriched-hybrid-llm]   SEM[1] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.7309 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:56] TRACE | [enriched-hybrid-llm]   SEM[2] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6868 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:56] TRACE | [enriched-hybrid-llm]   SEM[3] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6841 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:56] TRACE | [enriched-hybrid-llm]   SEM[4] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6664 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:56] TRACE | [enriched-hybrid-llm]   SEM[5] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6552 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:56] TRACE | [enriched-hybrid-llm]   SEM[6] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.6542 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:56] TRACE | [enriched-hybrid-llm]   SEM[7] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.6480 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:56] TRACE | [enriched-hybrid-llm]   SEM[8] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6467 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:56] TRACE | [enriched-hybrid-llm]   SEM[9] idx=1 chunk_id=api_reference_fix_1 score=0.6422 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:56] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:56] TRACE | [enriched-hybrid-llm]   BM25[0] idx=32 chunk_id=troubleshooting_guide_fix_4 score=9.6236 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:56] TRACE | [enriched-hybrid-llm]   BM25[1] idx=33 chunk_id=troubleshooting_guide_fix_5 score=7.3345 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:56] TRACE | [enriched-hybrid-llm]   BM25[2] idx=46 chunk_id=user_guide_fix_6 score=5.1993 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:56] TRACE | [enriched-hybrid-llm]   BM25[3] idx=36 chunk_id=troubleshooting_guide_fix_8 score=4.8238 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:56] TRACE | [enriched-hybrid-llm]   BM25[4] idx=31 chunk_id=troubleshooting_guide_fix_3 score=4.7045 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:56] TRACE | [enriched-hybrid-llm]   BM25[5] idx=16 chunk_id=architecture_overview_fix_10 score=4.6996 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:56] TRACE | [enriched-hybrid-llm]   BM25[6] idx=42 chunk_id=user_guide_fix_2 score=4.5299 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:08:56] TRACE | [enriched-hybrid-llm]   BM25[7] idx=37 chunk_id=troubleshooting_guide_fix_9 score=4.1921 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:56] TRACE | [enriched-hybrid-llm]   BM25[8] idx=29 chunk_id=troubleshooting_guide_fix_1 score=4.1455 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:56] TRACE | [enriched-hybrid-llm]   BM25[9] idx=1 chunk_id=api_reference_fix_1 score=3.6906 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:56] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:56] TRACE | [enriched-hybrid-llm]   RRF[0] idx=46 total=0.0328 (sem_rank=0 comp=0.0167 + bm25_rank=2 comp=0.0161)
[15:08:56] TRACE | [enriched-hybrid-llm]   RRF[1] idx=33 total=0.0328 (sem_rank=1 comp=0.0164 + bm25_rank=1 comp=0.0164)
[15:08:56] TRACE | [enriched-hybrid-llm]   RRF[2] idx=32 total=0.0325 (sem_rank=3 comp=0.0159 + bm25_rank=0 comp=0.0167)
[15:08:56] TRACE | [enriched-hybrid-llm]   RRF[3] idx=31 total=0.0318 (sem_rank=2 comp=0.0161 + bm25_rank=4 comp=0.0156)
[15:08:56] TRACE | [enriched-hybrid-llm]   RRF[4] idx=29 total=0.0299 (sem_rank=6 comp=0.0152 + bm25_rank=8 comp=0.0147)
[15:08:56] TRACE | [enriched-hybrid-llm]   RRF[5] idx=35 total=0.0297 (sem_rank=4 comp=0.0156 + bm25_rank=11 comp=0.0141)
[15:08:56] TRACE | [enriched-hybrid-llm]   RRF[6] idx=1 total=0.0290 (sem_rank=9 comp=0.0145 + bm25_rank=9 comp=0.0145)
[15:08:56] TRACE | [enriched-hybrid-llm]   RRF[7] idx=16 total=0.0289 (sem_rank=14 comp=0.0135 + bm25_rank=5 comp=0.0154)
[15:08:56] TRACE | [enriched-hybrid-llm]   RRF[8] idx=34 total=0.0285 (sem_rank=5 comp=0.0154 + bm25_rank=16 comp=0.0132)
[15:08:56] TRACE | [enriched-hybrid-llm]   RRF[9] idx=39 total=0.0279 (sem_rank=7 comp=0.0149 + bm25_rank=17 comp=0.0130)
[15:08:56] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:56] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=user_guide_fix_6 doc_id=user_guide rrf_score=0.0328 sem_rank=0 bm25_rank=2 dominant=semantic | enriched: workflow, date range, type, workflows, error type, execution, Execution Timeout | MB, Sync Customer Data  Filter by error type, date range, or execution ID 3. Click an execution to view full details 4...
[15:08:56] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0328 sem_rank=1 bm25_rank=1 dominant=balanced | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:08:56] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.0325 sem_rank=3 bm25_rank=0 dominant=bm25 | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:08:56] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.0318 sem_rank=2 bm25_rank=4 dominant=semantic | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:08:56] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.0299 sem_rank=6 bm25_rank=8 dominant=semantic | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:08:56] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:56] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:56] TRACE | Query: What is the maximum workflow execution timeout?
[15:08:56] TRACE | Total key facts: 2
[15:08:56] TRACE | Found facts: 2/2
[15:08:56] TRACE |   FOUND[1] 3600 seconds
[15:08:56] TRACE |   FOUND[2] exceeded maximum execution time of 3600 seconds
[15:08:56] TRACE | === END FACT COVERAGE ===
[15:08:56] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:56] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: How long can a workflow run before timing out?
[15:08:56] DEBUG | [query-rewrite] Rewriting query: How long can a workflow run before timing out?
[15:08:56] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:56] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=845 timeout=5s
[15:08:56] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:56] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:56] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:57] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.93s
[15:08:57] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=9
[15:08:57] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=49
[15:08:57] DEBUG | [anthropic] RESPONSE: workflow execution maximum timeout duration limit
[15:08:57] DEBUG | [query-rewrite] SUCCESS in 0.927s: How long can a workflow run before timing out? → workflow execution maximum timeout duration limit
[15:08:57] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow execution maximum timeout duration limit (took 0.927s)
[15:08:57] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:57] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:57] TRACE | [enriched-hybrid-llm]   SEM[0] idx=46 chunk_id=user_guide_fix_6 score=0.7738 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:57] TRACE | [enriched-hybrid-llm]   SEM[1] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.7316 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:57] TRACE | [enriched-hybrid-llm]   SEM[2] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6734 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:57] TRACE | [enriched-hybrid-llm]   SEM[3] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6716 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:57] TRACE | [enriched-hybrid-llm]   SEM[4] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6622 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:57] TRACE | [enriched-hybrid-llm]   SEM[5] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.6581 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:57] TRACE | [enriched-hybrid-llm]   SEM[6] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6551 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:57] TRACE | [enriched-hybrid-llm]   SEM[7] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.6538 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:57] TRACE | [enriched-hybrid-llm]   SEM[8] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6533 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:57] TRACE | [enriched-hybrid-llm]   SEM[9] idx=1 chunk_id=api_reference_fix_1 score=0.6461 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:57] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:57] TRACE | [enriched-hybrid-llm]   BM25[0] idx=32 chunk_id=troubleshooting_guide_fix_4 score=9.6236 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:57] TRACE | [enriched-hybrid-llm]   BM25[1] idx=29 chunk_id=troubleshooting_guide_fix_1 score=6.5425 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:57] TRACE | [enriched-hybrid-llm]   BM25[2] idx=46 chunk_id=user_guide_fix_6 score=5.1993 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:57] TRACE | [enriched-hybrid-llm]   BM25[3] idx=33 chunk_id=troubleshooting_guide_fix_5 score=4.7997 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:57] TRACE | [enriched-hybrid-llm]   BM25[4] idx=31 chunk_id=troubleshooting_guide_fix_3 score=4.7045 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:57] TRACE | [enriched-hybrid-llm]   BM25[5] idx=16 chunk_id=architecture_overview_fix_10 score=4.6996 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:57] TRACE | [enriched-hybrid-llm]   BM25[6] idx=42 chunk_id=user_guide_fix_2 score=4.5299 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:08:57] TRACE | [enriched-hybrid-llm]   BM25[7] idx=3 chunk_id=api_reference_fix_3 score=4.3350 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:57] TRACE | [enriched-hybrid-llm]   BM25[8] idx=37 chunk_id=troubleshooting_guide_fix_9 score=4.1921 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:08:57] TRACE | [enriched-hybrid-llm]   BM25[9] idx=23 chunk_id=deployment_guide_fix_4 score=3.8048 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:57] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:57] TRACE | [enriched-hybrid-llm]   RRF[0] idx=46 total=0.0328 (sem_rank=0 comp=0.0167 + bm25_rank=2 comp=0.0161)
[15:08:57] TRACE | [enriched-hybrid-llm]   RRF[1] idx=32 total=0.0325 (sem_rank=3 comp=0.0159 + bm25_rank=0 comp=0.0167)
[15:08:57] TRACE | [enriched-hybrid-llm]   RRF[2] idx=33 total=0.0323 (sem_rank=1 comp=0.0164 + bm25_rank=3 comp=0.0159)
[15:08:57] TRACE | [enriched-hybrid-llm]   RRF[3] idx=29 total=0.0318 (sem_rank=5 comp=0.0154 + bm25_rank=1 comp=0.0164)
[15:08:57] TRACE | [enriched-hybrid-llm]   RRF[4] idx=31 total=0.0312 (sem_rank=4 comp=0.0156 + bm25_rank=4 comp=0.0156)
[15:08:57] TRACE | [enriched-hybrid-llm]   RRF[5] idx=35 total=0.0298 (sem_rank=2 comp=0.0161 + bm25_rank=13 comp=0.0137)
[15:08:57] TRACE | [enriched-hybrid-llm]   RRF[6] idx=16 total=0.0289 (sem_rank=14 comp=0.0135 + bm25_rank=5 comp=0.0154)
[15:08:57] TRACE | [enriched-hybrid-llm]   RRF[7] idx=1 total=0.0288 (sem_rank=9 comp=0.0145 + bm25_rank=10 comp=0.0143)
[15:08:57] TRACE | [enriched-hybrid-llm]   RRF[8] idx=3 total=0.0283 (sem_rank=15 comp=0.0133 + bm25_rank=7 comp=0.0149)
[15:08:57] TRACE | [enriched-hybrid-llm]   RRF[9] idx=34 total=0.0281 (sem_rank=6 comp=0.0152 + bm25_rank=17 comp=0.0130)
[15:08:57] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:57] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=user_guide_fix_6 doc_id=user_guide rrf_score=0.0328 sem_rank=0 bm25_rank=2 dominant=semantic | enriched: workflow, date range, type, workflows, error type, execution, Execution Timeout | MB, Sync Customer Data  Filter by error type, date range, or execution ID 3. Click an execution to view full details 4...
[15:08:57] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.0325 sem_rank=3 bm25_rank=0 dominant=bm25 | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:08:57] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0323 sem_rank=1 bm25_rank=3 dominant=semantic | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:08:57] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.0318 sem_rank=5 bm25_rank=1 dominant=bm25 | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:08:57] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.0312 sem_rank=4 bm25_rank=4 dominant=balanced | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:08:57] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:57] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:57] TRACE | Query: How long can a workflow run before timing out?
[15:08:57] TRACE | Total key facts: 2
[15:08:57] TRACE | Found facts: 2/2
[15:08:57] TRACE |   FOUND[1] 3600 seconds
[15:08:57] TRACE |   FOUND[2] exceeded maximum execution time of 3600 seconds
[15:08:57] TRACE | === END FACT COVERAGE ===
[15:08:57] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:57] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: My workflow is being killed after an hour
[15:08:57] DEBUG | [query-rewrite] Rewriting query: My workflow is being killed after an hour
[15:08:57] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:57] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=840 timeout=5s
[15:08:57] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:57] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:57] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:58] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.96s
[15:08:58] DEBUG | [anthropic] USAGE: input_tokens=194 output_tokens=11
[15:08:58] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=65
[15:08:58] DEBUG | [anthropic] RESPONSE: workflow execution timeout maximum runtime termination conditions
[15:08:58] DEBUG | [query-rewrite] SUCCESS in 0.963s: My workflow is being killed after an hour → workflow execution timeout maximum runtime termination conditions
[15:08:58] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow execution timeout maximum runtime termination conditions (took 0.963s)
[15:08:58] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:58] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[0] idx=46 chunk_id=user_guide_fix_6 score=0.7375 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[1] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6997 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[2] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6609 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[3] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6546 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[4] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.6444 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[5] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6412 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[6] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6412 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[7] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.6397 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[8] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6331 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[9] idx=18 chunk_id=architecture_overview_fix_12 score=0.6233 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:58] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[0] idx=32 chunk_id=troubleshooting_guide_fix_4 score=7.7408 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[1] idx=46 chunk_id=user_guide_fix_6 score=5.1993 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[2] idx=6 chunk_id=architecture_overview_fix_0 score=4.8405 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[3] idx=33 chunk_id=troubleshooting_guide_fix_5 score=4.7997 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[4] idx=16 chunk_id=architecture_overview_fix_10 score=4.6996 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[5] idx=29 chunk_id=troubleshooting_guide_fix_1 score=4.1455 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[6] idx=43 chunk_id=user_guide_fix_3 score=3.5761 | ``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[7] idx=31 chunk_id=troubleshooting_guide_fix_3 score=3.3575 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[8] idx=42 chunk_id=user_guide_fix_2 score=3.2379 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[9] idx=36 chunk_id=troubleshooting_guide_fix_8 score=3.1538 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:58] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[0] idx=46 total=0.0331 (sem_rank=0 comp=0.0167 + bm25_rank=1 comp=0.0164)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[1] idx=32 total=0.0325 (sem_rank=3 comp=0.0159 + bm25_rank=0 comp=0.0167)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[2] idx=33 total=0.0323 (sem_rank=1 comp=0.0164 + bm25_rank=3 comp=0.0159)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[3] idx=31 total=0.0311 (sem_rank=2 comp=0.0161 + bm25_rank=7 comp=0.0149)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[4] idx=29 total=0.0310 (sem_rank=4 comp=0.0156 + bm25_rank=5 comp=0.0154)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[5] idx=16 total=0.0295 (sem_rank=12 comp=0.0139 + bm25_rank=4 comp=0.0156)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[6] idx=39 total=0.0290 (sem_rank=7 comp=0.0149 + bm25_rank=11 comp=0.0141)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[7] idx=43 total=0.0289 (sem_rank=13 comp=0.0137 + bm25_rank=6 comp=0.0152)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[8] idx=13 total=0.0286 (sem_rank=10 comp=0.0143 + bm25_rank=10 comp=0.0143)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[9] idx=45 total=0.0278 (sem_rank=11 comp=0.0141 + bm25_rank=13 comp=0.0137)
[15:08:58] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:58] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=user_guide_fix_6 doc_id=user_guide rrf_score=0.0331 sem_rank=0 bm25_rank=1 dominant=semantic | enriched: workflow, date range, type, workflows, error type, execution, Execution Timeout | MB, Sync Customer Data  Filter by error type, date range, or execution ID 3. Click an execution to view full details 4...
[15:08:58] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.0325 sem_rank=3 bm25_rank=0 dominant=bm25 | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:08:58] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0323 sem_rank=1 bm25_rank=3 dominant=semantic | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:08:58] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.0311 sem_rank=2 bm25_rank=7 dominant=semantic | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:08:58] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.0310 sem_rank=4 bm25_rank=5 dominant=semantic | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:08:58] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:58] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:58] TRACE | Query: My workflow is being killed after an hour
[15:08:58] TRACE | Total key facts: 2
[15:08:58] TRACE | Found facts: 2/2
[15:08:58] TRACE |   FOUND[1] 3600 seconds
[15:08:58] TRACE |   FOUND[2] exceeded maximum execution time of 3600 seconds
[15:08:58] TRACE | === END FACT COVERAGE ===
[15:08:58] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:58] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: workflow timeout
[15:08:58] DEBUG | [query-rewrite] Rewriting query: workflow timeout
[15:08:58] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:58] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=815 timeout=5s
[15:08:58] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:58] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:58] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:58] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.80s
[15:08:58] DEBUG | [anthropic] USAGE: input_tokens=188 output_tokens=9
[15:08:58] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=54
[15:08:58] DEBUG | [anthropic] RESPONSE: workflow timeout configuration maximum duration limits
[15:08:58] DEBUG | [query-rewrite] SUCCESS in 0.797s: workflow timeout → workflow timeout configuration maximum duration limits
[15:08:58] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow timeout configuration maximum duration limits (took 0.797s)
[15:08:58] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:58] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[0] idx=46 chunk_id=user_guide_fix_6 score=0.7254 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[1] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6963 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[2] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6751 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[3] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6538 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[4] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.6411 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[5] idx=1 chunk_id=api_reference_fix_1 score=0.6356 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[6] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6350 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[7] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6334 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[8] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.6325 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:08:58] TRACE | [enriched-hybrid-llm]   SEM[9] idx=18 chunk_id=architecture_overview_fix_12 score=0.6149 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:58] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[0] idx=46 chunk_id=user_guide_fix_6 score=8.4541 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[1] idx=32 chunk_id=troubleshooting_guide_fix_4 score=7.1218 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[2] idx=33 chunk_id=troubleshooting_guide_fix_5 score=6.9866 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[3] idx=29 chunk_id=troubleshooting_guide_fix_1 score=6.5425 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[4] idx=31 chunk_id=troubleshooting_guide_fix_3 score=5.2648 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[5] idx=36 chunk_id=troubleshooting_guide_fix_8 score=4.4958 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[6] idx=16 chunk_id=architecture_overview_fix_10 score=4.2234 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[7] idx=23 chunk_id=deployment_guide_fix_4 score=3.8048 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[8] idx=3 chunk_id=api_reference_fix_3 score=3.8029 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:58] TRACE | [enriched-hybrid-llm]   BM25[9] idx=1 chunk_id=api_reference_fix_1 score=3.7753 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:58] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[0] idx=46 total=0.0333 (sem_rank=0 comp=0.0167 + bm25_rank=0 comp=0.0167)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[1] idx=33 total=0.0325 (sem_rank=1 comp=0.0164 + bm25_rank=2 comp=0.0161)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[2] idx=32 total=0.0325 (sem_rank=2 comp=0.0161 + bm25_rank=1 comp=0.0164)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[3] idx=31 total=0.0315 (sem_rank=3 comp=0.0159 + bm25_rank=4 comp=0.0156)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[4] idx=29 total=0.0315 (sem_rank=4 comp=0.0156 + bm25_rank=3 comp=0.0159)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[5] idx=1 total=0.0299 (sem_rank=5 comp=0.0154 + bm25_rank=9 comp=0.0145)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[6] idx=16 total=0.0285 (sem_rank=15 comp=0.0133 + bm25_rank=6 comp=0.0152)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[7] idx=34 total=0.0283 (sem_rank=7 comp=0.0149 + bm25_rank=15 comp=0.0133)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[8] idx=13 total=0.0278 (sem_rank=10 comp=0.0143 + bm25_rank=14 comp=0.0135)
[15:08:58] TRACE | [enriched-hybrid-llm]   RRF[9] idx=3 total=0.0277 (sem_rank=17 comp=0.0130 + bm25_rank=8 comp=0.0147)
[15:08:58] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:58] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=user_guide_fix_6 doc_id=user_guide rrf_score=0.0333 sem_rank=0 bm25_rank=0 dominant=balanced | enriched: workflow, date range, type, workflows, error type, execution, Execution Timeout | MB, Sync Customer Data  Filter by error type, date range, or execution ID 3. Click an execution to view full details 4...
[15:08:58] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0325 sem_rank=1 bm25_rank=2 dominant=semantic | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:08:58] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.0325 sem_rank=2 bm25_rank=1 dominant=bm25 | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:08:58] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.0315 sem_rank=3 bm25_rank=4 dominant=semantic | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:08:58] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.0315 sem_rank=4 bm25_rank=3 dominant=bm25 | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:08:58] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:58] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:58] TRACE | Query: workflow timeout
[15:08:58] TRACE | Total key facts: 2
[15:08:58] TRACE | Found facts: 2/2
[15:08:58] TRACE |   FOUND[1] 3600 seconds
[15:08:58] TRACE |   FOUND[2] exceeded maximum execution time of 3600 seconds
[15:08:58] TRACE | === END FACT COVERAGE ===
[15:08:58] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:58] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: I have a long-running data processing workflow, what's the time limit?
[15:08:58] DEBUG | [query-rewrite] Rewriting query: I have a long-running data processing workflow, what's the time limit?
[15:08:58] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:58] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=869 timeout=5s
[15:08:58] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:58] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:58] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:08:59] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.97s
[15:08:59] DEBUG | [anthropic] USAGE: input_tokens=202 output_tokens=11
[15:08:59] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=61
[15:08:59] DEBUG | [anthropic] RESPONSE: workflow maximum execution time processing job duration limit
[15:08:59] DEBUG | [query-rewrite] SUCCESS in 0.967s: I have a long-running data processing workflow, what's the time limit? → workflow maximum execution time processing job duration limit
[15:08:59] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow maximum execution time processing job duration limit (took 0.968s)
[15:08:59] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:08:59] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:08:59] TRACE | [enriched-hybrid-llm]   SEM[0] idx=46 chunk_id=user_guide_fix_6 score=0.7213 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:08:59] TRACE | [enriched-hybrid-llm]   SEM[1] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6858 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:59] TRACE | [enriched-hybrid-llm]   SEM[2] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6601 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:08:59] TRACE | [enriched-hybrid-llm]   SEM[3] idx=16 chunk_id=architecture_overview_fix_10 score=0.6332 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:59] TRACE | [enriched-hybrid-llm]   SEM[4] idx=1 chunk_id=api_reference_fix_1 score=0.6317 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:59] TRACE | [enriched-hybrid-llm]   SEM[5] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6281 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:08:59] TRACE | [enriched-hybrid-llm]   SEM[6] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6254 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:59] TRACE | [enriched-hybrid-llm]   SEM[7] idx=8 chunk_id=architecture_overview_fix_2 score=0.6139 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:08:59] TRACE | [enriched-hybrid-llm]   SEM[8] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6117 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:08:59] TRACE | [enriched-hybrid-llm]   SEM[9] idx=18 chunk_id=architecture_overview_fix_12 score=0.6110 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:08:59] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:08:59] TRACE | [enriched-hybrid-llm]   BM25[0] idx=23 chunk_id=deployment_guide_fix_4 score=10.3928 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:08:59] TRACE | [enriched-hybrid-llm]   BM25[1] idx=32 chunk_id=troubleshooting_guide_fix_4 score=7.3153 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:08:59] TRACE | [enriched-hybrid-llm]   BM25[2] idx=29 chunk_id=troubleshooting_guide_fix_1 score=5.7799 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:08:59] TRACE | [enriched-hybrid-llm]   BM25[3] idx=1 chunk_id=api_reference_fix_1 score=5.5311 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:08:59] TRACE | [enriched-hybrid-llm]   BM25[4] idx=16 chunk_id=architecture_overview_fix_10 score=5.4164 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:08:59] TRACE | [enriched-hybrid-llm]   BM25[5] idx=3 chunk_id=api_reference_fix_3 score=5.1731 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:08:59] TRACE | [enriched-hybrid-llm]   BM25[6] idx=31 chunk_id=troubleshooting_guide_fix_3 score=4.7045 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:08:59] TRACE | [enriched-hybrid-llm]   BM25[7] idx=33 chunk_id=troubleshooting_guide_fix_5 score=4.5784 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:08:59] TRACE | [enriched-hybrid-llm]   BM25[8] idx=14 chunk_id=architecture_overview_fix_8 score=4.3634 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:08:59] TRACE | [enriched-hybrid-llm]   BM25[9] idx=43 chunk_id=user_guide_fix_3 score=4.3376 | ``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...
[15:08:59] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:08:59] TRACE | [enriched-hybrid-llm]   RRF[0] idx=16 total=0.0315 (sem_rank=3 comp=0.0159 + bm25_rank=4 comp=0.0156)
[15:08:59] TRACE | [enriched-hybrid-llm]   RRF[1] idx=1 total=0.0315 (sem_rank=4 comp=0.0156 + bm25_rank=3 comp=0.0159)
[15:08:59] TRACE | [enriched-hybrid-llm]   RRF[2] idx=33 total=0.0313 (sem_rank=1 comp=0.0164 + bm25_rank=7 comp=0.0149)
[15:08:59] TRACE | [enriched-hybrid-llm]   RRF[3] idx=32 total=0.0305 (sem_rank=11 comp=0.0141 + bm25_rank=1 comp=0.0164)
[15:08:59] TRACE | [enriched-hybrid-llm]   RRF[4] idx=29 total=0.0304 (sem_rank=10 comp=0.0143 + bm25_rank=2 comp=0.0161)
[15:08:59] TRACE | [enriched-hybrid-llm]   RRF[5] idx=31 total=0.0303 (sem_rank=6 comp=0.0152 + bm25_rank=6 comp=0.0152)
[15:08:59] TRACE | [enriched-hybrid-llm]   RRF[6] idx=23 total=0.0302 (sem_rank=14 comp=0.0135 + bm25_rank=0 comp=0.0167)
[15:08:59] TRACE | [enriched-hybrid-llm]   RRF[7] idx=35 total=0.0293 (sem_rank=2 comp=0.0161 + bm25_rank=16 comp=0.0132)
[15:08:59] TRACE | [enriched-hybrid-llm]   RRF[8] idx=3 total=0.0293 (sem_rank=12 comp=0.0139 + bm25_rank=5 comp=0.0154)
[15:08:59] TRACE | [enriched-hybrid-llm]   RRF[9] idx=46 total=0.0284 (sem_rank=0 comp=0.0167 + bm25_rank=25 comp=0.0118)
[15:08:59] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:08:59] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0315 sem_rank=3 bm25_rank=4 dominant=semantic | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:08:59] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0315 sem_rank=4 bm25_rank=3 dominant=bm25 | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:08:59] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0313 sem_rank=1 bm25_rank=7 dominant=semantic | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:08:59] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.0305 sem_rank=11 bm25_rank=1 dominant=bm25 | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:08:59] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.0304 sem_rank=10 bm25_rank=2 dominant=bm25 | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:08:59] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:08:59] TRACE | === FACT COVERAGE ANALYSIS ===
[15:08:59] TRACE | Query: I have a long-running data processing workflow, what's the time limit?
[15:08:59] TRACE | Total key facts: 2
[15:08:59] TRACE | Found facts: 2/2
[15:08:59] TRACE |   FOUND[1] 3600 seconds
[15:08:59] TRACE |   FOUND[2] exceeded maximum execution time of 3600 seconds
[15:08:59] TRACE | === END FACT COVERAGE ===
[15:08:59] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:08:59] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why did my workflow fail after 3600 seconds?
[15:08:59] DEBUG | [query-rewrite] Rewriting query: Why did my workflow fail after 3600 seconds?
[15:08:59] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:08:59] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=843 timeout=5s
[15:08:59] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:08:59] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:08:59] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:00] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.96s
[15:09:00] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=11
[15:09:00] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=63
[15:09:00] DEBUG | [anthropic] RESPONSE: workflow execution timeout maximum runtime limit error handling
[15:09:00] DEBUG | [query-rewrite] SUCCESS in 0.964s: Why did my workflow fail after 3600 seconds? → workflow execution timeout maximum runtime limit error handling
[15:09:00] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow execution timeout maximum runtime limit error handling (took 0.964s)
[15:09:00] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:00] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:00] TRACE | [enriched-hybrid-llm]   SEM[0] idx=46 chunk_id=user_guide_fix_6 score=0.7672 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:00] TRACE | [enriched-hybrid-llm]   SEM[1] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.7241 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:00] TRACE | [enriched-hybrid-llm]   SEM[2] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6872 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:00] TRACE | [enriched-hybrid-llm]   SEM[3] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6757 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:09:00] TRACE | [enriched-hybrid-llm]   SEM[4] idx=45 chunk_id=user_guide_fix_5 score=0.6639 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:00] TRACE | [enriched-hybrid-llm]   SEM[5] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6605 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:00] TRACE | [enriched-hybrid-llm]   SEM[6] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.6513 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:00] TRACE | [enriched-hybrid-llm]   SEM[7] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6501 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:00] TRACE | [enriched-hybrid-llm]   SEM[8] idx=4 chunk_id=api_reference_fix_4 score=0.6388 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:00] TRACE | [enriched-hybrid-llm]   SEM[9] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.6366 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:00] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:00] TRACE | [enriched-hybrid-llm]   BM25[0] idx=32 chunk_id=troubleshooting_guide_fix_4 score=10.3165 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:00] TRACE | [enriched-hybrid-llm]   BM25[1] idx=45 chunk_id=user_guide_fix_5 score=5.9251 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:00] TRACE | [enriched-hybrid-llm]   BM25[2] idx=46 chunk_id=user_guide_fix_6 score=5.9023 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:00] TRACE | [enriched-hybrid-llm]   BM25[3] idx=4 chunk_id=api_reference_fix_4 score=5.8286 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:00] TRACE | [enriched-hybrid-llm]   BM25[4] idx=34 chunk_id=troubleshooting_guide_fix_6 score=5.7938 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:00] TRACE | [enriched-hybrid-llm]   BM25[5] idx=16 chunk_id=architecture_overview_fix_10 score=5.3891 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:00] TRACE | [enriched-hybrid-llm]   BM25[6] idx=33 chunk_id=troubleshooting_guide_fix_5 score=5.2272 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:00] TRACE | [enriched-hybrid-llm]   BM25[7] idx=31 chunk_id=troubleshooting_guide_fix_3 score=4.7045 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:00] TRACE | [enriched-hybrid-llm]   BM25[8] idx=37 chunk_id=troubleshooting_guide_fix_9 score=4.5949 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:09:00] TRACE | [enriched-hybrid-llm]   BM25[9] idx=42 chunk_id=user_guide_fix_2 score=4.5299 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:00] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:00] TRACE | [enriched-hybrid-llm]   RRF[0] idx=46 total=0.0328 (sem_rank=0 comp=0.0167 + bm25_rank=2 comp=0.0161)
[15:09:00] TRACE | [enriched-hybrid-llm]   RRF[1] idx=32 total=0.0321 (sem_rank=5 comp=0.0154 + bm25_rank=0 comp=0.0167)
[15:09:00] TRACE | [enriched-hybrid-llm]   RRF[2] idx=45 total=0.0320 (sem_rank=4 comp=0.0156 + bm25_rank=1 comp=0.0164)
[15:09:00] TRACE | [enriched-hybrid-llm]   RRF[3] idx=34 total=0.0318 (sem_rank=2 comp=0.0161 + bm25_rank=4 comp=0.0156)
[15:09:00] TRACE | [enriched-hybrid-llm]   RRF[4] idx=33 total=0.0315 (sem_rank=1 comp=0.0164 + bm25_rank=6 comp=0.0152)
[15:09:00] TRACE | [enriched-hybrid-llm]   RRF[5] idx=4 total=0.0306 (sem_rank=8 comp=0.0147 + bm25_rank=3 comp=0.0159)
[15:09:00] TRACE | [enriched-hybrid-llm]   RRF[6] idx=31 total=0.0299 (sem_rank=7 comp=0.0149 + bm25_rank=7 comp=0.0149)
[15:09:00] TRACE | [enriched-hybrid-llm]   RRF[7] idx=29 total=0.0290 (sem_rank=6 comp=0.0152 + bm25_rank=12 comp=0.0139)
[15:09:00] TRACE | [enriched-hybrid-llm]   RRF[8] idx=35 total=0.0290 (sem_rank=3 comp=0.0159 + bm25_rank=16 comp=0.0132)
[15:09:00] TRACE | [enriched-hybrid-llm]   RRF[9] idx=16 total=0.0285 (sem_rank=16 comp=0.0132 + bm25_rank=5 comp=0.0154)
[15:09:00] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:00] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=user_guide_fix_6 doc_id=user_guide rrf_score=0.0328 sem_rank=0 bm25_rank=2 dominant=semantic | enriched: workflow, date range, type, workflows, error type, execution, Execution Timeout | MB, Sync Customer Data  Filter by error type, date range, or execution ID 3. Click an execution to view full details 4...
[15:09:00] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.0321 sem_rank=5 bm25_rank=0 dominant=bm25 | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:09:00] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=user_guide_fix_5 doc_id=user_guide rrf_score=0.0320 sem_rank=4 bm25_rank=1 dominant=bm25 | enriched: Testing Schedules, Handling Robust, Attempt, Error Handling, Dead Letter, Letter Queue, Robust error | Fallback Actions Execute, CloudFlow, Queue  Save and activate **Testing Schedules:** Use the buil...
[15:09:00] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0318 sem_rank=2 bm25_rank=4 dominant=semantic | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:09:00] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0315 sem_rank=1 bm25_rank=6 dominant=semantic | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:09:00] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:00] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:00] TRACE | Query: Why did my workflow fail after 3600 seconds?
[15:09:00] TRACE | Total key facts: 2
[15:09:00] TRACE | Found facts: 2/2
[15:09:00] TRACE |   FOUND[1] 3600 seconds
[15:09:00] TRACE |   FOUND[2] exceeded maximum execution time of 3600 seconds
[15:09:00] TRACE | === END FACT COVERAGE ===
[15:09:00] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:00] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What JWT algorithm is used for token signing?
[15:09:00] DEBUG | [query-rewrite] Rewriting query: What JWT algorithm is used for token signing?
[15:09:00] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:00] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=844 timeout=5s
[15:09:00] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:00] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:00] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:01] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.89s
[15:09:01] DEBUG | [anthropic] USAGE: input_tokens=195 output_tokens=12
[15:09:01] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=69
[15:09:01] DEBUG | [anthropic] RESPONSE: jwt token signing algorithm supported methods cryptographic signature
[15:09:01] DEBUG | [query-rewrite] SUCCESS in 0.890s: What JWT algorithm is used for token signing? → jwt token signing algorithm supported methods cryptographic signature
[15:09:01] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: jwt token signing algorithm supported methods cryptographic signature (took 0.891s)
[15:09:01] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: jwt token signing algorithm supported methods cryptographic signature JSON JWT authentication claims exp expiration iat issued web
[15:09:01] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:01] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:01] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:01] TRACE | [enriched-hybrid-llm]   SEM[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6496 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:01] TRACE | [enriched-hybrid-llm]   SEM[1] idx=12 chunk_id=architecture_overview_fix_6 score=0.6004 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:01] TRACE | [enriched-hybrid-llm]   SEM[2] idx=7 chunk_id=architecture_overview_fix_1 score=0.5925 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:01] TRACE | [enriched-hybrid-llm]   SEM[3] idx=0 chunk_id=api_reference_fix_0 score=0.5920 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:01] TRACE | [enriched-hybrid-llm]   SEM[4] idx=5 chunk_id=api_reference_fix_5 score=0.5741 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:09:01] TRACE | [enriched-hybrid-llm]   SEM[5] idx=42 chunk_id=user_guide_fix_2 score=0.5725 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:01] TRACE | [enriched-hybrid-llm]   SEM[6] idx=14 chunk_id=architecture_overview_fix_8 score=0.5597 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:01] TRACE | [enriched-hybrid-llm]   SEM[7] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5494 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:01] TRACE | [enriched-hybrid-llm]   SEM[8] idx=47 chunk_id=user_guide_fix_7 score=0.5469 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:01] TRACE | [enriched-hybrid-llm]   SEM[9] idx=2 chunk_id=api_reference_fix_2 score=0.5288 | **Endpoint:** `POST /workflows` **Request Body:** ```json { "name": "Email Campaign Automation", "de...
[15:09:01] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:01] TRACE | [enriched-hybrid-llm]   BM25[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=22.4055 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:01] TRACE | [enriched-hybrid-llm]   BM25[1] idx=0 chunk_id=api_reference_fix_0 score=21.3942 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:01] TRACE | [enriched-hybrid-llm]   BM25[2] idx=7 chunk_id=architecture_overview_fix_1 score=17.1062 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:01] TRACE | [enriched-hybrid-llm]   BM25[3] idx=14 chunk_id=architecture_overview_fix_8 score=9.9099 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:01] TRACE | [enriched-hybrid-llm]   BM25[4] idx=12 chunk_id=architecture_overview_fix_6 score=7.8555 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:01] TRACE | [enriched-hybrid-llm]   BM25[5] idx=20 chunk_id=deployment_guide_fix_1 score=7.4664 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:01] TRACE | [enriched-hybrid-llm]   BM25[6] idx=29 chunk_id=troubleshooting_guide_fix_1 score=7.1987 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:01] TRACE | [enriched-hybrid-llm]   BM25[7] idx=36 chunk_id=troubleshooting_guide_fix_8 score=7.0372 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:01] TRACE | [enriched-hybrid-llm]   BM25[8] idx=4 chunk_id=api_reference_fix_4 score=4.4548 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:01] TRACE | [enriched-hybrid-llm]   BM25[9] idx=41 chunk_id=user_guide_fix_1 score=4.2950 | Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...
[15:09:01] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:01] TRACE | [enriched-hybrid-llm]   RRF[0] idx=28 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:09:01] TRACE | [enriched-hybrid-llm]   RRF[1] idx=0 total=0.2958 (sem_rank=3 comp=0.0231 + bm25_rank=1 comp=0.2727)
[15:09:01] TRACE | [enriched-hybrid-llm]   RRF[2] idx=7 total=0.2750 (sem_rank=2 comp=0.0250 + bm25_rank=2 comp=0.2500)
[15:09:01] TRACE | [enriched-hybrid-llm]   RRF[3] idx=14 total=0.2495 (sem_rank=6 comp=0.0187 + bm25_rank=3 comp=0.2308)
[15:09:01] TRACE | [enriched-hybrid-llm]   RRF[4] idx=12 total=0.2416 (sem_rank=1 comp=0.0273 + bm25_rank=4 comp=0.2143)
[15:09:01] TRACE | [enriched-hybrid-llm]   RRF[5] idx=20 total=0.2115 (sem_rank=16 comp=0.0115 + bm25_rank=5 comp=0.2000)
[15:09:01] TRACE | [enriched-hybrid-llm]   RRF[6] idx=29 total=0.2051 (sem_rank=7 comp=0.0176 + bm25_rank=6 comp=0.1875)
[15:09:01] TRACE | [enriched-hybrid-llm]   RRF[7] idx=36 total=0.1826 (sem_rank=39 comp=0.0061 + bm25_rank=7 comp=0.1765)
[15:09:01] TRACE | [enriched-hybrid-llm]   RRF[8] idx=4 total=0.1797 (sem_rank=13 comp=0.0130 + bm25_rank=8 comp=0.1667)
[15:09:01] TRACE | [enriched-hybrid-llm]   RRF[9] idx=5 total=0.1714 (sem_rank=4 comp=0.0214 + bm25_rank=10 comp=0.1500)
[15:09:01] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:01] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:09:01] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.2958 sem_rank=3 bm25_rank=1 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:09:01] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.2750 sem_rank=2 bm25_rank=2 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:09:01] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2495 sem_rank=6 bm25_rank=3 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:09:01] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_6 doc_id=architecture_overview rrf_score=0.2416 sem_rank=1 bm25_rank=4 dominant=bm25 | enriched: Key pattern, JWT expiry, TTL, Data, Key, Invalidation, pattern | JWT, Redis, Kafka Event Streaming  **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:01] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:01] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:01] TRACE | Query: What JWT algorithm is used for token signing?
[15:09:01] TRACE | Total key facts: 3
[15:09:01] TRACE | Found facts: 3/3
[15:09:01] TRACE |   FOUND[1] RS256
[15:09:01] TRACE |   FOUND[2] RS256 algorithm
[15:09:01] TRACE |   FOUND[3] RS256 signing algorithm
[15:09:01] TRACE | === END FACT COVERAGE ===
[15:09:01] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:01] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Which signing algorithm does CloudFlow use for JWTs?
[15:09:01] DEBUG | [query-rewrite] Rewriting query: Which signing algorithm does CloudFlow use for JWTs?
[15:09:01] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:01] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=851 timeout=5s
[15:09:01] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:01] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:01] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:02] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.83s
[15:09:02] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=9
[15:09:02] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=46
[15:09:02] DEBUG | [anthropic] RESPONSE: jwt signing algorithm cloudflow authentication
[15:09:02] DEBUG | [query-rewrite] SUCCESS in 0.829s: Which signing algorithm does CloudFlow use for JWTs? → jwt signing algorithm cloudflow authentication
[15:09:02] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: jwt signing algorithm cloudflow authentication (took 0.829s)
[15:09:02] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: jwt signing algorithm cloudflow authentication JSON JWT claims exp iat issued token web
[15:09:02] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:02] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:02] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:02] TRACE | [enriched-hybrid-llm]   SEM[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.7396 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:02] TRACE | [enriched-hybrid-llm]   SEM[1] idx=0 chunk_id=api_reference_fix_0 score=0.7162 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:02] TRACE | [enriched-hybrid-llm]   SEM[2] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.6412 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:02] TRACE | [enriched-hybrid-llm]   SEM[3] idx=20 chunk_id=deployment_guide_fix_1 score=0.6368 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:02] TRACE | [enriched-hybrid-llm]   SEM[4] idx=7 chunk_id=architecture_overview_fix_1 score=0.6364 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:02] TRACE | [enriched-hybrid-llm]   SEM[5] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.6235 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:09:02] TRACE | [enriched-hybrid-llm]   SEM[6] idx=1 chunk_id=api_reference_fix_1 score=0.6229 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:09:02] TRACE | [enriched-hybrid-llm]   SEM[7] idx=5 chunk_id=api_reference_fix_5 score=0.6180 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:09:02] TRACE | [enriched-hybrid-llm]   SEM[8] idx=6 chunk_id=architecture_overview_fix_0 score=0.6153 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:02] TRACE | [enriched-hybrid-llm]   SEM[9] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.6096 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:09:02] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:02] TRACE | [enriched-hybrid-llm]   BM25[0] idx=0 chunk_id=api_reference_fix_0 score=20.0903 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:02] TRACE | [enriched-hybrid-llm]   BM25[1] idx=7 chunk_id=architecture_overview_fix_1 score=17.1062 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:02] TRACE | [enriched-hybrid-llm]   BM25[2] idx=28 chunk_id=troubleshooting_guide_fix_0 score=15.9576 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:02] TRACE | [enriched-hybrid-llm]   BM25[3] idx=29 chunk_id=troubleshooting_guide_fix_1 score=9.0081 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:02] TRACE | [enriched-hybrid-llm]   BM25[4] idx=36 chunk_id=troubleshooting_guide_fix_8 score=8.9239 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:02] TRACE | [enriched-hybrid-llm]   BM25[5] idx=20 chunk_id=deployment_guide_fix_1 score=8.8863 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:02] TRACE | [enriched-hybrid-llm]   BM25[6] idx=12 chunk_id=architecture_overview_fix_6 score=7.8555 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:02] TRACE | [enriched-hybrid-llm]   BM25[7] idx=14 chunk_id=architecture_overview_fix_8 score=7.1164 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:02] TRACE | [enriched-hybrid-llm]   BM25[8] idx=4 chunk_id=api_reference_fix_4 score=5.5692 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:02] TRACE | [enriched-hybrid-llm]   BM25[9] idx=37 chunk_id=troubleshooting_guide_fix_9 score=4.0799 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:09:02] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:02] TRACE | [enriched-hybrid-llm]   RRF[0] idx=0 total=0.3273 (sem_rank=1 comp=0.0273 + bm25_rank=0 comp=0.3000)
[15:09:02] TRACE | [enriched-hybrid-llm]   RRF[1] idx=7 total=0.2942 (sem_rank=4 comp=0.0214 + bm25_rank=1 comp=0.2727)
[15:09:02] TRACE | [enriched-hybrid-llm]   RRF[2] idx=28 total=0.2800 (sem_rank=0 comp=0.0300 + bm25_rank=2 comp=0.2500)
[15:09:02] TRACE | [enriched-hybrid-llm]   RRF[3] idx=29 total=0.2558 (sem_rank=2 comp=0.0250 + bm25_rank=3 comp=0.2308)
[15:09:02] TRACE | [enriched-hybrid-llm]   RRF[4] idx=36 total=0.2250 (sem_rank=18 comp=0.0107 + bm25_rank=4 comp=0.2143)
[15:09:02] TRACE | [enriched-hybrid-llm]   RRF[5] idx=20 total=0.2231 (sem_rank=3 comp=0.0231 + bm25_rank=5 comp=0.2000)
[15:09:02] TRACE | [enriched-hybrid-llm]   RRF[6] idx=12 total=0.2018 (sem_rank=11 comp=0.0143 + bm25_rank=6 comp=0.1875)
[15:09:02] TRACE | [enriched-hybrid-llm]   RRF[7] idx=14 total=0.1825 (sem_rank=40 comp=0.0060 + bm25_rank=7 comp=0.1765)
[15:09:02] TRACE | [enriched-hybrid-llm]   RRF[8] idx=37 total=0.1779 (sem_rank=5 comp=0.0200 + bm25_rank=9 comp=0.1579)
[15:09:02] TRACE | [enriched-hybrid-llm]   RRF[9] idx=4 total=0.1742 (sem_rank=30 comp=0.0075 + bm25_rank=8 comp=0.1667)
[15:09:02] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:02] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.3273 sem_rank=1 bm25_rank=0 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:09:02] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.2942 sem_rank=4 bm25_rank=1 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:09:02] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.2800 sem_rank=0 bm25_rank=2 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:09:02] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.2558 sem_rank=2 bm25_rank=3 dominant=bm25 | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:09:02] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.2250 sem_rank=18 bm25_rank=4 dominant=bm25 | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:09:02] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:02] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:02] TRACE | Query: Which signing algorithm does CloudFlow use for JWTs?
[15:09:02] TRACE | Total key facts: 3
[15:09:02] TRACE | Found facts: 3/3
[15:09:02] TRACE |   FOUND[1] RS256
[15:09:02] TRACE |   FOUND[2] RS256 algorithm
[15:09:02] TRACE |   FOUND[3] RS256 signing algorithm
[15:09:02] TRACE | === END FACT COVERAGE ===
[15:09:02] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:02] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: My JWT validation is failing with algorithm mismatch
[15:09:02] DEBUG | [query-rewrite] Rewriting query: My JWT validation is failing with algorithm mismatch
[15:09:02] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:02] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=851 timeout=5s
[15:09:02] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:02] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:02] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:03] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.88s
[15:09:03] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=13
[15:09:03] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=68
[15:09:03] DEBUG | [anthropic] RESPONSE: jwt token validation algorithm mismatch configuration error handling
[15:09:03] DEBUG | [query-rewrite] SUCCESS in 0.883s: My JWT validation is failing with algorithm mismatch → jwt token validation algorithm mismatch configuration error handling
[15:09:03] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: jwt token validation algorithm mismatch configuration error handling (took 0.883s)
[15:09:03] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: jwt token validation algorithm mismatch configuration error handling JSON JWT authentication claims exp expiration iat issued web
[15:09:03] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:03] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:03] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:03] TRACE | [enriched-hybrid-llm]   SEM[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6668 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:03] TRACE | [enriched-hybrid-llm]   SEM[1] idx=47 chunk_id=user_guide_fix_7 score=0.6326 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:03] TRACE | [enriched-hybrid-llm]   SEM[2] idx=7 chunk_id=architecture_overview_fix_1 score=0.6281 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:03] TRACE | [enriched-hybrid-llm]   SEM[3] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6198 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:03] TRACE | [enriched-hybrid-llm]   SEM[4] idx=4 chunk_id=api_reference_fix_4 score=0.6159 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:03] TRACE | [enriched-hybrid-llm]   SEM[5] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.6134 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:03] TRACE | [enriched-hybrid-llm]   SEM[6] idx=12 chunk_id=architecture_overview_fix_6 score=0.6007 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:03] TRACE | [enriched-hybrid-llm]   SEM[7] idx=46 chunk_id=user_guide_fix_6 score=0.5890 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:03] TRACE | [enriched-hybrid-llm]   SEM[8] idx=49 chunk_id=user_guide_fix_9 score=0.5841 | Requester: {{trigger.body.requester}} Description: {{trigger.body.description}} Approve: https://app...
[15:09:03] TRACE | [enriched-hybrid-llm]   SEM[9] idx=0 chunk_id=api_reference_fix_0 score=0.5813 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:03] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:03] TRACE | [enriched-hybrid-llm]   BM25[0] idx=7 chunk_id=architecture_overview_fix_1 score=21.4939 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:03] TRACE | [enriched-hybrid-llm]   BM25[1] idx=0 chunk_id=api_reference_fix_0 score=16.5021 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:03] TRACE | [enriched-hybrid-llm]   BM25[2] idx=28 chunk_id=troubleshooting_guide_fix_0 score=16.4445 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:03] TRACE | [enriched-hybrid-llm]   BM25[3] idx=36 chunk_id=troubleshooting_guide_fix_8 score=10.1891 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:03] TRACE | [enriched-hybrid-llm]   BM25[4] idx=14 chunk_id=architecture_overview_fix_8 score=9.9099 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:03] TRACE | [enriched-hybrid-llm]   BM25[5] idx=4 chunk_id=api_reference_fix_4 score=8.0443 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:03] TRACE | [enriched-hybrid-llm]   BM25[6] idx=12 chunk_id=architecture_overview_fix_6 score=7.8555 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:03] TRACE | [enriched-hybrid-llm]   BM25[7] idx=20 chunk_id=deployment_guide_fix_1 score=7.4305 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:03] TRACE | [enriched-hybrid-llm]   BM25[8] idx=29 chunk_id=troubleshooting_guide_fix_1 score=7.1987 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:03] TRACE | [enriched-hybrid-llm]   BM25[9] idx=34 chunk_id=troubleshooting_guide_fix_6 score=4.9626 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:03] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:03] TRACE | [enriched-hybrid-llm]   RRF[0] idx=7 total=0.3250 (sem_rank=2 comp=0.0250 + bm25_rank=0 comp=0.3000)
[15:09:03] TRACE | [enriched-hybrid-llm]   RRF[1] idx=0 total=0.2885 (sem_rank=9 comp=0.0158 + bm25_rank=1 comp=0.2727)
[15:09:03] TRACE | [enriched-hybrid-llm]   RRF[2] idx=28 total=0.2800 (sem_rank=0 comp=0.0300 + bm25_rank=2 comp=0.2500)
[15:09:03] TRACE | [enriched-hybrid-llm]   RRF[3] idx=36 total=0.2374 (sem_rank=35 comp=0.0067 + bm25_rank=3 comp=0.2308)
[15:09:03] TRACE | [enriched-hybrid-llm]   RRF[4] idx=14 total=0.2268 (sem_rank=14 comp=0.0125 + bm25_rank=4 comp=0.2143)
[15:09:03] TRACE | [enriched-hybrid-llm]   RRF[5] idx=4 total=0.2214 (sem_rank=4 comp=0.0214 + bm25_rank=5 comp=0.2000)
[15:09:03] TRACE | [enriched-hybrid-llm]   RRF[6] idx=12 total=0.2062 (sem_rank=6 comp=0.0187 + bm25_rank=6 comp=0.1875)
[15:09:03] TRACE | [enriched-hybrid-llm]   RRF[7] idx=29 total=0.1867 (sem_rank=5 comp=0.0200 + bm25_rank=8 comp=0.1667)
[15:09:03] TRACE | [enriched-hybrid-llm]   RRF[8] idx=20 total=0.1853 (sem_rank=24 comp=0.0088 + bm25_rank=7 comp=0.1765)
[15:09:03] TRACE | [enriched-hybrid-llm]   RRF[9] idx=34 total=0.1810 (sem_rank=3 comp=0.0231 + bm25_rank=9 comp=0.1579)
[15:09:03] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:03] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.3250 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:09:03] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.2885 sem_rank=9 bm25_rank=1 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:09:03] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.2800 sem_rank=0 bm25_rank=2 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:09:03] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.2374 sem_rank=35 bm25_rank=3 dominant=bm25 | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:09:03] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2268 sem_rank=14 bm25_rank=4 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:09:03] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:03] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:03] TRACE | Query: My JWT validation is failing with algorithm mismatch
[15:09:03] TRACE | Total key facts: 3
[15:09:03] TRACE | Found facts: 3/3
[15:09:03] TRACE |   FOUND[1] RS256
[15:09:03] TRACE |   FOUND[2] RS256 algorithm
[15:09:03] TRACE |   FOUND[3] RS256 signing algorithm
[15:09:03] TRACE | === END FACT COVERAGE ===
[15:09:03] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:03] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: jwt algorithm
[15:09:03] DEBUG | [query-rewrite] Rewriting query: jwt algorithm
[15:09:03] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:03] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=812 timeout=5s
[15:09:03] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:03] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:03] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:04] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.84s
[15:09:04] DEBUG | [anthropic] USAGE: input_tokens=188 output_tokens=10
[15:09:04] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=55
[15:09:04] DEBUG | [anthropic] RESPONSE: jwt signature algorithm supported cryptographic methods
[15:09:04] DEBUG | [query-rewrite] SUCCESS in 0.837s: jwt algorithm → jwt signature algorithm supported cryptographic methods
[15:09:04] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: jwt signature algorithm supported cryptographic methods (took 0.837s)
[15:09:04] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: jwt signature algorithm supported cryptographic methods JSON JWT authentication claims exp iat issued token web
[15:09:04] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:04] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:04] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:04] TRACE | [enriched-hybrid-llm]   SEM[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6294 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:04] TRACE | [enriched-hybrid-llm]   SEM[1] idx=7 chunk_id=architecture_overview_fix_1 score=0.5971 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:04] TRACE | [enriched-hybrid-llm]   SEM[2] idx=12 chunk_id=architecture_overview_fix_6 score=0.5905 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:04] TRACE | [enriched-hybrid-llm]   SEM[3] idx=0 chunk_id=api_reference_fix_0 score=0.5884 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:04] TRACE | [enriched-hybrid-llm]   SEM[4] idx=42 chunk_id=user_guide_fix_2 score=0.5692 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:04] TRACE | [enriched-hybrid-llm]   SEM[5] idx=5 chunk_id=api_reference_fix_5 score=0.5624 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:09:04] TRACE | [enriched-hybrid-llm]   SEM[6] idx=47 chunk_id=user_guide_fix_7 score=0.5478 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:04] TRACE | [enriched-hybrid-llm]   SEM[7] idx=14 chunk_id=architecture_overview_fix_8 score=0.5459 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:04] TRACE | [enriched-hybrid-llm]   SEM[8] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5455 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:04] TRACE | [enriched-hybrid-llm]   SEM[9] idx=2 chunk_id=api_reference_fix_2 score=0.5317 | **Endpoint:** `POST /workflows` **Request Body:** ```json { "name": "Email Campaign Automation", "de...
[15:09:04] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:04] TRACE | [enriched-hybrid-llm]   BM25[0] idx=0 chunk_id=api_reference_fix_0 score=18.9139 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:04] TRACE | [enriched-hybrid-llm]   BM25[1] idx=7 chunk_id=architecture_overview_fix_1 score=17.1062 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:04] TRACE | [enriched-hybrid-llm]   BM25[2] idx=28 chunk_id=troubleshooting_guide_fix_0 score=16.7024 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:04] TRACE | [enriched-hybrid-llm]   BM25[3] idx=12 chunk_id=architecture_overview_fix_6 score=7.8555 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:04] TRACE | [enriched-hybrid-llm]   BM25[4] idx=29 chunk_id=troubleshooting_guide_fix_1 score=7.1987 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:04] TRACE | [enriched-hybrid-llm]   BM25[5] idx=14 chunk_id=architecture_overview_fix_8 score=7.1164 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:04] TRACE | [enriched-hybrid-llm]   BM25[6] idx=36 chunk_id=troubleshooting_guide_fix_8 score=7.0372 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:04] TRACE | [enriched-hybrid-llm]   BM25[7] idx=20 chunk_id=deployment_guide_fix_1 score=5.0039 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:04] TRACE | [enriched-hybrid-llm]   BM25[8] idx=4 chunk_id=api_reference_fix_4 score=4.4548 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:04] TRACE | [enriched-hybrid-llm]   BM25[9] idx=41 chunk_id=user_guide_fix_1 score=4.2950 | Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...
[15:09:04] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:04] TRACE | [enriched-hybrid-llm]   RRF[0] idx=0 total=0.3231 (sem_rank=3 comp=0.0231 + bm25_rank=0 comp=0.3000)
[15:09:04] TRACE | [enriched-hybrid-llm]   RRF[1] idx=7 total=0.3000 (sem_rank=1 comp=0.0273 + bm25_rank=1 comp=0.2727)
[15:09:04] TRACE | [enriched-hybrid-llm]   RRF[2] idx=28 total=0.2800 (sem_rank=0 comp=0.0300 + bm25_rank=2 comp=0.2500)
[15:09:04] TRACE | [enriched-hybrid-llm]   RRF[3] idx=12 total=0.2558 (sem_rank=2 comp=0.0250 + bm25_rank=3 comp=0.2308)
[15:09:04] TRACE | [enriched-hybrid-llm]   RRF[4] idx=29 total=0.2310 (sem_rank=8 comp=0.0167 + bm25_rank=4 comp=0.2143)
[15:09:04] TRACE | [enriched-hybrid-llm]   RRF[5] idx=14 total=0.2176 (sem_rank=7 comp=0.0176 + bm25_rank=5 comp=0.2000)
[15:09:04] TRACE | [enriched-hybrid-llm]   RRF[6] idx=36 total=0.1942 (sem_rank=35 comp=0.0067 + bm25_rank=6 comp=0.1875)
[15:09:04] TRACE | [enriched-hybrid-llm]   RRF[7] idx=20 total=0.1876 (sem_rank=17 comp=0.0111 + bm25_rank=7 comp=0.1765)
[15:09:04] TRACE | [enriched-hybrid-llm]   RRF[8] idx=4 total=0.1817 (sem_rank=10 comp=0.0150 + bm25_rank=8 comp=0.1667)
[15:09:04] TRACE | [enriched-hybrid-llm]   RRF[9] idx=5 total=0.1700 (sem_rank=5 comp=0.0200 + bm25_rank=10 comp=0.1500)
[15:09:04] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:04] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.3231 sem_rank=3 bm25_rank=0 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:09:04] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.3000 sem_rank=1 bm25_rank=1 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:09:04] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.2800 sem_rank=0 bm25_rank=2 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:09:04] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_6 doc_id=architecture_overview rrf_score=0.2558 sem_rank=2 bm25_rank=3 dominant=bm25 | enriched: Key pattern, JWT expiry, TTL, Data, Key, Invalidation, pattern | JWT, Redis, Kafka Event Streaming  **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:04] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.2310 sem_rank=8 bm25_rank=4 dominant=bm25 | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:09:04] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:04] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:04] TRACE | Query: jwt algorithm
[15:09:04] TRACE | Total key facts: 3
[15:09:04] TRACE | Found facts: 3/3
[15:09:04] TRACE |   FOUND[1] RS256
[15:09:04] TRACE |   FOUND[2] RS256 algorithm
[15:09:04] TRACE |   FOUND[3] RS256 signing algorithm
[15:09:04] TRACE | === END FACT COVERAGE ===
[15:09:04] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:04] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: I'm implementing JWT verification, what algorithm should I expect?
[15:09:04] DEBUG | [query-rewrite] Rewriting query: I'm implementing JWT verification, what algorithm should I expect?
[15:09:04] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:04] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=865 timeout=5s
[15:09:04] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:04] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:04] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:05] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.00s
[15:09:05] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=11
[15:09:05] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=80
[15:09:05] DEBUG | [anthropic] RESPONSE: jwt authentication verification supported algorithms supported signature methods
[15:09:05] DEBUG | [query-rewrite] SUCCESS in 1.003s: I'm implementing JWT verification, what algorithm should I expect? → jwt authentication verification supported algorithms supported signature methods
[15:09:05] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: jwt authentication verification supported algorithms supported signature methods (took 1.003s)
[15:09:05] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: jwt authentication verification supported algorithms supported signature methods JSON JWT claims exp iat issued token web
[15:09:05] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:05] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:05] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:05] TRACE | [enriched-hybrid-llm]   SEM[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6698 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:05] TRACE | [enriched-hybrid-llm]   SEM[1] idx=0 chunk_id=api_reference_fix_0 score=0.6152 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:05] TRACE | [enriched-hybrid-llm]   SEM[2] idx=7 chunk_id=architecture_overview_fix_1 score=0.6108 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:05] TRACE | [enriched-hybrid-llm]   SEM[3] idx=5 chunk_id=api_reference_fix_5 score=0.6035 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:09:05] TRACE | [enriched-hybrid-llm]   SEM[4] idx=12 chunk_id=architecture_overview_fix_6 score=0.5833 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:05] TRACE | [enriched-hybrid-llm]   SEM[5] idx=42 chunk_id=user_guide_fix_2 score=0.5761 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:05] TRACE | [enriched-hybrid-llm]   SEM[6] idx=47 chunk_id=user_guide_fix_7 score=0.5675 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:05] TRACE | [enriched-hybrid-llm]   SEM[7] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5658 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:05] TRACE | [enriched-hybrid-llm]   SEM[8] idx=2 chunk_id=api_reference_fix_2 score=0.5509 | **Endpoint:** `POST /workflows` **Request Body:** ```json { "name": "Email Campaign Automation", "de...
[15:09:05] TRACE | [enriched-hybrid-llm]   SEM[9] idx=14 chunk_id=architecture_overview_fix_8 score=0.5487 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:05] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:05] TRACE | [enriched-hybrid-llm]   BM25[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=19.7352 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:05] TRACE | [enriched-hybrid-llm]   BM25[1] idx=0 chunk_id=api_reference_fix_0 score=18.9139 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:05] TRACE | [enriched-hybrid-llm]   BM25[2] idx=7 chunk_id=architecture_overview_fix_1 score=17.1062 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:05] TRACE | [enriched-hybrid-llm]   BM25[3] idx=5 chunk_id=api_reference_fix_5 score=8.4287 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:09:05] TRACE | [enriched-hybrid-llm]   BM25[4] idx=12 chunk_id=architecture_overview_fix_6 score=7.8555 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:05] TRACE | [enriched-hybrid-llm]   BM25[5] idx=29 chunk_id=troubleshooting_guide_fix_1 score=7.1987 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:05] TRACE | [enriched-hybrid-llm]   BM25[6] idx=14 chunk_id=architecture_overview_fix_8 score=7.1164 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:05] TRACE | [enriched-hybrid-llm]   BM25[7] idx=36 chunk_id=troubleshooting_guide_fix_8 score=7.0372 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:05] TRACE | [enriched-hybrid-llm]   BM25[8] idx=42 chunk_id=user_guide_fix_2 score=5.6138 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:05] TRACE | [enriched-hybrid-llm]   BM25[9] idx=20 chunk_id=deployment_guide_fix_1 score=5.0039 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:05] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:05] TRACE | [enriched-hybrid-llm]   RRF[0] idx=28 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:09:05] TRACE | [enriched-hybrid-llm]   RRF[1] idx=0 total=0.3000 (sem_rank=1 comp=0.0273 + bm25_rank=1 comp=0.2727)
[15:09:05] TRACE | [enriched-hybrid-llm]   RRF[2] idx=7 total=0.2750 (sem_rank=2 comp=0.0250 + bm25_rank=2 comp=0.2500)
[15:09:05] TRACE | [enriched-hybrid-llm]   RRF[3] idx=5 total=0.2538 (sem_rank=3 comp=0.0231 + bm25_rank=3 comp=0.2308)
[15:09:05] TRACE | [enriched-hybrid-llm]   RRF[4] idx=12 total=0.2357 (sem_rank=4 comp=0.0214 + bm25_rank=4 comp=0.2143)
[15:09:05] TRACE | [enriched-hybrid-llm]   RRF[5] idx=29 total=0.2176 (sem_rank=7 comp=0.0176 + bm25_rank=5 comp=0.2000)
[15:09:05] TRACE | [enriched-hybrid-llm]   RRF[6] idx=14 total=0.2033 (sem_rank=9 comp=0.0158 + bm25_rank=6 comp=0.1875)
[15:09:05] TRACE | [enriched-hybrid-llm]   RRF[7] idx=42 total=0.1867 (sem_rank=5 comp=0.0200 + bm25_rank=8 comp=0.1667)
[15:09:05] TRACE | [enriched-hybrid-llm]   RRF[8] idx=36 total=0.1830 (sem_rank=36 comp=0.0065 + bm25_rank=7 comp=0.1765)
[15:09:05] TRACE | [enriched-hybrid-llm]   RRF[9] idx=20 total=0.1676 (sem_rank=21 comp=0.0097 + bm25_rank=9 comp=0.1579)
[15:09:05] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:05] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:09:05] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.3000 sem_rank=1 bm25_rank=1 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:09:05] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.2750 sem_rank=2 bm25_rank=2 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:09:05] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=api_reference_fix_5 doc_id=api_reference rrf_score=0.2538 sem_rank=3 bm25_rank=3 dominant=bm25 | enriched: Supported Events, Community Forum, Slack channels, Configure webhooks, Enterprise customers, Webhook Payload, dedicated Slack | API, Slack  **Supported Events:** - `workflow.started` - `workflow.compl...
[15:09:05] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_6 doc_id=architecture_overview rrf_score=0.2357 sem_rank=4 bm25_rank=4 dominant=bm25 | enriched: Key pattern, JWT expiry, TTL, Data, Key, Invalidation, pattern | JWT, Redis, Kafka Event Streaming  **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:05] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:05] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:05] TRACE | Query: I'm implementing JWT verification, what algorithm should I expect?
[15:09:05] TRACE | Total key facts: 3
[15:09:05] TRACE | Found facts: 3/3
[15:09:05] TRACE |   FOUND[1] RS256
[15:09:05] TRACE |   FOUND[2] RS256 algorithm
[15:09:05] TRACE |   FOUND[3] RS256 signing algorithm
[15:09:05] TRACE | === END FACT COVERAGE ===
[15:09:05] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:05] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why doesn't HS256 work for token validation?
[15:09:05] DEBUG | [query-rewrite] Rewriting query: Why doesn't HS256 work for token validation?
[15:09:05] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:05] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=843 timeout=5s
[15:09:05] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:05] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:05] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:06] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.02s
[15:09:06] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=16
[15:09:06] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=80
[15:09:06] DEBUG | [anthropic] RESPONSE: HS256 JWT token validation failure cryptographic signature algorithm constraints
[15:09:06] DEBUG | [query-rewrite] SUCCESS in 1.020s: Why doesn't HS256 work for token validation? → HS256 JWT token validation failure cryptographic signature algorithm constraints
[15:09:06] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: HS256 JWT token validation failure cryptographic signature algorithm constraints (took 1.020s)
[15:09:06] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: HS256 JWT token validation failure cryptographic signature algorithm constraints JSON JWT authentication claims exp expiration iat issued web
[15:09:06] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:06] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:06] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:06] TRACE | [enriched-hybrid-llm]   SEM[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6717 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:06] TRACE | [enriched-hybrid-llm]   SEM[1] idx=7 chunk_id=architecture_overview_fix_1 score=0.6435 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:06] TRACE | [enriched-hybrid-llm]   SEM[2] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6109 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:06] TRACE | [enriched-hybrid-llm]   SEM[3] idx=12 chunk_id=architecture_overview_fix_6 score=0.6024 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:06] TRACE | [enriched-hybrid-llm]   SEM[4] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5904 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:06] TRACE | [enriched-hybrid-llm]   SEM[5] idx=4 chunk_id=api_reference_fix_4 score=0.5896 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:06] TRACE | [enriched-hybrid-llm]   SEM[6] idx=47 chunk_id=user_guide_fix_7 score=0.5873 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:06] TRACE | [enriched-hybrid-llm]   SEM[7] idx=0 chunk_id=api_reference_fix_0 score=0.5678 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:06] TRACE | [enriched-hybrid-llm]   SEM[8] idx=8 chunk_id=architecture_overview_fix_2 score=0.5612 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:06] TRACE | [enriched-hybrid-llm]   SEM[9] idx=42 chunk_id=user_guide_fix_2 score=0.5600 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:06] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:06] TRACE | [enriched-hybrid-llm]   BM25[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=20.9039 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:06] TRACE | [enriched-hybrid-llm]   BM25[1] idx=7 chunk_id=architecture_overview_fix_1 score=19.2649 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:06] TRACE | [enriched-hybrid-llm]   BM25[2] idx=0 chunk_id=api_reference_fix_0 score=16.0968 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:06] TRACE | [enriched-hybrid-llm]   BM25[3] idx=14 chunk_id=architecture_overview_fix_8 score=9.9099 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:06] TRACE | [enriched-hybrid-llm]   BM25[4] idx=36 chunk_id=troubleshooting_guide_fix_8 score=8.1163 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:06] TRACE | [enriched-hybrid-llm]   BM25[5] idx=12 chunk_id=architecture_overview_fix_6 score=7.8555 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:06] TRACE | [enriched-hybrid-llm]   BM25[6] idx=29 chunk_id=troubleshooting_guide_fix_1 score=7.1987 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:06] TRACE | [enriched-hybrid-llm]   BM25[7] idx=4 chunk_id=api_reference_fix_4 score=5.5563 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:06] TRACE | [enriched-hybrid-llm]   BM25[8] idx=20 chunk_id=deployment_guide_fix_1 score=5.0039 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:06] TRACE | [enriched-hybrid-llm]   BM25[9] idx=23 chunk_id=deployment_guide_fix_4 score=3.9583 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:06] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:06] TRACE | [enriched-hybrid-llm]   RRF[0] idx=28 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:09:06] TRACE | [enriched-hybrid-llm]   RRF[1] idx=7 total=0.3000 (sem_rank=1 comp=0.0273 + bm25_rank=1 comp=0.2727)
[15:09:06] TRACE | [enriched-hybrid-llm]   RRF[2] idx=0 total=0.2676 (sem_rank=7 comp=0.0176 + bm25_rank=2 comp=0.2500)
[15:09:06] TRACE | [enriched-hybrid-llm]   RRF[3] idx=14 total=0.2433 (sem_rank=14 comp=0.0125 + bm25_rank=3 comp=0.2308)
[15:09:06] TRACE | [enriched-hybrid-llm]   RRF[4] idx=12 total=0.2231 (sem_rank=3 comp=0.0231 + bm25_rank=5 comp=0.2000)
[15:09:06] TRACE | [enriched-hybrid-llm]   RRF[5] idx=36 total=0.2202 (sem_rank=41 comp=0.0059 + bm25_rank=4 comp=0.2143)
[15:09:06] TRACE | [enriched-hybrid-llm]   RRF[6] idx=29 total=0.2089 (sem_rank=4 comp=0.0214 + bm25_rank=6 comp=0.1875)
[15:09:06] TRACE | [enriched-hybrid-llm]   RRF[7] idx=4 total=0.1965 (sem_rank=5 comp=0.0200 + bm25_rank=7 comp=0.1765)
[15:09:06] TRACE | [enriched-hybrid-llm]   RRF[8] idx=20 total=0.1817 (sem_rank=10 comp=0.0150 + bm25_rank=8 comp=0.1667)
[15:09:06] TRACE | [enriched-hybrid-llm]   RRF[9] idx=23 total=0.1652 (sem_rank=31 comp=0.0073 + bm25_rank=9 comp=0.1579)
[15:09:06] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:06] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:09:06] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.3000 sem_rank=1 bm25_rank=1 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:09:06] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.2676 sem_rank=7 bm25_rank=2 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:09:06] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2433 sem_rank=14 bm25_rank=3 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:09:06] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_6 doc_id=architecture_overview rrf_score=0.2231 sem_rank=3 bm25_rank=5 dominant=bm25 | enriched: Key pattern, JWT expiry, TTL, Data, Key, Invalidation, pattern | JWT, Redis, Kafka Event Streaming  **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:06] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:06] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:06] TRACE | Query: Why doesn't HS256 work for token validation?
[15:09:06] TRACE | Total key facts: 3
[15:09:06] TRACE | Found facts: 3/3
[15:09:06] TRACE |   FOUND[1] RS256
[15:09:06] TRACE |   FOUND[2] RS256 algorithm
[15:09:06] TRACE |   FOUND[3] RS256 signing algorithm
[15:09:06] TRACE | === END FACT COVERAGE ===
[15:09:06] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:06] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What is the Redis cache TTL for workflow definitions?
[15:09:06] DEBUG | [query-rewrite] Rewriting query: What is the Redis cache TTL for workflow definitions?
[15:09:06] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:06] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=852 timeout=5s
[15:09:06] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:06] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:06] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:07] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.88s
[15:09:07] DEBUG | [anthropic] USAGE: input_tokens=197 output_tokens=12
[15:09:07] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=69
[15:09:07] DEBUG | [anthropic] RESPONSE: Redis workflow definition cache time to live configuration parameters
[15:09:07] DEBUG | [query-rewrite] SUCCESS in 0.879s: What is the Redis cache TTL for workflow definitions? → Redis workflow definition cache time to live configuration parameters
[15:09:07] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: Redis workflow definition cache time to live configuration parameters (took 0.879s)
[15:09:07] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:07] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:07] TRACE | [enriched-hybrid-llm]   SEM[0] idx=25 chunk_id=deployment_guide_fix_6 score=0.6887 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:07] TRACE | [enriched-hybrid-llm]   SEM[1] idx=11 chunk_id=architecture_overview_fix_5 score=0.6716 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:07] TRACE | [enriched-hybrid-llm]   SEM[2] idx=18 chunk_id=architecture_overview_fix_12 score=0.6589 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:07] TRACE | [enriched-hybrid-llm]   SEM[3] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6541 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:07] TRACE | [enriched-hybrid-llm]   SEM[4] idx=15 chunk_id=architecture_overview_fix_9 score=0.6404 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:07] TRACE | [enriched-hybrid-llm]   SEM[5] idx=46 chunk_id=user_guide_fix_6 score=0.6277 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:07] TRACE | [enriched-hybrid-llm]   SEM[6] idx=14 chunk_id=architecture_overview_fix_8 score=0.6187 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:07] TRACE | [enriched-hybrid-llm]   SEM[7] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6183 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:07] TRACE | [enriched-hybrid-llm]   SEM[8] idx=12 chunk_id=architecture_overview_fix_6 score=0.6156 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:07] TRACE | [enriched-hybrid-llm]   SEM[9] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6073 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:07] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:07] TRACE | [enriched-hybrid-llm]   BM25[0] idx=14 chunk_id=architecture_overview_fix_8 score=7.0146 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:07] TRACE | [enriched-hybrid-llm]   BM25[1] idx=1 chunk_id=api_reference_fix_1 score=6.7149 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:09:07] TRACE | [enriched-hybrid-llm]   BM25[2] idx=41 chunk_id=user_guide_fix_1 score=6.6529 | Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...
[15:09:07] TRACE | [enriched-hybrid-llm]   BM25[3] idx=30 chunk_id=troubleshooting_guide_fix_2 score=6.5637 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:07] TRACE | [enriched-hybrid-llm]   BM25[4] idx=13 chunk_id=architecture_overview_fix_7 score=6.4847 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:09:07] TRACE | [enriched-hybrid-llm]   BM25[5] idx=40 chunk_id=user_guide_fix_0 score=5.9652 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:07] TRACE | [enriched-hybrid-llm]   BM25[6] idx=19 chunk_id=deployment_guide_fix_0 score=5.8242 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:07] TRACE | [enriched-hybrid-llm]   BM25[7] idx=11 chunk_id=architecture_overview_fix_5 score=5.2809 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:07] TRACE | [enriched-hybrid-llm]   BM25[8] idx=16 chunk_id=architecture_overview_fix_10 score=5.2669 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:07] TRACE | [enriched-hybrid-llm]   BM25[9] idx=4 chunk_id=api_reference_fix_4 score=4.7915 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:07] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:07] TRACE | [enriched-hybrid-llm]   RRF[0] idx=14 total=0.0318 (sem_rank=6 comp=0.0152 + bm25_rank=0 comp=0.0167)
[15:09:07] TRACE | [enriched-hybrid-llm]   RRF[1] idx=30 total=0.0317 (sem_rank=3 comp=0.0159 + bm25_rank=3 comp=0.0159)
[15:09:07] TRACE | [enriched-hybrid-llm]   RRF[2] idx=11 total=0.0313 (sem_rank=1 comp=0.0164 + bm25_rank=7 comp=0.0149)
[15:09:07] TRACE | [enriched-hybrid-llm]   RRF[3] idx=25 total=0.0298 (sem_rank=0 comp=0.0167 + bm25_rank=16 comp=0.0132)
[15:09:07] TRACE | [enriched-hybrid-llm]   RRF[4] idx=15 total=0.0293 (sem_rank=4 comp=0.0156 + bm25_rank=13 comp=0.0137)
[15:09:07] TRACE | [enriched-hybrid-llm]   RRF[5] idx=13 total=0.0293 (sem_rank=13 comp=0.0137 + bm25_rank=4 comp=0.0156)
[15:09:07] TRACE | [enriched-hybrid-llm]   RRF[6] idx=16 total=0.0288 (sem_rank=11 comp=0.0141 + bm25_rank=8 comp=0.0147)
[15:09:07] TRACE | [enriched-hybrid-llm]   RRF[7] idx=33 total=0.0284 (sem_rank=9 comp=0.0145 + bm25_rank=12 comp=0.0139)
[15:09:07] TRACE | [enriched-hybrid-llm]   RRF[8] idx=46 total=0.0276 (sem_rank=5 comp=0.0154 + bm25_rank=22 comp=0.0122)
[15:09:07] TRACE | [enriched-hybrid-llm]   RRF[9] idx=36 total=0.0274 (sem_rank=16 comp=0.0132 + bm25_rank=10 comp=0.0143)
[15:09:07] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:07] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.0318 sem_rank=6 bm25_rank=0 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:09:07] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_2 doc_id=troubleshooting_guide rrf_score=0.0317 sem_rank=3 bm25_rank=3 dominant=balanced | enriched: Execution Plans, Query Execution, Review Query, Memory Leaks, High API, Breakdown Analysis, Plans | API  Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --r...
[15:09:07] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.0313 sem_rank=1 bm25_rank=7 dominant=semantic | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:09:07] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0298 sem_rank=0 bm25_rank=16 dominant=semantic | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:09:07] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_9 doc_id=architecture_overview rrf_score=0.0293 sem_rank=4 bm25_rank=13 dominant=semantic | enriched: API Operations, API key, Redis SET, Redis DEL, API Gateway, Simple SELECT, Performance Characteristics | API, TTL - Encryption, Request, TTL, PostgreSQL  per API key (default: 1000 RPM) ### Secrets Ma...
[15:09:07] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:07] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:07] TRACE | Query: What is the Redis cache TTL for workflow definitions?
[15:09:07] TRACE | Total key facts: 2
[15:09:07] TRACE | Found facts: 0/2
[15:09:07] TRACE | Missed facts: 2/2
[15:09:07] TRACE |   MISSED[1] TTL: 1 hour
[15:09:07] TRACE |     -> Found in chunk_id=architecture_overview_fix_6 (rank not in top-5)
[15:09:07] TRACE |   MISSED[2] Workflow Definitions: TTL: 1 hour
[15:09:07] TRACE | === END FACT COVERAGE ===
[15:09:07] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:07] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: How long are workflow definitions cached?
[15:09:07] DEBUG | [query-rewrite] Rewriting query: How long are workflow definitions cached?
[15:09:07] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:07] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=840 timeout=5s
[15:09:07] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:07] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:07] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:08] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.55s
[15:09:08] DEBUG | [anthropic] USAGE: input_tokens=193 output_tokens=9
[15:09:08] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=58
[15:09:08] DEBUG | [anthropic] RESPONSE: workflow definition cache duration retention configuration
[15:09:08] DEBUG | [query-rewrite] SUCCESS in 1.552s: How long are workflow definitions cached? → workflow definition cache duration retention configuration
[15:09:08] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow definition cache duration retention configuration (took 1.552s)
[15:09:08] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:08] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:08] TRACE | [enriched-hybrid-llm]   SEM[0] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6506 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:08] TRACE | [enriched-hybrid-llm]   SEM[1] idx=46 chunk_id=user_guide_fix_6 score=0.6442 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:08] TRACE | [enriched-hybrid-llm]   SEM[2] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6434 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:08] TRACE | [enriched-hybrid-llm]   SEM[3] idx=18 chunk_id=architecture_overview_fix_12 score=0.6383 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:08] TRACE | [enriched-hybrid-llm]   SEM[4] idx=11 chunk_id=architecture_overview_fix_5 score=0.6366 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:08] TRACE | [enriched-hybrid-llm]   SEM[5] idx=6 chunk_id=architecture_overview_fix_0 score=0.6287 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:08] TRACE | [enriched-hybrid-llm]   SEM[6] idx=25 chunk_id=deployment_guide_fix_6 score=0.6210 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:08] TRACE | [enriched-hybrid-llm]   SEM[7] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6199 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:08] TRACE | [enriched-hybrid-llm]   SEM[8] idx=13 chunk_id=architecture_overview_fix_7 score=0.6187 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:09:08] TRACE | [enriched-hybrid-llm]   SEM[9] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.6052 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:08] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:08] TRACE | [enriched-hybrid-llm]   BM25[0] idx=11 chunk_id=architecture_overview_fix_5 score=6.2437 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:08] TRACE | [enriched-hybrid-llm]   BM25[1] idx=41 chunk_id=user_guide_fix_1 score=5.0031 | Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...
[15:09:08] TRACE | [enriched-hybrid-llm]   BM25[2] idx=13 chunk_id=architecture_overview_fix_7 score=4.8164 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:09:08] TRACE | [enriched-hybrid-llm]   BM25[3] idx=36 chunk_id=troubleshooting_guide_fix_8 score=4.6219 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:08] TRACE | [enriched-hybrid-llm]   BM25[4] idx=19 chunk_id=deployment_guide_fix_0 score=4.2753 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:08] TRACE | [enriched-hybrid-llm]   BM25[5] idx=14 chunk_id=architecture_overview_fix_8 score=4.0479 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:08] TRACE | [enriched-hybrid-llm]   BM25[6] idx=33 chunk_id=troubleshooting_guide_fix_5 score=3.9951 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:08] TRACE | [enriched-hybrid-llm]   BM25[7] idx=23 chunk_id=deployment_guide_fix_4 score=3.8048 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:08] TRACE | [enriched-hybrid-llm]   BM25[8] idx=3 chunk_id=api_reference_fix_3 score=3.8029 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:09:08] TRACE | [enriched-hybrid-llm]   BM25[9] idx=16 chunk_id=architecture_overview_fix_10 score=3.7969 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:08] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:08] TRACE | [enriched-hybrid-llm]   RRF[0] idx=11 total=0.0323 (sem_rank=4 comp=0.0156 + bm25_rank=0 comp=0.0167)
[15:09:08] TRACE | [enriched-hybrid-llm]   RRF[1] idx=13 total=0.0308 (sem_rank=8 comp=0.0147 + bm25_rank=2 comp=0.0161)
[15:09:08] TRACE | [enriched-hybrid-llm]   RRF[2] idx=36 total=0.0304 (sem_rank=9 comp=0.0145 + bm25_rank=3 comp=0.0159)
[15:09:08] TRACE | [enriched-hybrid-llm]   RRF[3] idx=18 total=0.0302 (sem_rank=3 comp=0.0159 + bm25_rank=10 comp=0.0143)
[15:09:08] TRACE | [enriched-hybrid-llm]   RRF[4] idx=33 total=0.0301 (sem_rank=7 comp=0.0149 + bm25_rank=6 comp=0.0152)
[15:09:08] TRACE | [enriched-hybrid-llm]   RRF[5] idx=14 total=0.0297 (sem_rank=10 comp=0.0143 + bm25_rank=5 comp=0.0154)
[15:09:08] TRACE | [enriched-hybrid-llm]   RRF[6] idx=30 total=0.0296 (sem_rank=2 comp=0.0161 + bm25_rank=14 comp=0.0135)
[15:09:08] TRACE | [enriched-hybrid-llm]   RRF[7] idx=46 total=0.0286 (sem_rank=1 comp=0.0164 + bm25_rank=22 comp=0.0122)
[15:09:08] TRACE | [enriched-hybrid-llm]   RRF[8] idx=31 total=0.0283 (sem_rank=0 comp=0.0167 + bm25_rank=26 comp=0.0116)
[15:09:08] TRACE | [enriched-hybrid-llm]   RRF[9] idx=16 total=0.0282 (sem_rank=13 comp=0.0137 + bm25_rank=9 comp=0.0145)
[15:09:08] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:08] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.0323 sem_rank=4 bm25_rank=0 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:09:08] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_7 doc_id=architecture_overview rrf_score=0.0308 sem_rank=8 bm25_rank=2 dominant=bm25 | enriched: multiple interested, Pattern, Pub, interested consumers, consumer group, Queue Patterns, Session timeout | Pub/Sub Pattern, Request-Reply Pattern Synchronous  records: 500 - Session timeout: 30 second...
[15:09:08] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.0304 sem_rank=9 bm25_rank=3 dominant=bm25 | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:09:08] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.0302 sem_rank=3 bm25_rank=10 dominant=semantic | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:09:08] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0301 sem_rank=7 bm25_rank=6 dominant=bm25 | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:09:08] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:08] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:08] TRACE | Query: How long are workflow definitions cached?
[15:09:08] TRACE | Total key facts: 2
[15:09:08] TRACE | Found facts: 0/2
[15:09:08] TRACE | Missed facts: 2/2
[15:09:08] TRACE |   MISSED[1] TTL: 1 hour
[15:09:08] TRACE |     -> Found in chunk_id=architecture_overview_fix_6 (rank not in top-5)
[15:09:08] TRACE |   MISSED[2] Workflow Definitions: TTL: 1 hour
[15:09:08] TRACE | === END FACT COVERAGE ===
[15:09:08] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:08] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: My workflow updates aren't reflecting immediately
[15:09:08] DEBUG | [query-rewrite] Rewriting query: My workflow updates aren't reflecting immediately
[15:09:08] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:08] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=848 timeout=5s
[15:09:08] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:08] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:08] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:09] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.88s
[15:09:09] DEBUG | [anthropic] USAGE: input_tokens=193 output_tokens=13
[15:09:09] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=59
[15:09:09] DEBUG | [anthropic] RESPONSE: workflow real-time synchronization update propagation delay
[15:09:09] DEBUG | [query-rewrite] SUCCESS in 0.878s: My workflow updates aren't reflecting immediately → workflow real-time synchronization update propagation delay
[15:09:09] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow real-time synchronization update propagation delay (took 0.878s)
[15:09:09] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:09] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:09] TRACE | [enriched-hybrid-llm]   SEM[0] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6606 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:09] TRACE | [enriched-hybrid-llm]   SEM[1] idx=46 chunk_id=user_guide_fix_6 score=0.6302 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:09] TRACE | [enriched-hybrid-llm]   SEM[2] idx=13 chunk_id=architecture_overview_fix_7 score=0.6262 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:09:09] TRACE | [enriched-hybrid-llm]   SEM[3] idx=6 chunk_id=architecture_overview_fix_0 score=0.6052 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:09] TRACE | [enriched-hybrid-llm]   SEM[4] idx=48 chunk_id=user_guide_fix_8 score=0.6043 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:09] TRACE | [enriched-hybrid-llm]   SEM[5] idx=16 chunk_id=architecture_overview_fix_10 score=0.5961 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:09] TRACE | [enriched-hybrid-llm]   SEM[6] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.5870 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:09] TRACE | [enriched-hybrid-llm]   SEM[7] idx=18 chunk_id=architecture_overview_fix_12 score=0.5807 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:09] TRACE | [enriched-hybrid-llm]   SEM[8] idx=45 chunk_id=user_guide_fix_5 score=0.5793 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:09] TRACE | [enriched-hybrid-llm]   SEM[9] idx=8 chunk_id=architecture_overview_fix_2 score=0.5738 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:09] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:09] TRACE | [enriched-hybrid-llm]   BM25[0] idx=18 chunk_id=architecture_overview_fix_12 score=4.6212 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:09] TRACE | [enriched-hybrid-llm]   BM25[1] idx=40 chunk_id=user_guide_fix_0 score=4.5938 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:09] TRACE | [enriched-hybrid-llm]   BM25[2] idx=49 chunk_id=user_guide_fix_9 score=4.5319 | Requester: {{trigger.body.requester}} Description: {{trigger.body.description}} Approve: https://app...
[15:09:09] TRACE | [enriched-hybrid-llm]   BM25[3] idx=46 chunk_id=user_guide_fix_6 score=4.5315 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:09] TRACE | [enriched-hybrid-llm]   BM25[4] idx=33 chunk_id=troubleshooting_guide_fix_5 score=3.2210 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:09] TRACE | [enriched-hybrid-llm]   BM25[5] idx=12 chunk_id=architecture_overview_fix_6 score=2.8063 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:09] TRACE | [enriched-hybrid-llm]   BM25[6] idx=8 chunk_id=architecture_overview_fix_2 score=2.7552 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:09] TRACE | [enriched-hybrid-llm]   BM25[7] idx=2 chunk_id=api_reference_fix_2 score=2.5407 | **Endpoint:** `POST /workflows` **Request Body:** ```json { "name": "Email Campaign Automation", "de...
[15:09:09] TRACE | [enriched-hybrid-llm]   BM25[8] idx=39 chunk_id=troubleshooting_guide_fix_11 score=2.1914 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:09] TRACE | [enriched-hybrid-llm]   BM25[9] idx=38 chunk_id=troubleshooting_guide_fix_10 score=1.8936 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:09:09] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:09] TRACE | [enriched-hybrid-llm]   RRF[0] idx=33 total=0.0323 (sem_rank=0 comp=0.0167 + bm25_rank=4 comp=0.0156)
[15:09:09] TRACE | [enriched-hybrid-llm]   RRF[1] idx=46 total=0.0323 (sem_rank=1 comp=0.0164 + bm25_rank=3 comp=0.0159)
[15:09:09] TRACE | [enriched-hybrid-llm]   RRF[2] idx=18 total=0.0316 (sem_rank=7 comp=0.0149 + bm25_rank=0 comp=0.0167)
[15:09:09] TRACE | [enriched-hybrid-llm]   RRF[3] idx=40 total=0.0307 (sem_rank=10 comp=0.0143 + bm25_rank=1 comp=0.0164)
[15:09:09] TRACE | [enriched-hybrid-llm]   RRF[4] idx=16 total=0.0297 (sem_rank=5 comp=0.0154 + bm25_rank=10 comp=0.0143)
[15:09:09] TRACE | [enriched-hybrid-llm]   RRF[5] idx=8 total=0.0296 (sem_rank=9 comp=0.0145 + bm25_rank=6 comp=0.0152)
[15:09:09] TRACE | [enriched-hybrid-llm]   RRF[6] idx=48 total=0.0293 (sem_rank=4 comp=0.0156 + bm25_rank=13 comp=0.0137)
[15:09:09] TRACE | [enriched-hybrid-llm]   RRF[7] idx=13 total=0.0293 (sem_rank=2 comp=0.0161 + bm25_rank=16 comp=0.0132)
[15:09:09] TRACE | [enriched-hybrid-llm]   RRF[8] idx=6 total=0.0292 (sem_rank=3 comp=0.0159 + bm25_rank=15 comp=0.0133)
[15:09:09] TRACE | [enriched-hybrid-llm]   RRF[9] idx=39 total=0.0286 (sem_rank=12 comp=0.0139 + bm25_rank=8 comp=0.0147)
[15:09:09] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:09] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0323 sem_rank=0 bm25_rank=4 dominant=semantic | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:09:09] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=user_guide_fix_6 doc_id=user_guide rrf_score=0.0323 sem_rank=1 bm25_rank=3 dominant=semantic | enriched: workflow, date range, type, workflows, error type, execution, Execution Timeout | MB, Sync Customer Data  Filter by error type, date range, or execution ID 3. Click an execution to view full details 4...
[15:09:09] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.0316 sem_rank=7 bm25_rank=0 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:09:09] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=user_guide_fix_0 doc_id=user_guide rrf_score=0.0307 sem_rank=10 bm25_rank=1 dominant=bm25 | enriched: Google Drive, workflow, User Guide, Visual Editor, Google, automate repetitive, repetitive tasks | CloudFlow, Slack, Contents 1, Workflow Creation](#workflow-creation, Common Workflow Patterns](#commo...
[15:09:09] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0297 sem_rank=5 bm25_rank=10 dominant=semantic | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:09:09] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:09] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:09] TRACE | Query: My workflow updates aren't reflecting immediately
[15:09:09] TRACE | Total key facts: 2
[15:09:09] TRACE | Found facts: 0/2
[15:09:09] TRACE | Missed facts: 2/2
[15:09:09] TRACE |   MISSED[1] TTL: 1 hour
[15:09:09] TRACE |     -> Found in chunk_id=architecture_overview_fix_6 (rank not in top-5)
[15:09:09] TRACE |   MISSED[2] Workflow Definitions: TTL: 1 hour
[15:09:09] TRACE | === END FACT COVERAGE ===
[15:09:09] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:09] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: cache ttl workflows
[15:09:09] DEBUG | [query-rewrite] Rewriting query: cache ttl workflows
[15:09:09] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:09] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=818 timeout=5s
[15:09:09] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:09] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:09] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:10] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.89s
[15:09:10] DEBUG | [anthropic] USAGE: input_tokens=190 output_tokens=12
[15:09:10] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=50
[15:09:10] DEBUG | [anthropic] RESPONSE: workflow cache time-to-live configuration settings
[15:09:10] DEBUG | [query-rewrite] SUCCESS in 0.893s: cache ttl workflows → workflow cache time-to-live configuration settings
[15:09:10] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow cache time-to-live configuration settings (took 0.893s)
[15:09:10] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:10] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:10] TRACE | [enriched-hybrid-llm]   SEM[0] idx=46 chunk_id=user_guide_fix_6 score=0.6492 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:10] TRACE | [enriched-hybrid-llm]   SEM[1] idx=25 chunk_id=deployment_guide_fix_6 score=0.6385 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:10] TRACE | [enriched-hybrid-llm]   SEM[2] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6335 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:10] TRACE | [enriched-hybrid-llm]   SEM[3] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6335 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:10] TRACE | [enriched-hybrid-llm]   SEM[4] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.6319 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:10] TRACE | [enriched-hybrid-llm]   SEM[5] idx=6 chunk_id=architecture_overview_fix_0 score=0.6301 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:10] TRACE | [enriched-hybrid-llm]   SEM[6] idx=18 chunk_id=architecture_overview_fix_12 score=0.6293 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:10] TRACE | [enriched-hybrid-llm]   SEM[7] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6246 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:10] TRACE | [enriched-hybrid-llm]   SEM[8] idx=11 chunk_id=architecture_overview_fix_5 score=0.6220 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:10] TRACE | [enriched-hybrid-llm]   SEM[9] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6166 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:10] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:10] TRACE | [enriched-hybrid-llm]   BM25[0] idx=33 chunk_id=troubleshooting_guide_fix_5 score=6.1193 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:10] TRACE | [enriched-hybrid-llm]   BM25[1] idx=13 chunk_id=architecture_overview_fix_7 score=4.8164 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:09:10] TRACE | [enriched-hybrid-llm]   BM25[2] idx=36 chunk_id=troubleshooting_guide_fix_8 score=4.6219 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:10] TRACE | [enriched-hybrid-llm]   BM25[3] idx=19 chunk_id=deployment_guide_fix_0 score=4.2753 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:10] TRACE | [enriched-hybrid-llm]   BM25[4] idx=14 chunk_id=architecture_overview_fix_8 score=4.0479 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:10] TRACE | [enriched-hybrid-llm]   BM25[5] idx=16 chunk_id=architecture_overview_fix_10 score=3.7969 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:10] TRACE | [enriched-hybrid-llm]   BM25[6] idx=41 chunk_id=user_guide_fix_1 score=3.6419 | Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...
[15:09:10] TRACE | [enriched-hybrid-llm]   BM25[7] idx=31 chunk_id=troubleshooting_guide_fix_3 score=3.5425 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:10] TRACE | [enriched-hybrid-llm]   BM25[8] idx=40 chunk_id=user_guide_fix_0 score=3.4540 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:10] TRACE | [enriched-hybrid-llm]   BM25[9] idx=30 chunk_id=troubleshooting_guide_fix_2 score=3.0194 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:10] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:10] TRACE | [enriched-hybrid-llm]   RRF[0] idx=33 total=0.0328 (sem_rank=2 comp=0.0161 + bm25_rank=0 comp=0.0167)
[15:09:10] TRACE | [enriched-hybrid-llm]   RRF[1] idx=36 total=0.0318 (sem_rank=4 comp=0.0156 + bm25_rank=2 comp=0.0161)
[15:09:10] TRACE | [enriched-hybrid-llm]   RRF[2] idx=31 total=0.0308 (sem_rank=3 comp=0.0159 + bm25_rank=7 comp=0.0149)
[15:09:10] TRACE | [enriched-hybrid-llm]   RRF[3] idx=13 total=0.0305 (sem_rank=11 comp=0.0141 + bm25_rank=1 comp=0.0164)
[15:09:10] TRACE | [enriched-hybrid-llm]   RRF[4] idx=25 total=0.0299 (sem_rank=1 comp=0.0164 + bm25_rank=14 comp=0.0135)
[15:09:10] TRACE | [enriched-hybrid-llm]   RRF[5] idx=46 total=0.0295 (sem_rank=0 comp=0.0167 + bm25_rank=18 comp=0.0128)
[15:09:10] TRACE | [enriched-hybrid-llm]   RRF[6] idx=30 total=0.0294 (sem_rank=7 comp=0.0149 + bm25_rank=9 comp=0.0145)
[15:09:10] TRACE | [enriched-hybrid-llm]   RRF[7] idx=16 total=0.0293 (sem_rank=12 comp=0.0139 + bm25_rank=5 comp=0.0154)
[15:09:10] TRACE | [enriched-hybrid-llm]   RRF[8] idx=11 total=0.0288 (sem_rank=8 comp=0.0147 + bm25_rank=11 comp=0.0141)
[15:09:10] TRACE | [enriched-hybrid-llm]   RRF[9] idx=40 total=0.0282 (sem_rank=14 comp=0.0135 + bm25_rank=8 comp=0.0147)
[15:09:10] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:10] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0328 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:09:10] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.0318 sem_rank=4 bm25_rank=2 dominant=bm25 | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:09:10] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.0308 sem_rank=3 bm25_rank=7 dominant=semantic | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:09:10] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_7 doc_id=architecture_overview rrf_score=0.0305 sem_rank=11 bm25_rank=1 dominant=bm25 | enriched: multiple interested, Pattern, Pub, interested consumers, consumer group, Queue Patterns, Session timeout | Pub/Sub Pattern, Request-Reply Pattern Synchronous  records: 500 - Session timeout: 30 second...
[15:09:10] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0299 sem_rank=1 bm25_rank=14 dominant=semantic | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:09:10] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:10] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:10] TRACE | Query: cache ttl workflows
[15:09:10] TRACE | Total key facts: 2
[15:09:10] TRACE | Found facts: 0/2
[15:09:10] TRACE | Missed facts: 2/2
[15:09:10] TRACE |   MISSED[1] TTL: 1 hour
[15:09:10] TRACE |     -> Found in chunk_id=architecture_overview_fix_6 (rank not in top-5)
[15:09:10] TRACE |   MISSED[2] Workflow Definitions: TTL: 1 hour
[15:09:10] TRACE | === END FACT COVERAGE ===
[15:09:10] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:10] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: After updating a workflow, how long until the cache expires?
[15:09:10] DEBUG | [query-rewrite] Rewriting query: After updating a workflow, how long until the cache expires?
[15:09:10] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:10] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=859 timeout=5s
[15:09:10] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:10] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:10] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:11] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.99s
[15:09:11] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=13
[15:09:11] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=73
[15:09:11] DEBUG | [anthropic] RESPONSE: workflow configuration cache invalidation expiration time update interval
[15:09:11] DEBUG | [query-rewrite] SUCCESS in 0.994s: After updating a workflow, how long until the cache expires? → workflow configuration cache invalidation expiration time update interval
[15:09:11] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow configuration cache invalidation expiration time update interval (took 0.994s)
[15:09:11] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:11] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:11] TRACE | [enriched-hybrid-llm]   SEM[0] idx=46 chunk_id=user_guide_fix_6 score=0.6702 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:11] TRACE | [enriched-hybrid-llm]   SEM[1] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6670 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:11] TRACE | [enriched-hybrid-llm]   SEM[2] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6550 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:11] TRACE | [enriched-hybrid-llm]   SEM[3] idx=14 chunk_id=architecture_overview_fix_8 score=0.6540 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:11] TRACE | [enriched-hybrid-llm]   SEM[4] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6422 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:11] TRACE | [enriched-hybrid-llm]   SEM[5] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.6294 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:11] TRACE | [enriched-hybrid-llm]   SEM[6] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6260 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:11] TRACE | [enriched-hybrid-llm]   SEM[7] idx=12 chunk_id=architecture_overview_fix_6 score=0.6245 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:11] TRACE | [enriched-hybrid-llm]   SEM[8] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6228 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:11] TRACE | [enriched-hybrid-llm]   SEM[9] idx=18 chunk_id=architecture_overview_fix_12 score=0.6168 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:11] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:11] TRACE | [enriched-hybrid-llm]   BM25[0] idx=14 chunk_id=architecture_overview_fix_8 score=12.4310 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:11] TRACE | [enriched-hybrid-llm]   BM25[1] idx=30 chunk_id=troubleshooting_guide_fix_2 score=6.3217 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:11] TRACE | [enriched-hybrid-llm]   BM25[2] idx=33 chunk_id=troubleshooting_guide_fix_5 score=5.7558 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:11] TRACE | [enriched-hybrid-llm]   BM25[3] idx=49 chunk_id=user_guide_fix_9 score=5.0040 | Requester: {{trigger.body.requester}} Description: {{trigger.body.description}} Approve: https://app...
[15:09:11] TRACE | [enriched-hybrid-llm]   BM25[4] idx=13 chunk_id=architecture_overview_fix_7 score=4.8164 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:09:11] TRACE | [enriched-hybrid-llm]   BM25[5] idx=28 chunk_id=troubleshooting_guide_fix_0 score=4.6810 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:11] TRACE | [enriched-hybrid-llm]   BM25[6] idx=36 chunk_id=troubleshooting_guide_fix_8 score=4.6219 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:11] TRACE | [enriched-hybrid-llm]   BM25[7] idx=16 chunk_id=architecture_overview_fix_10 score=4.5138 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:11] TRACE | [enriched-hybrid-llm]   BM25[8] idx=44 chunk_id=user_guide_fix_4 score=4.3799 | ### Cron Syntax Use standard cron expressions to define schedules: ``` * * * * * ┬ ┬ ┬ ┬ ┬ │ │ │ │ │...
[15:09:11] TRACE | [enriched-hybrid-llm]   BM25[9] idx=19 chunk_id=deployment_guide_fix_0 score=4.2753 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:11] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:11] TRACE | [enriched-hybrid-llm]   RRF[0] idx=14 total=0.0325 (sem_rank=3 comp=0.0159 + bm25_rank=0 comp=0.0167)
[15:09:11] TRACE | [enriched-hybrid-llm]   RRF[1] idx=33 total=0.0325 (sem_rank=1 comp=0.0164 + bm25_rank=2 comp=0.0161)
[15:09:11] TRACE | [enriched-hybrid-llm]   RRF[2] idx=30 total=0.0320 (sem_rank=4 comp=0.0156 + bm25_rank=1 comp=0.0164)
[15:09:11] TRACE | [enriched-hybrid-llm]   RRF[3] idx=28 total=0.0305 (sem_rank=6 comp=0.0152 + bm25_rank=5 comp=0.0154)
[15:09:11] TRACE | [enriched-hybrid-llm]   RRF[4] idx=13 total=0.0290 (sem_rank=15 comp=0.0133 + bm25_rank=4 comp=0.0156)
[15:09:11] TRACE | [enriched-hybrid-llm]   RRF[5] idx=49 total=0.0289 (sem_rank=17 comp=0.0130 + bm25_rank=3 comp=0.0159)
[15:09:11] TRACE | [enriched-hybrid-llm]   RRF[6] idx=36 total=0.0289 (sem_rank=13 comp=0.0137 + bm25_rank=6 comp=0.0152)
[15:09:11] TRACE | [enriched-hybrid-llm]   RRF[7] idx=12 total=0.0284 (sem_rank=7 comp=0.0149 + bm25_rank=14 comp=0.0135)
[15:09:11] TRACE | [enriched-hybrid-llm]   RRF[8] idx=46 total=0.0280 (sem_rank=0 comp=0.0167 + bm25_rank=28 comp=0.0114)
[15:09:11] TRACE | [enriched-hybrid-llm]   RRF[9] idx=34 total=0.0275 (sem_rank=8 comp=0.0147 + bm25_rank=18 comp=0.0128)
[15:09:11] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:11] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.0325 sem_rank=3 bm25_rank=0 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:09:11] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0325 sem_rank=1 bm25_rank=2 dominant=semantic | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:09:11] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_2 doc_id=troubleshooting_guide rrf_score=0.0320 sem_rank=4 bm25_rank=1 dominant=bm25 | enriched: Execution Plans, Query Execution, Review Query, Memory Leaks, High API, Breakdown Analysis, Plans | API  Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --r...
[15:09:11] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.0305 sem_rank=6 bm25_rank=5 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:09:11] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_7 doc_id=architecture_overview rrf_score=0.0290 sem_rank=15 bm25_rank=4 dominant=bm25 | enriched: multiple interested, Pattern, Pub, interested consumers, consumer group, Queue Patterns, Session timeout | Pub/Sub Pattern, Request-Reply Pattern Synchronous  records: 500 - Session timeout: 30 second...
[15:09:11] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:11] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:11] TRACE | Query: After updating a workflow, how long until the cache expires?
[15:09:11] TRACE | Total key facts: 2
[15:09:11] TRACE | Found facts: 0/2
[15:09:11] TRACE | Missed facts: 2/2
[15:09:11] TRACE |   MISSED[1] TTL: 1 hour
[15:09:11] TRACE |     -> Found in chunk_id=architecture_overview_fix_6 (rank not in top-5)
[15:09:11] TRACE |   MISSED[2] Workflow Definitions: TTL: 1 hour
[15:09:11] TRACE | === END FACT COVERAGE ===
[15:09:11] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:11] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why are changes taking an hour to appear?
[15:09:11] DEBUG | [query-rewrite] Rewriting query: Why are changes taking an hour to appear?
[15:09:11] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:11] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=840 timeout=5s
[15:09:11] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:11] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:11] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:12] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.21s
[15:09:12] DEBUG | [anthropic] USAGE: input_tokens=195 output_tokens=14
[15:09:12] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=66
[15:09:12] DEBUG | [anthropic] RESPONSE: changes replication synchronization delay latency propagation time
[15:09:12] DEBUG | [query-rewrite] SUCCESS in 1.208s: Why are changes taking an hour to appear? → changes replication synchronization delay latency propagation time
[15:09:12] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: changes replication synchronization delay latency propagation time (took 1.208s)
[15:09:12] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:12] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:12] TRACE | [enriched-hybrid-llm]   SEM[0] idx=27 chunk_id=deployment_guide_fix_8 score=0.5497 | UTC - **Secondary**: Wednesday 10:00-12:00 UTC All deployments should target these windows to minimi...
[15:09:12] TRACE | [enriched-hybrid-llm]   SEM[1] idx=17 chunk_id=architecture_overview_fix_11 score=0.5480 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:12] TRACE | [enriched-hybrid-llm]   SEM[2] idx=13 chunk_id=architecture_overview_fix_7 score=0.5459 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:09:12] TRACE | [enriched-hybrid-llm]   SEM[3] idx=14 chunk_id=architecture_overview_fix_8 score=0.5453 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:12] TRACE | [enriched-hybrid-llm]   SEM[4] idx=18 chunk_id=architecture_overview_fix_12 score=0.5418 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:12] TRACE | [enriched-hybrid-llm]   SEM[5] idx=9 chunk_id=architecture_overview_fix_3 score=0.5391 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:12] TRACE | [enriched-hybrid-llm]   SEM[6] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.5336 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:12] TRACE | [enriched-hybrid-llm]   SEM[7] idx=25 chunk_id=deployment_guide_fix_6 score=0.5285 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:12] TRACE | [enriched-hybrid-llm]   SEM[8] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.5243 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:12] TRACE | [enriched-hybrid-llm]   SEM[9] idx=16 chunk_id=architecture_overview_fix_10 score=0.5203 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:12] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:12] TRACE | [enriched-hybrid-llm]   BM25[0] idx=38 chunk_id=troubleshooting_guide_fix_10 score=5.7204 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:09:12] TRACE | [enriched-hybrid-llm]   BM25[1] idx=16 chunk_id=architecture_overview_fix_10 score=5.1387 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:12] TRACE | [enriched-hybrid-llm]   BM25[2] idx=30 chunk_id=troubleshooting_guide_fix_2 score=4.2231 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:12] TRACE | [enriched-hybrid-llm]   BM25[3] idx=11 chunk_id=architecture_overview_fix_5 score=3.7347 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:12] TRACE | [enriched-hybrid-llm]   BM25[4] idx=49 chunk_id=user_guide_fix_9 score=3.3502 | Requester: {{trigger.body.requester}} Description: {{trigger.body.description}} Approve: https://app...
[15:09:12] TRACE | [enriched-hybrid-llm]   BM25[5] idx=18 chunk_id=architecture_overview_fix_12 score=3.3219 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:12] TRACE | [enriched-hybrid-llm]   BM25[6] idx=29 chunk_id=troubleshooting_guide_fix_1 score=3.2148 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:12] TRACE | [enriched-hybrid-llm]   BM25[7] idx=48 chunk_id=user_guide_fix_8 score=2.7802 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:12] TRACE | [enriched-hybrid-llm]   BM25[8] idx=17 chunk_id=architecture_overview_fix_11 score=2.7437 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:12] TRACE | [enriched-hybrid-llm]   BM25[9] idx=21 chunk_id=deployment_guide_fix_2 score=2.3817 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:12] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:12] TRACE | [enriched-hybrid-llm]   RRF[0] idx=17 total=0.0311 (sem_rank=1 comp=0.0164 + bm25_rank=8 comp=0.0147)
[15:09:12] TRACE | [enriched-hybrid-llm]   RRF[1] idx=18 total=0.0310 (sem_rank=4 comp=0.0156 + bm25_rank=5 comp=0.0154)
[15:09:12] TRACE | [enriched-hybrid-llm]   RRF[2] idx=16 total=0.0309 (sem_rank=9 comp=0.0145 + bm25_rank=1 comp=0.0164)
[15:09:12] TRACE | [enriched-hybrid-llm]   RRF[3] idx=38 total=0.0304 (sem_rank=13 comp=0.0137 + bm25_rank=0 comp=0.0167)
[15:09:12] TRACE | [enriched-hybrid-llm]   RRF[4] idx=11 total=0.0300 (sem_rank=11 comp=0.0141 + bm25_rank=3 comp=0.0159)
[15:09:12] TRACE | [enriched-hybrid-llm]   RRF[5] idx=48 total=0.0288 (sem_rank=12 comp=0.0139 + bm25_rank=7 comp=0.0149)
[15:09:12] TRACE | [enriched-hybrid-llm]   RRF[6] idx=9 total=0.0287 (sem_rank=5 comp=0.0154 + bm25_rank=15 comp=0.0133)
[15:09:12] TRACE | [enriched-hybrid-llm]   RRF[7] idx=29 total=0.0287 (sem_rank=14 comp=0.0135 + bm25_rank=6 comp=0.0152)
[15:09:12] TRACE | [enriched-hybrid-llm]   RRF[8] idx=12 total=0.0286 (sem_rank=10 comp=0.0143 + bm25_rank=10 comp=0.0143)
[15:09:12] TRACE | [enriched-hybrid-llm]   RRF[9] idx=25 total=0.0284 (sem_rank=7 comp=0.0149 + bm25_rank=14 comp=0.0135)
[15:09:12] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:12] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_11 doc_id=architecture_overview rrf_score=0.0311 sem_rank=1 bm25_rank=8 dominant=semantic | enriched: Kafka Broker, Redis Replica, Backup Strategy, Backup Schedule, Kubernetes health, Weekly automated, automatic promotion | Redis Replica, Kafka Broker, Sentinel, S3, Glacier  Service (2) - PostgreSQL P...
[15:09:12] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.0310 sem_rank=4 bm25_rank=5 dominant=semantic | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:09:12] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0309 sem_rank=9 bm25_rank=1 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:09:12] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_10 doc_id=troubleshooting_guide rrf_score=0.0304 sem_rank=13 bm25_rank=0 dominant=bm25 | enriched: health check, Run health, Capture packets, Capture system, metrics dashboard, Trace route, Review recent | database nc -zv cloudflow-db.internal.company.com 5432 #, Run, Trace, API  database nc -zv cl...
[15:09:12] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.0300 sem_rank=11 bm25_rank=3 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:09:12] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:12] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:12] TRACE | Query: Why are changes taking an hour to appear?
[15:09:12] TRACE | Total key facts: 2
[15:09:12] TRACE | Found facts: 0/2
[15:09:12] TRACE | Missed facts: 2/2
[15:09:12] TRACE |   MISSED[1] TTL: 1 hour
[15:09:12] TRACE |     -> Found in chunk_id=architecture_overview_fix_6 (rank not in top-5)
[15:09:12] TRACE |   MISSED[2] Workflow Definitions: TTL: 1 hour
[15:09:12] TRACE | === END FACT COVERAGE ===
[15:09:12] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:12] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What monitoring tools does CloudFlow use?
[15:09:12] DEBUG | [query-rewrite] Rewriting query: What monitoring tools does CloudFlow use?
[15:09:12] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:12] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=840 timeout=5s
[15:09:12] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:12] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:12] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:14] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.03s
[15:09:14] DEBUG | [anthropic] USAGE: input_tokens=194 output_tokens=16
[15:09:14] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=96
[15:09:14] DEBUG | [anthropic] RESPONSE: CloudFlow monitoring tools observability platforms integration supported metrics logging tracing
[15:09:14] DEBUG | [query-rewrite] SUCCESS in 1.033s: What monitoring tools does CloudFlow use? → CloudFlow monitoring tools observability platforms integration supported metrics logging tracing
[15:09:14] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: CloudFlow monitoring tools observability platforms integration supported metrics logging tracing (took 1.033s)
[15:09:14] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: CloudFlow monitoring tools observability platforms integration supported metrics logging tracing Grafana Jaeger Prometheus
[15:09:14] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:14] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:14] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[0] idx=23 chunk_id=deployment_guide_fix_4 score=0.7240 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[1] idx=0 chunk_id=api_reference_fix_0 score=0.6477 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[2] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.6303 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[3] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6274 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[4] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.6180 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[5] idx=21 chunk_id=deployment_guide_fix_2 score=0.6109 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[6] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.6087 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[7] idx=6 chunk_id=architecture_overview_fix_0 score=0.6068 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[8] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6066 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[9] idx=50 chunk_id=user_guide_fix_10 score=0.6049 | - **Documentation**: https://docs.cloudflow.io - **Community Forum**: https://community.cloudflow.io...
[15:09:14] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[0] idx=23 chunk_id=deployment_guide_fix_4 score=17.8221 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[1] idx=22 chunk_id=deployment_guide_fix_3 score=11.6536 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[2] idx=19 chunk_id=deployment_guide_fix_0 score=9.7648 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[3] idx=6 chunk_id=architecture_overview_fix_0 score=9.1427 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[4] idx=20 chunk_id=deployment_guide_fix_1 score=4.8068 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[5] idx=37 chunk_id=troubleshooting_guide_fix_9 score=4.2995 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[6] idx=5 chunk_id=api_reference_fix_5 score=4.2144 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[7] idx=33 chunk_id=troubleshooting_guide_fix_5 score=3.9269 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[8] idx=42 chunk_id=user_guide_fix_2 score=3.9068 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[9] idx=38 chunk_id=troubleshooting_guide_fix_10 score=3.6816 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:09:14] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[0] idx=23 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[1] idx=22 total=0.2818 (sem_rank=23 comp=0.0091 + bm25_rank=1 comp=0.2727)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[2] idx=19 total=0.2643 (sem_rank=11 comp=0.0143 + bm25_rank=2 comp=0.2500)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[3] idx=6 total=0.2484 (sem_rank=7 comp=0.0176 + bm25_rank=3 comp=0.2308)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[4] idx=20 total=0.2243 (sem_rank=20 comp=0.0100 + bm25_rank=4 comp=0.2143)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[5] idx=37 total=0.2188 (sem_rank=6 comp=0.0187 + bm25_rank=5 comp=0.2000)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[6] idx=5 total=0.2005 (sem_rank=13 comp=0.0130 + bm25_rank=6 comp=0.1875)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[7] idx=33 total=0.1846 (sem_rank=27 comp=0.0081 + bm25_rank=7 comp=0.1765)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[8] idx=38 total=0.1793 (sem_rank=4 comp=0.0214 + bm25_rank=9 comp=0.1579)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[9] idx=42 total=0.1721 (sem_rank=45 comp=0.0055 + bm25_rank=8 comp=0.1667)
[15:09:14] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:14] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:09:14] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.2818 sem_rank=23 bm25_rank=1 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:14] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.2643 sem_rank=11 bm25_rank=2 dominant=bm25 | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:09:14] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2484 sem_rank=7 bm25_rank=3 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:09:14] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.2243 sem_rank=20 bm25_rank=4 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:09:14] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:14] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:14] TRACE | Query: What monitoring tools does CloudFlow use?
[15:09:14] TRACE | Total key facts: 3
[15:09:14] TRACE | Found facts: 3/3
[15:09:14] TRACE |   FOUND[1] Prometheus
[15:09:14] TRACE |   FOUND[2] Grafana
[15:09:14] TRACE |   FOUND[3] Jaeger for distributed tracing
[15:09:14] TRACE | === END FACT COVERAGE ===
[15:09:14] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:14] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Which observability platform is integrated?
[15:09:14] DEBUG | [query-rewrite] Rewriting query: Which observability platform is integrated?
[15:09:14] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:14] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=842 timeout=5s
[15:09:14] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:14] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:14] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:14] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.82s
[15:09:14] DEBUG | [anthropic] USAGE: input_tokens=193 output_tokens=10
[15:09:14] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=61
[15:09:14] DEBUG | [anthropic] RESPONSE: observability platform integration supported monitoring tools
[15:09:14] DEBUG | [query-rewrite] SUCCESS in 0.822s: Which observability platform is integrated? → observability platform integration supported monitoring tools
[15:09:14] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: observability platform integration supported monitoring tools (took 0.822s)
[15:09:14] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: observability platform integration supported monitoring tools Grafana Jaeger Prometheus metrics tracing
[15:09:14] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:14] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:14] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[0] idx=23 chunk_id=deployment_guide_fix_4 score=0.6237 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[1] idx=3 chunk_id=api_reference_fix_3 score=0.5322 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[2] idx=15 chunk_id=architecture_overview_fix_9 score=0.5239 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[3] idx=10 chunk_id=architecture_overview_fix_4 score=0.5203 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[4] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.5174 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[5] idx=7 chunk_id=architecture_overview_fix_1 score=0.5173 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[6] idx=0 chunk_id=api_reference_fix_0 score=0.5150 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[7] idx=8 chunk_id=architecture_overview_fix_2 score=0.5148 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[8] idx=25 chunk_id=deployment_guide_fix_6 score=0.5100 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:14] TRACE | [enriched-hybrid-llm]   SEM[9] idx=6 chunk_id=architecture_overview_fix_0 score=0.5077 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:14] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[0] idx=23 chunk_id=deployment_guide_fix_4 score=14.1200 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[1] idx=6 chunk_id=architecture_overview_fix_0 score=11.7825 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[2] idx=19 chunk_id=deployment_guide_fix_0 score=11.3763 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[3] idx=22 chunk_id=deployment_guide_fix_3 score=10.3606 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[4] idx=28 chunk_id=troubleshooting_guide_fix_0 score=5.0434 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[5] idx=5 chunk_id=api_reference_fix_5 score=4.2144 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[6] idx=27 chunk_id=deployment_guide_fix_8 score=4.1401 | UTC - **Secondary**: Wednesday 10:00-12:00 UTC All deployments should target these windows to minimi...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[7] idx=20 chunk_id=deployment_guide_fix_1 score=3.3869 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[8] idx=46 chunk_id=user_guide_fix_6 score=3.1024 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:14] TRACE | [enriched-hybrid-llm]   BM25[9] idx=42 chunk_id=user_guide_fix_2 score=2.8069 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:14] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[0] idx=23 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[1] idx=6 total=0.2885 (sem_rank=9 comp=0.0158 + bm25_rank=1 comp=0.2727)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[2] idx=19 total=0.2630 (sem_rank=13 comp=0.0130 + bm25_rank=2 comp=0.2500)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[3] idx=22 total=0.2408 (sem_rank=20 comp=0.0100 + bm25_rank=3 comp=0.2308)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[4] idx=28 total=0.2357 (sem_rank=4 comp=0.0214 + bm25_rank=4 comp=0.2143)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[5] idx=5 total=0.2143 (sem_rank=11 comp=0.0143 + bm25_rank=5 comp=0.2000)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[6] idx=27 total=0.1956 (sem_rank=27 comp=0.0081 + bm25_rank=6 comp=0.1875)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[7] idx=20 total=0.1826 (sem_rank=39 comp=0.0061 + bm25_rank=7 comp=0.1765)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[8] idx=3 total=0.1773 (sem_rank=1 comp=0.0273 + bm25_rank=10 comp=0.1500)
[15:09:14] TRACE | [enriched-hybrid-llm]   RRF[9] idx=46 total=0.1735 (sem_rank=34 comp=0.0068 + bm25_rank=8 comp=0.1667)
[15:09:14] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:14] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:09:14] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2885 sem_rank=9 bm25_rank=1 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:09:14] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.2630 sem_rank=13 bm25_rank=2 dominant=bm25 | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:09:14] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.2408 sem_rank=20 bm25_rank=3 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:14] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.2357 sem_rank=4 bm25_rank=4 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:09:14] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:14] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:14] TRACE | Query: Which observability platform is integrated?
[15:09:14] TRACE | Total key facts: 3
[15:09:14] TRACE | Found facts: 3/3
[15:09:14] TRACE |   FOUND[1] Prometheus
[15:09:14] TRACE |   FOUND[2] Grafana
[15:09:14] TRACE |   FOUND[3] Jaeger for distributed tracing
[15:09:14] TRACE | === END FACT COVERAGE ===
[15:09:14] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:14] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Where can I view CloudFlow metrics and logs?
[15:09:14] DEBUG | [query-rewrite] Rewriting query: Where can I view CloudFlow metrics and logs?
[15:09:14] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:14] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=843 timeout=5s
[15:09:14] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:14] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:14] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:15] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.94s
[15:09:15] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=13
[15:09:15] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=74
[15:09:15] DEBUG | [anthropic] RESPONSE: cloudflow observability monitoring metrics logging dashboard access points
[15:09:15] DEBUG | [query-rewrite] SUCCESS in 0.945s: Where can I view CloudFlow metrics and logs? → cloudflow observability monitoring metrics logging dashboard access points
[15:09:15] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: cloudflow observability monitoring metrics logging dashboard access points (took 0.945s)
[15:09:15] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: cloudflow observability monitoring metrics logging dashboard access points Grafana Jaeger Prometheus tracing
[15:09:15] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:15] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:15] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:15] TRACE | [enriched-hybrid-llm]   SEM[0] idx=23 chunk_id=deployment_guide_fix_4 score=0.7473 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:15] TRACE | [enriched-hybrid-llm]   SEM[1] idx=0 chunk_id=api_reference_fix_0 score=0.6464 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:15] TRACE | [enriched-hybrid-llm]   SEM[2] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.6413 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:09:15] TRACE | [enriched-hybrid-llm]   SEM[3] idx=21 chunk_id=deployment_guide_fix_2 score=0.6333 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:15] TRACE | [enriched-hybrid-llm]   SEM[4] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.6314 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:15] TRACE | [enriched-hybrid-llm]   SEM[5] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6208 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:15] TRACE | [enriched-hybrid-llm]   SEM[6] idx=25 chunk_id=deployment_guide_fix_6 score=0.6208 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:15] TRACE | [enriched-hybrid-llm]   SEM[7] idx=3 chunk_id=api_reference_fix_3 score=0.6192 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:09:15] TRACE | [enriched-hybrid-llm]   SEM[8] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.6167 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:09:15] TRACE | [enriched-hybrid-llm]   SEM[9] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6153 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:15] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:15] TRACE | [enriched-hybrid-llm]   BM25[0] idx=23 chunk_id=deployment_guide_fix_4 score=22.7694 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:15] TRACE | [enriched-hybrid-llm]   BM25[1] idx=22 chunk_id=deployment_guide_fix_3 score=11.6536 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:15] TRACE | [enriched-hybrid-llm]   BM25[2] idx=6 chunk_id=architecture_overview_fix_0 score=9.1427 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:15] TRACE | [enriched-hybrid-llm]   BM25[3] idx=19 chunk_id=deployment_guide_fix_0 score=8.7023 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:15] TRACE | [enriched-hybrid-llm]   BM25[4] idx=38 chunk_id=troubleshooting_guide_fix_10 score=6.5833 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:09:15] TRACE | [enriched-hybrid-llm]   BM25[5] idx=29 chunk_id=troubleshooting_guide_fix_1 score=5.9364 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:15] TRACE | [enriched-hybrid-llm]   BM25[6] idx=20 chunk_id=deployment_guide_fix_1 score=4.8068 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:15] TRACE | [enriched-hybrid-llm]   BM25[7] idx=28 chunk_id=troubleshooting_guide_fix_0 score=4.7623 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:15] TRACE | [enriched-hybrid-llm]   BM25[8] idx=0 chunk_id=api_reference_fix_0 score=4.7317 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:15] TRACE | [enriched-hybrid-llm]   BM25[9] idx=41 chunk_id=user_guide_fix_1 score=4.6734 | Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...
[15:09:15] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:15] TRACE | [enriched-hybrid-llm]   RRF[0] idx=23 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:09:15] TRACE | [enriched-hybrid-llm]   RRF[1] idx=22 total=0.2816 (sem_rank=24 comp=0.0088 + bm25_rank=1 comp=0.2727)
[15:09:15] TRACE | [enriched-hybrid-llm]   RRF[2] idx=6 total=0.2636 (sem_rank=12 comp=0.0136 + bm25_rank=2 comp=0.2500)
[15:09:15] TRACE | [enriched-hybrid-llm]   RRF[3] idx=19 total=0.2433 (sem_rank=14 comp=0.0125 + bm25_rank=3 comp=0.2308)
[15:09:15] TRACE | [enriched-hybrid-llm]   RRF[4] idx=38 total=0.2393 (sem_rank=2 comp=0.0250 + bm25_rank=4 comp=0.2143)
[15:09:15] TRACE | [enriched-hybrid-llm]   RRF[5] idx=29 total=0.2083 (sem_rank=26 comp=0.0083 + bm25_rank=5 comp=0.2000)
[15:09:15] TRACE | [enriched-hybrid-llm]   RRF[6] idx=20 total=0.1978 (sem_rank=19 comp=0.0103 + bm25_rank=6 comp=0.1875)
[15:09:15] TRACE | [enriched-hybrid-llm]   RRF[7] idx=28 total=0.1965 (sem_rank=5 comp=0.0200 + bm25_rank=7 comp=0.1765)
[15:09:15] TRACE | [enriched-hybrid-llm]   RRF[8] idx=0 total=0.1939 (sem_rank=1 comp=0.0273 + bm25_rank=8 comp=0.1667)
[15:09:15] TRACE | [enriched-hybrid-llm]   RRF[9] idx=37 total=0.1667 (sem_rank=8 comp=0.0167 + bm25_rank=10 comp=0.1500)
[15:09:15] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:15] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:09:15] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.2816 sem_rank=24 bm25_rank=1 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:15] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2636 sem_rank=12 bm25_rank=2 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:09:15] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.2433 sem_rank=14 bm25_rank=3 dominant=bm25 | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:09:15] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_10 doc_id=troubleshooting_guide rrf_score=0.2393 sem_rank=2 bm25_rank=4 dominant=bm25 | enriched: health check, Run health, Capture packets, Capture system, metrics dashboard, Trace route, Review recent | database nc -zv cloudflow-db.internal.company.com 5432 #, Run, Trace, API  database nc -zv cl...
[15:09:15] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:15] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:15] TRACE | Query: Where can I view CloudFlow metrics and logs?
[15:09:15] TRACE | Total key facts: 3
[15:09:15] TRACE | Found facts: 3/3
[15:09:15] TRACE |   FOUND[1] Prometheus
[15:09:15] TRACE |   FOUND[2] Grafana
[15:09:15] TRACE |   FOUND[3] Jaeger for distributed tracing
[15:09:15] TRACE | === END FACT COVERAGE ===
[15:09:15] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:15] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: monitoring stack
[15:09:15] DEBUG | [query-rewrite] Rewriting query: monitoring stack
[15:09:15] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:15] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=815 timeout=5s
[15:09:15] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:15] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:15] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:16] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.95s
[15:09:16] DEBUG | [anthropic] USAGE: input_tokens=188 output_tokens=11
[15:09:16] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=72
[15:09:16] DEBUG | [anthropic] RESPONSE: monitoring stack architecture components observability tools integration
[15:09:16] DEBUG | [query-rewrite] SUCCESS in 0.952s: monitoring stack → monitoring stack architecture components observability tools integration
[15:09:16] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: monitoring stack architecture components observability tools integration (took 0.952s)
[15:09:16] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: monitoring stack architecture components observability tools integration Grafana Jaeger Prometheus metrics tracing
[15:09:16] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:16] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:16] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:16] TRACE | [enriched-hybrid-llm]   SEM[0] idx=23 chunk_id=deployment_guide_fix_4 score=0.6565 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:16] TRACE | [enriched-hybrid-llm]   SEM[1] idx=10 chunk_id=architecture_overview_fix_4 score=0.5740 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:16] TRACE | [enriched-hybrid-llm]   SEM[2] idx=7 chunk_id=architecture_overview_fix_1 score=0.5686 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:16] TRACE | [enriched-hybrid-llm]   SEM[3] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.5638 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:09:16] TRACE | [enriched-hybrid-llm]   SEM[4] idx=6 chunk_id=architecture_overview_fix_0 score=0.5597 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:16] TRACE | [enriched-hybrid-llm]   SEM[5] idx=0 chunk_id=api_reference_fix_0 score=0.5592 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:16] TRACE | [enriched-hybrid-llm]   SEM[6] idx=50 chunk_id=user_guide_fix_10 score=0.5520 | - **Documentation**: https://docs.cloudflow.io - **Community Forum**: https://community.cloudflow.io...
[15:09:16] TRACE | [enriched-hybrid-llm]   SEM[7] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.5517 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:16] TRACE | [enriched-hybrid-llm]   SEM[8] idx=8 chunk_id=architecture_overview_fix_2 score=0.5507 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:16] TRACE | [enriched-hybrid-llm]   SEM[9] idx=25 chunk_id=deployment_guide_fix_6 score=0.5472 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:16] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:16] TRACE | [enriched-hybrid-llm]   BM25[0] idx=23 chunk_id=deployment_guide_fix_4 score=14.1200 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:16] TRACE | [enriched-hybrid-llm]   BM25[1] idx=6 chunk_id=architecture_overview_fix_0 score=14.0526 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:16] TRACE | [enriched-hybrid-llm]   BM25[2] idx=22 chunk_id=deployment_guide_fix_3 score=10.3606 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:16] TRACE | [enriched-hybrid-llm]   BM25[3] idx=19 chunk_id=deployment_guide_fix_0 score=9.7811 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:16] TRACE | [enriched-hybrid-llm]   BM25[4] idx=16 chunk_id=architecture_overview_fix_10 score=3.5249 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:16] TRACE | [enriched-hybrid-llm]   BM25[5] idx=20 chunk_id=deployment_guide_fix_1 score=3.3869 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:16] TRACE | [enriched-hybrid-llm]   BM25[6] idx=15 chunk_id=architecture_overview_fix_9 score=2.7935 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:16] TRACE | [enriched-hybrid-llm]   BM25[7] idx=3 chunk_id=api_reference_fix_3 score=2.5037 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:09:16] TRACE | [enriched-hybrid-llm]   BM25[8] idx=33 chunk_id=troubleshooting_guide_fix_5 score=2.1243 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:16] TRACE | [enriched-hybrid-llm]   BM25[9] idx=17 chunk_id=architecture_overview_fix_11 score=2.0190 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:16] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:16] TRACE | [enriched-hybrid-llm]   RRF[0] idx=23 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:09:16] TRACE | [enriched-hybrid-llm]   RRF[1] idx=6 total=0.2942 (sem_rank=4 comp=0.0214 + bm25_rank=1 comp=0.2727)
[15:09:16] TRACE | [enriched-hybrid-llm]   RRF[2] idx=22 total=0.2588 (sem_rank=24 comp=0.0088 + bm25_rank=2 comp=0.2500)
[15:09:16] TRACE | [enriched-hybrid-llm]   RRF[3] idx=19 total=0.2419 (sem_rank=17 comp=0.0111 + bm25_rank=3 comp=0.2308)
[15:09:16] TRACE | [enriched-hybrid-llm]   RRF[4] idx=16 total=0.2273 (sem_rank=13 comp=0.0130 + bm25_rank=4 comp=0.2143)
[15:09:16] TRACE | [enriched-hybrid-llm]   RRF[5] idx=20 total=0.2060 (sem_rank=40 comp=0.0060 + bm25_rank=5 comp=0.2000)
[15:09:16] TRACE | [enriched-hybrid-llm]   RRF[6] idx=15 total=0.2011 (sem_rank=12 comp=0.0136 + bm25_rank=6 comp=0.1875)
[15:09:16] TRACE | [enriched-hybrid-llm]   RRF[7] idx=3 total=0.1915 (sem_rank=10 comp=0.0150 + bm25_rank=7 comp=0.1765)
[15:09:16] TRACE | [enriched-hybrid-llm]   RRF[8] idx=38 total=0.1731 (sem_rank=3 comp=0.0231 + bm25_rank=10 comp=0.1500)
[15:09:16] TRACE | [enriched-hybrid-llm]   RRF[9] idx=33 total=0.1721 (sem_rank=45 comp=0.0055 + bm25_rank=8 comp=0.1667)
[15:09:16] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:16] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:09:16] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2942 sem_rank=4 bm25_rank=1 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:09:16] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.2588 sem_rank=24 bm25_rank=2 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:16] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.2419 sem_rank=17 bm25_rank=3 dominant=bm25 | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:09:16] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2273 sem_rank=13 bm25_rank=4 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:09:16] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:16] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:16] TRACE | Query: monitoring stack
[15:09:16] TRACE | Total key facts: 3
[15:09:16] TRACE | Found facts: 3/3
[15:09:16] TRACE |   FOUND[1] Prometheus
[15:09:16] TRACE |   FOUND[2] Grafana
[15:09:16] TRACE |   FOUND[3] Jaeger for distributed tracing
[15:09:16] TRACE | === END FACT COVERAGE ===
[15:09:16] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:16] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: I need to set up dashboards, what monitoring systems are available?
[15:09:16] DEBUG | [query-rewrite] Rewriting query: I need to set up dashboards, what monitoring systems are available?
[15:09:16] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:16] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=866 timeout=5s
[15:09:16] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:16] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:16] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:17] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.99s
[15:09:17] DEBUG | [anthropic] USAGE: input_tokens=200 output_tokens=11
[15:09:17] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=79
[15:09:17] DEBUG | [anthropic] RESPONSE: monitoring dashboard integration supported platforms supported systems overview
[15:09:17] DEBUG | [query-rewrite] SUCCESS in 0.994s: I need to set up dashboards, what monitoring systems are available? → monitoring dashboard integration supported platforms supported systems overview
[15:09:17] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: monitoring dashboard integration supported platforms supported systems overview (took 0.994s)
[15:09:17] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: monitoring dashboard integration supported platforms supported systems overview Grafana Jaeger Prometheus metrics observability tracing
[15:09:17] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:17] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:17] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:17] TRACE | [enriched-hybrid-llm]   SEM[0] idx=23 chunk_id=deployment_guide_fix_4 score=0.6528 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:17] TRACE | [enriched-hybrid-llm]   SEM[1] idx=3 chunk_id=api_reference_fix_3 score=0.5489 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:09:17] TRACE | [enriched-hybrid-llm]   SEM[2] idx=10 chunk_id=architecture_overview_fix_4 score=0.5473 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:17] TRACE | [enriched-hybrid-llm]   SEM[3] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.5432 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:17] TRACE | [enriched-hybrid-llm]   SEM[4] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.5386 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:09:17] TRACE | [enriched-hybrid-llm]   SEM[5] idx=8 chunk_id=architecture_overview_fix_2 score=0.5376 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:17] TRACE | [enriched-hybrid-llm]   SEM[6] idx=5 chunk_id=api_reference_fix_5 score=0.5326 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:09:17] TRACE | [enriched-hybrid-llm]   SEM[7] idx=50 chunk_id=user_guide_fix_10 score=0.5318 | - **Documentation**: https://docs.cloudflow.io - **Community Forum**: https://community.cloudflow.io...
[15:09:17] TRACE | [enriched-hybrid-llm]   SEM[8] idx=15 chunk_id=architecture_overview_fix_9 score=0.5277 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:17] TRACE | [enriched-hybrid-llm]   SEM[9] idx=0 chunk_id=api_reference_fix_0 score=0.5259 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:17] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:17] TRACE | [enriched-hybrid-llm]   BM25[0] idx=23 chunk_id=deployment_guide_fix_4 score=17.5665 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:17] TRACE | [enriched-hybrid-llm]   BM25[1] idx=6 chunk_id=architecture_overview_fix_0 score=11.6491 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:17] TRACE | [enriched-hybrid-llm]   BM25[2] idx=22 chunk_id=deployment_guide_fix_3 score=10.3606 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:17] TRACE | [enriched-hybrid-llm]   BM25[3] idx=5 chunk_id=api_reference_fix_5 score=8.4287 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:09:17] TRACE | [enriched-hybrid-llm]   BM25[4] idx=19 chunk_id=deployment_guide_fix_0 score=7.1776 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:17] TRACE | [enriched-hybrid-llm]   BM25[5] idx=42 chunk_id=user_guide_fix_2 score=5.6138 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:17] TRACE | [enriched-hybrid-llm]   BM25[6] idx=38 chunk_id=troubleshooting_guide_fix_10 score=4.9199 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:09:17] TRACE | [enriched-hybrid-llm]   BM25[7] idx=28 chunk_id=troubleshooting_guide_fix_0 score=3.6727 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:17] TRACE | [enriched-hybrid-llm]   BM25[8] idx=0 chunk_id=api_reference_fix_0 score=3.4114 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:17] TRACE | [enriched-hybrid-llm]   BM25[9] idx=20 chunk_id=deployment_guide_fix_1 score=3.3869 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:17] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:17] TRACE | [enriched-hybrid-llm]   RRF[0] idx=23 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:09:17] TRACE | [enriched-hybrid-llm]   RRF[1] idx=6 total=0.2870 (sem_rank=11 comp=0.0143 + bm25_rank=1 comp=0.2727)
[15:09:17] TRACE | [enriched-hybrid-llm]   RRF[2] idx=22 total=0.2581 (sem_rank=27 comp=0.0081 + bm25_rank=2 comp=0.2500)
[15:09:17] TRACE | [enriched-hybrid-llm]   RRF[3] idx=5 total=0.2495 (sem_rank=6 comp=0.0187 + bm25_rank=3 comp=0.2308)
[15:09:17] TRACE | [enriched-hybrid-llm]   RRF[4] idx=19 total=0.2268 (sem_rank=14 comp=0.0125 + bm25_rank=4 comp=0.2143)
[15:09:17] TRACE | [enriched-hybrid-llm]   RRF[5] idx=38 total=0.2089 (sem_rank=4 comp=0.0214 + bm25_rank=6 comp=0.1875)
[15:09:17] TRACE | [enriched-hybrid-llm]   RRF[6] idx=42 total=0.2057 (sem_rank=43 comp=0.0057 + bm25_rank=5 comp=0.2000)
[15:09:17] TRACE | [enriched-hybrid-llm]   RRF[7] idx=28 total=0.1995 (sem_rank=3 comp=0.0231 + bm25_rank=7 comp=0.1765)
[15:09:17] TRACE | [enriched-hybrid-llm]   RRF[8] idx=0 total=0.1825 (sem_rank=9 comp=0.0158 + bm25_rank=8 comp=0.1667)
[15:09:17] TRACE | [enriched-hybrid-llm]   RRF[9] idx=3 total=0.1701 (sem_rank=1 comp=0.0273 + bm25_rank=11 comp=0.1429)
[15:09:17] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:17] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:09:17] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2870 sem_rank=11 bm25_rank=1 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:09:17] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.2581 sem_rank=27 bm25_rank=2 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:17] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=api_reference_fix_5 doc_id=api_reference rrf_score=0.2495 sem_rank=6 bm25_rank=3 dominant=bm25 | enriched: Supported Events, Community Forum, Slack channels, Configure webhooks, Enterprise customers, Webhook Payload, dedicated Slack | API, Slack  **Supported Events:** - `workflow.started` - `workflow.compl...
[15:09:17] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.2268 sem_rank=14 bm25_rank=4 dominant=bm25 | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:09:17] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:17] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:17] TRACE | Query: I need to set up dashboards, what monitoring systems are available?
[15:09:17] TRACE | Total key facts: 3
[15:09:17] TRACE | Found facts: 3/3
[15:09:17] TRACE |   FOUND[1] Prometheus
[15:09:17] TRACE |   FOUND[2] Grafana
[15:09:17] TRACE |   FOUND[3] Jaeger for distributed tracing
[15:09:17] TRACE | === END FACT COVERAGE ===
[15:09:17] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:17] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why can't I see metrics in Datadog?
[15:09:17] DEBUG | [query-rewrite] Rewriting query: Why can't I see metrics in Datadog?
[15:09:17] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:17] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=834 timeout=5s
[15:09:17] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:17] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:17] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:18] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.99s
[15:09:18] DEBUG | [anthropic] USAGE: input_tokens=197 output_tokens=15
[15:09:18] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=85
[15:09:18] DEBUG | [anthropic] RESPONSE: datadog metrics visibility configuration troubleshooting monitoring agent integration
[15:09:18] DEBUG | [query-rewrite] SUCCESS in 0.987s: Why can't I see metrics in Datadog? → datadog metrics visibility configuration troubleshooting monitoring agent integration
[15:09:18] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: datadog metrics visibility configuration troubleshooting monitoring agent integration (took 0.987s)
[15:09:18] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: datadog metrics visibility configuration troubleshooting monitoring agent integration Grafana Jaeger Prometheus observability tracing
[15:09:18] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:18] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:18] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:18] TRACE | [enriched-hybrid-llm]   SEM[0] idx=23 chunk_id=deployment_guide_fix_4 score=0.6175 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:18] TRACE | [enriched-hybrid-llm]   SEM[1] idx=8 chunk_id=architecture_overview_fix_2 score=0.5504 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:18] TRACE | [enriched-hybrid-llm]   SEM[2] idx=38 chunk_id=troubleshooting_guide_fix_10 score=0.5369 | database nc -zv cloudflow-db.internal.company.com 5432 # Trace route traceroute api.cloudflow.io # C...
[15:09:18] TRACE | [enriched-hybrid-llm]   SEM[3] idx=18 chunk_id=architecture_overview_fix_12 score=0.5219 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:18] TRACE | [enriched-hybrid-llm]   SEM[4] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5218 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:18] TRACE | [enriched-hybrid-llm]   SEM[5] idx=15 chunk_id=architecture_overview_fix_9 score=0.5165 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:18] TRACE | [enriched-hybrid-llm]   SEM[6] idx=16 chunk_id=architecture_overview_fix_10 score=0.5143 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:18] TRACE | [enriched-hybrid-llm]   SEM[7] idx=3 chunk_id=api_reference_fix_3 score=0.5120 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:09:18] TRACE | [enriched-hybrid-llm]   SEM[8] idx=7 chunk_id=architecture_overview_fix_1 score=0.5115 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:18] TRACE | [enriched-hybrid-llm]   SEM[9] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.5100 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:18] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:18] TRACE | [enriched-hybrid-llm]   BM25[0] idx=23 chunk_id=deployment_guide_fix_4 score=14.1200 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:18] TRACE | [enriched-hybrid-llm]   BM25[1] idx=22 chunk_id=deployment_guide_fix_3 score=12.0285 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:18] TRACE | [enriched-hybrid-llm]   BM25[2] idx=6 chunk_id=architecture_overview_fix_0 score=7.8426 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:18] TRACE | [enriched-hybrid-llm]   BM25[3] idx=19 chunk_id=deployment_guide_fix_0 score=6.6406 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:18] TRACE | [enriched-hybrid-llm]   BM25[4] idx=20 chunk_id=deployment_guide_fix_1 score=5.8136 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:18] TRACE | [enriched-hybrid-llm]   BM25[5] idx=28 chunk_id=troubleshooting_guide_fix_0 score=4.6832 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:18] TRACE | [enriched-hybrid-llm]   BM25[6] idx=33 chunk_id=troubleshooting_guide_fix_5 score=4.6591 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:18] TRACE | [enriched-hybrid-llm]   BM25[7] idx=39 chunk_id=troubleshooting_guide_fix_11 score=2.5887 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:18] TRACE | [enriched-hybrid-llm]   BM25[8] idx=3 chunk_id=api_reference_fix_3 score=2.5037 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:09:18] TRACE | [enriched-hybrid-llm]   BM25[9] idx=32 chunk_id=troubleshooting_guide_fix_4 score=2.2236 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:18] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:18] TRACE | [enriched-hybrid-llm]   RRF[0] idx=23 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:09:18] TRACE | [enriched-hybrid-llm]   RRF[1] idx=22 total=0.2877 (sem_rank=10 comp=0.0150 + bm25_rank=1 comp=0.2727)
[15:09:18] TRACE | [enriched-hybrid-llm]   RRF[2] idx=6 total=0.2588 (sem_rank=24 comp=0.0088 + bm25_rank=2 comp=0.2500)
[15:09:18] TRACE | [enriched-hybrid-llm]   RRF[3] idx=19 total=0.2368 (sem_rank=40 comp=0.0060 + bm25_rank=3 comp=0.2308)
[15:09:18] TRACE | [enriched-hybrid-llm]   RRF[4] idx=20 total=0.2214 (sem_rank=32 comp=0.0071 + bm25_rank=4 comp=0.2143)
[15:09:18] TRACE | [enriched-hybrid-llm]   RRF[5] idx=28 total=0.2158 (sem_rank=9 comp=0.0158 + bm25_rank=5 comp=0.2000)
[15:09:18] TRACE | [enriched-hybrid-llm]   RRF[6] idx=39 total=0.1979 (sem_rank=4 comp=0.0214 + bm25_rank=7 comp=0.1765)
[15:09:18] TRACE | [enriched-hybrid-llm]   RRF[7] idx=33 total=0.1930 (sem_rank=45 comp=0.0055 + bm25_rank=6 comp=0.1875)
[15:09:18] TRACE | [enriched-hybrid-llm]   RRF[8] idx=3 total=0.1843 (sem_rank=7 comp=0.0176 + bm25_rank=8 comp=0.1667)
[15:09:18] TRACE | [enriched-hybrid-llm]   RRF[9] idx=32 total=0.1682 (sem_rank=19 comp=0.0103 + bm25_rank=9 comp=0.1579)
[15:09:18] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:18] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:09:18] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.2877 sem_rank=10 bm25_rank=1 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:18] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2588 sem_rank=24 bm25_rank=2 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:09:18] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.2368 sem_rank=40 bm25_rank=3 dominant=bm25 | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:09:18] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.2214 sem_rank=32 bm25_rank=4 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:09:18] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:18] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:18] TRACE | Query: Why can't I see metrics in Datadog?
[15:09:18] TRACE | Total key facts: 3
[15:09:18] TRACE | Found facts: 3/3
[15:09:18] TRACE |   FOUND[1] Prometheus
[15:09:18] TRACE |   FOUND[2] Grafana
[15:09:18] TRACE |   FOUND[3] Jaeger for distributed tracing
[15:09:18] TRACE | === END FACT COVERAGE ===
[15:09:18] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:18] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: How do I diagnose database connection pool exhaustion?
[15:09:18] DEBUG | [query-rewrite] Rewriting query: How do I diagnose database connection pool exhaustion?
[15:09:18] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:18] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=853 timeout=5s
[15:09:18] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:18] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:18] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:20] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.42s
[15:09:20] DEBUG | [anthropic] USAGE: input_tokens=197 output_tokens=19
[15:09:20] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=110
[15:09:20] DEBUG | [anthropic] RESPONSE: database connection pool monitoring troubleshooting performance metrics max connections exhaustion diagnostics
[15:09:20] DEBUG | [query-rewrite] SUCCESS in 1.422s: How do I diagnose database connection pool exhaustion? → database connection pool monitoring troubleshooting performance metrics max connections exhaustion diagnostics
[15:09:20] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: database connection pool monitoring troubleshooting performance metrics max connections exhaustion diagnostics (took 1.422s)
[15:09:20] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: database connection pool monitoring troubleshooting performance metrics max connections exhaustion diagnostics Grafana Jaeger Kafka PostgreSQL Prometheus Redis data layer observability storage tracing
[15:09:20] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:20] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:20] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:20] TRACE | [enriched-hybrid-llm]   SEM[0] idx=11 chunk_id=architecture_overview_fix_5 score=0.6491 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:20] TRACE | [enriched-hybrid-llm]   SEM[1] idx=23 chunk_id=deployment_guide_fix_4 score=0.6467 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:20] TRACE | [enriched-hybrid-llm]   SEM[2] idx=18 chunk_id=architecture_overview_fix_12 score=0.6396 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:20] TRACE | [enriched-hybrid-llm]   SEM[3] idx=16 chunk_id=architecture_overview_fix_10 score=0.6320 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:20] TRACE | [enriched-hybrid-llm]   SEM[4] idx=17 chunk_id=architecture_overview_fix_11 score=0.6304 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:20] TRACE | [enriched-hybrid-llm]   SEM[5] idx=8 chunk_id=architecture_overview_fix_2 score=0.6296 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:20] TRACE | [enriched-hybrid-llm]   SEM[6] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6263 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:20] TRACE | [enriched-hybrid-llm]   SEM[7] idx=9 chunk_id=architecture_overview_fix_3 score=0.6246 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:20] TRACE | [enriched-hybrid-llm]   SEM[8] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6221 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:20] TRACE | [enriched-hybrid-llm]   SEM[9] idx=12 chunk_id=architecture_overview_fix_6 score=0.6195 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:20] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:20] TRACE | [enriched-hybrid-llm]   BM25[0] idx=23 chunk_id=deployment_guide_fix_4 score=21.5812 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:20] TRACE | [enriched-hybrid-llm]   BM25[1] idx=31 chunk_id=troubleshooting_guide_fix_3 score=15.1822 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:20] TRACE | [enriched-hybrid-llm]   BM25[2] idx=6 chunk_id=architecture_overview_fix_0 score=14.3132 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:20] TRACE | [enriched-hybrid-llm]   BM25[3] idx=22 chunk_id=deployment_guide_fix_3 score=13.5819 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:20] TRACE | [enriched-hybrid-llm]   BM25[4] idx=11 chunk_id=architecture_overview_fix_5 score=12.9869 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:20] TRACE | [enriched-hybrid-llm]   BM25[5] idx=25 chunk_id=deployment_guide_fix_6 score=9.7424 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:20] TRACE | [enriched-hybrid-llm]   BM25[6] idx=20 chunk_id=deployment_guide_fix_1 score=9.1244 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:20] TRACE | [enriched-hybrid-llm]   BM25[7] idx=16 chunk_id=architecture_overview_fix_10 score=8.5445 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:20] TRACE | [enriched-hybrid-llm]   BM25[8] idx=18 chunk_id=architecture_overview_fix_12 score=8.4640 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:20] TRACE | [enriched-hybrid-llm]   BM25[9] idx=10 chunk_id=architecture_overview_fix_4 score=7.8788 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:20] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:20] TRACE | [enriched-hybrid-llm]   RRF[0] idx=23 total=0.3273 (sem_rank=1 comp=0.0273 + bm25_rank=0 comp=0.3000)
[15:09:20] TRACE | [enriched-hybrid-llm]   RRF[1] idx=31 total=0.2915 (sem_rank=6 comp=0.0187 + bm25_rank=1 comp=0.2727)
[15:09:20] TRACE | [enriched-hybrid-llm]   RRF[2] idx=6 total=0.2577 (sem_rank=29 comp=0.0077 + bm25_rank=2 comp=0.2500)
[15:09:20] TRACE | [enriched-hybrid-llm]   RRF[3] idx=11 total=0.2443 (sem_rank=0 comp=0.0300 + bm25_rank=4 comp=0.2143)
[15:09:20] TRACE | [enriched-hybrid-llm]   RRF[4] idx=22 total=0.2419 (sem_rank=17 comp=0.0111 + bm25_rank=3 comp=0.2308)
[15:09:20] TRACE | [enriched-hybrid-llm]   RRF[5] idx=25 total=0.2130 (sem_rank=13 comp=0.0130 + bm25_rank=5 comp=0.2000)
[15:09:20] TRACE | [enriched-hybrid-llm]   RRF[6] idx=16 total=0.1995 (sem_rank=3 comp=0.0231 + bm25_rank=7 comp=0.1765)
[15:09:20] TRACE | [enriched-hybrid-llm]   RRF[7] idx=20 total=0.1961 (sem_rank=25 comp=0.0086 + bm25_rank=6 comp=0.1875)
[15:09:20] TRACE | [enriched-hybrid-llm]   RRF[8] idx=18 total=0.1917 (sem_rank=2 comp=0.0250 + bm25_rank=8 comp=0.1667)
[15:09:20] TRACE | [enriched-hybrid-llm]   RRF[9] idx=10 total=0.1729 (sem_rank=10 comp=0.0150 + bm25_rank=9 comp=0.1579)
[15:09:20] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:20] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_4 doc_id=deployment_guide rrf_score=0.3273 sem_rank=1 bm25_rank=0 dominant=bm25 | enriched: TYPE cloudflow, Prometheus metrics, CloudFlow, exposes Prometheus, metrics, total Total, total | CPU, HELP cloudflow_worker_jobs_processed_total Total, HELP cloudflow_http_request_duration_seconds, hi...
[15:09:20] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.2915 sem_rank=6 bm25_rank=1 dominant=bm25 | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:09:20] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2577 sem_rank=29 bm25_rank=2 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:09:20] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.2443 sem_rank=0 bm25_rank=4 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:09:20] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.2419 sem_rank=17 bm25_rank=3 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:20] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:20] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:20] TRACE | Query: How do I diagnose database connection pool exhaustion?
[15:09:20] TRACE | Total key facts: 4
[15:09:20] TRACE | Found facts: 4/4
[15:09:20] TRACE |   FOUND[1] could not obtain connection from pool within 5000ms
[15:09:20] TRACE |   FOUND[2] connection pool exhausted (100/100 connections in use)
[15:09:20] TRACE |   FOUND[3] PgBouncer
[15:09:20] TRACE |   FOUND[4] max_db_connections = 100
[15:09:20] TRACE | === END FACT COVERAGE ===
[15:09:20] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:20] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What should I check when I run out of database connections?
[15:09:20] DEBUG | [query-rewrite] Rewriting query: What should I check when I run out of database connections?
[15:09:20] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:20] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=858 timeout=5s
[15:09:20] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:20] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:20] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:21] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.06s
[15:09:21] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=17
[15:09:21] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=89
[15:09:21] DEBUG | [anthropic] RESPONSE: database connection pool exhaustion troubleshooting maximum connections limit diagnostics
[15:09:21] DEBUG | [query-rewrite] SUCCESS in 1.064s: What should I check when I run out of database connections? → database connection pool exhaustion troubleshooting maximum connections limit diagnostics
[15:09:21] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: database connection pool exhaustion troubleshooting maximum connections limit diagnostics (took 1.064s)
[15:09:21] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: database connection pool exhaustion troubleshooting maximum connections limit diagnostics Kafka PostgreSQL Redis data layer storage
[15:09:21] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:21] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:21] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:21] TRACE | [enriched-hybrid-llm]   SEM[0] idx=11 chunk_id=architecture_overview_fix_5 score=0.6902 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:21] TRACE | [enriched-hybrid-llm]   SEM[1] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6896 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:21] TRACE | [enriched-hybrid-llm]   SEM[2] idx=18 chunk_id=architecture_overview_fix_12 score=0.6793 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:21] TRACE | [enriched-hybrid-llm]   SEM[3] idx=17 chunk_id=architecture_overview_fix_11 score=0.6622 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:21] TRACE | [enriched-hybrid-llm]   SEM[4] idx=9 chunk_id=architecture_overview_fix_3 score=0.6578 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:21] TRACE | [enriched-hybrid-llm]   SEM[5] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6524 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:21] TRACE | [enriched-hybrid-llm]   SEM[6] idx=16 chunk_id=architecture_overview_fix_10 score=0.6499 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:21] TRACE | [enriched-hybrid-llm]   SEM[7] idx=12 chunk_id=architecture_overview_fix_6 score=0.6448 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:21] TRACE | [enriched-hybrid-llm]   SEM[8] idx=8 chunk_id=architecture_overview_fix_2 score=0.6393 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:21] TRACE | [enriched-hybrid-llm]   SEM[9] idx=10 chunk_id=architecture_overview_fix_4 score=0.6286 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:21] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:21] TRACE | [enriched-hybrid-llm]   BM25[0] idx=31 chunk_id=troubleshooting_guide_fix_3 score=16.5293 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:21] TRACE | [enriched-hybrid-llm]   BM25[1] idx=32 chunk_id=troubleshooting_guide_fix_4 score=10.0333 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:21] TRACE | [enriched-hybrid-llm]   BM25[2] idx=11 chunk_id=architecture_overview_fix_5 score=10.0332 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:21] TRACE | [enriched-hybrid-llm]   BM25[3] idx=16 chunk_id=architecture_overview_fix_10 score=9.1968 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:21] TRACE | [enriched-hybrid-llm]   BM25[4] idx=10 chunk_id=architecture_overview_fix_4 score=7.8788 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:21] TRACE | [enriched-hybrid-llm]   BM25[5] idx=18 chunk_id=architecture_overview_fix_12 score=7.3771 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:21] TRACE | [enriched-hybrid-llm]   BM25[6] idx=14 chunk_id=architecture_overview_fix_8 score=7.3353 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:21] TRACE | [enriched-hybrid-llm]   BM25[7] idx=26 chunk_id=deployment_guide_fix_7 score=6.9008 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:21] TRACE | [enriched-hybrid-llm]   BM25[8] idx=6 chunk_id=architecture_overview_fix_0 score=6.4706 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:21] TRACE | [enriched-hybrid-llm]   BM25[9] idx=25 chunk_id=deployment_guide_fix_6 score=6.3480 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:21] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:21] TRACE | [enriched-hybrid-llm]   RRF[0] idx=31 total=0.3273 (sem_rank=1 comp=0.0273 + bm25_rank=0 comp=0.3000)
[15:09:21] TRACE | [enriched-hybrid-llm]   RRF[1] idx=32 total=0.2927 (sem_rank=5 comp=0.0200 + bm25_rank=1 comp=0.2727)
[15:09:21] TRACE | [enriched-hybrid-llm]   RRF[2] idx=11 total=0.2800 (sem_rank=0 comp=0.0300 + bm25_rank=2 comp=0.2500)
[15:09:21] TRACE | [enriched-hybrid-llm]   RRF[3] idx=16 total=0.2495 (sem_rank=6 comp=0.0187 + bm25_rank=3 comp=0.2308)
[15:09:21] TRACE | [enriched-hybrid-llm]   RRF[4] idx=10 total=0.2301 (sem_rank=9 comp=0.0158 + bm25_rank=4 comp=0.2143)
[15:09:21] TRACE | [enriched-hybrid-llm]   RRF[5] idx=18 total=0.2250 (sem_rank=2 comp=0.0250 + bm25_rank=5 comp=0.2000)
[15:09:21] TRACE | [enriched-hybrid-llm]   RRF[6] idx=14 total=0.2018 (sem_rank=11 comp=0.0143 + bm25_rank=6 comp=0.1875)
[15:09:21] TRACE | [enriched-hybrid-llm]   RRF[7] idx=26 total=0.1833 (sem_rank=34 comp=0.0068 + bm25_rank=7 comp=0.1765)
[15:09:21] TRACE | [enriched-hybrid-llm]   RRF[8] idx=6 total=0.1740 (sem_rank=31 comp=0.0073 + bm25_rank=8 comp=0.1667)
[15:09:21] TRACE | [enriched-hybrid-llm]   RRF[9] idx=25 total=0.1729 (sem_rank=10 comp=0.0150 + bm25_rank=9 comp=0.1579)
[15:09:21] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:21] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.3273 sem_rank=1 bm25_rank=0 dominant=bm25 | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:09:21] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.2927 sem_rank=5 bm25_rank=1 dominant=bm25 | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:09:21] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.2800 sem_rank=0 bm25_rank=2 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:09:21] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2495 sem_rank=6 bm25_rank=3 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:09:21] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_4 doc_id=architecture_overview rrf_score=0.2301 sem_rank=9 bm25_rank=4 dominant=bm25 | enriched: SMS Queue, Webhook Queue, Email Queue, Resource Allocation, Key Responsibilities, Compiled templates, AWS SNS | Consume, Handlebars, Kafka - Template, SMS, Redis  **Technology**: Node.js with worker p...
[15:09:21] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:21] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:21] TRACE | Query: What should I check when I run out of database connections?
[15:09:21] TRACE | Total key facts: 4
[15:09:21] TRACE | Found facts: 3/4
[15:09:21] TRACE |   FOUND[1] could not obtain connection from pool within 5000ms
[15:09:21] TRACE |   FOUND[2] connection pool exhausted (100/100 connections in use)
[15:09:21] TRACE |   FOUND[3] PgBouncer
[15:09:21] TRACE | Missed facts: 1/4
[15:09:21] TRACE |   MISSED[1] max_db_connections = 100
[15:09:21] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:09:21] TRACE | === END FACT COVERAGE ===
[15:09:21] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:21] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Getting 'could not obtain connection from pool' errors
[15:09:21] DEBUG | [query-rewrite] Rewriting query: Getting 'could not obtain connection from pool' errors
[15:09:21] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:21] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=853 timeout=5s
[15:09:21] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:21] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:21] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:22] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.88s
[15:09:22] DEBUG | [anthropic] USAGE: input_tokens=197 output_tokens=14
[15:09:22] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=75
[15:09:22] DEBUG | [anthropic] RESPONSE: database connection pool availability troubleshooting exhausted connections
[15:09:22] DEBUG | [query-rewrite] SUCCESS in 0.879s: Getting 'could not obtain connection from pool' errors → database connection pool availability troubleshooting exhausted connections
[15:09:22] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: database connection pool availability troubleshooting exhausted connections (took 0.879s)
[15:09:22] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: database connection pool availability troubleshooting exhausted connections Kafka PostgreSQL Redis data layer storage
[15:09:22] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:22] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:22] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:22] TRACE | [enriched-hybrid-llm]   SEM[0] idx=11 chunk_id=architecture_overview_fix_5 score=0.7044 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:22] TRACE | [enriched-hybrid-llm]   SEM[1] idx=9 chunk_id=architecture_overview_fix_3 score=0.6924 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:22] TRACE | [enriched-hybrid-llm]   SEM[2] idx=17 chunk_id=architecture_overview_fix_11 score=0.6916 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:22] TRACE | [enriched-hybrid-llm]   SEM[3] idx=18 chunk_id=architecture_overview_fix_12 score=0.6875 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:22] TRACE | [enriched-hybrid-llm]   SEM[4] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6717 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:22] TRACE | [enriched-hybrid-llm]   SEM[5] idx=12 chunk_id=architecture_overview_fix_6 score=0.6621 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:22] TRACE | [enriched-hybrid-llm]   SEM[6] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6589 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:22] TRACE | [enriched-hybrid-llm]   SEM[7] idx=25 chunk_id=deployment_guide_fix_6 score=0.6541 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:22] TRACE | [enriched-hybrid-llm]   SEM[8] idx=8 chunk_id=architecture_overview_fix_2 score=0.6534 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:22] TRACE | [enriched-hybrid-llm]   SEM[9] idx=14 chunk_id=architecture_overview_fix_8 score=0.6531 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:22] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:22] TRACE | [enriched-hybrid-llm]   BM25[0] idx=31 chunk_id=troubleshooting_guide_fix_3 score=12.7546 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:22] TRACE | [enriched-hybrid-llm]   BM25[1] idx=11 chunk_id=architecture_overview_fix_5 score=12.2812 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:22] TRACE | [enriched-hybrid-llm]   BM25[2] idx=26 chunk_id=deployment_guide_fix_7 score=9.6909 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:22] TRACE | [enriched-hybrid-llm]   BM25[3] idx=16 chunk_id=architecture_overview_fix_10 score=8.7521 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:22] TRACE | [enriched-hybrid-llm]   BM25[4] idx=6 chunk_id=architecture_overview_fix_0 score=8.6996 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:22] TRACE | [enriched-hybrid-llm]   BM25[5] idx=10 chunk_id=architecture_overview_fix_4 score=7.8788 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:22] TRACE | [enriched-hybrid-llm]   BM25[6] idx=18 chunk_id=architecture_overview_fix_12 score=7.3771 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:22] TRACE | [enriched-hybrid-llm]   BM25[7] idx=25 chunk_id=deployment_guide_fix_6 score=6.3480 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:22] TRACE | [enriched-hybrid-llm]   BM25[8] idx=23 chunk_id=deployment_guide_fix_4 score=6.0895 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:22] TRACE | [enriched-hybrid-llm]   BM25[9] idx=14 chunk_id=architecture_overview_fix_8 score=6.0494 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:22] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:22] TRACE | [enriched-hybrid-llm]   RRF[0] idx=31 total=0.3214 (sem_rank=4 comp=0.0214 + bm25_rank=0 comp=0.3000)
[15:09:22] TRACE | [enriched-hybrid-llm]   RRF[1] idx=11 total=0.3027 (sem_rank=0 comp=0.0300 + bm25_rank=1 comp=0.2727)
[15:09:22] TRACE | [enriched-hybrid-llm]   RRF[2] idx=26 total=0.2568 (sem_rank=34 comp=0.0068 + bm25_rank=2 comp=0.2500)
[15:09:22] TRACE | [enriched-hybrid-llm]   RRF[3] idx=16 total=0.2451 (sem_rank=11 comp=0.0143 + bm25_rank=3 comp=0.2308)
[15:09:22] TRACE | [enriched-hybrid-llm]   RRF[4] idx=6 total=0.2220 (sem_rank=29 comp=0.0077 + bm25_rank=4 comp=0.2143)
[15:09:22] TRACE | [enriched-hybrid-llm]   RRF[5] idx=10 total=0.2136 (sem_rank=12 comp=0.0136 + bm25_rank=5 comp=0.2000)
[15:09:22] TRACE | [enriched-hybrid-llm]   RRF[6] idx=18 total=0.2106 (sem_rank=3 comp=0.0231 + bm25_rank=6 comp=0.1875)
[15:09:22] TRACE | [enriched-hybrid-llm]   RRF[7] idx=25 total=0.1941 (sem_rank=7 comp=0.0176 + bm25_rank=7 comp=0.1765)
[15:09:22] TRACE | [enriched-hybrid-llm]   RRF[8] idx=23 total=0.1746 (sem_rank=28 comp=0.0079 + bm25_rank=8 comp=0.1667)
[15:09:22] TRACE | [enriched-hybrid-llm]   RRF[9] idx=14 total=0.1737 (sem_rank=9 comp=0.0158 + bm25_rank=9 comp=0.1579)
[15:09:22] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:22] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.3214 sem_rank=4 bm25_rank=0 dominant=bm25 | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:09:22] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.3027 sem_rank=0 bm25_rank=1 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:09:22] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_7 doc_id=deployment_guide rrf_score=0.2568 sem_rank=34 bm25_rank=2 dominant=bm25 | enriched: TCP port, SHOW POOLS, External Secrets, Secrets Operator, kubectl top, Egress ingress, bash kubectl | Install External Secrets Operator, EOF, Create SecretStore, external-secrets.io/v1beta1  podSelect...
[15:09:22] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2451 sem_rank=11 bm25_rank=3 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:09:22] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2220 sem_rank=29 bm25_rank=4 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:09:22] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:22] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:22] TRACE | Query: Getting 'could not obtain connection from pool' errors
[15:09:22] TRACE | Total key facts: 4
[15:09:22] TRACE | Found facts: 3/4
[15:09:22] TRACE |   FOUND[1] could not obtain connection from pool within 5000ms
[15:09:22] TRACE |   FOUND[2] connection pool exhausted (100/100 connections in use)
[15:09:22] TRACE |   FOUND[3] PgBouncer
[15:09:22] TRACE | Missed facts: 1/4
[15:09:22] TRACE |   MISSED[1] max_db_connections = 100
[15:09:22] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:09:22] TRACE | === END FACT COVERAGE ===
[15:09:22] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:22] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: connection pool full
[15:09:22] DEBUG | [query-rewrite] Rewriting query: connection pool full
[15:09:22] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:22] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=819 timeout=5s
[15:09:22] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:22] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:22] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:23] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.87s
[15:09:23] DEBUG | [anthropic] USAGE: input_tokens=189 output_tokens=11
[15:09:23] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=58
[15:09:23] DEBUG | [anthropic] RESPONSE: database connection pool maximum limit exhaustion handling
[15:09:23] DEBUG | [query-rewrite] SUCCESS in 0.870s: connection pool full → database connection pool maximum limit exhaustion handling
[15:09:23] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: database connection pool maximum limit exhaustion handling (took 0.870s)
[15:09:23] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: database connection pool maximum limit exhaustion handling Kafka PostgreSQL Redis data layer storage
[15:09:23] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:23] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:23] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:23] TRACE | [enriched-hybrid-llm]   SEM[0] idx=11 chunk_id=architecture_overview_fix_5 score=0.7160 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:23] TRACE | [enriched-hybrid-llm]   SEM[1] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.7041 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:23] TRACE | [enriched-hybrid-llm]   SEM[2] idx=9 chunk_id=architecture_overview_fix_3 score=0.6913 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:23] TRACE | [enriched-hybrid-llm]   SEM[3] idx=18 chunk_id=architecture_overview_fix_12 score=0.6897 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:23] TRACE | [enriched-hybrid-llm]   SEM[4] idx=12 chunk_id=architecture_overview_fix_6 score=0.6859 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:23] TRACE | [enriched-hybrid-llm]   SEM[5] idx=17 chunk_id=architecture_overview_fix_11 score=0.6794 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:23] TRACE | [enriched-hybrid-llm]   SEM[6] idx=16 chunk_id=architecture_overview_fix_10 score=0.6671 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:23] TRACE | [enriched-hybrid-llm]   SEM[7] idx=8 chunk_id=architecture_overview_fix_2 score=0.6598 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:23] TRACE | [enriched-hybrid-llm]   SEM[8] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6594 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:23] TRACE | [enriched-hybrid-llm]   SEM[9] idx=14 chunk_id=architecture_overview_fix_8 score=0.6559 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:23] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:23] TRACE | [enriched-hybrid-llm]   BM25[0] idx=31 chunk_id=troubleshooting_guide_fix_3 score=13.6703 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:23] TRACE | [enriched-hybrid-llm]   BM25[1] idx=11 chunk_id=architecture_overview_fix_5 score=8.6041 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:23] TRACE | [enriched-hybrid-llm]   BM25[2] idx=16 chunk_id=architecture_overview_fix_10 score=7.7951 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:23] TRACE | [enriched-hybrid-llm]   BM25[3] idx=18 chunk_id=architecture_overview_fix_12 score=7.3771 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:23] TRACE | [enriched-hybrid-llm]   BM25[4] idx=14 chunk_id=architecture_overview_fix_8 score=7.3353 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:23] TRACE | [enriched-hybrid-llm]   BM25[5] idx=6 chunk_id=architecture_overview_fix_0 score=6.4706 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:23] TRACE | [enriched-hybrid-llm]   BM25[6] idx=10 chunk_id=architecture_overview_fix_4 score=6.4249 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:23] TRACE | [enriched-hybrid-llm]   BM25[7] idx=32 chunk_id=troubleshooting_guide_fix_4 score=6.3961 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:23] TRACE | [enriched-hybrid-llm]   BM25[8] idx=7 chunk_id=architecture_overview_fix_1 score=6.1687 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:23] TRACE | [enriched-hybrid-llm]   BM25[9] idx=20 chunk_id=deployment_guide_fix_1 score=5.7375 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:23] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:23] TRACE | [enriched-hybrid-llm]   RRF[0] idx=31 total=0.3273 (sem_rank=1 comp=0.0273 + bm25_rank=0 comp=0.3000)
[15:09:23] TRACE | [enriched-hybrid-llm]   RRF[1] idx=11 total=0.3027 (sem_rank=0 comp=0.0300 + bm25_rank=1 comp=0.2727)
[15:09:23] TRACE | [enriched-hybrid-llm]   RRF[2] idx=16 total=0.2687 (sem_rank=6 comp=0.0187 + bm25_rank=2 comp=0.2500)
[15:09:23] TRACE | [enriched-hybrid-llm]   RRF[3] idx=18 total=0.2538 (sem_rank=3 comp=0.0231 + bm25_rank=3 comp=0.2308)
[15:09:23] TRACE | [enriched-hybrid-llm]   RRF[4] idx=14 total=0.2301 (sem_rank=9 comp=0.0158 + bm25_rank=4 comp=0.2143)
[15:09:23] TRACE | [enriched-hybrid-llm]   RRF[5] idx=6 total=0.2079 (sem_rank=28 comp=0.0079 + bm25_rank=5 comp=0.2000)
[15:09:23] TRACE | [enriched-hybrid-llm]   RRF[6] idx=10 total=0.2025 (sem_rank=10 comp=0.0150 + bm25_rank=6 comp=0.1875)
[15:09:23] TRACE | [enriched-hybrid-llm]   RRF[7] idx=32 total=0.1931 (sem_rank=8 comp=0.0167 + bm25_rank=7 comp=0.1765)
[15:09:23] TRACE | [enriched-hybrid-llm]   RRF[8] idx=7 total=0.1774 (sem_rank=18 comp=0.0107 + bm25_rank=8 comp=0.1667)
[15:09:23] TRACE | [enriched-hybrid-llm]   RRF[9] idx=20 total=0.1682 (sem_rank=19 comp=0.0103 + bm25_rank=9 comp=0.1579)
[15:09:23] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:23] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.3273 sem_rank=1 bm25_rank=0 dominant=bm25 | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:09:23] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.3027 sem_rank=0 bm25_rank=1 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:09:23] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2687 sem_rank=6 bm25_rank=2 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:09:23] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.2538 sem_rank=3 bm25_rank=3 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:09:23] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2301 sem_rank=9 bm25_rank=4 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:09:23] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:23] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:23] TRACE | Query: connection pool full
[15:09:23] TRACE | Total key facts: 4
[15:09:23] TRACE | Found facts: 3/4
[15:09:23] TRACE |   FOUND[1] could not obtain connection from pool within 5000ms
[15:09:23] TRACE |   FOUND[2] connection pool exhausted (100/100 connections in use)
[15:09:23] TRACE |   FOUND[3] PgBouncer
[15:09:23] TRACE | Missed facts: 1/4
[15:09:23] TRACE |   MISSED[1] max_db_connections = 100
[15:09:23] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:09:23] TRACE | === END FACT COVERAGE ===
[15:09:23] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:23] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: My app is failing with connection pool errors, how do I troubleshoot?
[15:09:23] DEBUG | [query-rewrite] Rewriting query: My app is failing with connection pool errors, how do I troubleshoot?
[15:09:23] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:23] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=868 timeout=5s
[15:09:23] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:23] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:23] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:24] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.05s
[15:09:24] DEBUG | [anthropic] USAGE: input_tokens=202 output_tokens=17
[15:09:24] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=101
[15:09:24] DEBUG | [anthropic] RESPONSE: database connection pool configuration troubleshooting maximum connections resource exhaustion errors
[15:09:24] DEBUG | [query-rewrite] SUCCESS in 1.047s: My app is failing with connection pool errors, how do I troubleshoot? → database connection pool configuration troubleshooting maximum connections resource exhaustion errors
[15:09:24] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: database connection pool configuration troubleshooting maximum connections resource exhaustion errors (took 1.047s)
[15:09:24] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: database connection pool configuration troubleshooting maximum connections resource exhaustion errors Kafka PostgreSQL Redis data layer storage
[15:09:24] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:24] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:24] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:24] TRACE | [enriched-hybrid-llm]   SEM[0] idx=11 chunk_id=architecture_overview_fix_5 score=0.7103 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:24] TRACE | [enriched-hybrid-llm]   SEM[1] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6999 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:24] TRACE | [enriched-hybrid-llm]   SEM[2] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6811 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:24] TRACE | [enriched-hybrid-llm]   SEM[3] idx=18 chunk_id=architecture_overview_fix_12 score=0.6802 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:24] TRACE | [enriched-hybrid-llm]   SEM[4] idx=9 chunk_id=architecture_overview_fix_3 score=0.6713 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:24] TRACE | [enriched-hybrid-llm]   SEM[5] idx=16 chunk_id=architecture_overview_fix_10 score=0.6700 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:24] TRACE | [enriched-hybrid-llm]   SEM[6] idx=17 chunk_id=architecture_overview_fix_11 score=0.6654 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:24] TRACE | [enriched-hybrid-llm]   SEM[7] idx=12 chunk_id=architecture_overview_fix_6 score=0.6566 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:24] TRACE | [enriched-hybrid-llm]   SEM[8] idx=8 chunk_id=architecture_overview_fix_2 score=0.6523 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:24] TRACE | [enriched-hybrid-llm]   SEM[9] idx=10 chunk_id=architecture_overview_fix_4 score=0.6362 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:24] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:24] TRACE | [enriched-hybrid-llm]   BM25[0] idx=31 chunk_id=troubleshooting_guide_fix_3 score=15.1822 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:24] TRACE | [enriched-hybrid-llm]   BM25[1] idx=16 chunk_id=architecture_overview_fix_10 score=11.6198 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:24] TRACE | [enriched-hybrid-llm]   BM25[2] idx=11 chunk_id=architecture_overview_fix_5 score=10.0332 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:24] TRACE | [enriched-hybrid-llm]   BM25[3] idx=32 chunk_id=troubleshooting_guide_fix_4 score=9.7268 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:24] TRACE | [enriched-hybrid-llm]   BM25[4] idx=20 chunk_id=deployment_guide_fix_1 score=9.4515 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:24] TRACE | [enriched-hybrid-llm]   BM25[5] idx=26 chunk_id=deployment_guide_fix_7 score=9.2603 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:24] TRACE | [enriched-hybrid-llm]   BM25[6] idx=10 chunk_id=architecture_overview_fix_4 score=9.2125 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:24] TRACE | [enriched-hybrid-llm]   BM25[7] idx=25 chunk_id=deployment_guide_fix_6 score=8.5572 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:24] TRACE | [enriched-hybrid-llm]   BM25[8] idx=18 chunk_id=architecture_overview_fix_12 score=7.3771 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:24] TRACE | [enriched-hybrid-llm]   BM25[9] idx=6 chunk_id=architecture_overview_fix_0 score=6.4706 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:24] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:24] TRACE | [enriched-hybrid-llm]   RRF[0] idx=31 total=0.3273 (sem_rank=1 comp=0.0273 + bm25_rank=0 comp=0.3000)
[15:09:24] TRACE | [enriched-hybrid-llm]   RRF[1] idx=16 total=0.2927 (sem_rank=5 comp=0.0200 + bm25_rank=1 comp=0.2727)
[15:09:24] TRACE | [enriched-hybrid-llm]   RRF[2] idx=11 total=0.2800 (sem_rank=0 comp=0.0300 + bm25_rank=2 comp=0.2500)
[15:09:24] TRACE | [enriched-hybrid-llm]   RRF[3] idx=32 total=0.2558 (sem_rank=2 comp=0.0250 + bm25_rank=3 comp=0.2308)
[15:09:24] TRACE | [enriched-hybrid-llm]   RRF[4] idx=20 total=0.2254 (sem_rank=17 comp=0.0111 + bm25_rank=4 comp=0.2143)
[15:09:24] TRACE | [enriched-hybrid-llm]   RRF[5] idx=26 total=0.2067 (sem_rank=35 comp=0.0067 + bm25_rank=5 comp=0.2000)
[15:09:24] TRACE | [enriched-hybrid-llm]   RRF[6] idx=10 total=0.2033 (sem_rank=9 comp=0.0158 + bm25_rank=6 comp=0.1875)
[15:09:24] TRACE | [enriched-hybrid-llm]   RRF[7] idx=25 total=0.1915 (sem_rank=10 comp=0.0150 + bm25_rank=7 comp=0.1765)
[15:09:24] TRACE | [enriched-hybrid-llm]   RRF[8] idx=18 total=0.1897 (sem_rank=3 comp=0.0231 + bm25_rank=8 comp=0.1667)
[15:09:24] TRACE | [enriched-hybrid-llm]   RRF[9] idx=6 total=0.1656 (sem_rank=29 comp=0.0077 + bm25_rank=9 comp=0.1579)
[15:09:24] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:24] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.3273 sem_rank=1 bm25_rank=0 dominant=bm25 | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:09:24] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2927 sem_rank=5 bm25_rank=1 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:09:24] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.2800 sem_rank=0 bm25_rank=2 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:09:24] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.2558 sem_rank=2 bm25_rank=3 dominant=bm25 | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:09:24] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.2254 sem_rank=17 bm25_rank=4 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:09:24] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:24] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:24] TRACE | Query: My app is failing with connection pool errors, how do I troubleshoot?
[15:09:24] TRACE | Total key facts: 4
[15:09:24] TRACE | Found facts: 3/4
[15:09:24] TRACE |   FOUND[1] could not obtain connection from pool within 5000ms
[15:09:24] TRACE |   FOUND[2] connection pool exhausted (100/100 connections in use)
[15:09:24] TRACE |   FOUND[3] PgBouncer
[15:09:24] TRACE | Missed facts: 1/4
[15:09:24] TRACE |   MISSED[1] max_db_connections = 100
[15:09:24] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:09:24] TRACE | === END FACT COVERAGE ===
[15:09:24] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:24] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why can't I get a database connection even though CPU is low?
[15:09:24] DEBUG | [query-rewrite] Rewriting query: Why can't I get a database connection even though CPU is low?
[15:09:24] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:24] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=860 timeout=5s
[15:09:24] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:24] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:24] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:25] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.01s
[15:09:25] DEBUG | [anthropic] USAGE: input_tokens=200 output_tokens=15
[15:09:25] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=80
[15:09:25] DEBUG | [anthropic] RESPONSE: database connection pool exhaustion troubleshooting connectivity resource limits
[15:09:25] DEBUG | [query-rewrite] SUCCESS in 1.013s: Why can't I get a database connection even though CPU is low? → database connection pool exhaustion troubleshooting connectivity resource limits
[15:09:25] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: database connection pool exhaustion troubleshooting connectivity resource limits (took 1.013s)
[15:09:25] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: database connection pool exhaustion troubleshooting connectivity resource limits Kafka PostgreSQL Redis data layer storage
[15:09:25] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:25] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:25] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:25] TRACE | [enriched-hybrid-llm]   SEM[0] idx=11 chunk_id=architecture_overview_fix_5 score=0.7036 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:25] TRACE | [enriched-hybrid-llm]   SEM[1] idx=18 chunk_id=architecture_overview_fix_12 score=0.6887 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:25] TRACE | [enriched-hybrid-llm]   SEM[2] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6873 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:25] TRACE | [enriched-hybrid-llm]   SEM[3] idx=9 chunk_id=architecture_overview_fix_3 score=0.6820 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:25] TRACE | [enriched-hybrid-llm]   SEM[4] idx=16 chunk_id=architecture_overview_fix_10 score=0.6707 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:25] TRACE | [enriched-hybrid-llm]   SEM[5] idx=17 chunk_id=architecture_overview_fix_11 score=0.6701 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:25] TRACE | [enriched-hybrid-llm]   SEM[6] idx=8 chunk_id=architecture_overview_fix_2 score=0.6596 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:25] TRACE | [enriched-hybrid-llm]   SEM[7] idx=12 chunk_id=architecture_overview_fix_6 score=0.6544 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:25] TRACE | [enriched-hybrid-llm]   SEM[8] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6525 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:25] TRACE | [enriched-hybrid-llm]   SEM[9] idx=10 chunk_id=architecture_overview_fix_4 score=0.6451 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:25] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:25] TRACE | [enriched-hybrid-llm]   BM25[0] idx=31 chunk_id=troubleshooting_guide_fix_3 score=12.3233 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:25] TRACE | [enriched-hybrid-llm]   BM25[1] idx=26 chunk_id=deployment_guide_fix_7 score=10.0036 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:25] TRACE | [enriched-hybrid-llm]   BM25[2] idx=11 chunk_id=architecture_overview_fix_5 score=8.6041 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:25] TRACE | [enriched-hybrid-llm]   BM25[3] idx=10 chunk_id=architecture_overview_fix_4 score=7.7586 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:25] TRACE | [enriched-hybrid-llm]   BM25[4] idx=16 chunk_id=architecture_overview_fix_10 score=7.5684 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:25] TRACE | [enriched-hybrid-llm]   BM25[5] idx=18 chunk_id=architecture_overview_fix_12 score=7.3771 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:25] TRACE | [enriched-hybrid-llm]   BM25[6] idx=25 chunk_id=deployment_guide_fix_6 score=7.1521 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:25] TRACE | [enriched-hybrid-llm]   BM25[7] idx=20 chunk_id=deployment_guide_fix_1 score=7.0249 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:25] TRACE | [enriched-hybrid-llm]   BM25[8] idx=32 chunk_id=troubleshooting_guide_fix_4 score=6.5513 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:25] TRACE | [enriched-hybrid-llm]   BM25[9] idx=6 chunk_id=architecture_overview_fix_0 score=6.4706 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:25] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:25] TRACE | [enriched-hybrid-llm]   RRF[0] idx=31 total=0.3250 (sem_rank=2 comp=0.0250 + bm25_rank=0 comp=0.3000)
[15:09:25] TRACE | [enriched-hybrid-llm]   RRF[1] idx=11 total=0.2800 (sem_rank=0 comp=0.0300 + bm25_rank=2 comp=0.2500)
[15:09:25] TRACE | [enriched-hybrid-llm]   RRF[2] idx=26 total=0.2795 (sem_rank=34 comp=0.0068 + bm25_rank=1 comp=0.2727)
[15:09:25] TRACE | [enriched-hybrid-llm]   RRF[3] idx=10 total=0.2466 (sem_rank=9 comp=0.0158 + bm25_rank=3 comp=0.2308)
[15:09:25] TRACE | [enriched-hybrid-llm]   RRF[4] idx=16 total=0.2357 (sem_rank=4 comp=0.0214 + bm25_rank=4 comp=0.2143)
[15:09:25] TRACE | [enriched-hybrid-llm]   RRF[5] idx=18 total=0.2273 (sem_rank=1 comp=0.0273 + bm25_rank=5 comp=0.2000)
[15:09:25] TRACE | [enriched-hybrid-llm]   RRF[6] idx=25 total=0.2025 (sem_rank=10 comp=0.0150 + bm25_rank=6 comp=0.1875)
[15:09:25] TRACE | [enriched-hybrid-llm]   RRF[7] idx=20 total=0.1880 (sem_rank=16 comp=0.0115 + bm25_rank=7 comp=0.1765)
[15:09:25] TRACE | [enriched-hybrid-llm]   RRF[8] idx=32 total=0.1833 (sem_rank=8 comp=0.0167 + bm25_rank=8 comp=0.1667)
[15:09:25] TRACE | [enriched-hybrid-llm]   RRF[9] idx=6 total=0.1665 (sem_rank=25 comp=0.0086 + bm25_rank=9 comp=0.1579)
[15:09:25] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:25] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.3250 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:09:25] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.2800 sem_rank=0 bm25_rank=2 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:09:25] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_7 doc_id=deployment_guide rrf_score=0.2795 sem_rank=34 bm25_rank=1 dominant=bm25 | enriched: TCP port, SHOW POOLS, External Secrets, Secrets Operator, kubectl top, Egress ingress, bash kubectl | Install External Secrets Operator, EOF, Create SecretStore, external-secrets.io/v1beta1  podSelect...
[15:09:25] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_4 doc_id=architecture_overview rrf_score=0.2466 sem_rank=9 bm25_rank=3 dominant=bm25 | enriched: SMS Queue, Webhook Queue, Email Queue, Resource Allocation, Key Responsibilities, Compiled templates, AWS SNS | Consume, Handlebars, Kafka - Template, SMS, Redis  **Technology**: Node.js with worker p...
[15:09:25] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.2357 sem_rank=4 bm25_rank=4 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:09:25] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:25] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:25] TRACE | Query: Why can't I get a database connection even though CPU is low?
[15:09:25] TRACE | Total key facts: 4
[15:09:25] TRACE | Found facts: 3/4
[15:09:25] TRACE |   FOUND[1] could not obtain connection from pool within 5000ms
[15:09:25] TRACE |   FOUND[2] connection pool exhausted (100/100 connections in use)
[15:09:25] TRACE |   FOUND[3] PgBouncer
[15:09:25] TRACE | Missed facts: 1/4
[15:09:25] TRACE |   MISSED[1] max_db_connections = 100
[15:09:25] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:09:25] TRACE | === END FACT COVERAGE ===
[15:09:25] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:25] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: How do I handle API authentication?
[15:09:25] DEBUG | [query-rewrite] Rewriting query: How do I handle API authentication?
[15:09:25] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:25] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=834 timeout=5s
[15:09:25] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:25] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:25] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:26] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.87s
[15:09:26] DEBUG | [anthropic] USAGE: input_tokens=193 output_tokens=12
[15:09:26] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=72
[15:09:26] DEBUG | [anthropic] RESPONSE: "API authentication methods authentication tokens credential management"
[15:09:26] DEBUG | [query-rewrite] SUCCESS in 0.873s: How do I handle API authentication? → "API authentication methods authentication tokens credential management"
[15:09:26] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: "API authentication methods authentication tokens credential management" (took 0.873s)
[15:09:26] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: "API authentication methods authentication tokens credential management" JWT claims exp expiration iat issued token
[15:09:26] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:26] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:26] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:26] TRACE | [enriched-hybrid-llm]   SEM[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6502 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:26] TRACE | [enriched-hybrid-llm]   SEM[1] idx=0 chunk_id=api_reference_fix_0 score=0.6246 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:26] TRACE | [enriched-hybrid-llm]   SEM[2] idx=7 chunk_id=architecture_overview_fix_1 score=0.6120 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:26] TRACE | [enriched-hybrid-llm]   SEM[3] idx=42 chunk_id=user_guide_fix_2 score=0.6080 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:26] TRACE | [enriched-hybrid-llm]   SEM[4] idx=12 chunk_id=architecture_overview_fix_6 score=0.6004 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:26] TRACE | [enriched-hybrid-llm]   SEM[5] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5870 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:26] TRACE | [enriched-hybrid-llm]   SEM[6] idx=14 chunk_id=architecture_overview_fix_8 score=0.5778 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:26] TRACE | [enriched-hybrid-llm]   SEM[7] idx=47 chunk_id=user_guide_fix_7 score=0.5742 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:26] TRACE | [enriched-hybrid-llm]   SEM[8] idx=15 chunk_id=architecture_overview_fix_9 score=0.5676 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:26] TRACE | [enriched-hybrid-llm]   SEM[9] idx=48 chunk_id=user_guide_fix_8 score=0.5541 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:26] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:26] TRACE | [enriched-hybrid-llm]   BM25[0] idx=0 chunk_id=api_reference_fix_0 score=17.6710 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:26] TRACE | [enriched-hybrid-llm]   BM25[1] idx=28 chunk_id=troubleshooting_guide_fix_0 score=16.3211 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:26] TRACE | [enriched-hybrid-llm]   BM25[2] idx=14 chunk_id=architecture_overview_fix_8 score=13.5166 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:26] TRACE | [enriched-hybrid-llm]   BM25[3] idx=7 chunk_id=architecture_overview_fix_1 score=10.9928 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:26] TRACE | [enriched-hybrid-llm]   BM25[4] idx=36 chunk_id=troubleshooting_guide_fix_8 score=6.4867 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:26] TRACE | [enriched-hybrid-llm]   BM25[5] idx=29 chunk_id=troubleshooting_guide_fix_1 score=5.3877 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:26] TRACE | [enriched-hybrid-llm]   BM25[6] idx=4 chunk_id=api_reference_fix_4 score=4.5734 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:26] TRACE | [enriched-hybrid-llm]   BM25[7] idx=12 chunk_id=architecture_overview_fix_6 score=4.1194 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:26] TRACE | [enriched-hybrid-llm]   BM25[8] idx=34 chunk_id=troubleshooting_guide_fix_6 score=3.5127 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:26] TRACE | [enriched-hybrid-llm]   BM25[9] idx=20 chunk_id=deployment_guide_fix_1 score=3.3359 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:26] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:26] TRACE | [enriched-hybrid-llm]   RRF[0] idx=0 total=0.3273 (sem_rank=1 comp=0.0273 + bm25_rank=0 comp=0.3000)
[15:09:26] TRACE | [enriched-hybrid-llm]   RRF[1] idx=28 total=0.3027 (sem_rank=0 comp=0.0300 + bm25_rank=1 comp=0.2727)
[15:09:26] TRACE | [enriched-hybrid-llm]   RRF[2] idx=14 total=0.2687 (sem_rank=6 comp=0.0187 + bm25_rank=2 comp=0.2500)
[15:09:26] TRACE | [enriched-hybrid-llm]   RRF[3] idx=7 total=0.2558 (sem_rank=2 comp=0.0250 + bm25_rank=3 comp=0.2308)
[15:09:26] TRACE | [enriched-hybrid-llm]   RRF[4] idx=36 total=0.2204 (sem_rank=39 comp=0.0061 + bm25_rank=4 comp=0.2143)
[15:09:26] TRACE | [enriched-hybrid-llm]   RRF[5] idx=29 total=0.2200 (sem_rank=5 comp=0.0200 + bm25_rank=5 comp=0.2000)
[15:09:26] TRACE | [enriched-hybrid-llm]   RRF[6] idx=4 total=0.1982 (sem_rank=18 comp=0.0107 + bm25_rank=6 comp=0.1875)
[15:09:26] TRACE | [enriched-hybrid-llm]   RRF[7] idx=12 total=0.1979 (sem_rank=4 comp=0.0214 + bm25_rank=7 comp=0.1765)
[15:09:26] TRACE | [enriched-hybrid-llm]   RRF[8] idx=34 total=0.1803 (sem_rank=12 comp=0.0136 + bm25_rank=8 comp=0.1667)
[15:09:26] TRACE | [enriched-hybrid-llm]   RRF[9] idx=20 total=0.1704 (sem_rank=14 comp=0.0125 + bm25_rank=9 comp=0.1579)
[15:09:26] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:26] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.3273 sem_rank=1 bm25_rank=0 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:09:26] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.3027 sem_rank=0 bm25_rank=1 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:09:26] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2687 sem_rank=6 bm25_rank=2 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:09:26] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.2558 sem_rank=2 bm25_rank=3 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:09:26] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.2204 sem_rank=39 bm25_rank=4 dominant=bm25 | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:09:26] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:26] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:26] TRACE | Query: How do I handle API authentication?
[15:09:26] TRACE | Total key facts: 3
[15:09:26] TRACE | Found facts: 3/3
[15:09:26] TRACE |   FOUND[1] OAuth 2.0
[15:09:26] TRACE |   FOUND[2] API keys
[15:09:26] TRACE |   FOUND[3] JWT tokens
[15:09:26] TRACE | === END FACT COVERAGE ===
[15:09:26] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:26] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What authentication methods are supported?
[15:09:26] DEBUG | [query-rewrite] Rewriting query: What authentication methods are supported?
[15:09:26] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:26] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=841 timeout=5s
[15:09:26] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:26] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:26] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:27] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.04s
[15:09:27] DEBUG | [anthropic] USAGE: input_tokens=192 output_tokens=8
[15:09:27] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=54
[15:09:27] DEBUG | [anthropic] RESPONSE: authentication methods supported integration protocols
[15:09:27] DEBUG | [query-rewrite] SUCCESS in 1.044s: What authentication methods are supported? → authentication methods supported integration protocols
[15:09:27] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: authentication methods supported integration protocols (took 1.044s)
[15:09:27] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:27] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:27] TRACE | [enriched-hybrid-llm]   SEM[0] idx=15 chunk_id=architecture_overview_fix_9 score=0.5726 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:27] TRACE | [enriched-hybrid-llm]   SEM[1] idx=7 chunk_id=architecture_overview_fix_1 score=0.5576 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:27] TRACE | [enriched-hybrid-llm]   SEM[2] idx=42 chunk_id=user_guide_fix_2 score=0.5368 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:27] TRACE | [enriched-hybrid-llm]   SEM[3] idx=47 chunk_id=user_guide_fix_7 score=0.5350 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:27] TRACE | [enriched-hybrid-llm]   SEM[4] idx=0 chunk_id=api_reference_fix_0 score=0.5344 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:27] TRACE | [enriched-hybrid-llm]   SEM[5] idx=5 chunk_id=api_reference_fix_5 score=0.5335 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:09:27] TRACE | [enriched-hybrid-llm]   SEM[6] idx=14 chunk_id=architecture_overview_fix_8 score=0.5282 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:27] TRACE | [enriched-hybrid-llm]   SEM[7] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.5201 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:27] TRACE | [enriched-hybrid-llm]   SEM[8] idx=6 chunk_id=architecture_overview_fix_0 score=0.5171 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:27] TRACE | [enriched-hybrid-llm]   SEM[9] idx=13 chunk_id=architecture_overview_fix_7 score=0.5112 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:09:27] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:27] TRACE | [enriched-hybrid-llm]   BM25[0] idx=0 chunk_id=api_reference_fix_0 score=5.2337 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:27] TRACE | [enriched-hybrid-llm]   BM25[1] idx=5 chunk_id=api_reference_fix_5 score=4.2144 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:09:27] TRACE | [enriched-hybrid-llm]   BM25[2] idx=41 chunk_id=user_guide_fix_1 score=2.9412 | Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...
[15:09:27] TRACE | [enriched-hybrid-llm]   BM25[3] idx=42 chunk_id=user_guide_fix_2 score=2.8069 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:27] TRACE | [enriched-hybrid-llm]   BM25[4] idx=36 chunk_id=troubleshooting_guide_fix_8 score=2.4084 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:27] TRACE | [enriched-hybrid-llm]   BM25[5] idx=7 chunk_id=architecture_overview_fix_1 score=2.0454 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:27] TRACE | [enriched-hybrid-llm]   BM25[6] idx=28 chunk_id=troubleshooting_guide_fix_0 score=1.5219 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:27] TRACE | [enriched-hybrid-llm]   BM25[7] idx=4 chunk_id=api_reference_fix_4 score=1.4343 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:27] TRACE | [enriched-hybrid-llm]   BM25[8] idx=13 chunk_id=architecture_overview_fix_7 score=1.4136 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:09:27] TRACE | [enriched-hybrid-llm]   BM25[9] idx=15 chunk_id=architecture_overview_fix_9 score=1.4018 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:27] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:27] TRACE | [enriched-hybrid-llm]   RRF[0] idx=0 total=0.0323 (sem_rank=4 comp=0.0156 + bm25_rank=0 comp=0.0167)
[15:09:27] TRACE | [enriched-hybrid-llm]   RRF[1] idx=42 total=0.0320 (sem_rank=2 comp=0.0161 + bm25_rank=3 comp=0.0159)
[15:09:27] TRACE | [enriched-hybrid-llm]   RRF[2] idx=7 total=0.0318 (sem_rank=1 comp=0.0164 + bm25_rank=5 comp=0.0154)
[15:09:27] TRACE | [enriched-hybrid-llm]   RRF[3] idx=5 total=0.0318 (sem_rank=5 comp=0.0154 + bm25_rank=1 comp=0.0164)
[15:09:27] TRACE | [enriched-hybrid-llm]   RRF[4] idx=15 total=0.0312 (sem_rank=0 comp=0.0167 + bm25_rank=9 comp=0.0145)
[15:09:27] TRACE | [enriched-hybrid-llm]   RRF[5] idx=28 total=0.0301 (sem_rank=7 comp=0.0149 + bm25_rank=6 comp=0.0152)
[15:09:27] TRACE | [enriched-hybrid-llm]   RRF[6] idx=14 total=0.0294 (sem_rank=6 comp=0.0152 + bm25_rank=10 comp=0.0143)
[15:09:27] TRACE | [enriched-hybrid-llm]   RRF[7] idx=13 total=0.0292 (sem_rank=9 comp=0.0145 + bm25_rank=8 comp=0.0147)
[15:09:27] TRACE | [enriched-hybrid-llm]   RRF[8] idx=20 total=0.0278 (sem_rank=12 comp=0.0139 + bm25_rank=12 comp=0.0139)
[15:09:27] TRACE | [enriched-hybrid-llm]   RRF[9] idx=47 total=0.0267 (sem_rank=3 comp=0.0159 + bm25_rank=32 comp=0.0109)
[15:09:27] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:27] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.0323 sem_rank=4 bm25_rank=0 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:09:27] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=user_guide_fix_2 doc_id=user_guide rrf_score=0.0320 sem_rank=2 bm25_rank=3 dominant=semantic | enriched: Basic Auth, Bearer Token, Important Notes, HTTP Requests, Query Parameters, API Key, Make HTTP | API, POST, Bearer Token, API Key  ### HTTP Requests Make HTTP requests to any API endpoint: **Configura...
[15:09:27] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.0318 sem_rank=1 bm25_rank=5 dominant=semantic | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:09:27] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=api_reference_fix_5 doc_id=api_reference rrf_score=0.0318 sem_rank=5 bm25_rank=1 dominant=bm25 | enriched: Supported Events, Community Forum, Slack channels, Configure webhooks, Enterprise customers, Webhook Payload, dedicated Slack | API, Slack  **Supported Events:** - `workflow.started` - `workflow.compl...
[15:09:27] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_9 doc_id=architecture_overview rrf_score=0.0312 sem_rank=0 bm25_rank=9 dominant=semantic | enriched: API Operations, API key, Redis SET, Redis DEL, API Gateway, Simple SELECT, Performance Characteristics | API, TTL - Encryption, Request, TTL, PostgreSQL  per API key (default: 1000 RPM) ### Secrets Ma...
[15:09:27] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:27] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:27] TRACE | Query: What authentication methods are supported?
[15:09:27] TRACE | Total key facts: 3
[15:09:27] TRACE | Found facts: 3/3
[15:09:27] TRACE |   FOUND[1] OAuth 2.0
[15:09:27] TRACE |   FOUND[2] API keys
[15:09:27] TRACE |   FOUND[3] JWT tokens
[15:09:27] TRACE | === END FACT COVERAGE ===
[15:09:27] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:27] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: My API requests are getting 401 errors
[15:09:27] DEBUG | [query-rewrite] Rewriting query: My API requests are getting 401 errors
[15:09:27] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:27] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=837 timeout=5s
[15:09:27] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:27] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:27] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:28] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.03s
[15:09:28] DEBUG | [anthropic] USAGE: input_tokens=195 output_tokens=16
[15:09:28] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=75
[15:09:28] DEBUG | [anthropic] RESPONSE: api authentication unauthorized 401 error troubleshooting token credentials
[15:09:28] DEBUG | [query-rewrite] SUCCESS in 1.029s: My API requests are getting 401 errors → api authentication unauthorized 401 error troubleshooting token credentials
[15:09:28] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: api authentication unauthorized 401 error troubleshooting token credentials (took 1.029s)
[15:09:28] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: api authentication unauthorized 401 error troubleshooting token credentials JWT claims exp expiration iat issued
[15:09:28] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:28] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:28] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:28] TRACE | [enriched-hybrid-llm]   SEM[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6658 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:28] TRACE | [enriched-hybrid-llm]   SEM[1] idx=0 chunk_id=api_reference_fix_0 score=0.6078 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:28] TRACE | [enriched-hybrid-llm]   SEM[2] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.6059 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:28] TRACE | [enriched-hybrid-llm]   SEM[3] idx=47 chunk_id=user_guide_fix_7 score=0.6018 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:28] TRACE | [enriched-hybrid-llm]   SEM[4] idx=42 chunk_id=user_guide_fix_2 score=0.5985 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:28] TRACE | [enriched-hybrid-llm]   SEM[5] idx=7 chunk_id=architecture_overview_fix_1 score=0.5850 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:28] TRACE | [enriched-hybrid-llm]   SEM[6] idx=4 chunk_id=api_reference_fix_4 score=0.5786 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:28] TRACE | [enriched-hybrid-llm]   SEM[7] idx=3 chunk_id=api_reference_fix_3 score=0.5615 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:09:28] TRACE | [enriched-hybrid-llm]   SEM[8] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.5508 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:28] TRACE | [enriched-hybrid-llm]   SEM[9] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.5446 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:09:28] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:28] TRACE | [enriched-hybrid-llm]   BM25[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=25.0420 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:28] TRACE | [enriched-hybrid-llm]   BM25[1] idx=4 chunk_id=api_reference_fix_4 score=12.8076 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:28] TRACE | [enriched-hybrid-llm]   BM25[2] idx=7 chunk_id=architecture_overview_fix_1 score=12.4551 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:28] TRACE | [enriched-hybrid-llm]   BM25[3] idx=14 chunk_id=architecture_overview_fix_8 score=11.0060 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:28] TRACE | [enriched-hybrid-llm]   BM25[4] idx=0 chunk_id=api_reference_fix_0 score=10.7686 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:28] TRACE | [enriched-hybrid-llm]   BM25[5] idx=29 chunk_id=troubleshooting_guide_fix_1 score=6.2064 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:28] TRACE | [enriched-hybrid-llm]   BM25[6] idx=15 chunk_id=architecture_overview_fix_9 score=5.5824 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:28] TRACE | [enriched-hybrid-llm]   BM25[7] idx=36 chunk_id=troubleshooting_guide_fix_8 score=5.2361 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:28] TRACE | [enriched-hybrid-llm]   BM25[8] idx=12 chunk_id=architecture_overview_fix_6 score=4.1194 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:28] TRACE | [enriched-hybrid-llm]   BM25[9] idx=20 chunk_id=deployment_guide_fix_1 score=4.0899 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:28] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:28] TRACE | [enriched-hybrid-llm]   RRF[0] idx=28 total=0.3300 (sem_rank=0 comp=0.0300 + bm25_rank=0 comp=0.3000)
[15:09:28] TRACE | [enriched-hybrid-llm]   RRF[1] idx=4 total=0.2915 (sem_rank=6 comp=0.0187 + bm25_rank=1 comp=0.2727)
[15:09:28] TRACE | [enriched-hybrid-llm]   RRF[2] idx=7 total=0.2700 (sem_rank=5 comp=0.0200 + bm25_rank=2 comp=0.2500)
[15:09:28] TRACE | [enriched-hybrid-llm]   RRF[3] idx=0 total=0.2416 (sem_rank=1 comp=0.0273 + bm25_rank=4 comp=0.2143)
[15:09:28] TRACE | [enriched-hybrid-llm]   RRF[4] idx=14 total=0.2391 (sem_rank=26 comp=0.0083 + bm25_rank=3 comp=0.2308)
[15:09:28] TRACE | [enriched-hybrid-llm]   RRF[5] idx=29 total=0.2250 (sem_rank=2 comp=0.0250 + bm25_rank=5 comp=0.2000)
[15:09:28] TRACE | [enriched-hybrid-llm]   RRF[6] idx=15 total=0.2005 (sem_rank=13 comp=0.0130 + bm25_rank=6 comp=0.1875)
[15:09:28] TRACE | [enriched-hybrid-llm]   RRF[7] idx=36 total=0.1829 (sem_rank=37 comp=0.0064 + bm25_rank=7 comp=0.1765)
[15:09:28] TRACE | [enriched-hybrid-llm]   RRF[8] idx=12 total=0.1792 (sem_rank=14 comp=0.0125 + bm25_rank=8 comp=0.1667)
[15:09:28] TRACE | [enriched-hybrid-llm]   RRF[9] idx=20 total=0.1722 (sem_rank=11 comp=0.0143 + bm25_rank=9 comp=0.1579)
[15:09:28] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:28] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.3300 sem_rank=0 bm25_rank=0 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:09:28] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=api_reference_fix_4 doc_id=api_reference rrf_score=0.2915 sem_rank=6 bm25_rank=1 dominant=bm25 | enriched: malformed JSON, requested resource, Bad Gateway, Error Codes, HTTP Status, Response Format, Server Error | Status Codes, Invalid, Description, Common Causes, Forbidden  ### Error Response Format ```js...
[15:09:28] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.2700 sem_rank=5 bm25_rank=2 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:09:28] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.2416 sem_rank=1 bm25_rank=4 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:09:28] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.2391 sem_rank=26 bm25_rank=3 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:09:28] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:28] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:28] TRACE | Query: My API requests are getting 401 errors
[15:09:28] TRACE | Total key facts: 3
[15:09:28] TRACE | Found facts: 3/3
[15:09:28] TRACE |   FOUND[1] OAuth 2.0
[15:09:28] TRACE |   FOUND[2] API keys
[15:09:28] TRACE |   FOUND[3] JWT tokens
[15:09:28] TRACE | === END FACT COVERAGE ===
[15:09:28] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:28] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: auth methods
[15:09:28] DEBUG | [query-rewrite] Rewriting query: auth methods
[15:09:28] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:28] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=811 timeout=5s
[15:09:28] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:28] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:28] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:29] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.91s
[15:09:29] DEBUG | [anthropic] USAGE: input_tokens=188 output_tokens=9
[15:09:29] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=58
[15:09:29] DEBUG | [anthropic] RESPONSE: authentication methods supported access control mechanisms
[15:09:29] DEBUG | [query-rewrite] SUCCESS in 0.910s: auth methods → authentication methods supported access control mechanisms
[15:09:29] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: authentication methods supported access control mechanisms (took 0.910s)
[15:09:29] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:29] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:29] TRACE | [enriched-hybrid-llm]   SEM[0] idx=15 chunk_id=architecture_overview_fix_9 score=0.5526 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:29] TRACE | [enriched-hybrid-llm]   SEM[1] idx=0 chunk_id=api_reference_fix_0 score=0.5512 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:29] TRACE | [enriched-hybrid-llm]   SEM[2] idx=42 chunk_id=user_guide_fix_2 score=0.5456 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:29] TRACE | [enriched-hybrid-llm]   SEM[3] idx=7 chunk_id=architecture_overview_fix_1 score=0.5307 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:29] TRACE | [enriched-hybrid-llm]   SEM[4] idx=47 chunk_id=user_guide_fix_7 score=0.5206 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:29] TRACE | [enriched-hybrid-llm]   SEM[5] idx=14 chunk_id=architecture_overview_fix_8 score=0.5202 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:29] TRACE | [enriched-hybrid-llm]   SEM[6] idx=48 chunk_id=user_guide_fix_8 score=0.5120 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:29] TRACE | [enriched-hybrid-llm]   SEM[7] idx=6 chunk_id=architecture_overview_fix_0 score=0.5084 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:29] TRACE | [enriched-hybrid-llm]   SEM[8] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.4917 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:29] TRACE | [enriched-hybrid-llm]   SEM[9] idx=26 chunk_id=deployment_guide_fix_7 score=0.4872 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:29] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:29] TRACE | [enriched-hybrid-llm]   BM25[0] idx=0 chunk_id=api_reference_fix_0 score=7.2644 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:29] TRACE | [enriched-hybrid-llm]   BM25[1] idx=41 chunk_id=user_guide_fix_1 score=7.1983 | Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...
[15:09:29] TRACE | [enriched-hybrid-llm]   BM25[2] idx=5 chunk_id=api_reference_fix_5 score=5.9914 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:09:29] TRACE | [enriched-hybrid-llm]   BM25[3] idx=7 chunk_id=architecture_overview_fix_1 score=5.7686 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:29] TRACE | [enriched-hybrid-llm]   BM25[4] idx=29 chunk_id=troubleshooting_guide_fix_1 score=4.4778 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:29] TRACE | [enriched-hybrid-llm]   BM25[5] idx=42 chunk_id=user_guide_fix_2 score=3.9905 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:29] TRACE | [enriched-hybrid-llm]   BM25[6] idx=15 chunk_id=architecture_overview_fix_9 score=3.4228 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:29] TRACE | [enriched-hybrid-llm]   BM25[7] idx=28 chunk_id=troubleshooting_guide_fix_0 score=3.3405 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:29] TRACE | [enriched-hybrid-llm]   BM25[8] idx=45 chunk_id=user_guide_fix_5 score=3.1905 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:29] TRACE | [enriched-hybrid-llm]   BM25[9] idx=48 chunk_id=user_guide_fix_8 score=2.8966 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:29] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:29] TRACE | [enriched-hybrid-llm]   RRF[0] idx=0 total=0.0331 (sem_rank=1 comp=0.0164 + bm25_rank=0 comp=0.0167)
[15:09:29] TRACE | [enriched-hybrid-llm]   RRF[1] idx=15 total=0.0318 (sem_rank=0 comp=0.0167 + bm25_rank=6 comp=0.0152)
[15:09:29] TRACE | [enriched-hybrid-llm]   RRF[2] idx=7 total=0.0317 (sem_rank=3 comp=0.0159 + bm25_rank=3 comp=0.0159)
[15:09:29] TRACE | [enriched-hybrid-llm]   RRF[3] idx=42 total=0.0315 (sem_rank=2 comp=0.0161 + bm25_rank=5 comp=0.0154)
[15:09:29] TRACE | [enriched-hybrid-llm]   RRF[4] idx=5 total=0.0304 (sem_rank=10 comp=0.0143 + bm25_rank=2 comp=0.0161)
[15:09:29] TRACE | [enriched-hybrid-llm]   RRF[5] idx=29 total=0.0303 (sem_rank=8 comp=0.0147 + bm25_rank=4 comp=0.0156)
[15:09:29] TRACE | [enriched-hybrid-llm]   RRF[6] idx=48 total=0.0296 (sem_rank=6 comp=0.0152 + bm25_rank=9 comp=0.0145)
[15:09:29] TRACE | [enriched-hybrid-llm]   RRF[7] idx=28 total=0.0290 (sem_rank=11 comp=0.0141 + bm25_rank=7 comp=0.0149)
[15:09:29] TRACE | [enriched-hybrid-llm]   RRF[8] idx=14 total=0.0287 (sem_rank=5 comp=0.0154 + bm25_rank=15 comp=0.0133)
[15:09:29] TRACE | [enriched-hybrid-llm]   RRF[9] idx=13 total=0.0270 (sem_rank=14 comp=0.0135 + bm25_rank=14 comp=0.0135)
[15:09:29] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:29] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.0331 sem_rank=1 bm25_rank=0 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:09:29] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_9 doc_id=architecture_overview rrf_score=0.0318 sem_rank=0 bm25_rank=6 dominant=semantic | enriched: API Operations, API key, Redis SET, Redis DEL, API Gateway, Simple SELECT, Performance Characteristics | API, TTL - Encryption, Request, TTL, PostgreSQL  per API key (default: 1000 RPM) ### Secrets Ma...
[15:09:29] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.0317 sem_rank=3 bm25_rank=3 dominant=balanced | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:09:29] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=user_guide_fix_2 doc_id=user_guide rrf_score=0.0315 sem_rank=2 bm25_rank=5 dominant=semantic | enriched: Basic Auth, Bearer Token, Important Notes, HTTP Requests, Query Parameters, API Key, Make HTTP | API, POST, Bearer Token, API Key  ### HTTP Requests Make HTTP requests to any API endpoint: **Configura...
[15:09:29] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=api_reference_fix_5 doc_id=api_reference rrf_score=0.0304 sem_rank=10 bm25_rank=2 dominant=bm25 | enriched: Supported Events, Community Forum, Slack channels, Configure webhooks, Enterprise customers, Webhook Payload, dedicated Slack | API, Slack  **Supported Events:** - `workflow.started` - `workflow.compl...
[15:09:29] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:29] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:29] TRACE | Query: auth methods
[15:09:29] TRACE | Total key facts: 3
[15:09:29] TRACE | Found facts: 3/3
[15:09:29] TRACE |   FOUND[1] OAuth 2.0
[15:09:29] TRACE |   FOUND[2] API keys
[15:09:29] TRACE |   FOUND[3] JWT tokens
[15:09:29] TRACE | === END FACT COVERAGE ===
[15:09:29] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:29] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: I'm integrating with CloudFlow API, what authentication options do I have?
[15:09:29] DEBUG | [query-rewrite] Rewriting query: I'm integrating with CloudFlow API, what authentication options do I have?
[15:09:29] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:29] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=873 timeout=5s
[15:09:29] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:29] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:29] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:30] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.94s
[15:09:30] DEBUG | [anthropic] USAGE: input_tokens=202 output_tokens=12
[15:09:30] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=79
[15:09:30] DEBUG | [anthropic] RESPONSE: cloudflow api authentication methods access credentials authorization mechanism
[15:09:30] DEBUG | [query-rewrite] SUCCESS in 0.937s: I'm integrating with CloudFlow API, what authentication options do I have? → cloudflow api authentication methods access credentials authorization mechanism
[15:09:30] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: cloudflow api authentication methods access credentials authorization mechanism (took 0.937s)
[15:09:30] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:30] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:30] TRACE | [enriched-hybrid-llm]   SEM[0] idx=0 chunk_id=api_reference_fix_0 score=0.7640 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:30] TRACE | [enriched-hybrid-llm]   SEM[1] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6477 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:30] TRACE | [enriched-hybrid-llm]   SEM[2] idx=1 chunk_id=api_reference_fix_1 score=0.6196 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:09:30] TRACE | [enriched-hybrid-llm]   SEM[3] idx=25 chunk_id=deployment_guide_fix_6 score=0.6118 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:30] TRACE | [enriched-hybrid-llm]   SEM[4] idx=6 chunk_id=architecture_overview_fix_0 score=0.6031 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:30] TRACE | [enriched-hybrid-llm]   SEM[5] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6002 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:30] TRACE | [enriched-hybrid-llm]   SEM[6] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.5986 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:30] TRACE | [enriched-hybrid-llm]   SEM[7] idx=40 chunk_id=user_guide_fix_0 score=0.5975 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:30] TRACE | [enriched-hybrid-llm]   SEM[8] idx=20 chunk_id=deployment_guide_fix_1 score=0.5950 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:30] TRACE | [enriched-hybrid-llm]   SEM[9] idx=5 chunk_id=api_reference_fix_5 score=0.5921 | **Supported Events:** - `workflow.started` - `workflow.completed` - `workflow.failed` - `pipeline.co...
[15:09:30] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:30] TRACE | [enriched-hybrid-llm]   BM25[0] idx=0 chunk_id=api_reference_fix_0 score=14.3063 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:30] TRACE | [enriched-hybrid-llm]   BM25[1] idx=28 chunk_id=troubleshooting_guide_fix_0 score=11.9664 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:30] TRACE | [enriched-hybrid-llm]   BM25[2] idx=7 chunk_id=architecture_overview_fix_1 score=9.4847 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:30] TRACE | [enriched-hybrid-llm]   BM25[3] idx=15 chunk_id=architecture_overview_fix_9 score=7.2015 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:30] TRACE | [enriched-hybrid-llm]   BM25[4] idx=41 chunk_id=user_guide_fix_1 score=6.3047 | Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...
[15:09:30] TRACE | [enriched-hybrid-llm]   BM25[5] idx=4 chunk_id=api_reference_fix_4 score=5.5756 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:30] TRACE | [enriched-hybrid-llm]   BM25[6] idx=36 chunk_id=troubleshooting_guide_fix_8 score=5.0499 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:30] TRACE | [enriched-hybrid-llm]   BM25[7] idx=29 chunk_id=troubleshooting_guide_fix_1 score=4.9347 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:30] TRACE | [enriched-hybrid-llm]   BM25[8] idx=19 chunk_id=deployment_guide_fix_0 score=4.8149 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:30] TRACE | [enriched-hybrid-llm]   BM25[9] idx=14 chunk_id=architecture_overview_fix_8 score=4.7027 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:30] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:30] TRACE | [enriched-hybrid-llm]   RRF[0] idx=0 total=0.0333 (sem_rank=0 comp=0.0167 + bm25_rank=0 comp=0.0167)
[15:09:30] TRACE | [enriched-hybrid-llm]   RRF[1] idx=28 total=0.0328 (sem_rank=1 comp=0.0164 + bm25_rank=1 comp=0.0164)
[15:09:30] TRACE | [enriched-hybrid-llm]   RRF[2] idx=36 total=0.0292 (sem_rank=11 comp=0.0141 + bm25_rank=6 comp=0.0152)
[15:09:30] TRACE | [enriched-hybrid-llm]   RRF[3] idx=30 total=0.0289 (sem_rank=6 comp=0.0152 + bm25_rank=13 comp=0.0137)
[15:09:30] TRACE | [enriched-hybrid-llm]   RRF[4] idx=1 total=0.0288 (sem_rank=2 comp=0.0161 + bm25_rank=19 comp=0.0127)
[15:09:30] TRACE | [enriched-hybrid-llm]   RRF[5] idx=6 total=0.0284 (sem_rank=4 comp=0.0156 + bm25_rank=18 comp=0.0128)
[15:09:30] TRACE | [enriched-hybrid-llm]   RRF[6] idx=15 total=0.0282 (sem_rank=21 comp=0.0123 + bm25_rank=3 comp=0.0159)
[15:09:30] TRACE | [enriched-hybrid-llm]   RRF[7] idx=29 total=0.0281 (sem_rank=16 comp=0.0132 + bm25_rank=7 comp=0.0149)
[15:09:30] TRACE | [enriched-hybrid-llm]   RRF[8] idx=25 total=0.0281 (sem_rank=3 comp=0.0159 + bm25_rank=22 comp=0.0122)
[15:09:30] TRACE | [enriched-hybrid-llm]   RRF[9] idx=7 total=0.0274 (sem_rank=29 comp=0.0112 + bm25_rank=2 comp=0.0161)
[15:09:30] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:30] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.0333 sem_rank=0 bm25_rank=0 dominant=balanced | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:09:30] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.0328 sem_rank=1 bm25_rank=1 dominant=balanced | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:09:30] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.0292 sem_rank=11 bm25_rank=6 dominant=bm25 | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:09:30] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_2 doc_id=troubleshooting_guide rrf_score=0.0289 sem_rank=6 bm25_rank=13 dominant=semantic | enriched: Execution Plans, Query Execution, Review Query, Memory Leaks, High API, Breakdown Analysis, Plans | API  Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --r...
[15:09:30] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0288 sem_rank=2 bm25_rank=19 dominant=semantic | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:09:30] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:30] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:30] TRACE | Query: I'm integrating with CloudFlow API, what authentication options do I have?
[15:09:30] TRACE | Total key facts: 3
[15:09:30] TRACE | Found facts: 3/3
[15:09:30] TRACE |   FOUND[1] OAuth 2.0
[15:09:30] TRACE |   FOUND[2] API keys
[15:09:30] TRACE |   FOUND[3] JWT tokens
[15:09:30] TRACE | === END FACT COVERAGE ===
[15:09:30] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:30] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why isn't basic auth working?
[15:09:30] DEBUG | [query-rewrite] Rewriting query: Why isn't basic auth working?
[15:09:30] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:30] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=828 timeout=5s
[15:09:30] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:30] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:30] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:31] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.07s
[15:09:31] DEBUG | [anthropic] USAGE: input_tokens=193 output_tokens=11
[15:09:31] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=64
[15:09:31] DEBUG | [anthropic] RESPONSE: basic authentication authorization configuration troubleshooting
[15:09:31] DEBUG | [query-rewrite] SUCCESS in 1.066s: Why isn't basic auth working? → basic authentication authorization configuration troubleshooting
[15:09:31] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: basic authentication authorization configuration troubleshooting (took 1.066s)
[15:09:31] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:31] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:31] TRACE | [enriched-hybrid-llm]   SEM[0] idx=42 chunk_id=user_guide_fix_2 score=0.6170 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:31] TRACE | [enriched-hybrid-llm]   SEM[1] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.6085 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:31] TRACE | [enriched-hybrid-llm]   SEM[2] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.5996 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:31] TRACE | [enriched-hybrid-llm]   SEM[3] idx=0 chunk_id=api_reference_fix_0 score=0.5495 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:31] TRACE | [enriched-hybrid-llm]   SEM[4] idx=7 chunk_id=architecture_overview_fix_1 score=0.5411 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:31] TRACE | [enriched-hybrid-llm]   SEM[5] idx=47 chunk_id=user_guide_fix_7 score=0.5384 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:31] TRACE | [enriched-hybrid-llm]   SEM[6] idx=20 chunk_id=deployment_guide_fix_1 score=0.5219 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:31] TRACE | [enriched-hybrid-llm]   SEM[7] idx=4 chunk_id=api_reference_fix_4 score=0.5214 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:31] TRACE | [enriched-hybrid-llm]   SEM[8] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.5144 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:31] TRACE | [enriched-hybrid-llm]   SEM[9] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5085 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:31] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:31] TRACE | [enriched-hybrid-llm]   BM25[0] idx=28 chunk_id=troubleshooting_guide_fix_0 score=8.3307 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:31] TRACE | [enriched-hybrid-llm]   BM25[1] idx=0 chunk_id=api_reference_fix_0 score=6.2180 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:31] TRACE | [enriched-hybrid-llm]   BM25[2] idx=42 chunk_id=user_guide_fix_2 score=4.8050 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:31] TRACE | [enriched-hybrid-llm]   BM25[3] idx=7 chunk_id=architecture_overview_fix_1 score=4.2583 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:31] TRACE | [enriched-hybrid-llm]   BM25[4] idx=36 chunk_id=troubleshooting_guide_fix_8 score=4.0783 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:31] TRACE | [enriched-hybrid-llm]   BM25[5] idx=14 chunk_id=architecture_overview_fix_8 score=3.6067 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:31] TRACE | [enriched-hybrid-llm]   BM25[6] idx=39 chunk_id=troubleshooting_guide_fix_11 score=2.5887 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:31] TRACE | [enriched-hybrid-llm]   BM25[7] idx=33 chunk_id=troubleshooting_guide_fix_5 score=2.5348 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:31] TRACE | [enriched-hybrid-llm]   BM25[8] idx=20 chunk_id=deployment_guide_fix_1 score=2.4267 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:31] TRACE | [enriched-hybrid-llm]   BM25[9] idx=32 chunk_id=troubleshooting_guide_fix_4 score=2.2236 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:31] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:31] TRACE | [enriched-hybrid-llm]   RRF[0] idx=42 total=0.0328 (sem_rank=0 comp=0.0167 + bm25_rank=2 comp=0.0161)
[15:09:31] TRACE | [enriched-hybrid-llm]   RRF[1] idx=28 total=0.0328 (sem_rank=2 comp=0.0161 + bm25_rank=0 comp=0.0167)
[15:09:31] TRACE | [enriched-hybrid-llm]   RRF[2] idx=0 total=0.0323 (sem_rank=3 comp=0.0159 + bm25_rank=1 comp=0.0164)
[15:09:31] TRACE | [enriched-hybrid-llm]   RRF[3] idx=7 total=0.0315 (sem_rank=4 comp=0.0156 + bm25_rank=3 comp=0.0159)
[15:09:31] TRACE | [enriched-hybrid-llm]   RRF[4] idx=20 total=0.0299 (sem_rank=6 comp=0.0152 + bm25_rank=8 comp=0.0147)
[15:09:31] TRACE | [enriched-hybrid-llm]   RRF[5] idx=39 total=0.0296 (sem_rank=9 comp=0.0145 + bm25_rank=6 comp=0.0152)
[15:09:31] TRACE | [enriched-hybrid-llm]   RRF[6] idx=4 total=0.0283 (sem_rank=7 comp=0.0149 + bm25_rank=15 comp=0.0133)
[15:09:31] TRACE | [enriched-hybrid-llm]   RRF[7] idx=32 total=0.0280 (sem_rank=14 comp=0.0135 + bm25_rank=9 comp=0.0145)
[15:09:31] TRACE | [enriched-hybrid-llm]   RRF[8] idx=26 total=0.0273 (sem_rank=17 comp=0.0130 + bm25_rank=10 comp=0.0143)
[15:09:31] TRACE | [enriched-hybrid-llm]   RRF[9] idx=21 total=0.0272 (sem_rank=16 comp=0.0132 + bm25_rank=11 comp=0.0141)
[15:09:31] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:31] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=user_guide_fix_2 doc_id=user_guide rrf_score=0.0328 sem_rank=0 bm25_rank=2 dominant=semantic | enriched: Basic Auth, Bearer Token, Important Notes, HTTP Requests, Query Parameters, API Key, Make HTTP | API, POST, Bearer Token, API Key  ### HTTP Requests Make HTTP requests to any API endpoint: **Configura...
[15:09:31] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_0 doc_id=troubleshooting_guide rrf_score=0.0328 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: Support Teams, Platform Engineers, Version, January, Audience, Updated, Engineers | DevOps, Support Teams, Contents 1, Quick Diagnostic, Invalid JWT Signature  # CloudFlow Platform Troubleshooting Gui...
[15:09:31] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.0323 sem_rank=3 bm25_rank=1 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:09:31] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.0315 sem_rank=4 bm25_rank=3 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:09:31] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.0299 sem_rank=6 bm25_rank=8 dominant=semantic | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:09:31] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:31] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:31] TRACE | Query: Why isn't basic auth working?
[15:09:31] TRACE | Total key facts: 3
[15:09:31] TRACE | Found facts: 3/3
[15:09:31] TRACE |   FOUND[1] OAuth 2.0
[15:09:31] TRACE |   FOUND[2] API keys
[15:09:31] TRACE |   FOUND[3] JWT tokens
[15:09:31] TRACE | === END FACT COVERAGE ===
[15:09:31] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:31] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What is PgBouncer and why is it used in CloudFlow?
[15:09:31] DEBUG | [query-rewrite] Rewriting query: What is PgBouncer and why is it used in CloudFlow?
[15:09:31] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:31] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=849 timeout=5s
[15:09:31] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:31] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:31] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:32] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.96s
[15:09:32] DEBUG | [anthropic] USAGE: input_tokens=202 output_tokens=12
[15:09:32] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=72
[15:09:32] DEBUG | [anthropic] RESPONSE: postgresql connection pooling cloudflow performance scaling architecture
[15:09:32] DEBUG | [query-rewrite] SUCCESS in 0.956s: What is PgBouncer and why is it used in CloudFlow? → postgresql connection pooling cloudflow performance scaling architecture
[15:09:32] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: postgresql connection pooling cloudflow performance scaling architecture (took 0.956s)
[15:09:32] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:32] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[0] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.7714 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[1] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.7383 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[2] idx=6 chunk_id=architecture_overview_fix_0 score=0.7362 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[3] idx=25 chunk_id=deployment_guide_fix_6 score=0.7288 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[4] idx=22 chunk_id=deployment_guide_fix_3 score=0.7285 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[5] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.7260 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[6] idx=8 chunk_id=architecture_overview_fix_2 score=0.6856 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[7] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6800 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[8] idx=16 chunk_id=architecture_overview_fix_10 score=0.6640 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[9] idx=19 chunk_id=deployment_guide_fix_0 score=0.6558 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:32] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[0] idx=25 chunk_id=deployment_guide_fix_6 score=11.2210 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[1] idx=32 chunk_id=troubleshooting_guide_fix_4 score=7.8931 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[2] idx=6 chunk_id=architecture_overview_fix_0 score=7.7343 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[3] idx=22 chunk_id=deployment_guide_fix_3 score=5.5117 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[4] idx=15 chunk_id=architecture_overview_fix_9 score=4.8348 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[5] idx=19 chunk_id=deployment_guide_fix_0 score=4.3800 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[6] idx=23 chunk_id=deployment_guide_fix_4 score=4.3337 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[7] idx=9 chunk_id=architecture_overview_fix_3 score=4.1939 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[8] idx=11 chunk_id=architecture_overview_fix_5 score=4.0382 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[9] idx=31 chunk_id=troubleshooting_guide_fix_3 score=3.7506 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:32] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[0] idx=32 total=0.0331 (sem_rank=0 comp=0.0167 + bm25_rank=1 comp=0.0164)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[1] idx=25 total=0.0325 (sem_rank=3 comp=0.0159 + bm25_rank=0 comp=0.0167)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[2] idx=6 total=0.0323 (sem_rank=2 comp=0.0161 + bm25_rank=2 comp=0.0161)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[3] idx=22 total=0.0315 (sem_rank=4 comp=0.0156 + bm25_rank=3 comp=0.0159)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[4] idx=31 total=0.0299 (sem_rank=5 comp=0.0154 + bm25_rank=9 comp=0.0145)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[5] idx=19 total=0.0299 (sem_rank=9 comp=0.0145 + bm25_rank=5 comp=0.0154)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[6] idx=23 total=0.0292 (sem_rank=11 comp=0.0141 + bm25_rank=6 comp=0.0152)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[7] idx=33 total=0.0288 (sem_rank=7 comp=0.0149 + bm25_rank=12 comp=0.0139)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[8] idx=11 total=0.0286 (sem_rank=12 comp=0.0139 + bm25_rank=8 comp=0.0147)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[9] idx=9 total=0.0281 (sem_rank=16 comp=0.0132 + bm25_rank=7 comp=0.0149)
[15:09:32] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:32] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.0331 sem_rank=0 bm25_rank=1 dominant=semantic | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:09:32] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0325 sem_rank=3 bm25_rank=0 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:09:32] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.0323 sem_rank=2 bm25_rank=2 dominant=balanced | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:09:32] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.0315 sem_rank=4 bm25_rank=3 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:32] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.0299 sem_rank=5 bm25_rank=9 dominant=semantic | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:09:32] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:32] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:32] TRACE | Query: What is PgBouncer and why is it used in CloudFlow?
[15:09:32] TRACE | Total key facts: 5
[15:09:32] TRACE | Found facts: 5/5
[15:09:32] TRACE |   FOUND[1] PgBouncer
[15:09:32] TRACE |   FOUND[2] connection pooling
[15:09:32] TRACE |   FOUND[3] max_db_connections = 100
[15:09:32] TRACE |   FOUND[4] default_pool_size = 25
[15:09:32] TRACE |   FOUND[5] pool_mode = transaction
[15:09:32] TRACE | === END FACT COVERAGE ===
[15:09:32] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:32] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What's the purpose of the connection pooler?
[15:09:32] DEBUG | [query-rewrite] Rewriting query: What's the purpose of the connection pooler?
[15:09:32] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:32] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=843 timeout=5s
[15:09:32] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:32] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:32] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:32] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.84s
[15:09:32] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=13
[15:09:32] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=93
[15:09:32] DEBUG | [anthropic] RESPONSE: connection pooler database connection management performance optimization resource efficiency
[15:09:32] DEBUG | [query-rewrite] SUCCESS in 0.842s: What's the purpose of the connection pooler? → connection pooler database connection management performance optimization resource efficiency
[15:09:32] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: connection pooler database connection management performance optimization resource efficiency (took 0.842s)
[15:09:32] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: connection pooler database connection management performance optimization resource efficiency Kafka PostgreSQL Redis data layer storage
[15:09:32] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:32] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:32] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[0] idx=9 chunk_id=architecture_overview_fix_3 score=0.7033 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[1] idx=11 chunk_id=architecture_overview_fix_5 score=0.6928 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[2] idx=16 chunk_id=architecture_overview_fix_10 score=0.6679 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[3] idx=17 chunk_id=architecture_overview_fix_11 score=0.6632 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[4] idx=15 chunk_id=architecture_overview_fix_9 score=0.6632 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[5] idx=8 chunk_id=architecture_overview_fix_2 score=0.6628 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[6] idx=25 chunk_id=deployment_guide_fix_6 score=0.6618 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[7] idx=10 chunk_id=architecture_overview_fix_4 score=0.6507 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[8] idx=18 chunk_id=architecture_overview_fix_12 score=0.6490 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:32] TRACE | [enriched-hybrid-llm]   SEM[9] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6477 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:32] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[0] idx=25 chunk_id=deployment_guide_fix_6 score=10.6853 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[1] idx=19 chunk_id=deployment_guide_fix_0 score=9.0075 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[2] idx=11 chunk_id=architecture_overview_fix_5 score=8.8201 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[3] idx=18 chunk_id=architecture_overview_fix_12 score=8.4640 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[4] idx=20 chunk_id=deployment_guide_fix_1 score=8.1921 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[5] idx=7 chunk_id=architecture_overview_fix_1 score=7.9825 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[6] idx=10 chunk_id=architecture_overview_fix_4 score=7.7586 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[7] idx=26 chunk_id=deployment_guide_fix_7 score=7.3567 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[8] idx=16 chunk_id=architecture_overview_fix_10 score=7.2773 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:32] TRACE | [enriched-hybrid-llm]   BM25[9] idx=9 chunk_id=architecture_overview_fix_3 score=6.5984 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:32] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[0] idx=25 total=0.3187 (sem_rank=6 comp=0.0187 + bm25_rank=0 comp=0.3000)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[1] idx=19 total=0.2831 (sem_rank=19 comp=0.0103 + bm25_rank=1 comp=0.2727)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[2] idx=11 total=0.2773 (sem_rank=1 comp=0.0273 + bm25_rank=2 comp=0.2500)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[3] idx=18 total=0.2474 (sem_rank=8 comp=0.0167 + bm25_rank=3 comp=0.2308)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[4] idx=20 total=0.2250 (sem_rank=18 comp=0.0107 + bm25_rank=4 comp=0.2143)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[5] idx=7 total=0.2111 (sem_rank=17 comp=0.0111 + bm25_rank=5 comp=0.2000)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[6] idx=10 total=0.2051 (sem_rank=7 comp=0.0176 + bm25_rank=6 comp=0.1875)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[7] idx=16 total=0.1917 (sem_rank=2 comp=0.0250 + bm25_rank=8 comp=0.1667)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[8] idx=9 total=0.1879 (sem_rank=0 comp=0.0300 + bm25_rank=9 comp=0.1579)
[15:09:32] TRACE | [enriched-hybrid-llm]   RRF[9] idx=26 total=0.1848 (sem_rank=26 comp=0.0083 + bm25_rank=7 comp=0.1765)
[15:09:32] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:32] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.3187 sem_rank=6 bm25_rank=0 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:09:32] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.2831 sem_rank=19 bm25_rank=1 dominant=bm25 | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:09:32] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.2773 sem_rank=1 bm25_rank=2 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:09:32] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.2474 sem_rank=8 bm25_rank=3 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:09:32] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.2250 sem_rank=18 bm25_rank=4 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:09:32] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:32] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:32] TRACE | Query: What's the purpose of the connection pooler?
[15:09:32] TRACE | Total key facts: 5
[15:09:32] TRACE | Found facts: 2/5
[15:09:32] TRACE |   FOUND[1] PgBouncer
[15:09:32] TRACE |   FOUND[2] connection pooling
[15:09:32] TRACE | Missed facts: 3/5
[15:09:32] TRACE |   MISSED[1] max_db_connections = 100
[15:09:32] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:09:32] TRACE |   MISSED[2] default_pool_size = 25
[15:09:32] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:09:32] TRACE |   MISSED[3] pool_mode = transaction
[15:09:32] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:09:32] TRACE | === END FACT COVERAGE ===
[15:09:32] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:32] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Should I connect directly to PostgreSQL or through PgBouncer?
[15:09:32] DEBUG | [query-rewrite] Rewriting query: Should I connect directly to PostgreSQL or through PgBouncer?
[15:09:32] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:32] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=860 timeout=5s
[15:09:32] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:32] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:32] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:34] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.09s
[15:09:34] DEBUG | [anthropic] USAGE: input_tokens=201 output_tokens=21
[15:09:34] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=99
[15:09:34] DEBUG | [anthropic] RESPONSE: "PostgreSQL connection pooling PgBouncer performance overhead connection management best practices"
[15:09:34] DEBUG | [query-rewrite] SUCCESS in 1.092s: Should I connect directly to PostgreSQL or through PgBouncer? → "PostgreSQL connection pooling PgBouncer performance overhead connection management best practices"
[15:09:34] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: "PostgreSQL connection pooling PgBouncer performance overhead connection management best practices" (took 1.092s)
[15:09:34] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:34] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[0] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.7120 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[1] idx=22 chunk_id=deployment_guide_fix_3 score=0.6795 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[2] idx=9 chunk_id=architecture_overview_fix_3 score=0.6222 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[3] idx=8 chunk_id=architecture_overview_fix_2 score=0.6177 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[4] idx=16 chunk_id=architecture_overview_fix_10 score=0.6132 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[5] idx=25 chunk_id=deployment_guide_fix_6 score=0.6037 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[6] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6011 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[7] idx=18 chunk_id=architecture_overview_fix_12 score=0.5898 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[8] idx=11 chunk_id=architecture_overview_fix_5 score=0.5825 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[9] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.5822 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:34] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[0] idx=32 chunk_id=troubleshooting_guide_fix_4 score=11.0192 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[1] idx=22 chunk_id=deployment_guide_fix_3 score=9.1162 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[2] idx=26 chunk_id=deployment_guide_fix_7 score=8.5644 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[3] idx=25 chunk_id=deployment_guide_fix_6 score=7.4917 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[4] idx=11 chunk_id=architecture_overview_fix_5 score=4.9794 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[5] idx=23 chunk_id=deployment_guide_fix_4 score=4.1372 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[6] idx=19 chunk_id=deployment_guide_fix_0 score=4.0152 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[7] idx=42 chunk_id=user_guide_fix_2 score=3.8259 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[8] idx=31 chunk_id=troubleshooting_guide_fix_3 score=3.7533 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[9] idx=46 chunk_id=user_guide_fix_6 score=3.2891 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:34] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[0] idx=32 total=0.0333 (sem_rank=0 comp=0.0167 + bm25_rank=0 comp=0.0167)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[1] idx=22 total=0.0328 (sem_rank=1 comp=0.0164 + bm25_rank=1 comp=0.0164)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[2] idx=25 total=0.0313 (sem_rank=5 comp=0.0154 + bm25_rank=3 comp=0.0159)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[3] idx=11 total=0.0303 (sem_rank=8 comp=0.0147 + bm25_rank=4 comp=0.0156)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[4] idx=31 total=0.0299 (sem_rank=6 comp=0.0152 + bm25_rank=8 comp=0.0147)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[5] idx=16 total=0.0293 (sem_rank=4 comp=0.0156 + bm25_rank=13 comp=0.0137)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[6] idx=15 total=0.0282 (sem_rank=11 comp=0.0141 + bm25_rank=11 comp=0.0141)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[7] idx=9 total=0.0279 (sem_rank=2 comp=0.0161 + bm25_rank=25 comp=0.0118)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[8] idx=26 total=0.0279 (sem_rank=25 comp=0.0118 + bm25_rank=2 comp=0.0161)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[9] idx=8 total=0.0275 (sem_rank=3 comp=0.0159 + bm25_rank=26 comp=0.0116)
[15:09:34] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:34] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.0333 sem_rank=0 bm25_rank=0 dominant=balanced | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:09:34] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.0328 sem_rank=1 bm25_rank=1 dominant=balanced | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:34] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0313 sem_rank=5 bm25_rank=3 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:09:34] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.0303 sem_rank=8 bm25_rank=4 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:09:34] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_3 doc_id=troubleshooting_guide rrf_score=0.0299 sem_rank=6 bm25_rank=8 dominant=semantic | enriched: Context Accumulation, Large workflow, Workflow Context, accumulate state, workflow executions, Accumulation, Large  Workflow Context Accumulation** Large workflow executions may accumulate state in me...
[15:09:34] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:34] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:34] TRACE | Query: Should I connect directly to PostgreSQL or through PgBouncer?
[15:09:34] TRACE | Total key facts: 5
[15:09:34] TRACE | Found facts: 5/5
[15:09:34] TRACE |   FOUND[1] PgBouncer
[15:09:34] TRACE |   FOUND[2] connection pooling
[15:09:34] TRACE |   FOUND[3] max_db_connections = 100
[15:09:34] TRACE |   FOUND[4] default_pool_size = 25
[15:09:34] TRACE |   FOUND[5] pool_mode = transaction
[15:09:34] TRACE | === END FACT COVERAGE ===
[15:09:34] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:34] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: pgbouncer purpose
[15:09:34] DEBUG | [query-rewrite] Rewriting query: pgbouncer purpose
[15:09:34] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:34] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=816 timeout=5s
[15:09:34] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:34] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:34] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:34] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.78s
[15:09:34] DEBUG | [anthropic] USAGE: input_tokens=191 output_tokens=13
[15:09:34] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=57
[15:09:34] DEBUG | [anthropic] RESPONSE: pgbouncer connection pooling database proxy functionality
[15:09:34] DEBUG | [query-rewrite] SUCCESS in 0.781s: pgbouncer purpose → pgbouncer connection pooling database proxy functionality
[15:09:34] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: pgbouncer connection pooling database proxy functionality (took 0.781s)
[15:09:34] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: pgbouncer connection pooling database proxy functionality Kafka PostgreSQL Redis data layer storage
[15:09:34] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:34] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:34] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[0] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6903 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[1] idx=22 chunk_id=deployment_guide_fix_3 score=0.6787 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[2] idx=9 chunk_id=architecture_overview_fix_3 score=0.6669 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[3] idx=10 chunk_id=architecture_overview_fix_4 score=0.6573 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[4] idx=25 chunk_id=deployment_guide_fix_6 score=0.6568 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[5] idx=15 chunk_id=architecture_overview_fix_9 score=0.6531 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[6] idx=11 chunk_id=architecture_overview_fix_5 score=0.6442 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[7] idx=17 chunk_id=architecture_overview_fix_11 score=0.6386 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[8] idx=14 chunk_id=architecture_overview_fix_8 score=0.6331 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:34] TRACE | [enriched-hybrid-llm]   SEM[9] idx=12 chunk_id=architecture_overview_fix_6 score=0.6308 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:34] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[0] idx=22 chunk_id=deployment_guide_fix_3 score=9.3295 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[1] idx=32 chunk_id=troubleshooting_guide_fix_4 score=9.3164 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[2] idx=11 chunk_id=architecture_overview_fix_5 score=9.1536 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[3] idx=18 chunk_id=architecture_overview_fix_12 score=7.3771 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[4] idx=26 chunk_id=deployment_guide_fix_7 score=7.1870 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[5] idx=25 chunk_id=deployment_guide_fix_6 score=6.8587 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[6] idx=6 chunk_id=architecture_overview_fix_0 score=6.4706 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[7] idx=14 chunk_id=architecture_overview_fix_8 score=6.0494 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[8] idx=20 chunk_id=deployment_guide_fix_1 score=5.7375 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:34] TRACE | [enriched-hybrid-llm]   BM25[9] idx=17 chunk_id=architecture_overview_fix_11 score=5.5988 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:34] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[0] idx=22 total=0.3273 (sem_rank=1 comp=0.0273 + bm25_rank=0 comp=0.3000)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[1] idx=32 total=0.3027 (sem_rank=0 comp=0.0300 + bm25_rank=1 comp=0.2727)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[2] idx=11 total=0.2687 (sem_rank=6 comp=0.0187 + bm25_rank=2 comp=0.2500)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[3] idx=18 total=0.2451 (sem_rank=11 comp=0.0143 + bm25_rank=3 comp=0.2308)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[4] idx=26 total=0.2258 (sem_rank=16 comp=0.0115 + bm25_rank=4 comp=0.2143)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[5] idx=25 total=0.2214 (sem_rank=4 comp=0.0214 + bm25_rank=5 comp=0.2000)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[6] idx=6 total=0.1961 (sem_rank=25 comp=0.0086 + bm25_rank=6 comp=0.1875)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[7] idx=14 total=0.1931 (sem_rank=8 comp=0.0167 + bm25_rank=7 comp=0.1765)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[8] idx=20 total=0.1778 (sem_rank=17 comp=0.0111 + bm25_rank=8 comp=0.1667)
[15:09:34] TRACE | [enriched-hybrid-llm]   RRF[9] idx=17 total=0.1755 (sem_rank=7 comp=0.0176 + bm25_rank=9 comp=0.1579)
[15:09:34] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:34] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.3273 sem_rank=1 bm25_rank=0 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:34] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.3027 sem_rank=0 bm25_rank=1 dominant=bm25 | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:09:34] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.2687 sem_rank=6 bm25_rank=2 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:09:34] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.2451 sem_rank=11 bm25_rank=3 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:09:34] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_7 doc_id=deployment_guide rrf_score=0.2258 sem_rank=16 bm25_rank=4 dominant=bm25 | enriched: TCP port, SHOW POOLS, External Secrets, Secrets Operator, kubectl top, Egress ingress, bash kubectl | Install External Secrets Operator, EOF, Create SecretStore, external-secrets.io/v1beta1  podSelect...
[15:09:34] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:34] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:34] TRACE | Query: pgbouncer purpose
[15:09:34] TRACE | Total key facts: 5
[15:09:34] TRACE | Found facts: 5/5
[15:09:34] TRACE |   FOUND[1] PgBouncer
[15:09:34] TRACE |   FOUND[2] connection pooling
[15:09:34] TRACE |   FOUND[3] max_db_connections = 100
[15:09:34] TRACE |   FOUND[4] default_pool_size = 25
[15:09:34] TRACE |   FOUND[5] pool_mode = transaction
[15:09:34] TRACE | === END FACT COVERAGE ===
[15:09:34] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:34] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Optimizing database connections, what role does PgBouncer play?
[15:09:34] DEBUG | [query-rewrite] Rewriting query: Optimizing database connections, what role does PgBouncer play?
[15:09:34] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:34] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=862 timeout=5s
[15:09:34] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:34] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:34] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:35] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.87s
[15:09:35] DEBUG | [anthropic] USAGE: input_tokens=202 output_tokens=17
[15:09:35] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=75
[15:09:35] DEBUG | [anthropic] RESPONSE: "PgBouncer connection pooling database performance optimization techniques"
[15:09:35] DEBUG | [query-rewrite] SUCCESS in 0.874s: Optimizing database connections, what role does PgBouncer play? → "PgBouncer connection pooling database performance optimization techniques"
[15:09:35] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: "PgBouncer connection pooling database performance optimization techniques" (took 0.874s)
[15:09:35] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: "PgBouncer connection pooling database performance optimization techniques" Kafka PostgreSQL Redis data layer storage
[15:09:35] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:35] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:35] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:35] TRACE | [enriched-hybrid-llm]   SEM[0] idx=9 chunk_id=architecture_overview_fix_3 score=0.7134 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:35] TRACE | [enriched-hybrid-llm]   SEM[1] idx=11 chunk_id=architecture_overview_fix_5 score=0.6993 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:35] TRACE | [enriched-hybrid-llm]   SEM[2] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6932 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:35] TRACE | [enriched-hybrid-llm]   SEM[3] idx=22 chunk_id=deployment_guide_fix_3 score=0.6894 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:35] TRACE | [enriched-hybrid-llm]   SEM[4] idx=25 chunk_id=deployment_guide_fix_6 score=0.6872 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:35] TRACE | [enriched-hybrid-llm]   SEM[5] idx=15 chunk_id=architecture_overview_fix_9 score=0.6762 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:35] TRACE | [enriched-hybrid-llm]   SEM[6] idx=10 chunk_id=architecture_overview_fix_4 score=0.6751 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:35] TRACE | [enriched-hybrid-llm]   SEM[7] idx=16 chunk_id=architecture_overview_fix_10 score=0.6700 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:35] TRACE | [enriched-hybrid-llm]   SEM[8] idx=18 chunk_id=architecture_overview_fix_12 score=0.6597 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:35] TRACE | [enriched-hybrid-llm]   SEM[9] idx=12 chunk_id=architecture_overview_fix_6 score=0.6588 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:35] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:35] TRACE | [enriched-hybrid-llm]   BM25[0] idx=25 chunk_id=deployment_guide_fix_6 score=10.8935 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:35] TRACE | [enriched-hybrid-llm]   BM25[1] idx=18 chunk_id=architecture_overview_fix_12 score=8.4640 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:35] TRACE | [enriched-hybrid-llm]   BM25[2] idx=11 chunk_id=architecture_overview_fix_5 score=8.0032 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:35] TRACE | [enriched-hybrid-llm]   BM25[3] idx=6 chunk_id=architecture_overview_fix_0 score=6.4706 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:35] TRACE | [enriched-hybrid-llm]   BM25[4] idx=32 chunk_id=troubleshooting_guide_fix_4 score=6.0878 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:35] TRACE | [enriched-hybrid-llm]   BM25[5] idx=14 chunk_id=architecture_overview_fix_8 score=6.0494 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:35] TRACE | [enriched-hybrid-llm]   BM25[6] idx=20 chunk_id=deployment_guide_fix_1 score=5.7375 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:35] TRACE | [enriched-hybrid-llm]   BM25[7] idx=17 chunk_id=architecture_overview_fix_11 score=5.5988 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:35] TRACE | [enriched-hybrid-llm]   BM25[8] idx=7 chunk_id=architecture_overview_fix_1 score=5.0201 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:35] TRACE | [enriched-hybrid-llm]   BM25[9] idx=9 chunk_id=architecture_overview_fix_3 score=4.9942 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:35] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:35] TRACE | [enriched-hybrid-llm]   RRF[0] idx=25 total=0.3214 (sem_rank=4 comp=0.0214 + bm25_rank=0 comp=0.3000)
[15:09:35] TRACE | [enriched-hybrid-llm]   RRF[1] idx=18 total=0.2894 (sem_rank=8 comp=0.0167 + bm25_rank=1 comp=0.2727)
[15:09:35] TRACE | [enriched-hybrid-llm]   RRF[2] idx=11 total=0.2773 (sem_rank=1 comp=0.0273 + bm25_rank=2 comp=0.2500)
[15:09:35] TRACE | [enriched-hybrid-llm]   RRF[3] idx=6 total=0.2419 (sem_rank=17 comp=0.0111 + bm25_rank=3 comp=0.2308)
[15:09:35] TRACE | [enriched-hybrid-llm]   RRF[4] idx=32 total=0.2393 (sem_rank=2 comp=0.0250 + bm25_rank=4 comp=0.2143)
[15:09:35] TRACE | [enriched-hybrid-llm]   RRF[5] idx=14 total=0.2150 (sem_rank=10 comp=0.0150 + bm25_rank=5 comp=0.2000)
[15:09:35] TRACE | [enriched-hybrid-llm]   RRF[6] idx=20 total=0.1990 (sem_rank=16 comp=0.0115 + bm25_rank=6 comp=0.1875)
[15:09:35] TRACE | [enriched-hybrid-llm]   RRF[7] idx=17 total=0.1908 (sem_rank=11 comp=0.0143 + bm25_rank=7 comp=0.1765)
[15:09:35] TRACE | [enriched-hybrid-llm]   RRF[8] idx=9 total=0.1879 (sem_rank=0 comp=0.0300 + bm25_rank=9 comp=0.1579)
[15:09:35] TRACE | [enriched-hybrid-llm]   RRF[9] idx=7 total=0.1774 (sem_rank=18 comp=0.0107 + bm25_rank=8 comp=0.1667)
[15:09:35] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:35] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.3214 sem_rank=4 bm25_rank=0 dominant=bm25 | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:09:35] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_12 doc_id=architecture_overview rrf_score=0.2894 sem_rank=8 bm25_rank=1 dominant=bm25 | enriched: Database size, Active users, Auth Service, Daily workflow, API requests, API Gateway, Test Results | AZ, DNS, P1, Critical Path, API Gateway  Resume normal operations - Recovery time: 1-3 hours depend...
[15:09:35] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_5 doc_id=architecture_overview rrf_score=0.2773 sem_rank=1 bm25_rank=2 dominant=bm25 | enriched: Monthly partitions, Indexing Strategy, Core Tables, Performance Characteristics, Partitioning Strategy, Redis Caching, Redis Cluster | Success, created_at - Automatic, Kafka, Drop, correlation_id  Suc...
[15:09:35] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2419 sem_rank=17 bm25_rank=3 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:09:35] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.2393 sem_rank=2 bm25_rank=4 dominant=bm25 | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:09:35] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:35] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:35] TRACE | Query: Optimizing database connections, what role does PgBouncer play?
[15:09:35] TRACE | Total key facts: 5
[15:09:35] TRACE | Found facts: 2/5
[15:09:35] TRACE |   FOUND[1] PgBouncer
[15:09:35] TRACE |   FOUND[2] connection pooling
[15:09:35] TRACE | Missed facts: 3/5
[15:09:35] TRACE |   MISSED[1] max_db_connections = 100
[15:09:35] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:09:35] TRACE |   MISSED[2] default_pool_size = 25
[15:09:35] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:09:35] TRACE |   MISSED[3] pool_mode = transaction
[15:09:35] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:09:35] TRACE | === END FACT COVERAGE ===
[15:09:35] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:35] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why can't I connect directly to the database?
[15:09:35] DEBUG | [query-rewrite] Rewriting query: Why can't I connect directly to the database?
[15:09:35] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:35] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=844 timeout=5s
[15:09:35] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:35] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:35] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:36] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.84s
[15:09:36] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=11
[15:09:36] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=90
[15:09:36] DEBUG | [anthropic] RESPONSE: database connection restrictions authentication authorization network access configuration
[15:09:36] DEBUG | [query-rewrite] SUCCESS in 0.843s: Why can't I connect directly to the database? → database connection restrictions authentication authorization network access configuration
[15:09:36] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: database connection restrictions authentication authorization network access configuration (took 0.843s)
[15:09:36] TRACE | [enriched-hybrid-llm] EXPANDED_QUERY: database connection restrictions authentication authorization network access configuration Kafka PostgreSQL Redis data layer storage
[15:09:36] TRACE | [enriched-hybrid-llm] WEIGHTED_RRF: bm25_weight=3.0 sem_weight=0.3 rrf_k=10
[15:09:36] TRACE | [enriched-hybrid-llm] n_candidates=51 (k=5 * multiplier=20)
[15:09:36] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:36] TRACE | [enriched-hybrid-llm]   SEM[0] idx=15 chunk_id=architecture_overview_fix_9 score=0.6657 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:36] TRACE | [enriched-hybrid-llm]   SEM[1] idx=9 chunk_id=architecture_overview_fix_3 score=0.6238 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:36] TRACE | [enriched-hybrid-llm]   SEM[2] idx=12 chunk_id=architecture_overview_fix_6 score=0.6193 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:36] TRACE | [enriched-hybrid-llm]   SEM[3] idx=17 chunk_id=architecture_overview_fix_11 score=0.6173 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:36] TRACE | [enriched-hybrid-llm]   SEM[4] idx=18 chunk_id=architecture_overview_fix_12 score=0.6151 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:36] TRACE | [enriched-hybrid-llm]   SEM[5] idx=11 chunk_id=architecture_overview_fix_5 score=0.6140 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:36] TRACE | [enriched-hybrid-llm]   SEM[6] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.6137 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:36] TRACE | [enriched-hybrid-llm]   SEM[7] idx=16 chunk_id=architecture_overview_fix_10 score=0.6034 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:36] TRACE | [enriched-hybrid-llm]   SEM[8] idx=14 chunk_id=architecture_overview_fix_8 score=0.6034 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:36] TRACE | [enriched-hybrid-llm]   SEM[9] idx=25 chunk_id=deployment_guide_fix_6 score=0.5964 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:36] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:36] TRACE | [enriched-hybrid-llm]   BM25[0] idx=14 chunk_id=architecture_overview_fix_8 score=12.7954 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:36] TRACE | [enriched-hybrid-llm]   BM25[1] idx=7 chunk_id=architecture_overview_fix_1 score=9.9167 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:36] TRACE | [enriched-hybrid-llm]   BM25[2] idx=0 chunk_id=api_reference_fix_0 score=8.7278 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:36] TRACE | [enriched-hybrid-llm]   BM25[3] idx=20 chunk_id=deployment_guide_fix_1 score=8.1641 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:36] TRACE | [enriched-hybrid-llm]   BM25[4] idx=6 chunk_id=architecture_overview_fix_0 score=8.1547 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:36] TRACE | [enriched-hybrid-llm]   BM25[5] idx=19 chunk_id=deployment_guide_fix_0 score=8.0482 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:36] TRACE | [enriched-hybrid-llm]   BM25[6] idx=28 chunk_id=troubleshooting_guide_fix_0 score=7.6149 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:36] TRACE | [enriched-hybrid-llm]   BM25[7] idx=18 chunk_id=architecture_overview_fix_12 score=7.3771 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:36] TRACE | [enriched-hybrid-llm]   BM25[8] idx=11 chunk_id=architecture_overview_fix_5 score=6.9057 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:36] TRACE | [enriched-hybrid-llm]   BM25[9] idx=15 chunk_id=architecture_overview_fix_9 score=6.5528 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:36] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:36] TRACE | [enriched-hybrid-llm]   RRF[0] idx=14 total=0.3167 (sem_rank=8 comp=0.0167 + bm25_rank=0 comp=0.3000)
[15:09:36] TRACE | [enriched-hybrid-llm]   RRF[1] idx=7 total=0.2864 (sem_rank=12 comp=0.0136 + bm25_rank=1 comp=0.2727)
[15:09:36] TRACE | [enriched-hybrid-llm]   RRF[2] idx=0 total=0.2588 (sem_rank=24 comp=0.0088 + bm25_rank=2 comp=0.2500)
[15:09:36] TRACE | [enriched-hybrid-llm]   RRF[3] idx=20 total=0.2433 (sem_rank=14 comp=0.0125 + bm25_rank=3 comp=0.2308)
[15:09:36] TRACE | [enriched-hybrid-llm]   RRF[4] idx=6 total=0.2229 (sem_rank=25 comp=0.0086 + bm25_rank=4 comp=0.2143)
[15:09:36] TRACE | [enriched-hybrid-llm]   RRF[5] idx=19 total=0.2068 (sem_rank=34 comp=0.0068 + bm25_rank=5 comp=0.2000)
[15:09:36] TRACE | [enriched-hybrid-llm]   RRF[6] idx=18 total=0.1979 (sem_rank=4 comp=0.0214 + bm25_rank=7 comp=0.1765)
[15:09:36] TRACE | [enriched-hybrid-llm]   RRF[7] idx=28 total=0.1952 (sem_rank=29 comp=0.0077 + bm25_rank=6 comp=0.1875)
[15:09:36] TRACE | [enriched-hybrid-llm]   RRF[8] idx=15 total=0.1879 (sem_rank=0 comp=0.0300 + bm25_rank=9 comp=0.1579)
[15:09:36] TRACE | [enriched-hybrid-llm]   RRF[9] idx=11 total=0.1867 (sem_rank=5 comp=0.0200 + bm25_rank=8 comp=0.1667)
[15:09:36] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:36] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_8 doc_id=architecture_overview rrf_score=0.3167 sem_rank=8 bm25_rank=0 dominant=bm25 | enriched: Node.js Map, Invalidation Strategies, Cache Warming, Cache Invalidation, Short-lived data, Medium-lived data, Long-lived data | TTL, `user:*:{user_id}` **, Kafka, Redis DEL, mTLS  ### Cache Invalidati...
[15:09:36] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.2864 sem_rank=12 bm25_rank=1 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:09:36] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.2588 sem_rank=24 bm25_rank=2 dominant=bm25 | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:09:36] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.2433 sem_rank=14 bm25_rank=3 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:09:36] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_0 doc_id=architecture_overview rrf_score=0.2229 sem_rank=25 bm25_rank=4 dominant=bm25 | enriched: Executive Summary, Architecture Team, Document Version, Architecture, System Architecture, Platform Architecture, cloud-native workflow | Platform - System Architecture Overview **Document Version:**,...
[15:09:36] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:36] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:36] TRACE | Query: Why can't I connect directly to the database?
[15:09:36] TRACE | Total key facts: 5
[15:09:36] TRACE | Found facts: 1/5
[15:09:36] TRACE |   FOUND[1] PgBouncer
[15:09:36] TRACE | Missed facts: 4/5
[15:09:36] TRACE |   MISSED[1] connection pooling
[15:09:36] TRACE |     -> Found in chunk_id=architecture_overview_fix_5 (rank not in top-5)
[15:09:36] TRACE |   MISSED[2] max_db_connections = 100
[15:09:36] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:09:36] TRACE |   MISSED[3] default_pool_size = 25
[15:09:36] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:09:36] TRACE |   MISSED[4] pool_mode = transaction
[15:09:36] TRACE |     -> Found in chunk_id=deployment_guide_fix_3 (rank not in top-5)
[15:09:36] TRACE | === END FACT COVERAGE ===
[15:09:36] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:36] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: How do I implement retry logic for failed workflow steps?
[15:09:36] DEBUG | [query-rewrite] Rewriting query: How do I implement retry logic for failed workflow steps?
[15:09:36] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:36] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=856 timeout=5s
[15:09:36] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:36] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:36] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:37] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.94s
[15:09:37] DEBUG | [anthropic] USAGE: input_tokens=197 output_tokens=12
[15:09:37] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=69
[15:09:37] DEBUG | [anthropic] RESPONSE: workflow step retry mechanism error handling resilience configuration
[15:09:37] DEBUG | [query-rewrite] SUCCESS in 0.936s: How do I implement retry logic for failed workflow steps? → workflow step retry mechanism error handling resilience configuration
[15:09:37] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow step retry mechanism error handling resilience configuration (took 0.936s)
[15:09:37] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:37] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:37] TRACE | [enriched-hybrid-llm]   SEM[0] idx=46 chunk_id=user_guide_fix_6 score=0.6945 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:37] TRACE | [enriched-hybrid-llm]   SEM[1] idx=45 chunk_id=user_guide_fix_5 score=0.6675 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:37] TRACE | [enriched-hybrid-llm]   SEM[2] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6414 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:37] TRACE | [enriched-hybrid-llm]   SEM[3] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6218 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:37] TRACE | [enriched-hybrid-llm]   SEM[4] idx=47 chunk_id=user_guide_fix_7 score=0.6115 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:37] TRACE | [enriched-hybrid-llm]   SEM[5] idx=6 chunk_id=architecture_overview_fix_0 score=0.6069 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:37] TRACE | [enriched-hybrid-llm]   SEM[6] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5927 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:37] TRACE | [enriched-hybrid-llm]   SEM[7] idx=19 chunk_id=deployment_guide_fix_0 score=0.5887 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:37] TRACE | [enriched-hybrid-llm]   SEM[8] idx=18 chunk_id=architecture_overview_fix_12 score=0.5793 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:37] TRACE | [enriched-hybrid-llm]   SEM[9] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.5793 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:09:37] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:37] TRACE | [enriched-hybrid-llm]   BM25[0] idx=33 chunk_id=troubleshooting_guide_fix_5 score=9.8118 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:37] TRACE | [enriched-hybrid-llm]   BM25[1] idx=45 chunk_id=user_guide_fix_5 score=7.7263 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:37] TRACE | [enriched-hybrid-llm]   BM25[2] idx=4 chunk_id=api_reference_fix_4 score=6.1682 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:37] TRACE | [enriched-hybrid-llm]   BM25[3] idx=9 chunk_id=architecture_overview_fix_3 score=6.0106 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:37] TRACE | [enriched-hybrid-llm]   BM25[4] idx=13 chunk_id=architecture_overview_fix_7 score=5.6370 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:09:37] TRACE | [enriched-hybrid-llm]   BM25[5] idx=34 chunk_id=troubleshooting_guide_fix_6 score=5.3768 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:37] TRACE | [enriched-hybrid-llm]   BM25[6] idx=36 chunk_id=troubleshooting_guide_fix_8 score=5.0248 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:37] TRACE | [enriched-hybrid-llm]   BM25[7] idx=32 chunk_id=troubleshooting_guide_fix_4 score=4.7011 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:37] TRACE | [enriched-hybrid-llm]   BM25[8] idx=40 chunk_id=user_guide_fix_0 score=3.8603 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:37] TRACE | [enriched-hybrid-llm]   BM25[9] idx=7 chunk_id=architecture_overview_fix_1 score=3.7392 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:37] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:37] TRACE | [enriched-hybrid-llm]   RRF[0] idx=33 total=0.0328 (sem_rank=2 comp=0.0161 + bm25_rank=0 comp=0.0167)
[15:09:37] TRACE | [enriched-hybrid-llm]   RRF[1] idx=45 total=0.0328 (sem_rank=1 comp=0.0164 + bm25_rank=1 comp=0.0164)
[15:09:37] TRACE | [enriched-hybrid-llm]   RRF[2] idx=34 total=0.0313 (sem_rank=3 comp=0.0159 + bm25_rank=5 comp=0.0154)
[15:09:37] TRACE | [enriched-hybrid-llm]   RRF[3] idx=46 total=0.0308 (sem_rank=0 comp=0.0167 + bm25_rank=11 comp=0.0141)
[15:09:37] TRACE | [enriched-hybrid-llm]   RRF[4] idx=47 total=0.0293 (sem_rank=4 comp=0.0156 + bm25_rank=13 comp=0.0137)
[15:09:37] TRACE | [enriched-hybrid-llm]   RRF[5] idx=40 total=0.0288 (sem_rank=11 comp=0.0141 + bm25_rank=8 comp=0.0147)
[15:09:37] TRACE | [enriched-hybrid-llm]   RRF[6] idx=32 total=0.0286 (sem_rank=13 comp=0.0137 + bm25_rank=7 comp=0.0149)
[15:09:37] TRACE | [enriched-hybrid-llm]   RRF[7] idx=36 total=0.0280 (sem_rank=18 comp=0.0128 + bm25_rank=6 comp=0.0152)
[15:09:37] TRACE | [enriched-hybrid-llm]   RRF[8] idx=13 total=0.0280 (sem_rank=21 comp=0.0123 + bm25_rank=4 comp=0.0156)
[15:09:37] TRACE | [enriched-hybrid-llm]   RRF[9] idx=19 total=0.0279 (sem_rank=7 comp=0.0149 + bm25_rank=17 comp=0.0130)
[15:09:37] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:37] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0328 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:09:37] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=user_guide_fix_5 doc_id=user_guide rrf_score=0.0328 sem_rank=1 bm25_rank=1 dominant=balanced | enriched: Testing Schedules, Handling Robust, Attempt, Error Handling, Dead Letter, Letter Queue, Robust error | Fallback Actions Execute, CloudFlow, Queue  Save and activate **Testing Schedules:** Use the buil...
[15:09:37] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0313 sem_rank=3 bm25_rank=5 dominant=semantic | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:09:37] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=user_guide_fix_6 doc_id=user_guide rrf_score=0.0308 sem_rank=0 bm25_rank=11 dominant=semantic | enriched: workflow, date range, type, workflows, error type, execution, Execution Timeout | MB, Sync Customer Data  Filter by error type, date range, or execution ID 3. Click an execution to view full details 4...
[15:09:37] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=user_guide_fix_7 doc_id=user_guide rrf_score=0.0293 sem_rank=4 bm25_rank=13 dominant=semantic | enriched: external API, API calls, Errors Gracefully, Store secrets, API keys, API, Gracefully | API, Validate Input Data Always, Log Add, Trigger  Handle Errors Gracefully Always implement error handling for e...
[15:09:37] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:37] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:37] TRACE | Query: How do I implement retry logic for failed workflow steps?
[15:09:37] TRACE | Total key facts: 4
[15:09:37] TRACE | Found facts: 4/4
[15:09:37] TRACE |   FOUND[1] max_attempts: 3
[15:09:37] TRACE |   FOUND[2] backoff_type: exponential
[15:09:37] TRACE |   FOUND[3] initial_interval: 1000
[15:09:37] TRACE |   FOUND[4] max retries: 3
[15:09:37] TRACE | === END FACT COVERAGE ===
[15:09:37] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:37] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What's the retry strategy for transient failures?
[15:09:37] DEBUG | [query-rewrite] Rewriting query: What's the retry strategy for transient failures?
[15:09:37] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:37] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=848 timeout=5s
[15:09:37] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:37] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:37] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:38] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.06s
[15:09:38] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=13
[15:09:38] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=66
[15:09:38] DEBUG | [anthropic] RESPONSE: transient failure retry policy error handling resilience mechanism
[15:09:38] DEBUG | [query-rewrite] SUCCESS in 1.056s: What's the retry strategy for transient failures? → transient failure retry policy error handling resilience mechanism
[15:09:38] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: transient failure retry policy error handling resilience mechanism (took 1.056s)
[15:09:38] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:38] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:38] TRACE | [enriched-hybrid-llm]   SEM[0] idx=45 chunk_id=user_guide_fix_5 score=0.6225 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:38] TRACE | [enriched-hybrid-llm]   SEM[1] idx=47 chunk_id=user_guide_fix_7 score=0.5636 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:38] TRACE | [enriched-hybrid-llm]   SEM[2] idx=14 chunk_id=architecture_overview_fix_8 score=0.5605 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:38] TRACE | [enriched-hybrid-llm]   SEM[3] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.5577 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:09:38] TRACE | [enriched-hybrid-llm]   SEM[4] idx=46 chunk_id=user_guide_fix_6 score=0.5575 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:38] TRACE | [enriched-hybrid-llm]   SEM[5] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.5546 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:38] TRACE | [enriched-hybrid-llm]   SEM[6] idx=9 chunk_id=architecture_overview_fix_3 score=0.5490 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:38] TRACE | [enriched-hybrid-llm]   SEM[7] idx=6 chunk_id=architecture_overview_fix_0 score=0.5488 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:38] TRACE | [enriched-hybrid-llm]   SEM[8] idx=18 chunk_id=architecture_overview_fix_12 score=0.5454 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:38] TRACE | [enriched-hybrid-llm]   SEM[9] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5385 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:38] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:38] TRACE | [enriched-hybrid-llm]   BM25[0] idx=9 chunk_id=architecture_overview_fix_3 score=11.7673 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:38] TRACE | [enriched-hybrid-llm]   BM25[1] idx=33 chunk_id=troubleshooting_guide_fix_5 score=7.3596 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:38] TRACE | [enriched-hybrid-llm]   BM25[2] idx=45 chunk_id=user_guide_fix_5 score=6.4343 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:38] TRACE | [enriched-hybrid-llm]   BM25[3] idx=4 chunk_id=api_reference_fix_4 score=5.3976 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:38] TRACE | [enriched-hybrid-llm]   BM25[4] idx=34 chunk_id=troubleshooting_guide_fix_6 score=5.3768 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:38] TRACE | [enriched-hybrid-llm]   BM25[5] idx=13 chunk_id=architecture_overview_fix_7 score=3.3765 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:09:38] TRACE | [enriched-hybrid-llm]   BM25[6] idx=29 chunk_id=troubleshooting_guide_fix_1 score=3.0367 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:38] TRACE | [enriched-hybrid-llm]   BM25[7] idx=23 chunk_id=deployment_guide_fix_4 score=3.0134 | --set prometheus.prometheusSpec.retention=30d \ --set prometheus.prometheusSpec.storageSpec.volumeCl...
[15:09:38] TRACE | [enriched-hybrid-llm]   BM25[8] idx=47 chunk_id=user_guide_fix_7 score=2.8603 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:38] TRACE | [enriched-hybrid-llm]   BM25[9] idx=16 chunk_id=architecture_overview_fix_10 score=2.5102 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:38] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:38] TRACE | [enriched-hybrid-llm]   RRF[0] idx=45 total=0.0328 (sem_rank=0 comp=0.0167 + bm25_rank=2 comp=0.0161)
[15:09:38] TRACE | [enriched-hybrid-llm]   RRF[1] idx=9 total=0.0318 (sem_rank=6 comp=0.0152 + bm25_rank=0 comp=0.0167)
[15:09:38] TRACE | [enriched-hybrid-llm]   RRF[2] idx=47 total=0.0311 (sem_rank=1 comp=0.0164 + bm25_rank=8 comp=0.0147)
[15:09:38] TRACE | [enriched-hybrid-llm]   RRF[3] idx=34 total=0.0310 (sem_rank=5 comp=0.0154 + bm25_rank=4 comp=0.0156)
[15:09:38] TRACE | [enriched-hybrid-llm]   RRF[4] idx=33 total=0.0305 (sem_rank=11 comp=0.0141 + bm25_rank=1 comp=0.0164)
[15:09:38] TRACE | [enriched-hybrid-llm]   RRF[5] idx=4 total=0.0287 (sem_rank=18 comp=0.0128 + bm25_rank=3 comp=0.0159)
[15:09:38] TRACE | [enriched-hybrid-llm]   RRF[6] idx=29 total=0.0283 (sem_rank=16 comp=0.0132 + bm25_rank=6 comp=0.0152)
[15:09:38] TRACE | [enriched-hybrid-llm]   RRF[7] idx=46 total=0.0283 (sem_rank=4 comp=0.0156 + bm25_rank=19 comp=0.0127)
[15:09:38] TRACE | [enriched-hybrid-llm]   RRF[8] idx=18 total=0.0282 (sem_rank=8 comp=0.0147 + bm25_rank=14 comp=0.0135)
[15:09:38] TRACE | [enriched-hybrid-llm]   RRF[9] idx=13 total=0.0280 (sem_rank=19 comp=0.0127 + bm25_rank=5 comp=0.0154)
[15:09:38] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:38] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=user_guide_fix_5 doc_id=user_guide rrf_score=0.0328 sem_rank=0 bm25_rank=2 dominant=semantic | enriched: Testing Schedules, Handling Robust, Attempt, Error Handling, Dead Letter, Letter Queue, Robust error | Fallback Actions Execute, CloudFlow, Queue  Save and activate **Testing Schedules:** Use the buil...
[15:09:38] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_3 doc_id=architecture_overview rrf_score=0.0318 sem_rank=6 bm25_rank=0 dominant=bm25 | enriched: leader election, Missed execution, Resource Allocation, Key Responsibilities, Reliability Features, Performance Targets, Scheduling Architecture | PostgreSQL, Leader Scheduler, Kafka, Redis, SMS  **Te...
[15:09:38] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=user_guide_fix_7 doc_id=user_guide rrf_score=0.0311 sem_rank=1 bm25_rank=8 dominant=semantic | enriched: external API, API calls, Errors Gracefully, Store secrets, API keys, API, Gracefully | API, Validate Input Data Always, Log Add, Trigger  Handle Errors Gracefully Always implement error handling for e...
[15:09:38] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0310 sem_rank=5 bm25_rank=4 dominant=bm25 | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:09:38] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0305 sem_rank=11 bm25_rank=1 dominant=bm25 | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:09:38] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:38] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:38] TRACE | Query: What's the retry strategy for transient failures?
[15:09:38] TRACE | Total key facts: 4
[15:09:38] TRACE | Found facts: 4/4
[15:09:38] TRACE |   FOUND[1] max_attempts: 3
[15:09:38] TRACE |   FOUND[2] backoff_type: exponential
[15:09:38] TRACE |   FOUND[3] initial_interval: 1000
[15:09:38] TRACE |   FOUND[4] max retries: 3
[15:09:38] TRACE | === END FACT COVERAGE ===
[15:09:38] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:38] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: My workflow fails on temporary network errors
[15:09:38] DEBUG | [query-rewrite] Rewriting query: My workflow fails on temporary network errors
[15:09:38] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:38] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=844 timeout=5s
[15:09:38] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:38] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:38] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:39] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.92s
[15:09:39] DEBUG | [anthropic] USAGE: input_tokens=193 output_tokens=11
[15:09:39] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=67
[15:09:39] DEBUG | [anthropic] RESPONSE: workflow transient network error handling reliability configuration
[15:09:39] DEBUG | [query-rewrite] SUCCESS in 0.918s: My workflow fails on temporary network errors → workflow transient network error handling reliability configuration
[15:09:39] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow transient network error handling reliability configuration (took 0.918s)
[15:09:39] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:39] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:39] TRACE | [enriched-hybrid-llm]   SEM[0] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6752 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:39] TRACE | [enriched-hybrid-llm]   SEM[1] idx=45 chunk_id=user_guide_fix_5 score=0.6510 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:39] TRACE | [enriched-hybrid-llm]   SEM[2] idx=46 chunk_id=user_guide_fix_6 score=0.6433 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:39] TRACE | [enriched-hybrid-llm]   SEM[3] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6235 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:39] TRACE | [enriched-hybrid-llm]   SEM[4] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.6207 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:39] TRACE | [enriched-hybrid-llm]   SEM[5] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.6161 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:39] TRACE | [enriched-hybrid-llm]   SEM[6] idx=6 chunk_id=architecture_overview_fix_0 score=0.6053 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:39] TRACE | [enriched-hybrid-llm]   SEM[7] idx=31 chunk_id=troubleshooting_guide_fix_3 score=0.5972 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:39] TRACE | [enriched-hybrid-llm]   SEM[8] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5948 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:39] TRACE | [enriched-hybrid-llm]   SEM[9] idx=18 chunk_id=architecture_overview_fix_12 score=0.5850 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:39] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:39] TRACE | [enriched-hybrid-llm]   BM25[0] idx=33 chunk_id=troubleshooting_guide_fix_5 score=7.9218 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:39] TRACE | [enriched-hybrid-llm]   BM25[1] idx=9 chunk_id=architecture_overview_fix_3 score=6.0106 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:39] TRACE | [enriched-hybrid-llm]   BM25[2] idx=32 chunk_id=troubleshooting_guide_fix_4 score=4.5570 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:39] TRACE | [enriched-hybrid-llm]   BM25[3] idx=19 chunk_id=deployment_guide_fix_0 score=4.4132 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:39] TRACE | [enriched-hybrid-llm]   BM25[4] idx=14 chunk_id=architecture_overview_fix_8 score=3.8924 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:39] TRACE | [enriched-hybrid-llm]   BM25[5] idx=12 chunk_id=architecture_overview_fix_6 score=3.8641 | **Session Storage**: - Key pattern: `session:{user_id}` - TTL: 15 minutes (aligned with JWT expiry) ...
[15:09:39] TRACE | [enriched-hybrid-llm]   BM25[6] idx=40 chunk_id=user_guide_fix_0 score=3.8603 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:39] TRACE | [enriched-hybrid-llm]   BM25[7] idx=7 chunk_id=architecture_overview_fix_1 score=3.7392 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:39] TRACE | [enriched-hybrid-llm]   BM25[8] idx=3 chunk_id=api_reference_fix_3 score=3.6647 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:09:39] TRACE | [enriched-hybrid-llm]   BM25[9] idx=47 chunk_id=user_guide_fix_7 score=3.6328 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:39] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:39] TRACE | [enriched-hybrid-llm]   RRF[0] idx=33 total=0.0333 (sem_rank=0 comp=0.0167 + bm25_rank=0 comp=0.0167)
[15:09:39] TRACE | [enriched-hybrid-llm]   RRF[1] idx=32 total=0.0315 (sem_rank=5 comp=0.0154 + bm25_rank=2 comp=0.0161)
[15:09:39] TRACE | [enriched-hybrid-llm]   RRF[2] idx=45 total=0.0307 (sem_rank=1 comp=0.0164 + bm25_rank=10 comp=0.0143)
[15:09:39] TRACE | [enriched-hybrid-llm]   RRF[3] idx=19 total=0.0302 (sem_rank=10 comp=0.0143 + bm25_rank=3 comp=0.0159)
[15:09:39] TRACE | [enriched-hybrid-llm]   RRF[4] idx=34 total=0.0292 (sem_rank=3 comp=0.0159 + bm25_rank=15 comp=0.0133)
[15:09:39] TRACE | [enriched-hybrid-llm]   RRF[5] idx=46 total=0.0288 (sem_rank=2 comp=0.0161 + bm25_rank=19 comp=0.0127)
[15:09:39] TRACE | [enriched-hybrid-llm]   RRF[6] idx=6 total=0.0287 (sem_rank=6 comp=0.0152 + bm25_rank=14 comp=0.0135)
[15:09:39] TRACE | [enriched-hybrid-llm]   RRF[7] idx=47 total=0.0282 (sem_rank=13 comp=0.0137 + bm25_rank=9 comp=0.0145)
[15:09:39] TRACE | [enriched-hybrid-llm]   RRF[8] idx=37 total=0.0272 (sem_rank=16 comp=0.0132 + bm25_rank=11 comp=0.0141)
[15:09:39] TRACE | [enriched-hybrid-llm]   RRF[9] idx=40 total=0.0269 (sem_rank=25 comp=0.0118 + bm25_rank=6 comp=0.0152)
[15:09:39] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:39] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0333 sem_rank=0 bm25_rank=0 dominant=balanced | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:09:39] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_4 doc_id=troubleshooting_guide rrf_score=0.0315 sem_rank=5 bm25_rank=2 dominant=bm25 | enriched: Timeout Errors, Error Messages, pooling optimization, Duration, Status, Implement connection, cloudflow workflows | CloudFlow, Sample  **Implement connection pooling optimization:** ```bash # Use PgBo...
[15:09:39] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=user_guide_fix_5 doc_id=user_guide rrf_score=0.0307 sem_rank=1 bm25_rank=10 dominant=semantic | enriched: Testing Schedules, Handling Robust, Attempt, Error Handling, Dead Letter, Letter Queue, Robust error | Fallback Actions Execute, CloudFlow, Queue  Save and activate **Testing Schedules:** Use the buil...
[15:09:39] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.0302 sem_rank=10 bm25_rank=3 dominant=bm25 | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:09:39] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0292 sem_rank=3 bm25_rank=15 dominant=semantic | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:09:39] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:39] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:39] TRACE | Query: My workflow fails on temporary network errors
[15:09:39] TRACE | Total key facts: 4
[15:09:39] TRACE | Found facts: 3/4
[15:09:39] TRACE |   FOUND[1] max_attempts: 3
[15:09:39] TRACE |   FOUND[2] initial_interval: 1000
[15:09:39] TRACE |   FOUND[3] max retries: 3
[15:09:39] TRACE | Missed facts: 1/4
[15:09:39] TRACE |   MISSED[1] backoff_type: exponential
[15:09:39] TRACE |     -> Found in chunk_id=user_guide_fix_7 (rank not in top-5)
[15:09:39] TRACE | === END FACT COVERAGE ===
[15:09:39] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:39] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: retry config
[15:09:39] DEBUG | [query-rewrite] Rewriting query: retry config
[15:09:39] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:39] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=811 timeout=5s
[15:09:39] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:39] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:39] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:40] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.93s
[15:09:40] DEBUG | [anthropic] USAGE: input_tokens=188 output_tokens=8
[15:09:40] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=44
[15:09:40] DEBUG | [anthropic] RESPONSE: retry configuration policy mechanism options
[15:09:40] DEBUG | [query-rewrite] SUCCESS in 0.930s: retry config → retry configuration policy mechanism options
[15:09:40] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: retry configuration policy mechanism options (took 0.930s)
[15:09:40] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:40] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:40] TRACE | [enriched-hybrid-llm]   SEM[0] idx=45 chunk_id=user_guide_fix_5 score=0.6345 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:40] TRACE | [enriched-hybrid-llm]   SEM[1] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.5945 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:09:40] TRACE | [enriched-hybrid-llm]   SEM[2] idx=46 chunk_id=user_guide_fix_6 score=0.5736 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:40] TRACE | [enriched-hybrid-llm]   SEM[3] idx=47 chunk_id=user_guide_fix_7 score=0.5607 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:40] TRACE | [enriched-hybrid-llm]   SEM[4] idx=25 chunk_id=deployment_guide_fix_6 score=0.5569 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:40] TRACE | [enriched-hybrid-llm]   SEM[5] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.5500 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:40] TRACE | [enriched-hybrid-llm]   SEM[6] idx=18 chunk_id=architecture_overview_fix_12 score=0.5490 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:40] TRACE | [enriched-hybrid-llm]   SEM[7] idx=15 chunk_id=architecture_overview_fix_9 score=0.5482 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:40] TRACE | [enriched-hybrid-llm]   SEM[8] idx=14 chunk_id=architecture_overview_fix_8 score=0.5474 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:40] TRACE | [enriched-hybrid-llm]   SEM[9] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.5430 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:40] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:40] TRACE | [enriched-hybrid-llm]   BM25[0] idx=9 chunk_id=architecture_overview_fix_3 score=7.5900 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:40] TRACE | [enriched-hybrid-llm]   BM25[1] idx=33 chunk_id=troubleshooting_guide_fix_5 score=5.9676 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:40] TRACE | [enriched-hybrid-llm]   BM25[2] idx=36 chunk_id=troubleshooting_guide_fix_8 score=3.2012 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:40] TRACE | [enriched-hybrid-llm]   BM25[3] idx=29 chunk_id=troubleshooting_guide_fix_1 score=3.0367 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:40] TRACE | [enriched-hybrid-llm]   BM25[4] idx=43 chunk_id=user_guide_fix_3 score=2.9673 | ``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...
[15:09:40] TRACE | [enriched-hybrid-llm]   BM25[5] idx=4 chunk_id=api_reference_fix_4 score=2.9097 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:40] TRACE | [enriched-hybrid-llm]   BM25[6] idx=45 chunk_id=user_guide_fix_5 score=2.8850 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:40] TRACE | [enriched-hybrid-llm]   BM25[7] idx=25 chunk_id=deployment_guide_fix_6 score=2.8002 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:40] TRACE | [enriched-hybrid-llm]   BM25[8] idx=20 chunk_id=deployment_guide_fix_1 score=2.4267 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:40] TRACE | [enriched-hybrid-llm]   BM25[9] idx=34 chunk_id=troubleshooting_guide_fix_6 score=2.3306 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:40] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:40] TRACE | [enriched-hybrid-llm]   RRF[0] idx=45 total=0.0318 (sem_rank=0 comp=0.0167 + bm25_rank=6 comp=0.0152)
[15:09:40] TRACE | [enriched-hybrid-llm]   RRF[1] idx=33 total=0.0318 (sem_rank=5 comp=0.0154 + bm25_rank=1 comp=0.0164)
[15:09:40] TRACE | [enriched-hybrid-llm]   RRF[2] idx=9 total=0.0310 (sem_rank=10 comp=0.0143 + bm25_rank=0 comp=0.0167)
[15:09:40] TRACE | [enriched-hybrid-llm]   RRF[3] idx=25 total=0.0306 (sem_rank=4 comp=0.0156 + bm25_rank=7 comp=0.0149)
[15:09:40] TRACE | [enriched-hybrid-llm]   RRF[4] idx=29 total=0.0300 (sem_rank=11 comp=0.0141 + bm25_rank=3 comp=0.0159)
[15:09:40] TRACE | [enriched-hybrid-llm]   RRF[5] idx=34 total=0.0272 (sem_rank=19 comp=0.0127 + bm25_rank=9 comp=0.0145)
[15:09:40] TRACE | [enriched-hybrid-llm]   RRF[6] idx=4 total=0.0271 (sem_rank=25 comp=0.0118 + bm25_rank=5 comp=0.0154)
[15:09:40] TRACE | [enriched-hybrid-llm]   RRF[7] idx=15 total=0.0270 (sem_rank=7 comp=0.0149 + bm25_rank=23 comp=0.0120)
[15:09:40] TRACE | [enriched-hybrid-llm]   RRF[8] idx=14 total=0.0269 (sem_rank=8 comp=0.0147 + bm25_rank=22 comp=0.0122)
[15:09:40] TRACE | [enriched-hybrid-llm]   RRF[9] idx=20 total=0.0269 (sem_rank=22 comp=0.0122 + bm25_rank=8 comp=0.0147)
[15:09:40] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:40] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=user_guide_fix_5 doc_id=user_guide rrf_score=0.0318 sem_rank=0 bm25_rank=6 dominant=semantic | enriched: Testing Schedules, Handling Robust, Attempt, Error Handling, Dead Letter, Letter Queue, Robust error | Fallback Actions Execute, CloudFlow, Queue  Save and activate **Testing Schedules:** Use the buil...
[15:09:40] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0318 sem_rank=5 bm25_rank=1 dominant=bm25 | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:09:40] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_3 doc_id=architecture_overview rrf_score=0.0310 sem_rank=10 bm25_rank=0 dominant=bm25 | enriched: leader election, Missed execution, Resource Allocation, Key Responsibilities, Reliability Features, Performance Targets, Scheduling Architecture | PostgreSQL, Leader Scheduler, Kafka, Redis, SMS  **Te...
[15:09:40] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_6 doc_id=deployment_guide rrf_score=0.0306 sem_rank=4 bm25_rank=7 dominant=semantic | enriched: API latency, Horizontal Pod, Redis Caching, Pod Autoscaler, Verify Service, Service Health, Recovery Time | RTO, RPO, PgBouncer, Redis Caching  **Verify Service Health**: ```bash kubectl get pods -n c...
[15:09:40] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_1 doc_id=troubleshooting_guide rrf_score=0.0300 sem_rank=11 bm25_rank=3 dominant=bm25 | enriched: Diagnosis Steps, Resolution, Forbidden Errors, Timeout errors, RBAC Policy, Performance Problems, Diagnosis | RBAC, UI, Identify Slow Queries  **Diagnosis:** ```bash # Check system time timedatectl st...
[15:09:40] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:40] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:40] TRACE | Query: retry config
[15:09:40] TRACE | Total key facts: 4
[15:09:40] TRACE | Found facts: 3/4
[15:09:40] TRACE |   FOUND[1] max_attempts: 3
[15:09:40] TRACE |   FOUND[2] initial_interval: 1000
[15:09:40] TRACE |   FOUND[3] max retries: 3
[15:09:40] TRACE | Missed facts: 1/4
[15:09:40] TRACE |   MISSED[1] backoff_type: exponential
[15:09:40] TRACE |     -> Found in chunk_id=user_guide_fix_7 (rank not in top-5)
[15:09:40] TRACE | === END FACT COVERAGE ===
[15:09:40] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:40] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: I want workflows to automatically retry on errors, what are the options?
[15:09:40] DEBUG | [query-rewrite] Rewriting query: I want workflows to automatically retry on errors, what are the options?
[15:09:40] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:40] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=871 timeout=5s
[15:09:40] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:40] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:40] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:41] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.87s
[15:09:41] DEBUG | [anthropic] USAGE: input_tokens=200 output_tokens=11
[15:09:41] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=72
[15:09:41] DEBUG | [anthropic] RESPONSE: workflow error handling automatic retry mechanisms configuration options
[15:09:41] DEBUG | [query-rewrite] SUCCESS in 0.870s: I want workflows to automatically retry on errors, what are the options? → workflow error handling automatic retry mechanisms configuration options
[15:09:41] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow error handling automatic retry mechanisms configuration options (took 0.870s)
[15:09:41] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:41] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:41] TRACE | [enriched-hybrid-llm]   SEM[0] idx=46 chunk_id=user_guide_fix_6 score=0.7171 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:41] TRACE | [enriched-hybrid-llm]   SEM[1] idx=45 chunk_id=user_guide_fix_5 score=0.6994 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:41] TRACE | [enriched-hybrid-llm]   SEM[2] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6639 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:41] TRACE | [enriched-hybrid-llm]   SEM[3] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6462 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:41] TRACE | [enriched-hybrid-llm]   SEM[4] idx=47 chunk_id=user_guide_fix_7 score=0.6404 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:41] TRACE | [enriched-hybrid-llm]   SEM[5] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.6257 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:41] TRACE | [enriched-hybrid-llm]   SEM[6] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6110 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:09:41] TRACE | [enriched-hybrid-llm]   SEM[7] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.6054 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:41] TRACE | [enriched-hybrid-llm]   SEM[8] idx=40 chunk_id=user_guide_fix_0 score=0.6039 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:41] TRACE | [enriched-hybrid-llm]   SEM[9] idx=32 chunk_id=troubleshooting_guide_fix_4 score=0.5976 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:41] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:41] TRACE | [enriched-hybrid-llm]   BM25[0] idx=33 chunk_id=troubleshooting_guide_fix_5 score=9.7917 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:41] TRACE | [enriched-hybrid-llm]   BM25[1] idx=45 chunk_id=user_guide_fix_5 score=8.2636 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:41] TRACE | [enriched-hybrid-llm]   BM25[2] idx=4 chunk_id=api_reference_fix_4 score=6.1682 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:41] TRACE | [enriched-hybrid-llm]   BM25[3] idx=34 chunk_id=troubleshooting_guide_fix_6 score=5.3768 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:41] TRACE | [enriched-hybrid-llm]   BM25[4] idx=36 chunk_id=troubleshooting_guide_fix_8 score=5.0248 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:41] TRACE | [enriched-hybrid-llm]   BM25[5] idx=9 chunk_id=architecture_overview_fix_3 score=4.1773 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:41] TRACE | [enriched-hybrid-llm]   BM25[6] idx=43 chunk_id=user_guide_fix_3 score=4.1122 | ``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...
[15:09:41] TRACE | [enriched-hybrid-llm]   BM25[7] idx=40 chunk_id=user_guide_fix_0 score=3.8603 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:41] TRACE | [enriched-hybrid-llm]   BM25[8] idx=7 chunk_id=architecture_overview_fix_1 score=3.7392 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:41] TRACE | [enriched-hybrid-llm]   BM25[9] idx=3 chunk_id=api_reference_fix_3 score=3.6647 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:09:41] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:41] TRACE | [enriched-hybrid-llm]   RRF[0] idx=33 total=0.0328 (sem_rank=2 comp=0.0161 + bm25_rank=0 comp=0.0167)
[15:09:41] TRACE | [enriched-hybrid-llm]   RRF[1] idx=45 total=0.0328 (sem_rank=1 comp=0.0164 + bm25_rank=1 comp=0.0164)
[15:09:41] TRACE | [enriched-hybrid-llm]   RRF[2] idx=34 total=0.0317 (sem_rank=3 comp=0.0159 + bm25_rank=3 comp=0.0159)
[15:09:41] TRACE | [enriched-hybrid-llm]   RRF[3] idx=47 total=0.0299 (sem_rank=4 comp=0.0156 + bm25_rank=10 comp=0.0143)
[15:09:41] TRACE | [enriched-hybrid-llm]   RRF[4] idx=40 total=0.0296 (sem_rank=8 comp=0.0147 + bm25_rank=7 comp=0.0149)
[15:09:41] TRACE | [enriched-hybrid-llm]   RRF[5] idx=46 total=0.0293 (sem_rank=0 comp=0.0167 + bm25_rank=19 comp=0.0127)
[15:09:41] TRACE | [enriched-hybrid-llm]   RRF[6] idx=4 total=0.0283 (sem_rank=22 comp=0.0122 + bm25_rank=2 comp=0.0161)
[15:09:41] TRACE | [enriched-hybrid-llm]   RRF[7] idx=36 total=0.0277 (sem_rank=23 comp=0.0120 + bm25_rank=4 comp=0.0156)
[15:09:41] TRACE | [enriched-hybrid-llm]   RRF[8] idx=43 total=0.0271 (sem_rank=24 comp=0.0119 + bm25_rank=6 comp=0.0152)
[15:09:41] TRACE | [enriched-hybrid-llm]   RRF[9] idx=29 total=0.0268 (sem_rank=7 comp=0.0149 + bm25_rank=24 comp=0.0119)
[15:09:41] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:41] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0328 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:09:41] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=user_guide_fix_5 doc_id=user_guide rrf_score=0.0328 sem_rank=1 bm25_rank=1 dominant=balanced | enriched: Testing Schedules, Handling Robust, Attempt, Error Handling, Dead Letter, Letter Queue, Robust error | Fallback Actions Execute, CloudFlow, Queue  Save and activate **Testing Schedules:** Use the buil...
[15:09:41] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0317 sem_rank=3 bm25_rank=3 dominant=balanced | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:09:41] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=user_guide_fix_7 doc_id=user_guide rrf_score=0.0299 sem_rank=4 bm25_rank=10 dominant=semantic | enriched: external API, API calls, Errors Gracefully, Store secrets, API keys, API, Gracefully | API, Validate Input Data Always, Log Add, Trigger  Handle Errors Gracefully Always implement error handling for e...
[15:09:41] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=user_guide_fix_0 doc_id=user_guide rrf_score=0.0296 sem_rank=8 bm25_rank=7 dominant=bm25 | enriched: Google Drive, workflow, User Guide, Visual Editor, Google, automate repetitive, repetitive tasks | CloudFlow, Slack, Contents 1, Workflow Creation](#workflow-creation, Common Workflow Patterns](#commo...
[15:09:41] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:41] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:41] TRACE | Query: I want workflows to automatically retry on errors, what are the options?
[15:09:41] TRACE | Total key facts: 4
[15:09:41] TRACE | Found facts: 4/4
[15:09:41] TRACE |   FOUND[1] max_attempts: 3
[15:09:41] TRACE |   FOUND[2] backoff_type: exponential
[15:09:41] TRACE |   FOUND[3] initial_interval: 1000
[15:09:41] TRACE |   FOUND[4] max retries: 3
[15:09:41] TRACE | === END FACT COVERAGE ===
[15:09:41] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:41] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why doesn't my workflow retry after failing?
[15:09:41] DEBUG | [query-rewrite] Rewriting query: Why doesn't my workflow retry after failing?
[15:09:41] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:41] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=843 timeout=5s
[15:09:41] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:41] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:41] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:42] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.99s
[15:09:42] DEBUG | [anthropic] USAGE: input_tokens=195 output_tokens=11
[15:09:42] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=65
[15:09:42] DEBUG | [anthropic] RESPONSE: workflow retry mechanism failure conditions error handling policy
[15:09:42] DEBUG | [query-rewrite] SUCCESS in 0.992s: Why doesn't my workflow retry after failing? → workflow retry mechanism failure conditions error handling policy
[15:09:42] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow retry mechanism failure conditions error handling policy (took 0.992s)
[15:09:42] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:42] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:42] TRACE | [enriched-hybrid-llm]   SEM[0] idx=45 chunk_id=user_guide_fix_5 score=0.6892 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:42] TRACE | [enriched-hybrid-llm]   SEM[1] idx=46 chunk_id=user_guide_fix_6 score=0.6870 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:42] TRACE | [enriched-hybrid-llm]   SEM[2] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6282 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:42] TRACE | [enriched-hybrid-llm]   SEM[3] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6221 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:42] TRACE | [enriched-hybrid-llm]   SEM[4] idx=47 chunk_id=user_guide_fix_7 score=0.6056 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:42] TRACE | [enriched-hybrid-llm]   SEM[5] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.5935 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:09:42] TRACE | [enriched-hybrid-llm]   SEM[6] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5923 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:42] TRACE | [enriched-hybrid-llm]   SEM[7] idx=29 chunk_id=troubleshooting_guide_fix_1 score=0.5821 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:42] TRACE | [enriched-hybrid-llm]   SEM[8] idx=8 chunk_id=architecture_overview_fix_2 score=0.5734 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:42] TRACE | [enriched-hybrid-llm]   SEM[9] idx=4 chunk_id=api_reference_fix_4 score=0.5653 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:42] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:42] TRACE | [enriched-hybrid-llm]   BM25[0] idx=9 chunk_id=architecture_overview_fix_3 score=11.7673 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:42] TRACE | [enriched-hybrid-llm]   BM25[1] idx=45 chunk_id=user_guide_fix_5 score=6.4343 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:42] TRACE | [enriched-hybrid-llm]   BM25[2] idx=4 chunk_id=api_reference_fix_4 score=6.1682 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:42] TRACE | [enriched-hybrid-llm]   BM25[3] idx=34 chunk_id=troubleshooting_guide_fix_6 score=5.3768 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:42] TRACE | [enriched-hybrid-llm]   BM25[4] idx=33 chunk_id=troubleshooting_guide_fix_5 score=5.3205 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:42] TRACE | [enriched-hybrid-llm]   BM25[5] idx=13 chunk_id=architecture_overview_fix_7 score=4.8896 | records: 500 - Session timeout: 30 seconds --- ## Message Queue Patterns ### Pub/Sub Pattern Used fo...
[15:09:42] TRACE | [enriched-hybrid-llm]   BM25[6] idx=16 chunk_id=architecture_overview_fix_10 score=4.0840 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:42] TRACE | [enriched-hybrid-llm]   BM25[7] idx=7 chunk_id=architecture_overview_fix_1 score=3.7392 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:42] TRACE | [enriched-hybrid-llm]   BM25[8] idx=3 chunk_id=api_reference_fix_3 score=3.6647 | **Endpoint:** `GET /pipelines/{pipeline_id}/executions` **Query Parameters:** - `status` (optional):...
[15:09:42] TRACE | [enriched-hybrid-llm]   BM25[9] idx=47 chunk_id=user_guide_fix_7 score=3.6328 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:42] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:42] TRACE | [enriched-hybrid-llm]   RRF[0] idx=45 total=0.0331 (sem_rank=0 comp=0.0167 + bm25_rank=1 comp=0.0164)
[15:09:42] TRACE | [enriched-hybrid-llm]   RRF[1] idx=33 total=0.0318 (sem_rank=2 comp=0.0161 + bm25_rank=4 comp=0.0156)
[15:09:42] TRACE | [enriched-hybrid-llm]   RRF[2] idx=34 total=0.0317 (sem_rank=3 comp=0.0159 + bm25_rank=3 comp=0.0159)
[15:09:42] TRACE | [enriched-hybrid-llm]   RRF[3] idx=4 total=0.0306 (sem_rank=9 comp=0.0145 + bm25_rank=2 comp=0.0161)
[15:09:42] TRACE | [enriched-hybrid-llm]   RRF[4] idx=47 total=0.0301 (sem_rank=4 comp=0.0156 + bm25_rank=9 comp=0.0145)
[15:09:42] TRACE | [enriched-hybrid-llm]   RRF[5] idx=46 total=0.0296 (sem_rank=1 comp=0.0164 + bm25_rank=16 comp=0.0132)
[15:09:42] TRACE | [enriched-hybrid-llm]   RRF[6] idx=13 total=0.0289 (sem_rank=14 comp=0.0135 + bm25_rank=5 comp=0.0154)
[15:09:42] TRACE | [enriched-hybrid-llm]   RRF[7] idx=29 total=0.0288 (sem_rank=7 comp=0.0149 + bm25_rank=12 comp=0.0139)
[15:09:42] TRACE | [enriched-hybrid-llm]   RRF[8] idx=18 total=0.0284 (sem_rank=10 comp=0.0143 + bm25_rank=11 comp=0.0141)
[15:09:42] TRACE | [enriched-hybrid-llm]   RRF[9] idx=3 total=0.0275 (sem_rank=18 comp=0.0128 + bm25_rank=8 comp=0.0147)
[15:09:42] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:42] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=user_guide_fix_5 doc_id=user_guide rrf_score=0.0331 sem_rank=0 bm25_rank=1 dominant=semantic | enriched: Testing Schedules, Handling Robust, Attempt, Error Handling, Dead Letter, Letter Queue, Robust error | Fallback Actions Execute, CloudFlow, Queue  Save and activate **Testing Schedules:** Use the buil...
[15:09:42] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0318 sem_rank=2 bm25_rank=4 dominant=semantic | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:09:42] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0317 sem_rank=3 bm25_rank=3 dominant=balanced | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:09:42] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=api_reference_fix_4 doc_id=api_reference rrf_score=0.0306 sem_rank=9 bm25_rank=2 dominant=bm25 | enriched: malformed JSON, requested resource, Bad Gateway, Error Codes, HTTP Status, Response Format, Server Error | Status Codes, Invalid, Description, Common Causes, Forbidden  ### Error Response Format ```js...
[15:09:42] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=user_guide_fix_7 doc_id=user_guide rrf_score=0.0301 sem_rank=4 bm25_rank=9 dominant=semantic | enriched: external API, API calls, Errors Gracefully, Store secrets, API keys, API, Gracefully | API, Validate Input Data Always, Log Add, Trigger  Handle Errors Gracefully Always implement error handling for e...
[15:09:42] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:42] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:42] TRACE | Query: Why doesn't my workflow retry after failing?
[15:09:42] TRACE | Total key facts: 4
[15:09:42] TRACE | Found facts: 4/4
[15:09:42] TRACE |   FOUND[1] max_attempts: 3
[15:09:42] TRACE |   FOUND[2] backoff_type: exponential
[15:09:42] TRACE |   FOUND[3] initial_interval: 1000
[15:09:42] TRACE |   FOUND[4] max retries: 3
[15:09:42] TRACE | === END FACT COVERAGE ===
[15:09:42] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:42] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What Helm chart repository should I use for deployment?
[15:09:42] DEBUG | [query-rewrite] Rewriting query: What Helm chart repository should I use for deployment?
[15:09:42] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:42] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=854 timeout=5s
[15:09:42] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:42] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:42] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:43] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.82s
[15:09:43] DEBUG | [anthropic] USAGE: input_tokens=197 output_tokens=9
[15:09:43] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=54
[15:09:43] DEBUG | [anthropic] RESPONSE: helm chart repository deployment configuration options
[15:09:43] DEBUG | [query-rewrite] SUCCESS in 0.819s: What Helm chart repository should I use for deployment? → helm chart repository deployment configuration options
[15:09:43] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: helm chart repository deployment configuration options (took 0.819s)
[15:09:43] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:43] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:43] TRACE | [enriched-hybrid-llm]   SEM[0] idx=19 chunk_id=deployment_guide_fix_0 score=0.6118 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:43] TRACE | [enriched-hybrid-llm]   SEM[1] idx=24 chunk_id=deployment_guide_fix_5 score=0.6096 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:09:43] TRACE | [enriched-hybrid-llm]   SEM[2] idx=22 chunk_id=deployment_guide_fix_3 score=0.5976 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:43] TRACE | [enriched-hybrid-llm]   SEM[3] idx=20 chunk_id=deployment_guide_fix_1 score=0.5883 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:43] TRACE | [enriched-hybrid-llm]   SEM[4] idx=21 chunk_id=deployment_guide_fix_2 score=0.5775 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:43] TRACE | [enriched-hybrid-llm]   SEM[5] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.5641 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:43] TRACE | [enriched-hybrid-llm]   SEM[6] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.5566 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:09:43] TRACE | [enriched-hybrid-llm]   SEM[7] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5459 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:43] TRACE | [enriched-hybrid-llm]   SEM[8] idx=48 chunk_id=user_guide_fix_8 score=0.5438 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:43] TRACE | [enriched-hybrid-llm]   SEM[9] idx=6 chunk_id=architecture_overview_fix_0 score=0.5430 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:43] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:43] TRACE | [enriched-hybrid-llm]   BM25[0] idx=20 chunk_id=deployment_guide_fix_1 score=11.7691 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:43] TRACE | [enriched-hybrid-llm]   BM25[1] idx=22 chunk_id=deployment_guide_fix_3 score=6.7210 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:43] TRACE | [enriched-hybrid-llm]   BM25[2] idx=21 chunk_id=deployment_guide_fix_2 score=6.4887 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:43] TRACE | [enriched-hybrid-llm]   BM25[3] idx=26 chunk_id=deployment_guide_fix_7 score=5.6292 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:43] TRACE | [enriched-hybrid-llm]   BM25[4] idx=19 chunk_id=deployment_guide_fix_0 score=4.2311 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:43] TRACE | [enriched-hybrid-llm]   BM25[5] idx=25 chunk_id=deployment_guide_fix_6 score=4.0891 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:43] TRACE | [enriched-hybrid-llm]   BM25[6] idx=43 chunk_id=user_guide_fix_3 score=2.9673 | ``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...
[15:09:43] TRACE | [enriched-hybrid-llm]   BM25[7] idx=36 chunk_id=troubleshooting_guide_fix_8 score=2.9589 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:43] TRACE | [enriched-hybrid-llm]   BM25[8] idx=33 chunk_id=troubleshooting_guide_fix_5 score=2.5348 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:43] TRACE | [enriched-hybrid-llm]   BM25[9] idx=24 chunk_id=deployment_guide_fix_5 score=2.0288 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:09:43] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:43] TRACE | [enriched-hybrid-llm]   RRF[0] idx=20 total=0.0325 (sem_rank=3 comp=0.0159 + bm25_rank=0 comp=0.0167)
[15:09:43] TRACE | [enriched-hybrid-llm]   RRF[1] idx=22 total=0.0325 (sem_rank=2 comp=0.0161 + bm25_rank=1 comp=0.0164)
[15:09:43] TRACE | [enriched-hybrid-llm]   RRF[2] idx=19 total=0.0323 (sem_rank=0 comp=0.0167 + bm25_rank=4 comp=0.0156)
[15:09:43] TRACE | [enriched-hybrid-llm]   RRF[3] idx=21 total=0.0318 (sem_rank=4 comp=0.0156 + bm25_rank=2 comp=0.0161)
[15:09:43] TRACE | [enriched-hybrid-llm]   RRF[4] idx=24 total=0.0309 (sem_rank=1 comp=0.0164 + bm25_rank=9 comp=0.0145)
[15:09:43] TRACE | [enriched-hybrid-llm]   RRF[5] idx=36 total=0.0303 (sem_rank=5 comp=0.0154 + bm25_rank=7 comp=0.0149)
[15:09:43] TRACE | [enriched-hybrid-llm]   RRF[6] idx=26 total=0.0294 (sem_rank=14 comp=0.0135 + bm25_rank=3 comp=0.0159)
[15:09:43] TRACE | [enriched-hybrid-llm]   RRF[7] idx=25 total=0.0291 (sem_rank=13 comp=0.0137 + bm25_rank=5 comp=0.0154)
[15:09:43] TRACE | [enriched-hybrid-llm]   RRF[8] idx=33 total=0.0280 (sem_rank=15 comp=0.0133 + bm25_rank=8 comp=0.0147)
[15:09:43] TRACE | [enriched-hybrid-llm]   RRF[9] idx=5 total=0.0266 (sem_rank=11 comp=0.0141 + bm25_rank=20 comp=0.0125)
[15:09:43] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:43] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.0325 sem_rank=3 bm25_rank=0 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:09:43] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.0325 sem_rank=2 bm25_rank=1 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:43] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.0323 sem_rank=0 bm25_rank=4 dominant=semantic | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:09:43] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_2 doc_id=deployment_guide rrf_score=0.0318 sem_rank=4 bm25_rank=2 dominant=bm25 | enriched: Test health, RESTARTS AGE, curl http, Database Configuration, Verification Verify, Expected output, Test readiness | Helm, NAME, 1/1 Running, CloudFlow  - secretName: cloudflow-tls hosts: - api.cloudf...
[15:09:43] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_5 doc_id=deployment_guide rrf_score=0.0309 sem_rank=1 bm25_rank=9 dominant=semantic | enriched: Disaster Recovery, Recovery Procedure, Backup Strategy, Query logs, CloudWatch Insights, Velero Install, Install Velero | CloudWatch Insights, WAL, Backup, Automated Backup  Configure log aggregation:...
[15:09:43] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:43] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:43] TRACE | Query: What Helm chart repository should I use for deployment?
[15:09:43] TRACE | Total key facts: 1
[15:09:43] TRACE | Found facts: 1/1
[15:09:43] TRACE |   FOUND[1] helm repo add cloudflow https://charts.cloudflow.io
[15:09:43] TRACE | === END FACT COVERAGE ===
[15:09:43] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:43] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Where is the CloudFlow Helm chart hosted?
[15:09:43] DEBUG | [query-rewrite] Rewriting query: Where is the CloudFlow Helm chart hosted?
[15:09:43] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:43] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=840 timeout=5s
[15:09:43] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:43] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:43] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:44] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.86s
[15:09:44] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=10
[15:09:44] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=48
[15:09:44] DEBUG | [anthropic] RESPONSE: cloudflow helm chart repository hosting location
[15:09:44] DEBUG | [query-rewrite] SUCCESS in 0.859s: Where is the CloudFlow Helm chart hosted? → cloudflow helm chart repository hosting location
[15:09:44] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: cloudflow helm chart repository hosting location (took 0.859s)
[15:09:44] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:44] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:44] TRACE | [enriched-hybrid-llm]   SEM[0] idx=19 chunk_id=deployment_guide_fix_0 score=0.6665 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:44] TRACE | [enriched-hybrid-llm]   SEM[1] idx=21 chunk_id=deployment_guide_fix_2 score=0.6633 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:44] TRACE | [enriched-hybrid-llm]   SEM[2] idx=20 chunk_id=deployment_guide_fix_1 score=0.6393 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:44] TRACE | [enriched-hybrid-llm]   SEM[3] idx=22 chunk_id=deployment_guide_fix_3 score=0.6353 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:44] TRACE | [enriched-hybrid-llm]   SEM[4] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.6310 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:44] TRACE | [enriched-hybrid-llm]   SEM[5] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.6284 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:44] TRACE | [enriched-hybrid-llm]   SEM[6] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.6203 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:09:44] TRACE | [enriched-hybrid-llm]   SEM[7] idx=24 chunk_id=deployment_guide_fix_5 score=0.6198 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:09:44] TRACE | [enriched-hybrid-llm]   SEM[8] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6174 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:44] TRACE | [enriched-hybrid-llm]   SEM[9] idx=25 chunk_id=deployment_guide_fix_6 score=0.6142 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:44] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:44] TRACE | [enriched-hybrid-llm]   BM25[0] idx=20 chunk_id=deployment_guide_fix_1 score=8.8894 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:44] TRACE | [enriched-hybrid-llm]   BM25[1] idx=22 chunk_id=deployment_guide_fix_3 score=5.0587 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:44] TRACE | [enriched-hybrid-llm]   BM25[2] idx=26 chunk_id=deployment_guide_fix_7 score=4.7158 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:44] TRACE | [enriched-hybrid-llm]   BM25[3] idx=21 chunk_id=deployment_guide_fix_2 score=3.9176 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:44] TRACE | [enriched-hybrid-llm]   BM25[4] idx=24 chunk_id=deployment_guide_fix_5 score=3.5463 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:09:44] TRACE | [enriched-hybrid-llm]   BM25[5] idx=36 chunk_id=troubleshooting_guide_fix_8 score=1.8866 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:44] TRACE | [enriched-hybrid-llm]   BM25[6] idx=32 chunk_id=troubleshooting_guide_fix_4 score=1.8777 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:44] TRACE | [enriched-hybrid-llm]   BM25[7] idx=31 chunk_id=troubleshooting_guide_fix_3 score=1.8740 | Workflow Context Accumulation** Large workflow executions may accumulate state in memory. **Solution...
[15:09:44] TRACE | [enriched-hybrid-llm]   BM25[8] idx=37 chunk_id=troubleshooting_guide_fix_9 score=1.8707 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:09:44] TRACE | [enriched-hybrid-llm]   BM25[9] idx=29 chunk_id=troubleshooting_guide_fix_1 score=1.8094 | **Diagnosis:** ```bash # Check system time timedatectl status # Compare with NTP server ntpdate -q p...
[15:09:44] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:44] TRACE | [enriched-hybrid-llm]   RRF[0] idx=20 total=0.0328 (sem_rank=2 comp=0.0161 + bm25_rank=0 comp=0.0167)
[15:09:44] TRACE | [enriched-hybrid-llm]   RRF[1] idx=21 total=0.0323 (sem_rank=1 comp=0.0164 + bm25_rank=3 comp=0.0159)
[15:09:44] TRACE | [enriched-hybrid-llm]   RRF[2] idx=22 total=0.0323 (sem_rank=3 comp=0.0159 + bm25_rank=1 comp=0.0164)
[15:09:44] TRACE | [enriched-hybrid-llm]   RRF[3] idx=36 total=0.0308 (sem_rank=5 comp=0.0154 + bm25_rank=5 comp=0.0154)
[15:09:44] TRACE | [enriched-hybrid-llm]   RRF[4] idx=24 total=0.0306 (sem_rank=7 comp=0.0149 + bm25_rank=4 comp=0.0156)
[15:09:44] TRACE | [enriched-hybrid-llm]   RRF[5] idx=37 total=0.0299 (sem_rank=6 comp=0.0152 + bm25_rank=8 comp=0.0147)
[15:09:44] TRACE | [enriched-hybrid-llm]   RRF[6] idx=26 total=0.0295 (sem_rank=15 comp=0.0133 + bm25_rank=2 comp=0.0161)
[15:09:44] TRACE | [enriched-hybrid-llm]   RRF[7] idx=19 total=0.0292 (sem_rank=0 comp=0.0167 + bm25_rank=20 comp=0.0125)
[15:09:44] TRACE | [enriched-hybrid-llm]   RRF[8] idx=32 total=0.0289 (sem_rank=13 comp=0.0137 + bm25_rank=6 comp=0.0152)
[15:09:44] TRACE | [enriched-hybrid-llm]   RRF[9] idx=39 total=0.0288 (sem_rank=4 comp=0.0156 + bm25_rank=16 comp=0.0132)
[15:09:44] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:44] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.0328 sem_rank=2 bm25_rank=0 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:09:44] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_2 doc_id=deployment_guide rrf_score=0.0323 sem_rank=1 bm25_rank=3 dominant=semantic | enriched: Test health, RESTARTS AGE, curl http, Database Configuration, Verification Verify, Expected output, Test readiness | Helm, NAME, 1/1 Running, CloudFlow  - secretName: cloudflow-tls hosts: - api.cloudf...
[15:09:44] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.0323 sem_rank=3 bm25_rank=1 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:44] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.0308 sem_rank=5 bm25_rank=5 dominant=balanced | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:09:44] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_5 doc_id=deployment_guide rrf_score=0.0306 sem_rank=7 bm25_rank=4 dominant=bm25 | enriched: Disaster Recovery, Recovery Procedure, Backup Strategy, Query logs, CloudWatch Insights, Velero Install, Install Velero | CloudWatch Insights, WAL, Backup, Automated Backup  Configure log aggregation:...
[15:09:44] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:44] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:44] TRACE | Query: Where is the CloudFlow Helm chart hosted?
[15:09:44] TRACE | Total key facts: 1
[15:09:44] TRACE | Found facts: 1/1
[15:09:44] TRACE |   FOUND[1] helm repo add cloudflow https://charts.cloudflow.io
[15:09:44] TRACE | === END FACT COVERAGE ===
[15:09:44] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:44] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: helm repo add is failing, what's the correct URL?
[15:09:44] DEBUG | [query-rewrite] Rewriting query: helm repo add is failing, what's the correct URL?
[15:09:44] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:44] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=848 timeout=5s
[15:09:44] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:44] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:44] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:45] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.09s
[15:09:45] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=12
[15:09:45] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=74
[15:09:45] DEBUG | [anthropic] RESPONSE: helm chart repository URL format validation and configuration requirements
[15:09:45] DEBUG | [query-rewrite] SUCCESS in 1.094s: helm repo add is failing, what's the correct URL? → helm chart repository URL format validation and configuration requirements
[15:09:45] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: helm chart repository URL format validation and configuration requirements (took 1.094s)
[15:09:45] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:45] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:45] TRACE | [enriched-hybrid-llm]   SEM[0] idx=20 chunk_id=deployment_guide_fix_1 score=0.6022 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:45] TRACE | [enriched-hybrid-llm]   SEM[1] idx=21 chunk_id=deployment_guide_fix_2 score=0.5973 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:45] TRACE | [enriched-hybrid-llm]   SEM[2] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.5966 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:45] TRACE | [enriched-hybrid-llm]   SEM[3] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5952 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:45] TRACE | [enriched-hybrid-llm]   SEM[4] idx=48 chunk_id=user_guide_fix_8 score=0.5781 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:45] TRACE | [enriched-hybrid-llm]   SEM[5] idx=47 chunk_id=user_guide_fix_7 score=0.5775 | Handle Errors Gracefully Always implement error handling for external API calls and database operati...
[15:09:45] TRACE | [enriched-hybrid-llm]   SEM[6] idx=24 chunk_id=deployment_guide_fix_5 score=0.5768 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:09:45] TRACE | [enriched-hybrid-llm]   SEM[7] idx=7 chunk_id=architecture_overview_fix_1 score=0.5705 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:45] TRACE | [enriched-hybrid-llm]   SEM[8] idx=19 chunk_id=deployment_guide_fix_0 score=0.5689 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:45] TRACE | [enriched-hybrid-llm]   SEM[9] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.5682 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:45] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:45] TRACE | [enriched-hybrid-llm]   BM25[0] idx=20 chunk_id=deployment_guide_fix_1 score=10.6502 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:45] TRACE | [enriched-hybrid-llm]   BM25[1] idx=19 chunk_id=deployment_guide_fix_0 score=8.1585 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:45] TRACE | [enriched-hybrid-llm]   BM25[2] idx=22 chunk_id=deployment_guide_fix_3 score=6.1877 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:45] TRACE | [enriched-hybrid-llm]   BM25[3] idx=7 chunk_id=architecture_overview_fix_1 score=5.9977 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:45] TRACE | [enriched-hybrid-llm]   BM25[4] idx=43 chunk_id=user_guide_fix_3 score=4.4967 | ``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...
[15:09:45] TRACE | [enriched-hybrid-llm]   BM25[5] idx=4 chunk_id=api_reference_fix_4 score=4.4722 | ### Error Response Format ```json { "error": { "code": "invalid_parameter", "message": "The 'limit' ...
[15:09:45] TRACE | [enriched-hybrid-llm]   BM25[6] idx=40 chunk_id=user_guide_fix_0 score=4.4020 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:45] TRACE | [enriched-hybrid-llm]   BM25[7] idx=21 chunk_id=deployment_guide_fix_2 score=4.3683 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:45] TRACE | [enriched-hybrid-llm]   BM25[8] idx=9 chunk_id=architecture_overview_fix_3 score=4.2085 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:45] TRACE | [enriched-hybrid-llm]   BM25[9] idx=42 chunk_id=user_guide_fix_2 score=3.9769 | ### HTTP Requests Make HTTP requests to any API endpoint: **Configuration:** - **Method**: GET, POST...
[15:09:45] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:45] TRACE | [enriched-hybrid-llm]   RRF[0] idx=20 total=0.0333 (sem_rank=0 comp=0.0167 + bm25_rank=0 comp=0.0167)
[15:09:45] TRACE | [enriched-hybrid-llm]   RRF[1] idx=21 total=0.0313 (sem_rank=1 comp=0.0164 + bm25_rank=7 comp=0.0149)
[15:09:45] TRACE | [enriched-hybrid-llm]   RRF[2] idx=19 total=0.0311 (sem_rank=8 comp=0.0147 + bm25_rank=1 comp=0.0164)
[15:09:45] TRACE | [enriched-hybrid-llm]   RRF[3] idx=7 total=0.0308 (sem_rank=7 comp=0.0149 + bm25_rank=3 comp=0.0159)
[15:09:45] TRACE | [enriched-hybrid-llm]   RRF[4] idx=22 total=0.0295 (sem_rank=15 comp=0.0133 + bm25_rank=2 comp=0.0161)
[15:09:45] TRACE | [enriched-hybrid-llm]   RRF[5] idx=47 total=0.0293 (sem_rank=5 comp=0.0154 + bm25_rank=12 comp=0.0139)
[15:09:45] TRACE | [enriched-hybrid-llm]   RRF[6] idx=3 total=0.0284 (sem_rank=10 comp=0.0143 + bm25_rank=11 comp=0.0141)
[15:09:45] TRACE | [enriched-hybrid-llm]   RRF[7] idx=34 total=0.0283 (sem_rank=2 comp=0.0161 + bm25_rank=22 comp=0.0122)
[15:09:45] TRACE | [enriched-hybrid-llm]   RRF[8] idx=24 total=0.0283 (sem_rank=6 comp=0.0152 + bm25_rank=16 comp=0.0132)
[15:09:45] TRACE | [enriched-hybrid-llm]   RRF[9] idx=4 total=0.0280 (sem_rank=19 comp=0.0127 + bm25_rank=5 comp=0.0154)
[15:09:45] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:45] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.0333 sem_rank=0 bm25_rank=0 dominant=balanced | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:09:45] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_2 doc_id=deployment_guide rrf_score=0.0313 sem_rank=1 bm25_rank=7 dominant=semantic | enriched: Test health, RESTARTS AGE, curl http, Database Configuration, Verification Verify, Expected output, Test readiness | Helm, NAME, 1/1 Running, CloudFlow  - secretName: cloudflow-tls hosts: - api.cloudf...
[15:09:45] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.0311 sem_rank=8 bm25_rank=1 dominant=bm25 | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:09:45] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_1 doc_id=architecture_overview rrf_score=0.0308 sem_rank=7 bm25_rank=3 dominant=bm25 | enriched: Critical Endpoints, Auth Service, JSON Schema, Resource Allocation, Performance Targets, Rate limiting, Key Responsibilities | Express.js, CPU, JSON Schema - Routing, Generate, RS256  **Technology**: ...
[15:09:45] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.0295 sem_rank=15 bm25_rank=2 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:45] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:45] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:45] TRACE | Query: helm repo add is failing, what's the correct URL?
[15:09:45] TRACE | Total key facts: 1
[15:09:45] TRACE | Found facts: 1/1
[15:09:45] TRACE |   FOUND[1] helm repo add cloudflow https://charts.cloudflow.io
[15:09:45] TRACE | === END FACT COVERAGE ===
[15:09:45] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:45] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: helm repo
[15:09:45] DEBUG | [query-rewrite] Rewriting query: helm repo
[15:09:45] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:45] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=808 timeout=5s
[15:09:45] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:45] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:45] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:46] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.97s
[15:09:46] DEBUG | [anthropic] USAGE: input_tokens=188 output_tokens=8
[15:09:46] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=49
[15:09:46] DEBUG | [anthropic] RESPONSE: helm repository management commands configuration
[15:09:46] DEBUG | [query-rewrite] SUCCESS in 0.971s: helm repo → helm repository management commands configuration
[15:09:46] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: helm repository management commands configuration (took 0.971s)
[15:09:46] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:46] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:46] TRACE | [enriched-hybrid-llm]   SEM[0] idx=24 chunk_id=deployment_guide_fix_5 score=0.5729 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:09:46] TRACE | [enriched-hybrid-llm]   SEM[1] idx=20 chunk_id=deployment_guide_fix_1 score=0.5680 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:46] TRACE | [enriched-hybrid-llm]   SEM[2] idx=22 chunk_id=deployment_guide_fix_3 score=0.5665 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:46] TRACE | [enriched-hybrid-llm]   SEM[3] idx=19 chunk_id=deployment_guide_fix_0 score=0.5571 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:46] TRACE | [enriched-hybrid-llm]   SEM[4] idx=21 chunk_id=deployment_guide_fix_2 score=0.5442 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:46] TRACE | [enriched-hybrid-llm]   SEM[5] idx=26 chunk_id=deployment_guide_fix_7 score=0.5309 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:46] TRACE | [enriched-hybrid-llm]   SEM[6] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.5262 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:46] TRACE | [enriched-hybrid-llm]   SEM[7] idx=48 chunk_id=user_guide_fix_8 score=0.5253 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:46] TRACE | [enriched-hybrid-llm]   SEM[8] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.5225 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:46] TRACE | [enriched-hybrid-llm]   SEM[9] idx=25 chunk_id=deployment_guide_fix_6 score=0.5107 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:46] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:46] TRACE | [enriched-hybrid-llm]   BM25[0] idx=26 chunk_id=deployment_guide_fix_7 score=7.8786 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:46] TRACE | [enriched-hybrid-llm]   BM25[1] idx=20 chunk_id=deployment_guide_fix_1 score=6.6021 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:46] TRACE | [enriched-hybrid-llm]   BM25[2] idx=22 chunk_id=deployment_guide_fix_3 score=5.4337 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:46] TRACE | [enriched-hybrid-llm]   BM25[3] idx=21 chunk_id=deployment_guide_fix_2 score=4.3683 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:46] TRACE | [enriched-hybrid-llm]   BM25[4] idx=19 chunk_id=deployment_guide_fix_0 score=4.0782 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:46] TRACE | [enriched-hybrid-llm]   BM25[5] idx=37 chunk_id=troubleshooting_guide_fix_9 score=2.8002 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:09:46] TRACE | [enriched-hybrid-llm]   BM25[6] idx=33 chunk_id=troubleshooting_guide_fix_5 score=2.5348 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:46] TRACE | [enriched-hybrid-llm]   BM25[7] idx=24 chunk_id=deployment_guide_fix_5 score=2.0288 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:09:46] TRACE | [enriched-hybrid-llm]   BM25[8] idx=10 chunk_id=architecture_overview_fix_4 score=1.7279 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:46] TRACE | [enriched-hybrid-llm]   BM25[9] idx=44 chunk_id=user_guide_fix_4 score=1.6841 | ### Cron Syntax Use standard cron expressions to define schedules: ``` * * * * * ┬ ┬ ┬ ┬ ┬ │ │ │ │ │...
[15:09:46] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:46] TRACE | [enriched-hybrid-llm]   RRF[0] idx=20 total=0.0328 (sem_rank=1 comp=0.0164 + bm25_rank=1 comp=0.0164)
[15:09:46] TRACE | [enriched-hybrid-llm]   RRF[1] idx=22 total=0.0323 (sem_rank=2 comp=0.0161 + bm25_rank=2 comp=0.0161)
[15:09:46] TRACE | [enriched-hybrid-llm]   RRF[2] idx=26 total=0.0321 (sem_rank=5 comp=0.0154 + bm25_rank=0 comp=0.0167)
[15:09:46] TRACE | [enriched-hybrid-llm]   RRF[3] idx=24 total=0.0316 (sem_rank=0 comp=0.0167 + bm25_rank=7 comp=0.0149)
[15:09:46] TRACE | [enriched-hybrid-llm]   RRF[4] idx=19 total=0.0315 (sem_rank=3 comp=0.0159 + bm25_rank=4 comp=0.0156)
[15:09:46] TRACE | [enriched-hybrid-llm]   RRF[5] idx=21 total=0.0315 (sem_rank=4 comp=0.0156 + bm25_rank=3 comp=0.0159)
[15:09:46] TRACE | [enriched-hybrid-llm]   RRF[6] idx=37 total=0.0297 (sem_rank=10 comp=0.0143 + bm25_rank=5 comp=0.0154)
[15:09:46] TRACE | [enriched-hybrid-llm]   RRF[7] idx=33 total=0.0287 (sem_rank=14 comp=0.0135 + bm25_rank=6 comp=0.0152)
[15:09:46] TRACE | [enriched-hybrid-llm]   RRF[8] idx=36 total=0.0284 (sem_rank=8 comp=0.0147 + bm25_rank=13 comp=0.0137)
[15:09:46] TRACE | [enriched-hybrid-llm]   RRF[9] idx=15 total=0.0272 (sem_rank=13 comp=0.0137 + bm25_rank=14 comp=0.0135)
[15:09:46] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:46] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.0328 sem_rank=1 bm25_rank=1 dominant=balanced | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:09:46] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.0323 sem_rank=2 bm25_rank=2 dominant=balanced | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:46] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_7 doc_id=deployment_guide rrf_score=0.0321 sem_rank=5 bm25_rank=0 dominant=bm25 | enriched: TCP port, SHOW POOLS, External Secrets, Secrets Operator, kubectl top, Egress ingress, bash kubectl | Install External Secrets Operator, EOF, Create SecretStore, external-secrets.io/v1beta1  podSelect...
[15:09:46] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=deployment_guide_fix_5 doc_id=deployment_guide rrf_score=0.0316 sem_rank=0 bm25_rank=7 dominant=semantic | enriched: Disaster Recovery, Recovery Procedure, Backup Strategy, Query logs, CloudWatch Insights, Velero Install, Install Velero | CloudWatch Insights, WAL, Backup, Automated Backup  Configure log aggregation:...
[15:09:46] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.0315 sem_rank=3 bm25_rank=4 dominant=semantic | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:09:46] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:46] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:46] TRACE | Query: helm repo
[15:09:46] TRACE | Total key facts: 1
[15:09:46] TRACE | Found facts: 1/1
[15:09:46] TRACE |   FOUND[1] helm repo add cloudflow https://charts.cloudflow.io
[15:09:46] TRACE | === END FACT COVERAGE ===
[15:09:46] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:46] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Setting up deployment pipeline, which Helm repository has CloudFlow charts?
[15:09:46] DEBUG | [query-rewrite] Rewriting query: Setting up deployment pipeline, which Helm repository has CloudFlow charts?
[15:09:46] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:46] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=874 timeout=5s
[15:09:46] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:46] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:46] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:47] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.88s
[15:09:47] DEBUG | [anthropic] USAGE: input_tokens=200 output_tokens=14
[15:09:47] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=67
[15:09:47] DEBUG | [anthropic] RESPONSE: "CloudFlow Helm chart repository deployment pipeline configuration"
[15:09:47] DEBUG | [query-rewrite] SUCCESS in 0.877s: Setting up deployment pipeline, which Helm repository has CloudFlow charts? → "CloudFlow Helm chart repository deployment pipeline configuration"
[15:09:47] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: "CloudFlow Helm chart repository deployment pipeline configuration" (took 0.877s)
[15:09:47] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:47] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[0] idx=19 chunk_id=deployment_guide_fix_0 score=0.6995 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[1] idx=21 chunk_id=deployment_guide_fix_2 score=0.6850 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[2] idx=0 chunk_id=api_reference_fix_0 score=0.6665 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[3] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.6649 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[4] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.6621 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[5] idx=20 chunk_id=deployment_guide_fix_1 score=0.6606 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[6] idx=22 chunk_id=deployment_guide_fix_3 score=0.6591 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[7] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6578 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[8] idx=6 chunk_id=architecture_overview_fix_0 score=0.6562 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[9] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6499 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:47] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[0] idx=20 chunk_id=deployment_guide_fix_1 score=9.3425 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[1] idx=26 chunk_id=deployment_guide_fix_7 score=5.6292 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[2] idx=22 chunk_id=deployment_guide_fix_3 score=5.0531 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[3] idx=21 chunk_id=deployment_guide_fix_2 score=4.5021 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[4] idx=2 chunk_id=api_reference_fix_2 score=3.1472 | **Endpoint:** `POST /workflows` **Request Body:** ```json { "name": "Email Campaign Automation", "de...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[5] idx=0 chunk_id=api_reference_fix_0 score=2.8171 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[6] idx=19 chunk_id=deployment_guide_fix_0 score=2.5711 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[7] idx=24 chunk_id=deployment_guide_fix_5 score=2.0288 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[8] idx=11 chunk_id=architecture_overview_fix_5 score=1.3109 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[9] idx=30 chunk_id=troubleshooting_guide_fix_2 score=1.3093 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:47] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[0] idx=21 total=0.0323 (sem_rank=1 comp=0.0164 + bm25_rank=3 comp=0.0159)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[1] idx=20 total=0.0321 (sem_rank=5 comp=0.0154 + bm25_rank=0 comp=0.0167)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[2] idx=19 total=0.0318 (sem_rank=0 comp=0.0167 + bm25_rank=6 comp=0.0152)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[3] idx=0 total=0.0315 (sem_rank=2 comp=0.0161 + bm25_rank=5 comp=0.0154)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[4] idx=22 total=0.0313 (sem_rank=6 comp=0.0152 + bm25_rank=2 comp=0.0161)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[5] idx=36 total=0.0300 (sem_rank=3 comp=0.0159 + bm25_rank=11 comp=0.0141)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[6] idx=37 total=0.0293 (sem_rank=4 comp=0.0156 + bm25_rank=13 comp=0.0137)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[7] idx=26 total=0.0292 (sem_rank=18 comp=0.0128 + bm25_rank=1 comp=0.0164)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[8] idx=24 total=0.0292 (sem_rank=10 comp=0.0143 + bm25_rank=7 comp=0.0149)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[9] idx=30 total=0.0277 (sem_rank=16 comp=0.0132 + bm25_rank=9 comp=0.0145)
[15:09:47] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:47] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_2 doc_id=deployment_guide rrf_score=0.0323 sem_rank=1 bm25_rank=3 dominant=semantic | enriched: Test health, RESTARTS AGE, curl http, Database Configuration, Verification Verify, Expected output, Test readiness | Helm, NAME, 1/1 Running, CloudFlow  - secretName: cloudflow-tls hosts: - api.cloudf...
[15:09:47] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.0321 sem_rank=5 bm25_rank=0 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:09:47] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.0318 sem_rank=0 bm25_rank=6 dominant=semantic | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:09:47] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=api_reference_fix_0 doc_id=api_reference rrf_score=0.0315 sem_rank=2 bm25_rank=5 dominant=semantic | enriched: Reference Version, API Reference, API, API Keys, automation tasks, January, enables developers | API, CloudFlow, API Keys API, JWT Tokens, the Authorization Code  # CloudFlow API Reference Version 2.1...
[15:09:47] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_3 doc_id=deployment_guide rrf_score=0.0313 sem_rank=6 bm25_rank=2 dominant=bm25 | enriched: Database Migrations, Install Prometheus, Migrations Run, Run database, Prometheus Setup, Setup Install, Bitnami Helm | Deploy PostgreSQL, the Bitnami Helm, PgBouncer  Deploy PostgreSQL using the Bitna...
[15:09:47] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:47] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:47] TRACE | Query: Setting up deployment pipeline, which Helm repository has CloudFlow charts?
[15:09:47] TRACE | Total key facts: 1
[15:09:47] TRACE | Found facts: 1/1
[15:09:47] TRACE |   FOUND[1] helm repo add cloudflow https://charts.cloudflow.io
[15:09:47] TRACE | === END FACT COVERAGE ===
[15:09:47] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:47] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why can't I find CloudFlow in the official Helm hub?
[15:09:47] DEBUG | [query-rewrite] Rewriting query: Why can't I find CloudFlow in the official Helm hub?
[15:09:47] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:47] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=851 timeout=5s
[15:09:47] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:47] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:47] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:47] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.92s
[15:09:47] DEBUG | [anthropic] USAGE: input_tokens=200 output_tokens=12
[15:09:47] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=71
[15:09:47] DEBUG | [anthropic] RESPONSE: cloudflow kubernetes helm chart repository availability official source
[15:09:47] DEBUG | [query-rewrite] SUCCESS in 0.917s: Why can't I find CloudFlow in the official Helm hub? → cloudflow kubernetes helm chart repository availability official source
[15:09:47] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: cloudflow kubernetes helm chart repository availability official source (took 0.917s)
[15:09:47] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:47] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[0] idx=21 chunk_id=deployment_guide_fix_2 score=0.6759 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[1] idx=19 chunk_id=deployment_guide_fix_0 score=0.6710 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[2] idx=36 chunk_id=troubleshooting_guide_fix_8 score=0.6665 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[3] idx=26 chunk_id=deployment_guide_fix_7 score=0.6539 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[4] idx=20 chunk_id=deployment_guide_fix_1 score=0.6524 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[5] idx=37 chunk_id=troubleshooting_guide_fix_9 score=0.6494 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[6] idx=28 chunk_id=troubleshooting_guide_fix_0 score=0.6427 | # CloudFlow Platform Troubleshooting Guide **Version:** 3.2.1 **Last Updated:** January 2026 **Audie...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[7] idx=0 chunk_id=api_reference_fix_0 score=0.6402 | # CloudFlow API Reference Version 2.1.0 | Last Updated: January 2026 ## Overview The CloudFlow API i...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[8] idx=39 chunk_id=troubleshooting_guide_fix_11 score=0.6373 | outage" # Create war room cloudflow incident war-room create incident-2024012401 ``` **For SEV-2 (Hi...
[15:09:47] TRACE | [enriched-hybrid-llm]   SEM[9] idx=25 chunk_id=deployment_guide_fix_6 score=0.6332 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:47] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[0] idx=20 chunk_id=deployment_guide_fix_1 score=11.7987 | create cluster -f cluster-config.yaml ``` ### Storage Configuration Install the EBS CSI driver for p...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[1] idx=19 chunk_id=deployment_guide_fix_0 score=5.6931 | # CloudFlow Platform - Deployment and Operations Guide **Version:** 2.4.0 **Last Updated:** January ...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[2] idx=6 chunk_id=architecture_overview_fix_0 score=5.5481 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[3] idx=22 chunk_id=deployment_guide_fix_3 score=5.0587 | Deploy PostgreSQL using the Bitnami Helm chart: ```yaml # postgres-values.yaml global: postgresql: a...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[4] idx=36 chunk_id=troubleshooting_guide_fix_8 score=4.7984 | Leverage caching:** ```bash # Enable client-side caching export CLOUDFLOW_CACHE_ENABLED=true export ...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[5] idx=26 chunk_id=deployment_guide_fix_7 score=4.7158 | podSelector: matchLabels: app: cloudflow policyTypes: - Ingress - Egress ingress: - from: - namespac...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[6] idx=21 chunk_id=deployment_guide_fix_2 score=3.9176 | - secretName: cloudflow-tls hosts: - api.cloudflow.io healthCheck: enabled: true livenessProbe: path...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[7] idx=24 chunk_id=deployment_guide_fix_5 score=3.5463 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[8] idx=17 chunk_id=architecture_overview_fix_11 score=3.4481 | Service (2) - PostgreSQL Primary - PostgreSQL Replica - PostgreSQL Replica - Redis Primary (2) - Red...
[15:09:47] TRACE | [enriched-hybrid-llm]   BM25[9] idx=10 chunk_id=architecture_overview_fix_4 score=3.4125 | **Technology**: Node.js with worker pool pattern **Replicas**: 8 pods (production), auto-scaling 6-1...
[15:09:47] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[0] idx=19 total=0.0328 (sem_rank=1 comp=0.0164 + bm25_rank=1 comp=0.0164)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[1] idx=20 total=0.0323 (sem_rank=4 comp=0.0156 + bm25_rank=0 comp=0.0167)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[2] idx=21 total=0.0318 (sem_rank=0 comp=0.0167 + bm25_rank=6 comp=0.0152)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[3] idx=36 total=0.0318 (sem_rank=2 comp=0.0161 + bm25_rank=4 comp=0.0156)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[4] idx=26 total=0.0313 (sem_rank=3 comp=0.0159 + bm25_rank=5 comp=0.0154)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[5] idx=6 total=0.0304 (sem_rank=10 comp=0.0143 + bm25_rank=2 comp=0.0161)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[6] idx=22 total=0.0294 (sem_rank=14 comp=0.0135 + bm25_rank=3 comp=0.0159)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[7] idx=37 total=0.0289 (sem_rank=5 comp=0.0154 + bm25_rank=14 comp=0.0135)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[8] idx=24 total=0.0286 (sem_rank=13 comp=0.0137 + bm25_rank=7 comp=0.0149)
[15:09:47] TRACE | [enriched-hybrid-llm]   RRF[9] idx=32 total=0.0280 (sem_rank=11 comp=0.0141 + bm25_rank=12 comp=0.0139)
[15:09:47] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:47] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=deployment_guide_fix_0 doc_id=deployment_guide rrf_score=0.0328 sem_rank=1 bm25_rank=1 dominant=balanced | enriched: Target Environment, Operations Guide, AWS EKS, EKS, EKS cluster, January, AWS | Platform - Deployment and Operations Guide **, CloudFlow, Contents 1, Backup, Disaster Recovery](#backup-and-disaster  #...
[15:09:47] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=deployment_guide_fix_1 doc_id=deployment_guide rrf_score=0.0323 sem_rank=4 bm25_rank=0 dominant=bm25 | enriched: openssl rand, Prefix tls, from-literal, IfNotPresent resources, ClusterIP port, helm repo, force yaml | addon, Namespace, metadata, ResourceQuota, bash helm repo  create cluster -f cluster-config.yaml...
[15:09:47] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=deployment_guide_fix_2 doc_id=deployment_guide rrf_score=0.0318 sem_rank=0 bm25_rank=6 dominant=semantic | enriched: Test health, RESTARTS AGE, curl http, Database Configuration, Verification Verify, Expected output, Test readiness | Helm, NAME, 1/1 Running, CloudFlow  - secretName: cloudflow-tls hosts: - api.cloudf...
[15:09:47] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_8 doc_id=troubleshooting_guide rrf_score=0.0318 sem_rank=2 bm25_rank=4 dominant=semantic | enriched: Find workflow, Log Levels, Authentication Failures, debugging information, detailed debugging, Common Issues, Kubernetes Deployments | CloudFlow Logs, Log Levels, Find  Leverage caching:** ```bash # E...
[15:09:47] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=deployment_guide_fix_7 doc_id=deployment_guide rrf_score=0.0313 sem_rank=3 bm25_rank=5 dominant=semantic | enriched: TCP port, SHOW POOLS, External Secrets, Secrets Operator, kubectl top, Egress ingress, bash kubectl | Install External Secrets Operator, EOF, Create SecretStore, external-secrets.io/v1beta1  podSelect...
[15:09:47] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:47] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:47] TRACE | Query: Why can't I find CloudFlow in the official Helm hub?
[15:09:47] TRACE | Total key facts: 1
[15:09:47] TRACE | Found facts: 1/1
[15:09:47] TRACE |   FOUND[1] helm repo add cloudflow https://charts.cloudflow.io
[15:09:47] TRACE | === END FACT COVERAGE ===
[15:09:47] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:47] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: What is the minimum scheduling interval for workflows?
[15:09:47] DEBUG | [query-rewrite] Rewriting query: What is the minimum scheduling interval for workflows?
[15:09:47] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:47] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=853 timeout=5s
[15:09:47] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:47] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:47] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:48] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.86s
[15:09:48] DEBUG | [anthropic] USAGE: input_tokens=195 output_tokens=10
[15:09:48] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=63
[15:09:48] DEBUG | [anthropic] RESPONSE: workflow scheduling minimum interval constraint frequency limit
[15:09:48] DEBUG | [query-rewrite] SUCCESS in 0.862s: What is the minimum scheduling interval for workflows? → workflow scheduling minimum interval constraint frequency limit
[15:09:48] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow scheduling minimum interval constraint frequency limit (took 0.862s)
[15:09:48] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:48] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:48] TRACE | [enriched-hybrid-llm]   SEM[0] idx=46 chunk_id=user_guide_fix_6 score=0.6548 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:48] TRACE | [enriched-hybrid-llm]   SEM[1] idx=1 chunk_id=api_reference_fix_1 score=0.6376 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:09:48] TRACE | [enriched-hybrid-llm]   SEM[2] idx=45 chunk_id=user_guide_fix_5 score=0.6304 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:48] TRACE | [enriched-hybrid-llm]   SEM[3] idx=48 chunk_id=user_guide_fix_8 score=0.6295 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:48] TRACE | [enriched-hybrid-llm]   SEM[4] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6286 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:48] TRACE | [enriched-hybrid-llm]   SEM[5] idx=8 chunk_id=architecture_overview_fix_2 score=0.6265 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:48] TRACE | [enriched-hybrid-llm]   SEM[6] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6236 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:48] TRACE | [enriched-hybrid-llm]   SEM[7] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6170 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:48] TRACE | [enriched-hybrid-llm]   SEM[8] idx=35 chunk_id=troubleshooting_guide_fix_7 score=0.6085 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:09:48] TRACE | [enriched-hybrid-llm]   SEM[9] idx=40 chunk_id=user_guide_fix_0 score=0.6075 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:48] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:48] TRACE | [enriched-hybrid-llm]   BM25[0] idx=44 chunk_id=user_guide_fix_4 score=8.6279 | ### Cron Syntax Use standard cron expressions to define schedules: ``` * * * * * ┬ ┬ ┬ ┬ ┬ │ │ │ │ │...
[15:09:48] TRACE | [enriched-hybrid-llm]   BM25[1] idx=43 chunk_id=user_guide_fix_3 score=7.4964 | ``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...
[15:09:48] TRACE | [enriched-hybrid-llm]   BM25[2] idx=9 chunk_id=architecture_overview_fix_3 score=4.1837 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:48] TRACE | [enriched-hybrid-llm]   BM25[3] idx=16 chunk_id=architecture_overview_fix_10 score=4.0333 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:48] TRACE | [enriched-hybrid-llm]   BM25[4] idx=49 chunk_id=user_guide_fix_9 score=3.8224 | Requester: {{trigger.body.requester}} Description: {{trigger.body.description}} Approve: https://app...
[15:09:48] TRACE | [enriched-hybrid-llm]   BM25[5] idx=1 chunk_id=api_reference_fix_1 score=3.6906 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:09:48] TRACE | [enriched-hybrid-llm]   BM25[6] idx=37 chunk_id=troubleshooting_guide_fix_9 score=3.6300 | in" # Find workflow failures by ID kubectl logs -n cloudflow deployment/cloudflow-workflow-engine | ...
[15:09:48] TRACE | [enriched-hybrid-llm]   BM25[7] idx=35 chunk_id=troubleshooting_guide_fix_7 score=3.5736 | Waiting {retry_after} seconds...") time.sleep(retry_after) continue remaining = int(response.headers...
[15:09:48] TRACE | [enriched-hybrid-llm]   BM25[8] idx=32 chunk_id=troubleshooting_guide_fix_4 score=3.3076 | **Implement connection pooling optimization:** ```bash # Use PgBouncer for connection pooling kubect...
[15:09:48] TRACE | [enriched-hybrid-llm]   BM25[9] idx=30 chunk_id=troubleshooting_guide_fix_2 score=3.0121 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:48] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:48] TRACE | [enriched-hybrid-llm]   RRF[0] idx=1 total=0.0318 (sem_rank=1 comp=0.0164 + bm25_rank=5 comp=0.0154)
[15:09:48] TRACE | [enriched-hybrid-llm]   RRF[1] idx=48 total=0.0300 (sem_rank=3 comp=0.0159 + bm25_rank=11 comp=0.0141)
[15:09:48] TRACE | [enriched-hybrid-llm]   RRF[2] idx=16 total=0.0298 (sem_rank=12 comp=0.0139 + bm25_rank=3 comp=0.0159)
[15:09:48] TRACE | [enriched-hybrid-llm]   RRF[3] idx=46 total=0.0297 (sem_rank=0 comp=0.0167 + bm25_rank=17 comp=0.0130)
[15:09:48] TRACE | [enriched-hybrid-llm]   RRF[4] idx=9 total=0.0296 (sem_rank=14 comp=0.0135 + bm25_rank=2 comp=0.0161)
[15:09:48] TRACE | [enriched-hybrid-llm]   RRF[5] idx=35 total=0.0296 (sem_rank=8 comp=0.0147 + bm25_rank=7 comp=0.0149)
[15:09:48] TRACE | [enriched-hybrid-llm]   RRF[6] idx=44 total=0.0295 (sem_rank=18 comp=0.0128 + bm25_rank=0 comp=0.0167)
[15:09:48] TRACE | [enriched-hybrid-llm]   RRF[7] idx=30 total=0.0294 (sem_rank=7 comp=0.0149 + bm25_rank=9 comp=0.0145)
[15:09:48] TRACE | [enriched-hybrid-llm]   RRF[8] idx=34 total=0.0289 (sem_rank=6 comp=0.0152 + bm25_rank=13 comp=0.0137)
[15:09:48] TRACE | [enriched-hybrid-llm]   RRF[9] idx=8 total=0.0287 (sem_rank=5 comp=0.0154 + bm25_rank=15 comp=0.0133)
[15:09:48] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:48] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0318 sem_rank=1 bm25_rank=5 dominant=semantic | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:09:48] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=user_guide_fix_8 doc_id=user_guide rrf_score=0.0300 sem_rank=3 bm25_rank=11 dominant=semantic | enriched: Polling Periodically, API Polling, Version Control, Expense Approval, Export YAML, POST steps, Approval Required | Git, API, Multi-Step Approval Implement, Expense Approval Workflow, Expense Approval ...
[15:09:48] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_10 doc_id=architecture_overview rrf_score=0.0298 sem_rank=12 bm25_rank=3 dominant=bm25 | enriched: Workflow Engine, API Gateway, Resource Utilization, Gbps average, Auth Service, Gbps peak, API error | Kafka, GB, Target, - Auth Service, P50  - Execution start rate: 500 per second - Completion rate:...
[15:09:48] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=user_guide_fix_6 doc_id=user_guide rrf_score=0.0297 sem_rank=0 bm25_rank=17 dominant=semantic | enriched: workflow, date range, type, workflows, error type, execution, Execution Timeout | MB, Sync Customer Data  Filter by error type, date range, or execution ID 3. Click an execution to view full details 4...
[15:09:48] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_3 doc_id=architecture_overview rrf_score=0.0296 sem_rank=14 bm25_rank=2 dominant=bm25 | enriched: leader election, Missed execution, Resource Allocation, Key Responsibilities, Reliability Features, Performance Targets, Scheduling Architecture | PostgreSQL, Leader Scheduler, Kafka, Redis, SMS  **Te...
[15:09:48] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:48] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:48] TRACE | Query: What is the minimum scheduling interval for workflows?
[15:09:48] TRACE | Total key facts: 2
[15:09:48] TRACE | Found facts: 0/2
[15:09:48] TRACE | Missed facts: 2/2
[15:09:48] TRACE |   MISSED[1] minimum scheduling interval is 1 minute
[15:09:48] TRACE |   MISSED[2] The minimum scheduling interval is **1 minute**
[15:09:48] TRACE |     -> Found in chunk_id=user_guide_fix_4 (rank not in top-5)
[15:09:48] TRACE | === END FACT COVERAGE ===
[15:09:48] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:48] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: How frequently can I schedule a workflow?
[15:09:48] DEBUG | [query-rewrite] Rewriting query: How frequently can I schedule a workflow?
[15:09:48] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:48] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=840 timeout=5s
[15:09:48] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:48] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:48] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:53] WARN  | [anthropic] TIMEOUT after 5.04s (limit=5s)
[15:09:53] DEBUG | [query-rewrite] Empty response in 5.045s, using original
[15:09:53] TRACE | [enriched-hybrid-llm] REWRITE_SKIPPED: Using original query (took 5.045s)
[15:09:53] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:53] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:53] TRACE | [enriched-hybrid-llm]   SEM[0] idx=48 chunk_id=user_guide_fix_8 score=0.6363 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:53] TRACE | [enriched-hybrid-llm]   SEM[1] idx=40 chunk_id=user_guide_fix_0 score=0.6128 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:53] TRACE | [enriched-hybrid-llm]   SEM[2] idx=46 chunk_id=user_guide_fix_6 score=0.6009 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:53] TRACE | [enriched-hybrid-llm]   SEM[3] idx=45 chunk_id=user_guide_fix_5 score=0.5978 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:53] TRACE | [enriched-hybrid-llm]   SEM[4] idx=44 chunk_id=user_guide_fix_4 score=0.5770 | ### Cron Syntax Use standard cron expressions to define schedules: ``` * * * * * ┬ ┬ ┬ ┬ ┬ │ │ │ │ │...
[15:09:53] TRACE | [enriched-hybrid-llm]   SEM[5] idx=8 chunk_id=architecture_overview_fix_2 score=0.5694 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:53] TRACE | [enriched-hybrid-llm]   SEM[6] idx=16 chunk_id=architecture_overview_fix_10 score=0.5612 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:53] TRACE | [enriched-hybrid-llm]   SEM[7] idx=18 chunk_id=architecture_overview_fix_12 score=0.5600 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:53] TRACE | [enriched-hybrid-llm]   SEM[8] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.5516 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:53] TRACE | [enriched-hybrid-llm]   SEM[9] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.5498 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:53] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:53] TRACE | [enriched-hybrid-llm]   BM25[0] idx=14 chunk_id=architecture_overview_fix_8 score=5.8735 | ### Cache Invalidation Strategies **Time-Based Expiration (TTL)**: - Short-lived data: 5-15 minutes ...
[15:09:53] TRACE | [enriched-hybrid-llm]   BM25[1] idx=41 chunk_id=user_guide_fix_1 score=4.9922 | Open the Visual Editor by clicking **"Create Workflow"** or editing an existing workflow 2. Add a tr...
[15:09:53] TRACE | [enriched-hybrid-llm]   BM25[2] idx=44 chunk_id=user_guide_fix_4 score=4.5003 | ### Cron Syntax Use standard cron expressions to define schedules: ``` * * * * * ┬ ┬ ┬ ┬ ┬ │ │ │ │ │...
[15:09:53] TRACE | [enriched-hybrid-llm]   BM25[3] idx=45 chunk_id=user_guide_fix_5 score=4.4922 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:53] TRACE | [enriched-hybrid-llm]   BM25[4] idx=9 chunk_id=architecture_overview_fix_3 score=4.4836 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:53] TRACE | [enriched-hybrid-llm]   BM25[5] idx=40 chunk_id=user_guide_fix_0 score=2.9393 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:53] TRACE | [enriched-hybrid-llm]   BM25[6] idx=24 chunk_id=deployment_guide_fix_5 score=2.8466 | Configure log aggregation: ```bash # Install Fluent Bit for log forwarding helm install fluent-bit f...
[15:09:53] TRACE | [enriched-hybrid-llm]   BM25[7] idx=11 chunk_id=architecture_overview_fix_5 score=2.5075 | Success/failure events published back to Kafka ``` **Event Schema**: ```json { "event_id": "uuid-v4"...
[15:09:53] TRACE | [enriched-hybrid-llm]   BM25[8] idx=46 chunk_id=user_guide_fix_6 score=2.4851 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:53] TRACE | [enriched-hybrid-llm]   BM25[9] idx=25 chunk_id=deployment_guide_fix_6 score=2.4655 | **Verify Service Health**: ```bash kubectl get pods -n cloudflow-prod curl https://api.cloudflow.io/...
[15:09:53] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:53] TRACE | [enriched-hybrid-llm]   RRF[0] idx=40 total=0.0318 (sem_rank=1 comp=0.0164 + bm25_rank=5 comp=0.0154)
[15:09:53] TRACE | [enriched-hybrid-llm]   RRF[1] idx=44 total=0.0318 (sem_rank=4 comp=0.0156 + bm25_rank=2 comp=0.0161)
[15:09:53] TRACE | [enriched-hybrid-llm]   RRF[2] idx=45 total=0.0317 (sem_rank=3 comp=0.0159 + bm25_rank=3 comp=0.0159)
[15:09:53] TRACE | [enriched-hybrid-llm]   RRF[3] idx=46 total=0.0308 (sem_rank=2 comp=0.0161 + bm25_rank=8 comp=0.0147)
[15:09:53] TRACE | [enriched-hybrid-llm]   RRF[4] idx=9 total=0.0299 (sem_rank=10 comp=0.0143 + bm25_rank=4 comp=0.0156)
[15:09:53] TRACE | [enriched-hybrid-llm]   RRF[5] idx=41 total=0.0296 (sem_rank=16 comp=0.0132 + bm25_rank=1 comp=0.0164)
[15:09:53] TRACE | [enriched-hybrid-llm]   RRF[6] idx=11 total=0.0290 (sem_rank=11 comp=0.0141 + bm25_rank=7 comp=0.0149)
[15:09:53] TRACE | [enriched-hybrid-llm]   RRF[7] idx=24 total=0.0285 (sem_rank=15 comp=0.0133 + bm25_rank=6 comp=0.0152)
[15:09:53] TRACE | [enriched-hybrid-llm]   RRF[8] idx=48 total=0.0283 (sem_rank=0 comp=0.0167 + bm25_rank=26 comp=0.0116)
[15:09:53] TRACE | [enriched-hybrid-llm]   RRF[9] idx=43 total=0.0270 (sem_rank=12 comp=0.0139 + bm25_rank=16 comp=0.0132)
[15:09:53] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:53] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=user_guide_fix_0 doc_id=user_guide rrf_score=0.0318 sem_rank=1 bm25_rank=5 dominant=semantic | enriched: Google Drive, workflow, User Guide, Visual Editor, Google, automate repetitive, repetitive tasks | CloudFlow, Slack, Contents 1, Workflow Creation](#workflow-creation, Common Workflow Patterns](#commo...
[15:09:53] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=user_guide_fix_4 doc_id=user_guide rrf_score=0.0318 sem_rank=4 bm25_rank=2 dominant=bm25 | enriched: Cron Patterns, Day, business hours, Common Cron, Month, Cron Syntax, Hour | Cron Syntax, ┬ ┬ ┬ ┬ ┬, UTC, GMT/BST, America/New_York  ### Cron Syntax Use standard cron expressions to define schedules: `...
[15:09:53] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=user_guide_fix_5 doc_id=user_guide rrf_score=0.0317 sem_rank=3 bm25_rank=3 dominant=balanced | enriched: Testing Schedules, Handling Robust, Attempt, Error Handling, Dead Letter, Letter Queue, Robust error | Fallback Actions Execute, CloudFlow, Queue  Save and activate **Testing Schedules:** Use the buil...
[15:09:53] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=user_guide_fix_6 doc_id=user_guide rrf_score=0.0308 sem_rank=2 bm25_rank=8 dominant=semantic | enriched: workflow, date range, type, workflows, error type, execution, Execution Timeout | MB, Sync Customer Data  Filter by error type, date range, or execution ID 3. Click an execution to view full details 4...
[15:09:53] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=architecture_overview_fix_3 doc_id=architecture_overview rrf_score=0.0299 sem_rank=10 bm25_rank=4 dominant=bm25 | enriched: leader election, Missed execution, Resource Allocation, Key Responsibilities, Reliability Features, Performance Targets, Scheduling Architecture | PostgreSQL, Leader Scheduler, Kafka, Redis, SMS  **Te...
[15:09:53] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:53] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:53] TRACE | Query: How frequently can I schedule a workflow?
[15:09:53] TRACE | Total key facts: 2
[15:09:53] TRACE | Found facts: 1/2
[15:09:53] TRACE |   FOUND[1] The minimum scheduling interval is **1 minute**
[15:09:53] TRACE | Missed facts: 1/2
[15:09:53] TRACE |   MISSED[1] minimum scheduling interval is 1 minute
[15:09:53] TRACE | === END FACT COVERAGE ===
[15:09:53] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:53] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: My every-30-seconds schedule is being rejected
[15:09:53] DEBUG | [query-rewrite] Rewriting query: My every-30-seconds schedule is being rejected
[15:09:53] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:53] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=845 timeout=5s
[15:09:53] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:53] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:53] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:54] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.75s
[15:09:54] DEBUG | [anthropic] USAGE: input_tokens=196 output_tokens=10
[15:09:54] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=69
[15:09:54] DEBUG | [anthropic] RESPONSE: workflow scheduling minimum interval frequency validation constraints
[15:09:54] DEBUG | [query-rewrite] SUCCESS in 0.747s: My every-30-seconds schedule is being rejected → workflow scheduling minimum interval frequency validation constraints
[15:09:54] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow scheduling minimum interval frequency validation constraints (took 0.747s)
[15:09:54] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:54] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:54] TRACE | [enriched-hybrid-llm]   SEM[0] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6505 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:54] TRACE | [enriched-hybrid-llm]   SEM[1] idx=45 chunk_id=user_guide_fix_5 score=0.6482 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:54] TRACE | [enriched-hybrid-llm]   SEM[2] idx=8 chunk_id=architecture_overview_fix_2 score=0.6477 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:54] TRACE | [enriched-hybrid-llm]   SEM[3] idx=46 chunk_id=user_guide_fix_6 score=0.6469 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:54] TRACE | [enriched-hybrid-llm]   SEM[4] idx=48 chunk_id=user_guide_fix_8 score=0.6417 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:54] TRACE | [enriched-hybrid-llm]   SEM[5] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6257 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:54] TRACE | [enriched-hybrid-llm]   SEM[6] idx=18 chunk_id=architecture_overview_fix_12 score=0.6156 | Resume normal operations - Recovery time: 1-3 hours depending on data volume - Data loss: None if co...
[15:09:54] TRACE | [enriched-hybrid-llm]   SEM[7] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6091 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:54] TRACE | [enriched-hybrid-llm]   SEM[8] idx=9 chunk_id=architecture_overview_fix_3 score=0.6088 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:54] TRACE | [enriched-hybrid-llm]   SEM[9] idx=40 chunk_id=user_guide_fix_0 score=0.6082 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:54] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:54] TRACE | [enriched-hybrid-llm]   BM25[0] idx=44 chunk_id=user_guide_fix_4 score=8.6279 | ### Cron Syntax Use standard cron expressions to define schedules: ``` * * * * * ┬ ┬ ┬ ┬ ┬ │ │ │ │ │...
[15:09:54] TRACE | [enriched-hybrid-llm]   BM25[1] idx=43 chunk_id=user_guide_fix_3 score=7.4964 | ``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...
[15:09:54] TRACE | [enriched-hybrid-llm]   BM25[2] idx=9 chunk_id=architecture_overview_fix_3 score=4.1837 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:54] TRACE | [enriched-hybrid-llm]   BM25[3] idx=16 chunk_id=architecture_overview_fix_10 score=4.0333 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:54] TRACE | [enriched-hybrid-llm]   BM25[4] idx=49 chunk_id=user_guide_fix_9 score=3.8224 | Requester: {{trigger.body.requester}} Description: {{trigger.body.description}} Approve: https://app...
[15:09:54] TRACE | [enriched-hybrid-llm]   BM25[5] idx=7 chunk_id=architecture_overview_fix_1 score=3.6689 | **Technology**: Node.js with Express.js framework **Replicas**: 12 pods (production), auto-scaling 8...
[15:09:54] TRACE | [enriched-hybrid-llm]   BM25[6] idx=8 chunk_id=architecture_overview_fix_2 score=3.0857 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:54] TRACE | [enriched-hybrid-llm]   BM25[7] idx=30 chunk_id=troubleshooting_guide_fix_2 score=3.0121 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:54] TRACE | [enriched-hybrid-llm]   BM25[8] idx=48 chunk_id=user_guide_fix_8 score=2.9440 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:54] TRACE | [enriched-hybrid-llm]   BM25[9] idx=40 chunk_id=user_guide_fix_0 score=2.8582 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:54] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:54] TRACE | [enriched-hybrid-llm]   RRF[0] idx=8 total=0.0313 (sem_rank=2 comp=0.0161 + bm25_rank=6 comp=0.0152)
[15:09:54] TRACE | [enriched-hybrid-llm]   RRF[1] idx=9 total=0.0308 (sem_rank=8 comp=0.0147 + bm25_rank=2 comp=0.0161)
[15:09:54] TRACE | [enriched-hybrid-llm]   RRF[2] idx=48 total=0.0303 (sem_rank=4 comp=0.0156 + bm25_rank=8 comp=0.0147)
[15:09:54] TRACE | [enriched-hybrid-llm]   RRF[3] idx=34 total=0.0302 (sem_rank=0 comp=0.0167 + bm25_rank=14 comp=0.0135)
[15:09:54] TRACE | [enriched-hybrid-llm]   RRF[4] idx=30 total=0.0299 (sem_rank=7 comp=0.0149 + bm25_rank=7 comp=0.0149)
[15:09:54] TRACE | [enriched-hybrid-llm]   RRF[5] idx=44 total=0.0298 (sem_rank=16 comp=0.0132 + bm25_rank=0 comp=0.0167)
[15:09:54] TRACE | [enriched-hybrid-llm]   RRF[6] idx=43 total=0.0297 (sem_rank=15 comp=0.0133 + bm25_rank=1 comp=0.0164)
[15:09:54] TRACE | [enriched-hybrid-llm]   RRF[7] idx=16 total=0.0294 (sem_rank=14 comp=0.0135 + bm25_rank=3 comp=0.0159)
[15:09:54] TRACE | [enriched-hybrid-llm]   RRF[8] idx=18 total=0.0290 (sem_rank=6 comp=0.0152 + bm25_rank=12 comp=0.0139)
[15:09:54] TRACE | [enriched-hybrid-llm]   RRF[9] idx=46 total=0.0290 (sem_rank=3 comp=0.0159 + bm25_rank=16 comp=0.0132)
[15:09:54] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:54] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=architecture_overview_fix_2 doc_id=architecture_overview rrf_score=0.0313 sem_rank=2 bm25_rank=6 dominant=semantic | enriched: Resource Allocation, Key Responsibilities, Performance Targets, Scheduler Service, State Management, Execution Model, JSON-based DSL | TypeScript, Bull, PostgreSQL  **Technology**: Node.js with TypeSc...
[15:09:54] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_3 doc_id=architecture_overview rrf_score=0.0308 sem_rank=8 bm25_rank=2 dominant=bm25 | enriched: leader election, Missed execution, Resource Allocation, Key Responsibilities, Reliability Features, Performance Targets, Scheduling Architecture | PostgreSQL, Leader Scheduler, Kafka, Redis, SMS  **Te...
[15:09:54] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=user_guide_fix_8 doc_id=user_guide rrf_score=0.0303 sem_rank=4 bm25_rank=8 dominant=semantic | enriched: Polling Periodically, API Polling, Version Control, Expense Approval, Export YAML, POST steps, Approval Required | Git, API, Multi-Step Approval Implement, Expense Approval Workflow, Expense Approval ...
[15:09:54] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_6 doc_id=troubleshooting_guide rrf_score=0.0302 sem_rank=0 bm25_rank=14 dominant=semantic | enriched: Data Validation, Validation Errors, Rate Limit, Error Response, Concurrent Workflows, Resolution, Rate | Data Validation Errors, Rate Limiting & Throttling, API Failures, Tier, Custom  Data Validation...
[15:09:54] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=troubleshooting_guide_fix_2 doc_id=troubleshooting_guide rrf_score=0.0299 sem_rank=7 bm25_rank=7 dominant=balanced | enriched: Execution Plans, Query Execution, Review Query, Memory Leaks, High API, Breakdown Analysis, Plans | API  Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --r...
[15:09:54] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:54] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:54] TRACE | Query: My every-30-seconds schedule is being rejected
[15:09:54] TRACE | Total key facts: 2
[15:09:54] TRACE | Found facts: 0/2
[15:09:54] TRACE | Missed facts: 2/2
[15:09:54] TRACE |   MISSED[1] minimum scheduling interval is 1 minute
[15:09:54] TRACE |   MISSED[2] The minimum scheduling interval is **1 minute**
[15:09:54] TRACE |     -> Found in chunk_id=user_guide_fix_4 (rank not in top-5)
[15:09:54] TRACE | === END FACT COVERAGE ===
[15:09:54] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:54] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: min schedule interval
[15:09:54] DEBUG | [query-rewrite] Rewriting query: min schedule interval
[15:09:54] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:54] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=820 timeout=5s
[15:09:54] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:54] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:54] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:55] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.81s
[15:09:55] DEBUG | [anthropic] USAGE: input_tokens=189 output_tokens=10
[15:09:55] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=67
[15:09:55] DEBUG | [anthropic] RESPONSE: workflow scheduling minimum interval frequency configuration limits
[15:09:55] DEBUG | [query-rewrite] SUCCESS in 0.811s: min schedule interval → workflow scheduling minimum interval frequency configuration limits
[15:09:55] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow scheduling minimum interval frequency configuration limits (took 0.811s)
[15:09:55] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:55] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:55] TRACE | [enriched-hybrid-llm]   SEM[0] idx=46 chunk_id=user_guide_fix_6 score=0.6395 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:55] TRACE | [enriched-hybrid-llm]   SEM[1] idx=1 chunk_id=api_reference_fix_1 score=0.6331 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:09:55] TRACE | [enriched-hybrid-llm]   SEM[2] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6221 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:55] TRACE | [enriched-hybrid-llm]   SEM[3] idx=48 chunk_id=user_guide_fix_8 score=0.6186 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:55] TRACE | [enriched-hybrid-llm]   SEM[4] idx=8 chunk_id=architecture_overview_fix_2 score=0.6167 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:55] TRACE | [enriched-hybrid-llm]   SEM[5] idx=45 chunk_id=user_guide_fix_5 score=0.6127 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:55] TRACE | [enriched-hybrid-llm]   SEM[6] idx=34 chunk_id=troubleshooting_guide_fix_6 score=0.6081 | Data Validation Errors** ``` ValidationError: Field 'customer_id' is required but missing in 234 rec...
[15:09:55] TRACE | [enriched-hybrid-llm]   SEM[7] idx=6 chunk_id=architecture_overview_fix_0 score=0.6032 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:55] TRACE | [enriched-hybrid-llm]   SEM[8] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6031 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:55] TRACE | [enriched-hybrid-llm]   SEM[9] idx=16 chunk_id=architecture_overview_fix_10 score=0.5990 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:55] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:55] TRACE | [enriched-hybrid-llm]   BM25[0] idx=44 chunk_id=user_guide_fix_4 score=8.6279 | ### Cron Syntax Use standard cron expressions to define schedules: ``` * * * * * ┬ ┬ ┬ ┬ ┬ │ │ │ │ │...
[15:09:55] TRACE | [enriched-hybrid-llm]   BM25[1] idx=43 chunk_id=user_guide_fix_3 score=7.4964 | ``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...
[15:09:55] TRACE | [enriched-hybrid-llm]   BM25[2] idx=46 chunk_id=user_guide_fix_6 score=5.6090 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:55] TRACE | [enriched-hybrid-llm]   BM25[3] idx=30 chunk_id=troubleshooting_guide_fix_2 score=4.8660 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:55] TRACE | [enriched-hybrid-llm]   BM25[4] idx=9 chunk_id=architecture_overview_fix_3 score=4.1837 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:55] TRACE | [enriched-hybrid-llm]   BM25[5] idx=16 chunk_id=architecture_overview_fix_10 score=4.0333 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:55] TRACE | [enriched-hybrid-llm]   BM25[6] idx=33 chunk_id=troubleshooting_guide_fix_5 score=3.9951 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:55] TRACE | [enriched-hybrid-llm]   BM25[7] idx=49 chunk_id=user_guide_fix_9 score=3.8224 | Requester: {{trigger.body.requester}} Description: {{trigger.body.description}} Approve: https://app...
[15:09:55] TRACE | [enriched-hybrid-llm]   BM25[8] idx=1 chunk_id=api_reference_fix_1 score=3.7753 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:09:55] TRACE | [enriched-hybrid-llm]   BM25[9] idx=40 chunk_id=user_guide_fix_0 score=3.4540 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:55] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:55] TRACE | [enriched-hybrid-llm]   RRF[0] idx=46 total=0.0328 (sem_rank=0 comp=0.0167 + bm25_rank=2 comp=0.0161)
[15:09:55] TRACE | [enriched-hybrid-llm]   RRF[1] idx=33 total=0.0313 (sem_rank=2 comp=0.0161 + bm25_rank=6 comp=0.0152)
[15:09:55] TRACE | [enriched-hybrid-llm]   RRF[2] idx=1 total=0.0311 (sem_rank=1 comp=0.0164 + bm25_rank=8 comp=0.0147)
[15:09:55] TRACE | [enriched-hybrid-llm]   RRF[3] idx=30 total=0.0306 (sem_rank=8 comp=0.0147 + bm25_rank=3 comp=0.0159)
[15:09:55] TRACE | [enriched-hybrid-llm]   RRF[4] idx=44 total=0.0302 (sem_rank=14 comp=0.0135 + bm25_rank=0 comp=0.0167)
[15:09:55] TRACE | [enriched-hybrid-llm]   RRF[5] idx=16 total=0.0299 (sem_rank=9 comp=0.0145 + bm25_rank=5 comp=0.0154)
[15:09:55] TRACE | [enriched-hybrid-llm]   RRF[6] idx=48 total=0.0298 (sem_rank=3 comp=0.0159 + bm25_rank=12 comp=0.0139)
[15:09:55] TRACE | [enriched-hybrid-llm]   RRF[7] idx=34 total=0.0289 (sem_rank=6 comp=0.0152 + bm25_rank=13 comp=0.0137)
[15:09:55] TRACE | [enriched-hybrid-llm]   RRF[8] idx=8 total=0.0284 (sem_rank=4 comp=0.0156 + bm25_rank=18 comp=0.0128)
[15:09:55] TRACE | [enriched-hybrid-llm]   RRF[9] idx=31 total=0.0284 (sem_rank=11 comp=0.0141 + bm25_rank=10 comp=0.0143)
[15:09:55] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:55] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=user_guide_fix_6 doc_id=user_guide rrf_score=0.0328 sem_rank=0 bm25_rank=2 dominant=semantic | enriched: workflow, date range, type, workflows, error type, execution, Execution Timeout | MB, Sync Customer Data  Filter by error type, date range, or execution ID 3. Click an execution to view full details 4...
[15:09:55] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_5 doc_id=troubleshooting_guide rrf_score=0.0313 sem_rank=2 bm25_rank=6 dominant=semantic | enriched: cloudflow workflows, workflows update, Connection timeout, workflows, Attempt, cloudflow, timeout | Add, Max, Exponential Backoff, Attempt 1:, Attempt 1: FAILED - NetworkError:  exec_7h3j6k9m2n --show...
[15:09:55] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=api_reference_fix_1 doc_id=api_reference rrf_score=0.0311 sem_rank=1 bm25_rank=8 dominant=semantic | enriched: Rate Limiting, Rate Limit, Rate, system stability, CloudFlow enforces, enforces rate, API | CloudFlow, API, max, ISO 8601  ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforce...
[15:09:55] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_2 doc_id=troubleshooting_guide rrf_score=0.0306 sem_rank=8 bm25_rank=3 dominant=bm25 | enriched: Execution Plans, Query Execution, Review Query, Memory Leaks, High API, Breakdown Analysis, Plans | API  Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --r...
[15:09:55] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=user_guide_fix_4 doc_id=user_guide rrf_score=0.0302 sem_rank=14 bm25_rank=0 dominant=bm25 | enriched: Cron Patterns, Day, business hours, Common Cron, Month, Cron Syntax, Hour | Cron Syntax, ┬ ┬ ┬ ┬ ┬, UTC, GMT/BST, America/New_York  ### Cron Syntax Use standard cron expressions to define schedules: `...
[15:09:55] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:55] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:55] TRACE | Query: min schedule interval
[15:09:55] TRACE | Total key facts: 2
[15:09:55] TRACE | Found facts: 1/2
[15:09:55] TRACE |   FOUND[1] The minimum scheduling interval is **1 minute**
[15:09:55] TRACE | Missed facts: 1/2
[15:09:55] TRACE |   MISSED[1] minimum scheduling interval is 1 minute
[15:09:55] TRACE | === END FACT COVERAGE ===
[15:09:55] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:55] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: I need near real-time execution, what's the fastest schedule I can set?
[15:09:55] DEBUG | [query-rewrite] Rewriting query: I need near real-time execution, what's the fastest schedule I can set?
[15:09:55] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:55] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=870 timeout=5s
[15:09:55] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:55] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:55] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:56] DEBUG | [anthropic] RESPONSE status=200 elapsed=1.00s
[15:09:56] DEBUG | [anthropic] USAGE: input_tokens=203 output_tokens=12
[15:09:56] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=68
[15:09:56] DEBUG | [anthropic] RESPONSE: workflow execution minimum scheduling interval real-time performance
[15:09:56] DEBUG | [query-rewrite] SUCCESS in 1.000s: I need near real-time execution, what's the fastest schedule I can set? → workflow execution minimum scheduling interval real-time performance
[15:09:56] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow execution minimum scheduling interval real-time performance (took 1.000s)
[15:09:56] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:56] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:56] TRACE | [enriched-hybrid-llm]   SEM[0] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6701 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:56] TRACE | [enriched-hybrid-llm]   SEM[1] idx=46 chunk_id=user_guide_fix_6 score=0.6661 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:56] TRACE | [enriched-hybrid-llm]   SEM[2] idx=8 chunk_id=architecture_overview_fix_2 score=0.6432 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:56] TRACE | [enriched-hybrid-llm]   SEM[3] idx=45 chunk_id=user_guide_fix_5 score=0.6381 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:56] TRACE | [enriched-hybrid-llm]   SEM[4] idx=6 chunk_id=architecture_overview_fix_0 score=0.6346 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:56] TRACE | [enriched-hybrid-llm]   SEM[5] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6300 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:56] TRACE | [enriched-hybrid-llm]   SEM[6] idx=16 chunk_id=architecture_overview_fix_10 score=0.6247 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:56] TRACE | [enriched-hybrid-llm]   SEM[7] idx=9 chunk_id=architecture_overview_fix_3 score=0.6215 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:56] TRACE | [enriched-hybrid-llm]   SEM[8] idx=48 chunk_id=user_guide_fix_8 score=0.6110 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:56] TRACE | [enriched-hybrid-llm]   SEM[9] idx=43 chunk_id=user_guide_fix_3 score=0.5999 | ``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...
[15:09:56] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:56] TRACE | [enriched-hybrid-llm]   BM25[0] idx=44 chunk_id=user_guide_fix_4 score=8.6279 | ### Cron Syntax Use standard cron expressions to define schedules: ``` * * * * * ┬ ┬ ┬ ┬ ┬ │ │ │ │ │...
[15:09:56] TRACE | [enriched-hybrid-llm]   BM25[1] idx=43 chunk_id=user_guide_fix_3 score=7.9937 | ``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...
[15:09:56] TRACE | [enriched-hybrid-llm]   BM25[2] idx=9 chunk_id=architecture_overview_fix_3 score=6.2068 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:56] TRACE | [enriched-hybrid-llm]   BM25[3] idx=46 chunk_id=user_guide_fix_6 score=5.2445 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:56] TRACE | [enriched-hybrid-llm]   BM25[4] idx=40 chunk_id=user_guide_fix_0 score=4.5938 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:56] TRACE | [enriched-hybrid-llm]   BM25[5] idx=16 chunk_id=architecture_overview_fix_10 score=4.5095 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:56] TRACE | [enriched-hybrid-llm]   BM25[6] idx=49 chunk_id=user_guide_fix_9 score=3.8224 | Requester: {{trigger.body.requester}} Description: {{trigger.body.description}} Approve: https://app...
[15:09:56] TRACE | [enriched-hybrid-llm]   BM25[7] idx=8 chunk_id=architecture_overview_fix_2 score=3.7064 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:56] TRACE | [enriched-hybrid-llm]   BM25[8] idx=30 chunk_id=troubleshooting_guide_fix_2 score=3.5792 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:56] TRACE | [enriched-hybrid-llm]   BM25[9] idx=15 chunk_id=architecture_overview_fix_9 score=3.1860 | per API key (default: 1000 RPM) ### Secrets Management **HashiCorp Vault Integration**: - Dynamic da...
[15:09:56] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:56] TRACE | [enriched-hybrid-llm]   RRF[0] idx=46 total=0.0323 (sem_rank=1 comp=0.0164 + bm25_rank=3 comp=0.0159)
[15:09:56] TRACE | [enriched-hybrid-llm]   RRF[1] idx=30 total=0.0314 (sem_rank=0 comp=0.0167 + bm25_rank=8 comp=0.0147)
[15:09:56] TRACE | [enriched-hybrid-llm]   RRF[2] idx=8 total=0.0311 (sem_rank=2 comp=0.0161 + bm25_rank=7 comp=0.0149)
[15:09:56] TRACE | [enriched-hybrid-llm]   RRF[3] idx=9 total=0.0311 (sem_rank=7 comp=0.0149 + bm25_rank=2 comp=0.0161)
[15:09:56] TRACE | [enriched-hybrid-llm]   RRF[4] idx=43 total=0.0309 (sem_rank=9 comp=0.0145 + bm25_rank=1 comp=0.0164)
[15:09:56] TRACE | [enriched-hybrid-llm]   RRF[5] idx=16 total=0.0305 (sem_rank=6 comp=0.0152 + bm25_rank=5 comp=0.0154)
[15:09:56] TRACE | [enriched-hybrid-llm]   RRF[6] idx=40 total=0.0299 (sem_rank=10 comp=0.0143 + bm25_rank=4 comp=0.0156)
[15:09:56] TRACE | [enriched-hybrid-llm]   RRF[7] idx=48 total=0.0280 (sem_rank=8 comp=0.0147 + bm25_rank=15 comp=0.0133)
[15:09:56] TRACE | [enriched-hybrid-llm]   RRF[8] idx=3 total=0.0280 (sem_rank=11 comp=0.0141 + bm25_rank=12 comp=0.0139)
[15:09:56] TRACE | [enriched-hybrid-llm]   RRF[9] idx=33 total=0.0279 (sem_rank=5 comp=0.0154 + bm25_rank=20 comp=0.0125)
[15:09:56] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:56] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=user_guide_fix_6 doc_id=user_guide rrf_score=0.0323 sem_rank=1 bm25_rank=3 dominant=semantic | enriched: workflow, date range, type, workflows, error type, execution, Execution Timeout | MB, Sync Customer Data  Filter by error type, date range, or execution ID 3. Click an execution to view full details 4...
[15:09:56] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=troubleshooting_guide_fix_2 doc_id=troubleshooting_guide rrf_score=0.0314 sem_rank=0 bm25_rank=8 dominant=semantic | enriched: Execution Plans, Query Execution, Review Query, Memory Leaks, High API, Breakdown Analysis, Plans | API  Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --r...
[15:09:56] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_2 doc_id=architecture_overview rrf_score=0.0311 sem_rank=2 bm25_rank=7 dominant=semantic | enriched: Resource Allocation, Key Responsibilities, Performance Targets, Scheduler Service, State Management, Execution Model, JSON-based DSL | TypeScript, Bull, PostgreSQL  **Technology**: Node.js with TypeSc...
[15:09:56] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=architecture_overview_fix_3 doc_id=architecture_overview rrf_score=0.0311 sem_rank=7 bm25_rank=2 dominant=bm25 | enriched: leader election, Missed execution, Resource Allocation, Key Responsibilities, Reliability Features, Performance Targets, Scheduling Architecture | PostgreSQL, Leader Scheduler, Kafka, Redis, SMS  **Te...
[15:09:56] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=user_guide_fix_3 doc_id=user_guide rrf_score=0.0309 sem_rank=9 bm25_rank=1 dominant=bm25 | enriched: Current execution, Current timestamp, Due Date, Current workflow, Order Status, Extract substring, Format date | Workflow, Convert, substring(text, num2, ISO 8601  ``` **Slack App Integration:** - Ins...
[15:09:56] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:56] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:56] TRACE | Query: I need near real-time execution, what's the fastest schedule I can set?
[15:09:56] TRACE | Total key facts: 2
[15:09:56] TRACE | Found facts: 0/2
[15:09:56] TRACE | Missed facts: 2/2
[15:09:56] TRACE |   MISSED[1] minimum scheduling interval is 1 minute
[15:09:56] TRACE |   MISSED[2] The minimum scheduling interval is **1 minute**
[15:09:56] TRACE |     -> Found in chunk_id=user_guide_fix_4 (rank not in top-5)
[15:09:56] TRACE | === END FACT COVERAGE ===
[15:09:56] TRACE | [enriched-hybrid-llm] === RETRIEVE START ===
[15:09:56] TRACE | [enriched-hybrid-llm] ORIGINAL_QUERY: Why can't I schedule workflows every 30 seconds?
[15:09:56] DEBUG | [query-rewrite] Rewriting query: Why can't I schedule workflows every 30 seconds?
[15:09:56] DEBUG | [anthropic] Model alias: claude-haiku -> claude-3-5-haiku-latest
[15:09:56] DEBUG | [anthropic] model=claude-3-5-haiku-latest prompt_len=847 timeout=5s
[15:09:56] DEBUG | [anthropic] PROMPT: You are a technical documentation search expert. Your task is to rewrite user questions as direct documentation lookup queries.

Guidelines:
1. Convert problem descriptions to feature/capability questions
2. Expand abbreviations and acronyms to full terms
3. Replace casual language with technical terminology
4. Align with documentation vocabulary and structure
5. Keep the rewritten query concise (one line)

Examples:
- "Why can't I schedule workflows every 30 seconds?" → "workflow scheduling min...
[15:09:56] DEBUG | [anthropic] REQUEST: POST https://api.anthropic.com/v1/messages
[15:09:56] DEBUG | [anthropic] REQUEST body: model=claude-3-5-haiku-latest max_tokens=1024
[15:09:57] DEBUG | [anthropic] RESPONSE status=200 elapsed=0.95s
[15:09:57] DEBUG | [anthropic] USAGE: input_tokens=198 output_tokens=9
[15:09:57] DEBUG | [anthropic] SUCCESS stop_reason=end_turn response_len=58
[15:09:57] DEBUG | [anthropic] RESPONSE: workflow scheduling minimum interval frequency constraints
[15:09:57] DEBUG | [query-rewrite] SUCCESS in 0.947s: Why can't I schedule workflows every 30 seconds? → workflow scheduling minimum interval frequency constraints
[15:09:57] TRACE | [enriched-hybrid-llm] REWRITTEN_QUERY: workflow scheduling minimum interval frequency constraints (took 0.947s)
[15:09:57] TRACE | [enriched-hybrid-llm] n_candidates=50 (k=5 * multiplier=10)
[15:09:57] TRACE | [enriched-hybrid-llm] TOP-10 SEMANTIC SCORES:
[15:09:57] TRACE | [enriched-hybrid-llm]   SEM[0] idx=48 chunk_id=user_guide_fix_8 score=0.6403 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:57] TRACE | [enriched-hybrid-llm]   SEM[1] idx=8 chunk_id=architecture_overview_fix_2 score=0.6390 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:57] TRACE | [enriched-hybrid-llm]   SEM[2] idx=46 chunk_id=user_guide_fix_6 score=0.6294 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:57] TRACE | [enriched-hybrid-llm]   SEM[3] idx=45 chunk_id=user_guide_fix_5 score=0.6231 | Save and activate **Testing Schedules:** Use the built-in schedule calculator to preview upcoming ex...
[15:09:57] TRACE | [enriched-hybrid-llm]   SEM[4] idx=30 chunk_id=troubleshooting_guide_fix_2 score=0.6191 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:57] TRACE | [enriched-hybrid-llm]   SEM[5] idx=33 chunk_id=troubleshooting_guide_fix_5 score=0.6108 | exec_7h3j6k9m2n --show-bottlenecks ``` #### Solutions **1. Increase workflow timeout (if justified):...
[15:09:57] TRACE | [enriched-hybrid-llm]   SEM[6] idx=9 chunk_id=architecture_overview_fix_3 score=0.6067 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:57] TRACE | [enriched-hybrid-llm]   SEM[7] idx=40 chunk_id=user_guide_fix_0 score=0.6066 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:57] TRACE | [enriched-hybrid-llm]   SEM[8] idx=6 chunk_id=architecture_overview_fix_0 score=0.6045 | # CloudFlow Platform - System Architecture Overview **Document Version:** 2.3.1 **Last Updated:** Ja...
[15:09:57] TRACE | [enriched-hybrid-llm]   SEM[9] idx=1 chunk_id=api_reference_fix_1 score=0.5945 | ## Rate Limiting To ensure fair usage and system stability, CloudFlow enforces rate limits on all AP...
[15:09:57] TRACE | [enriched-hybrid-llm] TOP-10 BM25 SCORES:
[15:09:57] TRACE | [enriched-hybrid-llm]   BM25[0] idx=44 chunk_id=user_guide_fix_4 score=8.6279 | ### Cron Syntax Use standard cron expressions to define schedules: ``` * * * * * ┬ ┬ ┬ ┬ ┬ │ │ │ │ │...
[15:09:57] TRACE | [enriched-hybrid-llm]   BM25[1] idx=43 chunk_id=user_guide_fix_3 score=7.4964 | ``` **Slack App Integration:** - Install the CloudFlow Slack app in your workspace - Authenticate on...
[15:09:57] TRACE | [enriched-hybrid-llm]   BM25[2] idx=9 chunk_id=architecture_overview_fix_3 score=4.1837 | **Technology**: Go with distributed locking via Redis **Replicas**: 4 pods (production), active-pass...
[15:09:57] TRACE | [enriched-hybrid-llm]   BM25[3] idx=16 chunk_id=architecture_overview_fix_10 score=4.0333 | - Execution start rate: 500 per second - Completion rate: 450 per second (average 2-second execution...
[15:09:57] TRACE | [enriched-hybrid-llm]   BM25[4] idx=49 chunk_id=user_guide_fix_9 score=3.8224 | Requester: {{trigger.body.requester}} Description: {{trigger.body.description}} Approve: https://app...
[15:09:57] TRACE | [enriched-hybrid-llm]   BM25[5] idx=30 chunk_id=troubleshooting_guide_fix_2 score=3.0121 | Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --readon...
[15:09:57] TRACE | [enriched-hybrid-llm]   BM25[6] idx=48 chunk_id=user_guide_fix_8 score=2.9440 | Version Control For critical workflows: - Export YAML definitions regularly - Store in version contr...
[15:09:57] TRACE | [enriched-hybrid-llm]   BM25[7] idx=8 chunk_id=architecture_overview_fix_2 score=1.7928 | **Technology**: Node.js with TypeScript, Bull queue library **Replicas**: 16 pods (production), auto...
[15:09:57] TRACE | [enriched-hybrid-llm]   BM25[8] idx=40 chunk_id=user_guide_fix_0 score=1.7700 | # CloudFlow User Guide Welcome to CloudFlow, the modern workflow automation platform that helps you ...
[15:09:57] TRACE | [enriched-hybrid-llm]   BM25[9] idx=46 chunk_id=user_guide_fix_6 score=1.6413 | Filter by error type, date range, or execution ID 3. Click an execution to view full details 4. Clic...
[15:09:57] TRACE | [enriched-hybrid-llm] RRF SCORE CALCULATION (top 10):
[15:09:57] TRACE | [enriched-hybrid-llm]   RRF[0] idx=48 total=0.0318 (sem_rank=0 comp=0.0167 + bm25_rank=6 comp=0.0152)
[15:09:57] TRACE | [enriched-hybrid-llm]   RRF[1] idx=8 total=0.0313 (sem_rank=1 comp=0.0164 + bm25_rank=7 comp=0.0149)
[15:09:57] TRACE | [enriched-hybrid-llm]   RRF[2] idx=9 total=0.0313 (sem_rank=6 comp=0.0152 + bm25_rank=2 comp=0.0161)
[15:09:57] TRACE | [enriched-hybrid-llm]   RRF[3] idx=30 total=0.0310 (sem_rank=4 comp=0.0156 + bm25_rank=5 comp=0.0154)
[15:09:57] TRACE | [enriched-hybrid-llm]   RRF[4] idx=46 total=0.0306 (sem_rank=2 comp=0.0161 + bm25_rank=9 comp=0.0145)
[15:09:57] TRACE | [enriched-hybrid-llm]   RRF[5] idx=44 total=0.0306 (sem_rank=12 comp=0.0139 + bm25_rank=0 comp=0.0167)
[15:09:57] TRACE | [enriched-hybrid-llm]   RRF[6] idx=16 total=0.0300 (sem_rank=11 comp=0.0141 + bm25_rank=3 comp=0.0159)
[15:09:57] TRACE | [enriched-hybrid-llm]   RRF[7] idx=40 total=0.0296 (sem_rank=7 comp=0.0149 + bm25_rank=8 comp=0.0147)
[15:09:57] TRACE | [enriched-hybrid-llm]   RRF[8] idx=43 total=0.0294 (sem_rank=17 comp=0.0130 + bm25_rank=1 comp=0.0164)
[15:09:57] TRACE | [enriched-hybrid-llm]   RRF[9] idx=33 total=0.0287 (sem_rank=5 comp=0.0154 + bm25_rank=15 comp=0.0133)
[15:09:57] TRACE | [enriched-hybrid-llm] FINAL TOP-5 RESULTS:
[15:09:57] TRACE | [enriched-hybrid-llm]   RESULT[1] chunk_id=user_guide_fix_8 doc_id=user_guide rrf_score=0.0318 sem_rank=0 bm25_rank=6 dominant=semantic | enriched: Polling Periodically, API Polling, Version Control, Expense Approval, Export YAML, POST steps, Approval Required | Git, API, Multi-Step Approval Implement, Expense Approval Workflow, Expense Approval ...
[15:09:57] TRACE | [enriched-hybrid-llm]   RESULT[2] chunk_id=architecture_overview_fix_2 doc_id=architecture_overview rrf_score=0.0313 sem_rank=1 bm25_rank=7 dominant=semantic | enriched: Resource Allocation, Key Responsibilities, Performance Targets, Scheduler Service, State Management, Execution Model, JSON-based DSL | TypeScript, Bull, PostgreSQL  **Technology**: Node.js with TypeSc...
[15:09:57] TRACE | [enriched-hybrid-llm]   RESULT[3] chunk_id=architecture_overview_fix_3 doc_id=architecture_overview rrf_score=0.0313 sem_rank=6 bm25_rank=2 dominant=bm25 | enriched: leader election, Missed execution, Resource Allocation, Key Responsibilities, Reliability Features, Performance Targets, Scheduling Architecture | PostgreSQL, Leader Scheduler, Kafka, Redis, SMS  **Te...
[15:09:57] TRACE | [enriched-hybrid-llm]   RESULT[4] chunk_id=troubleshooting_guide_fix_2 doc_id=troubleshooting_guide rrf_score=0.0310 sem_rank=4 bm25_rank=5 dominant=semantic | enriched: Execution Plans, Query Execution, Review Query, Memory Leaks, High API, Breakdown Analysis, Plans | API  Review Query Execution Plans** ```sql -- Connect to CloudFlow database cloudflow db connect --r...
[15:09:57] TRACE | [enriched-hybrid-llm]   RESULT[5] chunk_id=user_guide_fix_6 doc_id=user_guide rrf_score=0.0306 sem_rank=2 bm25_rank=9 dominant=semantic | enriched: workflow, date range, type, workflows, error type, execution, Execution Timeout | MB, Sync Customer Data  Filter by error type, date range, or execution ID 3. Click an execution to view full details 4...
[15:09:57] TRACE | [enriched-hybrid-llm] === RETRIEVE END ===
[15:09:57] TRACE | === FACT COVERAGE ANALYSIS ===
[15:09:57] TRACE | Query: Why can't I schedule workflows every 30 seconds?
[15:09:57] TRACE | Total key facts: 2
[15:09:57] TRACE | Found facts: 0/2
[15:09:57] TRACE | Missed facts: 2/2
[15:09:57] TRACE |   MISSED[1] minimum scheduling interval is 1 minute
[15:09:57] TRACE |   MISSED[2] The minimum scheduling interval is **1 minute**
[15:09:57] TRACE |     -> Found in chunk_id=user_guide_fix_4 (rank not in top-5)
[15:09:57] TRACE | === END FACT COVERAGE ===
[15:09:57] INFO  |   k=5 exact_match: 88.7% (47/53)
[15:09:57] INFO  |     synonym: 79.2%
[15:09:57] INFO  |     problem: 79.2%
[15:09:57] INFO  |     casual: 81.1%
[15:09:57] INFO  |     contextual: 71.7%
[15:09:57] INFO  |     negation: 77.4%
[15:09:57] METRIC | total_benchmark_time=130.013s

================================================================================
[15:09:57] INFO  | SAVING RESULTS
================================================================================
[15:09:57] INFO  | Saved full results to /home/fujin/Code/personal-library-manager/poc/chunking_benchmark_v2/results/2026-01-25_150747/benchmark_results.json
[15:09:57] INFO  | Saved summary to /home/fujin/Code/personal-library-manager/poc/chunking_benchmark_v2/results/2026-01-25_150747/summary.json

================================================================================
[15:09:57] INFO  | BENCHMARK COMPLETE
================================================================================
[15:09:57] INFO  | Total evaluations: 2

Coverage by Query Dimension
Dimension  | Coverage | Delta 
-----------+----------+-------
casual     | 73.6%    | -8.5% 
contextual | 66.0%    | -16.0%
negation   | 64.2%    | -17.9%
original   | 82.1%    | -     
problem    | 67.0%    | -15.1%
synonym    | 74.5%    | -7.5% 

================================================================================
[15:09:57] INFO  | RUN SUMMARY
================================================================================
[15:09:57] INFO  | Total runtime: 130.06s

------------------------------------------------------------
[15:09:57] INFO  | Timing Breakdown
------------------------------------------------------------
Phase           | Duration
----------------+---------
total_benchmark | 130.01s 
[15:09:57] INFO  | Log saved to: /home/fujin/Code/personal-library-manager/poc/chunking_benchmark_v2/results/2026-01-25_150747/benchmark.log
