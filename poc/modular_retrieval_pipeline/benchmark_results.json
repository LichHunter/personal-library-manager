{
  "strategy": "modular-no-llm",
  "benchmark_run_at": "2026-01-29T23:23:04.558350",
  "questions_file": "poc/chunking_benchmark_v2/corpus/kubernetes/realistic_questions.json",
  "accuracy": 40.0,
  "hit_at_1_rate": 40.0,
  "hit_at_5_rate": 40.0,
  "mrr": 0.4,
  "avg_llm_grade": 5.0,
  "avg_total_score": 4.4399999999999995,
  "pass_rate_8": 40.0,
  "pass_rate_7": 40.0,
  "pass_rate_6_5": 40.0,
  "avg_latency_ms": 64.81661796569824,
  "peak_memory_mb": 132.78175830841064,
  "results": [
    {
      "question_id": "q_000_q1",
      "question": "how do i connect my cluster's load balancers and network configurations with gateway resources",
      "expected_answer": "What is the role of the Infrastructure Provider in the design principles of Gateway API?",
      "target_doc_id": "concepts_services-networking_gateway",
      "needle_found": true,
      "rank": 1,
      "hit_at_1": true,
      "hit_at_5": true,
      "llm_grade": 10,
      "llm_reasoning": "The expected answer asks 'What is the role of the Infrastructure Provider in the design principles of Gateway API?' Chunk 1 directly and completely answers this question. It states that Gateway API is 'Role-oriented' and specifically defines the Infrastructure Provider role as: 'Manages infrastructure that allows multiple isolated clusters to serve multiple tenants, e.g. a cloud provider.' This chunk also provides the broader context of Gateway API design principles and explains how this role relates to connecting cluster infrastructure (load balancers, network configurations) with Gateway resources. The user's question about connecting 'cluster's load balancers and network configurations with gateway resources' is directly addressed by understanding that the Infrastructure Provider role is responsible for managing this infrastructure layer. All key facts from the expected answer are present in Chunk 1.",
      "total_score": 10.0,
      "latency_ms": 186.2,
      "grading_latency_ms": 7486.87219619751
    },
    {
      "question_id": "q_000_q2",
      "question": "which cloud provider configurations are needed to make my gateway api work correctly",
      "expected_answer": "What is the role of the Infrastructure Provider in the design principles of Gateway API?",
      "target_doc_id": "concepts_services-networking_gateway",
      "needle_found": true,
      "rank": 1,
      "hit_at_1": true,
      "hit_at_5": true,
      "llm_grade": 8,
      "llm_reasoning": "The expected answer asks about 'the role of the Infrastructure Provider in the design principles of Gateway API'. Chunk 1 directly addresses this, defining the Infrastructure Provider role as 'Manages infrastructure that allows multiple isolated clusters to serve multiple tenants, e.g. a cloud provider.' This is the core answer to what cloud provider configurations are needed - the Infrastructure Provider role is responsible for managing the underlying infrastructure. The chunks also provide context about GatewayClass (which defines configuration managed by a controller), Gateway (which defines the traffic handling infrastructure instance), and the overall design principles. While the user's question uses informal language ('make my gateway api work correctly'), and the expected answer is a more formal documentation question, the chunks contain the key information: Infrastructure Providers (cloud providers) manage the foundational infrastructure for Gateway API. Minor details about specific cloud provider configuration steps are not present, but the conceptual role and responsibility are clearly explained, which addresses the core question.",
      "total_score": 8.0,
      "latency_ms": 36.1,
      "grading_latency_ms": 6569.884538650513
    },
    {
      "question_id": "q_001_q1",
      "question": "why do my service ports keep changing between deployments",
      "expected_answer": "What is the Kubernetes approach to dynamic port allocation?",
      "target_doc_id": "concepts_cluster-administration_networking",
      "needle_found": false,
      "rank": null,
      "hit_at_1": false,
      "hit_at_5": false,
      "llm_grade": 1,
      "llm_reasoning": "The expected answer asks about 'Kubernetes approach to dynamic port allocation', which addresses why service ports might change between deployments. None of the retrieved chunks discuss dynamic port allocation or explain why ports might change. Chunk 1 discusses multi-port service configuration with static port definitions. Chunk 2 covers scaling deployments. Chunk 3 discusses Docker Compose translation warnings. Chunk 4 covers disabling NodePort allocation for LoadBalancers. Chunk 5 covers debugging services and endpoints. None of these chunks explain the concept of dynamic port allocation, how Kubernetes assigns ports automatically, or why ports might differ between deployments. The chunks are about related service/port topics but completely miss the specific issue the user is asking about.",
      "total_score": 0.6,
      "latency_ms": 27.4,
      "grading_latency_ms": 5119.315147399902
    },
    {
      "question_id": "q_001_q2",
      "question": "can't access my microservice because its port is randomly assigned each time",
      "expected_answer": "What is the Kubernetes approach to dynamic port allocation?",
      "target_doc_id": "concepts_cluster-administration_networking",
      "needle_found": false,
      "rank": null,
      "hit_at_1": false,
      "hit_at_5": false,
      "llm_grade": 4,
      "llm_reasoning": "The user's question is about accessing a microservice with randomly assigned ports. The expected answer asks about 'the Kubernetes approach to dynamic port allocation.' The chunks contain information about Services and port assignments but don't directly address the core solution to the user's problem. Chunk 4 explains that Services solve the problem of changing Pod IPs by providing a stable abstraction with a fixed ClusterIP, which is the key Kubernetes approach to dynamic port allocation. However, this connection is not explicit - the chunks discuss Services solving the IP change problem when pods die, but don't clearly frame this as the solution to 'randomly assigned ports.' Chunk 5 mentions NodePort allocation but focuses on external access rather than the internal service discovery problem. The chunks contain relevant concepts (Services providing stable endpoints despite changing pod ports/IPs) but don't clearly present this as THE Kubernetes approach to dynamic port allocation. A user might piece together the answer, but key explanatory details about why Services are the solution to dynamic ports are missing or buried in broader context about networking.",
      "total_score": 2.4,
      "latency_ms": 34.0,
      "grading_latency_ms": 7964.341163635254
    },
    {
      "question_id": "q_002_q1",
      "question": "how to check if my service account has permission to do something in kubernetes",
      "expected_answer": "What does a SubjectAccessReview object describe?",
      "target_doc_id": "reference_access-authn-authz_webhook",
      "needle_found": false,
      "rank": null,
      "hit_at_1": false,
      "hit_at_5": false,
      "llm_grade": 2,
      "llm_reasoning": "The expected answer asks 'What does a SubjectAccessReview object describe?' - indicating the user needs to learn about SubjectAccessReview, which is Kubernetes' mechanism for checking permissions programmatically. However, none of the retrieved chunks mention SubjectAccessReview at all. Chunk 1 discusses granting RBAC permissions to service accounts but doesn't explain how to check existing permissions. Chunks 2-5 cover related RBAC topics like security contexts, privilege escalation risks, and service account configuration, but none address the actual question of how to programmatically check if a service account has permission to perform a specific action. The chunks explain how to grant permissions but not how to verify or check them, which is what the user is asking. Without information about SubjectAccessReview (or alternatives like 'kubectl auth can-i'), the user cannot solve their problem.",
      "total_score": 1.2,
      "latency_ms": 40.4,
      "grading_latency_ms": 5866.978168487549
    }
  ]
}